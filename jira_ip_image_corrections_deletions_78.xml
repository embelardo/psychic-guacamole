<!--
RSS generated by JIRA (7.7.0#77001-sha1:3be31511dfd860a9aedae108fbd5f079b4968c6a) at Tue Jun 11 07:33:54 EDT 2019

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://jira.intelerad.com/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>Image Corrections/Deletions (JIRA)</title>
        <link>https://jira.intelerad.com/issues/?filter=18427</link>
        <description>An XML representation of a search request</description>
                <language>en-us</language>
                        <issue start="0" end="78" total="78"/>
                <build-info>
            <version>7.7.0</version>
            <build-number>77001</build-number>
            <build-date>11-01-2018</build-date>
        </build-info>

<item>
            <title>[IP-104297] Create skeleton for command-line tool for PHI Anonymization application</title>
                <link>https://jira.intelerad.com/browse/IP-104297</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;h4&gt;&lt;a name=&quot;AcceptanceCriteria%3A&quot;&gt;&lt;/a&gt;Acceptance Criteria:&lt;/h4&gt;
&lt;p&gt;&lt;em&gt;Functional &amp;amp; Non-Functional requirements&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;A skeleton command-line tool exists to call the PHI Anonymization Hessian services&lt;/li&gt;
	&lt;li&gt;This will either
	&lt;ul&gt;
		&lt;li&gt;Be part of the PHI Anonymization&lt;/li&gt;
		&lt;li&gt;Be within a separate project&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;The command tool will successfully invoke a stub Hessian method&lt;/li&gt;
&lt;/ul&gt;


&lt;h4&gt;&lt;a name=&quot;TechnicalDetails&quot;&gt;&lt;/a&gt;Technical Details&lt;/h4&gt;
&lt;ul&gt;
	&lt;li&gt;managePhiAnonymizer&lt;/li&gt;
	&lt;li&gt;Part of the PhiAnonymizer RPM&lt;/li&gt;
	&lt;li&gt;Will call the ping() method of the PhiAnonymizerQueryService&lt;/li&gt;
	&lt;li&gt;Usage:&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;managePhiAnonymizer  --help

managePhiAnonymizer &amp;lt;options&amp;gt;

The options are:
 --help (-h)
	Prints this message and exit. If an actor description is provided, it will also print
	the actor parameters
 --verbose (-v)
	Turn on the script&apos;s verbose mode
 --log &amp;lt;string&amp;gt; (optional)
	Specifies the log file
 --user (-u) &amp;lt;string&amp;gt; (required)
	Who is invoking this tool, aka you...
 --study (-s) &amp;lt;string&amp;gt; (optional)
	Study instance UID
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
            <key id="154397">IP-104297</key>
            <summary>Create skeleton for command-line tool for PHI Anonymization application</summary>
                <type id="7" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13914&amp;avatarType=issuetype">Story</type>
                                            <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="ldegruchy">Luke de Gruchy</assignee>
                                    <reporter username="ldegruchy">Luke de Gruchy</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 May 2019 14:21:01 -0400</created>
                <updated>Mon, 3 Jun 2019 14:31:48 -0400</updated>
                            <resolved>Thu, 30 May 2019 10:44:24 -0400</resolved>
                                    <version>4-19-1</version>
                                    <fixVersion>4-19-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                    <timeoriginalestimate seconds="0">0 minutes</timeoriginalestimate>
                            <timeestimate seconds="0">0 minutes</timeestimate>
                            <timespent seconds="120600">4 days, 1 hour, 30 minutes</timespent>
                                <comments>
                            <comment id="528838" author="jan" created="Wed, 22 May 2019 14:30:02 -0400"  >&lt;p&gt;FYI, I think manageLds is good example of the goodies that come with the framework (plus I took the time to make the help text look good.. wink wink nudge nudge)&lt;/p&gt;</comment>
                            <comment id="528922" author="jan" created="Wed, 22 May 2019 17:23:45 -0400"  >&lt;p&gt;Also, with regards to the description :&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This will either&lt;br/&gt;
Be part of the PHI Anonymization&lt;br/&gt;
Be within a separate project&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;From what I understand, it makes sense to use the ToolDescription &quot;framework&quot; to talk to hessian applications, and probably should live and distributed with the orchestrator (think manageLds). Obviously, all this can be discussed and we will do what makes sense.&lt;/p&gt;</comment>
                            <comment id="529530" author="luke.degruchy" created="Tue, 28 May 2019 08:30:37 -0400"  >&lt;p&gt;According to Peter, the latest attempt to integrate the command line app into the PHI app is in the following evolve branch:&lt;/p&gt;

&lt;p&gt;PACS-4-18-2-pzhan-phi-commandLineTool.&lt;/p&gt;</comment>
                            <comment id="529805" author="mtavallaei" created="Wed, 29 May 2019 17:22:04 -0400"  >&lt;p&gt;QA is completed. The script works well.&lt;br/&gt;
Please note that you need to add the following keys to the pacsCore.cfg file and distribute:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;HessianServers&amp;#93;&lt;/span&gt;&lt;br/&gt;
phiAnonymizerServicePort = 5139&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;HessianClients&amp;#93;&lt;/span&gt;&lt;br/&gt;
phiAnonymizerQueryServicePort = &amp;lt;HessianServers:phiAnonymizerServicePort&amp;gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;You can find more details here: &lt;a href=&quot;https://docs.google.com/document/d/1mUKSZ3IuhYnktZ8pGRDLV2Bcu2-rw_E2mWVreVlW9No/edit?usp=sharing&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://docs.google.com/document/d/1mUKSZ3IuhYnktZ8pGRDLV2Bcu2-rw_E2mWVreVlW9No/edit?usp=sharing&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="529844" author="robot-bc-rw" created="Thu, 30 May 2019 10:42:58 -0400"  >&lt;p&gt;Released by ldegruchy to master at 2019-05-30 10:42:55 (push 72998):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-18-2-A28)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/bf0370b33db3&quot; target=&quot;_blank&quot;&gt;intelepacs:bf0370b33db3&lt;/a&gt;  pzhan       trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-104297&quot; title=&quot;Create skeleton for command-line tool for PHI Anonymization application&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-104297&quot;&gt;&lt;del&gt;IP-104297&lt;/del&gt;&lt;/a&gt; fix: managePhiAnonymizer command-line tool for PhiAnonymizer.&lt;/p&gt;</comment>
                            <comment id="529846" author="luke.degruchy" created="Thu, 30 May 2019 10:44:24 -0400"  >&lt;p&gt;Changes committed to master.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Blocks</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="154014">IP-104203</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="52378" name="PhiAnonymizer-4.18.2.P000-ims99.noarch.rpm" size="848747" author="ldegruchy" created="Wed, 29 May 2019 14:05:51 -0400"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_13901" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Code Committed</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14502"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;h4&gt;&lt;a name=&quot;RPMVersion&quot;&gt;&lt;/a&gt;RPM Version&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ISPClient%3A%3Cclientcode%3E&quot;&gt;&lt;/a&gt;ISP - Client : &lt;a href=&quot;https://inteleradprod.service-now.com/nav_to.do?uri=textsearch.do?sysparm_search=xxxx&quot; target=&quot;_blank&quot;&gt;xxxx&lt;/a&gt; - &amp;lt;client code&amp;gt;&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ClinicalImpact%3A&quot;&gt;&lt;/a&gt;Clinical Impact:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce%3A&quot;&gt;&lt;/a&gt;Minimal steps to reproduce:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour%3A&quot;&gt;&lt;/a&gt;Expected behaviour:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F%3A&quot;&gt;&lt;/a&gt;What happened instead?:&lt;/h4&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10600" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>IP-104180</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_14002" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Key Roles Affected</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14606"><![CDATA[All]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_14014" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>PPS Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>*Is it a mis-click ?* &lt;br/&gt;
Yes [] No [] Not Determined []&lt;br/&gt;
&lt;br/&gt;
*If yes(e.g. client selected the wrong option, the case is a simple client request, etc...): stop here, de-escalate the Case in Service Now and record why here*:&lt;br/&gt;
&lt;br/&gt;
----&lt;br/&gt;
&lt;br/&gt;
*Has this issue led to the death of the patient?*&lt;br/&gt;
Yes [] No [] Not Determined []&lt;br/&gt;
&lt;br/&gt;
*Could this issue lead to the death of the patient?*&lt;br/&gt;
Yes [] No [] Not Determined []&lt;br/&gt;
&lt;br/&gt;
*Has this issue led to a health condition of the patient/people or the deterioration of the patient&amp;#39;s health?*&lt;br/&gt;
Yes [] No [] Not Determined []&lt;br/&gt;
&lt;br/&gt;
*Could this issue lead to a health condition of the patient/people or the deterioration of the patient&amp;#39;s health?*&lt;br/&gt;
Yes [] No [] Not Determined []&lt;br/&gt;
&lt;br/&gt;
*Could the security of the product be affected?*&lt;br/&gt;
Yes [] No [] Not Determined []&lt;br/&gt;
&lt;br/&gt;
*Is the issue a serious public health threat?*&lt;br/&gt;
Yes [] No [] Not Determined []&lt;br/&gt;
&lt;br/&gt;
*If it&amp;#39;s only &amp;quot;NO&amp;#39;s&amp;quot; =&amp;gt; describe your rationale here:*&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
*If any question is answered &amp;quot;Not Determined&amp;quot;, have the Committee involved to come to a yes or no conclusion and document it.*&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
&lt;br/&gt;
*If there is any &amp;quot;Yes&amp;quot;, answer the following question:* &lt;br/&gt;
&lt;br/&gt;
----&lt;br/&gt;
&lt;br/&gt;
*Is the issue caused by our Software?*&lt;br/&gt;
Yes [] No [] Not Determined []&lt;br/&gt;
&lt;br/&gt;
*If no, stop here.* &lt;br/&gt;
&lt;br/&gt;
----&lt;br/&gt;
&lt;br/&gt;
*If yes, was the software used as intended by the client?* &lt;br/&gt;
Yes [] No [] Not Determined []&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
*If no, stop here, provide a description of the mis-use:* &lt;br/&gt;
&lt;br/&gt;
*If any &#8220;yes&#8221; is checked above = PPS REPORTABLE:*&lt;br/&gt;
* Support manager to call a Committee meeting unless found by R&amp;amp;D.&lt;br/&gt;
* Create a copy of the [F-048 template|&lt;a href=&quot;https://docs.google.com/document/d/1oyee6wGbPNpvfaFoZGsv3ezUkbOU_Civy_Z5D0VA74g/edit&quot;&gt;https://docs.google.com/document/d/1oyee6wGbPNpvfaFoZGsv3ezUkbOU_Civy_Z5D0VA74g/edit&lt;/a&gt;] and complete.&lt;br/&gt;
* Create sub-tasks within this issue to track progress.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_14001" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Probability of Reoccurrance</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14603"><![CDATA[Medium]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14654"><![CDATA[PhiAnonymizer]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzzf4s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12102" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Release Notes</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14407"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13815" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Risk</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14445"><![CDATA[Standard Change]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13501" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Scrum Team</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14112"><![CDATA[Backend Raptors]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="2076">Raptors 2019 - S10</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:float">
                        <customfieldname>Story Points</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-104196] DMS: request processing blocked by pathological query</title>
                <link>https://jira.intelerad.com/browse/IP-104196</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;h4&gt;&lt;a name=&quot;RPMVersion&quot;&gt;&lt;/a&gt;RPM Version&lt;/h4&gt;
&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;admin@raspawemdb1&amp;#93;&lt;/span&gt; &lt;/p&gt;
{/var/log/PACS/DicomMasterService}
&lt;p&gt; rpm -qa | grep -i dicommaster&lt;br/&gt;
DicomMasterService-4.16.1.P312-ims01.noarch&lt;br/&gt;
Database-DicomMaster-4.16.1.P312-ims01.noarch&lt;br/&gt;
DicomMasterService-Config-4.16.1.P312-ims01.noarch&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;ISPClient%3ACS0145075RASP&quot;&gt;&lt;/a&gt;ISP - Client : CS0145075 - RASP&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ClinicalImpact%3A&quot;&gt;&lt;/a&gt;Clinical Impact:&lt;/h4&gt;
&lt;p&gt;Code blue at RASP&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce%3A&quot;&gt;&lt;/a&gt;Minimal steps to reproduce:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour%3A&quot;&gt;&lt;/a&gt;Expected behaviour:&lt;/h4&gt;
&lt;p&gt;query to be executed in a reasonable time.&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F%3A&quot;&gt;&lt;/a&gt;What happened instead?:&lt;/h4&gt;
&lt;p&gt;This query caused PostgreSQL to overload the I/O at RASP.&lt;br/&gt;
by generating a high amount of data into the Postgresql temp files.&lt;/p&gt;</description>
            <key id="153967">IP-104196</key>
            <summary>DMS: request processing blocked by pathological query</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                            <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="bdasilva">Bruno Da Silva</assignee>
                                    <reporter username="bdasilva">Bruno Da Silva</reporter>
                        <labels>
                            <label>CODE_BLUE_RC</label>
                            <label>KB1190</label>
                    </labels>
                <created>Mon, 6 May 2019 15:24:17 -0400</created>
                <updated>Thu, 6 Jun 2019 14:14:43 -0400</updated>
                            <resolved>Tue, 21 May 2019 08:34:28 -0400</resolved>
                                    <version>4-14-1</version>
                    <version>4-16-1</version>
                                    <fixVersion>4-14-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                    <timeoriginalestimate seconds="0">0 minutes</timeoriginalestimate>
                            <timeestimate seconds="7200">2 hours</timeestimate>
                            <timespent seconds="250200">1 week, 3 days, 5 hours, 30 minutes</timespent>
                                <comments>
                            <comment id="526688" author="bdasilva" created="Mon, 6 May 2019 15:32:37 -0400"  >&lt;p&gt;The original query needs a high amount of memory and was taken too long to execute at RASP ( ~ 11 minutes ).&lt;br/&gt;
So DMS was constantly getting restarted and the query was creating a high amount of data into the tempory files system ( ~400GB/h ) on Postgres. so it made all MDB1 to melt.&lt;/p&gt;

&lt;p&gt;I provided a new version of the query that has a CTE before the join so it makes the query to be executed in ~2s at MDB1 and 5s at MDB2. MDB1 has a faster execution due to the customization of work_mem that got increased to 128MB from 4MB.&lt;/p&gt;</comment>
                            <comment id="527005" author="bdasilva" created="Wed, 8 May 2019 10:31:59 -0400"  >&lt;p&gt;New evidence: explain of a query on rasp mdb2 with a reduced number of studies.&lt;br/&gt;
so it goes a bit over the 4MB default work_mem.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;(cmdline@raspawemdb1) [globaldicom] &amp;gt; explain ( analyze, buffers )SELECT r.request_id,owner_pacs_id,owner_server_id,owner_app_id,scoped_seq_num,request_timestamp_as_epoch,r.target,type,requester_app_id,requester_server_id,status,COALESCE(num_executions,0) 
as num_executions, array_agg(a.attr_id order by a.attr_id) attr_ids, array_agg(a.value order by a.attr_id) attvalues  FROM requests r  LEFT OUTER JOIN request_attrs a USING(request_id)  
WHERE ( r.status = &apos;PENDING&apos; OR r.status &amp;lt;&amp;gt; &apos;PENDING&apos; )  AND target = ANY ( ARRAY[&apos;2.25.70979651869268635392983113873997187447&apos;, &apos;2.25.202973438196673271781698759096192781730&apos;, &apos;2.25.245218126112063527195048982063928033008&apos;, &apos;2.25.153873976349002842206331192784959895139&apos;, &apos;2.25.231200655670211589132421961448941906368&apos;, &apos;2.25.220834392253048535702911180865176104154&apos;, &apos;2.25.116087238989466129525975767594186820909&apos;, &apos;2.25.285766065297508132554442161793340547964&apos;, &apos;2.25.16325073350043762886794058246418625640&apos;, &apos;2.25.161036639634028993065991183363464648956&apos;, &apos;2.25.160128914055441572779327105557712492797&apos;, &apos;2.25.239620863221159859064648394995051449641&apos;, &apos;2.25.212297185716987082496575113426305831660&apos;, &apos;2.25.177627842767714876284891238909228220590&apos;, &apos;2.25.186325757190591591182408797277181095745&apos;, &apos;2.25.160220156522875703873585341777758905587&apos;, &apos;2.25.23782694806982230698495965125838669417&apos;, &apos;2.25.35991716367392179423884259522473469160&apos;, &apos;2.25.195062323293847252119852625399333923135&apos;, &apos;2.25.36787704809317555943377990124234228532&apos;, &apos;2.25.215841647679880432190276886786092054575&apos;, &apos;2.25.178108554536903647701084719690482351292&apos;, &apos;2.25.161503095710013534726878709157741726277&apos;, &apos;2.25.119783022037534151326970079573938637450&apos;, &apos;2.25.312365874096507830854419166429671187513&apos;, &apos;2.25.27594050524124252199322068671879384115&apos;, &apos;2.25.111718869531849756407180269405302703106&apos;, &apos;2.25.60401827201427926658064425179524001612&apos;, &apos;2.25.174786060796366595871070904626079218876&apos;, &apos;2.25.35831303850491598072419350949053537766&apos;, &apos;2.25.176650803961246041478466902843783500736&apos;, &apos;2.25.268241282843192905323919804446368978121&apos;, &apos;2.25.90727279083190858716505490303949602489&apos;, &apos;2.25.247438986892187518244975018836072840935&apos;,
 &apos;2.25.294023261466846702266215288467847324523&apos;, &apos;2.25.15417593493080963012020849157070513735&apos;, &apos;2.25.123387583231317988885189810142548870272&apos;, &apos;2.25.289449390387237151725951194679108934561&apos;, &apos;2.25.196186865715947795640028348665018293059&apos;, &apos;2.25.276227433973813736577964723866742285189&apos;, &apos;2.25.295367881864195166604087231968369671552&apos;, &apos;2.25.220636624077749901243267367674749546258&apos;, &apos;2.25.199901240106375187117182173903020285714&apos;, &apos;2.25.151645176216564051693673190685914921253&apos;, &apos;2.25.18043622326049733358272355480745234472&apos;, &apos;2.25.302239623811836124231194987358980981270&apos;, &apos;2.25.299487283205211909191022123300339954078&apos;, &apos;2.25.81624952436221315262113703203968133317&apos;, &apos;2.25.285800279299054502881886578249627948133&apos;, &apos;2.25.194071884045521080042127137418462985502&apos;, &apos;2.25.333646179194713399505617400466775553362&apos;, &apos;2.25.138766644495977958490402414639751704649&apos;, &apos;2.25.191255184489112346121990426998792444449&apos;, &apos;2.25.39631740086716184231915214140273969055&apos;, &apos;2.25.282256429222521043516467916141024684756&apos;, &apos;2.25.247801980353691997929019553079765997526&apos;, &apos;2.25.270709443807930409254356583885690829952&apos;, &apos;2.25.90191164763763939304601447453933197691&apos;, &apos;2.25.238868968166067407823436323946323161776&apos;, &apos;2.25.84788558576878115303561331056257043775&apos;, &apos;2.25.238677127919764660102257126234228822361&apos;, &apos;2.25.60750433353986332885416513400200617622&apos;, &apos;2.25.44762735598383726794305243631842700263&apos;, &apos;2.25.294400124379171118958351535025345510005&apos;, &apos;2.25.272781205356791823414399677345435500735&apos;, &apos;2.25.338526702359365310446192631371713777262&apos;, &apos;2.25.52867517998066978293783588429090143457&apos;, &apos;2.25.320882406219357108776331076715016217770&apos;, &apos;2.25.315199540987607456709150490636310589466&apos;, &apos;2.25.90290327392196180745288999522564748900&apos;, &apos;2.25.64797033046857422951417558191176917876&apos;, &apos;2.25.264745520867113421157920495744677542893&apos;, &apos;2.25.29182625284579897484220930452165358740&apos;, &apos;2.25.17775234013010333504696708125449342128&apos;, 
&apos;2.25.51963148775316324947976832703168441390&apos;, &apos;2.25.174745221128076126575482117409189092458&apos;, &apos;2.25.164954529613002869778791937374746819636&apos;, &apos;2.25.168511867391766828400637992337964498820&apos;,
&apos;2.25.18408238587280881811527547628357014016&apos;, &apos;2.25.99326551838549290381955218139566279675&apos;, &apos;2.25.147532208049521924480991907039683851140&apos;, &apos;2.25.113361669650219216856891600527356163423&apos;, &apos;2.25.200164715216014612284533469086793750024&apos;, &apos;2.25.4570120126659723280009735912488267043&apos;, &apos;2.25.224033466519468641638689114307785695745&apos;, &apos;2.25.316019264299179281210383380372692102862&apos;, &apos;2.25.33814587671557861207340490980688910265&apos;, &apos;2.25.184923387465592003632820150167025808012&apos;, &apos;2.25.80134700423246339390522954335531713072&apos;, &apos;2.25.50818124605923982958183654398923145442&apos;, &apos;2.25.288384034029323868401284572679627629996&apos;, &apos;2.25.187389428995281774985358119516831942526&apos;, &apos;2.25.286497531433001237621541440870322274023&apos;, &apos;2.25.13313815226780681033535574951249536998&apos;, &apos;2.25.134524811267372094913742750749589151414&apos;, &apos;2.25.110119721710804597181734476810084460775&apos;, &apos;2.25.244764200513361281108650475704604493227&apos;, &apos;2.25.268837287185314024900439478842614347072&apos;, &apos;2.25.86861247906619965919897579625066845998&apos;, &apos;2.25.114312361115940171891965241572716254215&apos;] ) GROUP BY r.request_id,
owner_pacs_id,owner_server_id,owner_app_id,scoped_seq_num,request_timestamp_as_epoch,r.target,type,requester_app_id,requester_server_id,status,COALESCE(num_executions,0);
                                                                                                                                                                                                                   
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 GroupAggregate  (cost=8933791.77..8943559.82 rows=46826 width=132) (actual time=292.337..328.529 rows=3007 loops=1)
   Group Key: r.request_id, r.owner_pacs_id, r.owner_server_id, r.owner_app_id, r.scoped_seq_num, r.request_timestamp_as_epoch, r.target, r.type, r.requester_app_id, r.requester_server_id, r.status, (COALESCE(r.
   Buffers: shared hit=195172 read=5911 written=175
   -&amp;gt;  Sort  (cost=8933791.77..8934396.14 rows=241751 width=132) (actual time=292.272..299.912 rows=16110 loops=1)
         Sort Key: r.request_id, r.owner_pacs_id, r.owner_server_id, r.owner_app_id, r.scoped_seq_num, r.request_timestamp_as_epoch, r.target, r.type, r.requester_app_id, r.requester_server_id, r.status, (COALES
         Sort Method: quicksort  Memory: 4410kB
         Buffers: shared hit=195172 read=5911 written=175
         -&amp;gt;  Nested Loop Left Join  (cost=2832.58..8912175.40 rows=241751 width=132) (actual time=3.088..261.699 rows=16110 loops=1)
               Buffers: shared hit=195160 read=5911 written=175
               -&amp;gt;  Bitmap Heap Scan on requests r  (cost=2832.46..184396.60 rows=46826 width=112) (actual time=2.815..22.329 rows=3007 loops=1)
                     Recheck Cond: ((target)::text = ANY (&apos;{2.25.70979651869268635392983113873997187447,2.25.202973438196673271781698759096192781730,2.25.245218126112063527195048982063928033008,2.25.153873976349
                     Filter: (((status)::text = &apos;PENDING&apos;::text) OR ((status)::text &amp;lt;&amp;gt; &apos;PENDING&apos;::text))
                     Heap Blocks: exact=1930
                     Buffers: shared hit=283 read=2155 written=78
                     -&amp;gt;  Bitmap Index Scan on requests_target_full_idx  (cost=0.00..2820.75 rows=46826 width=0) (actual time=2.492..2.492 rows=3007 loops=1)
                           Index Cond: ((target)::text = ANY (&apos;{2.25.70979651869268635392983113873997187447,2.25.202973438196673271781698759096192781730,2.25.245218126112063527195048982063928033008,2.25.15387397
                           Buffers: shared hit=283 read=225 written=16
               -&amp;gt;  Append  (cost=0.12..183.25 rows=314 width=28) (actual time=0.061..0.072 rows=5 loops=3007)
                     Buffers: shared hit=194877 read=3756 written=97
                     -&amp;gt;  Index Scan using request_attrs_request_id_idx on request_attrs a  (cost=0.12..0.14 rows=1 width=44) (actual time=0.001..0.001 rows=0 loops=3007)
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=3007
                     -&amp;gt;  Index Scan using request_attrs_pk on request_attrs_partition_221581157 a_1  (cost=0.58..15.97 rows=166 width=28) (actual time=0.002..0.002 rows=0 loops=3007)
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=12028
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx on request_attrs_partition_226911515 a_2  (cost=0.44..8.35 rows=7 width=28) (actual time=0.002..0.002 rows=0 loops=3007)
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx1 on request_attrs_partition_232578730 a_3  (cost=0.44..8.35 rows=7 width=28) (actual time=0.002..0.002 rows=0 loops=3007)
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx2 on request_attrs_partition_237994310 a_4  (cost=0.44..8.35 rows=7 width=28) (actual time=0.002..0.002 rows=0 loops=3007)
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx3 on request_attrs_partition_244085484 a_5  (cost=0.44..8.35 rows=7 width=29) (actual time=0.002..0.002 rows=0 loops=3007)
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx4 on request_attrs_partition_249524880 a_6  (cost=0.44..8.35 rows=7 width=29) (actual time=0.002..0.002 rows=0 loops=3007)
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx5 on request_attrs_partition_254557713 a_7  (cost=0.44..8.35 rows=7 width=28) (actual time=0.002..0.002 rows=0 loops=3007)
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx6 on request_attrs_partition_259874198 a_8  (cost=0.44..8.35 rows=7 width=29) (actual time=0.002..0.002 rows=0 loops=3007)
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx7 on request_attrs_partition_265093373 a_9  (cost=0.44..8.35 rows=7 width=29) (actual time=0.002..0.002 rows=0 loops=3007)
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx8 on request_attrs_partition_270377661 a_10  (cost=0.44..8.35 rows=7 width=29) (actual time=0.002..0.002 rows=0 loops=3007)
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx9 on request_attrs_partition_275891132 a_11  (cost=0.44..8.35 rows=7 width=29) (actual time=0.002..0.002 rows=0 loops=3007)
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx10 on request_attrs_partition_281501436 a_12  (cost=0.44..8.37 rows=8 width=29) (actual time=0.002..0.002 rows=0 loops=3007
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx11 on request_attrs_partition_286963400 a_13  (cost=0.44..8.37 rows=8 width=29) (actual time=0.002..0.002 rows=0 loops=3007
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx12 on request_attrs_partition_292485350 a_14  (cost=0.44..8.37 rows=8 width=29) (actual time=0.002..0.002 rows=0 loops=3007
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx13 on request_attrs_partition_297959611 a_15  (cost=0.44..8.35 rows=7 width=29) (actual time=0.002..0.002 rows=0 loops=3007
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx14 on request_attrs_partition_303614864 a_16  (cost=0.44..8.35 rows=7 width=29) (actual time=0.002..0.002 rows=0 loops=3007
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx15 on request_attrs_partition_309246323 a_17  (cost=0.44..8.37 rows=8 width=29) (actual time=0.002..0.002 rows=0 loops=3007
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx16 on request_attrs_partition_314671705 a_18  (cost=0.44..8.37 rows=8 width=29) (actual time=0.002..0.002 rows=0 loops=3007
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx17 on request_attrs_partition_320316735 a_19  (cost=0.44..8.37 rows=8 width=29) (actual time=0.002..0.002 rows=0 loops=3007
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx18 on request_attrs_partition_326054187 a_20  (cost=0.44..8.37 rows=8 width=29) (actual time=0.008..0.011 rows=5 loops=3007
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=8563 read=3235 written=95
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx19 on request_attrs_partition_current a_21  (cost=0.44..8.39 rows=7 width=29) (actual time=0.003..0.004 rows=1 loops=3007)
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=8901 read=521 written=2
 Planning time: 10.100 ms
 Execution time: 330.806 ms
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;news on new evidence: by forcing the work_mem back to 4MB. using &lt;br/&gt;
 set local work_mem = &apos;4MB&apos;; the query used the disk!.&lt;br/&gt;
 Sort Method: external sort  Disk: 2312kB&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;(cmdline@raspawemdb1) [globaldicom] *&amp;gt; explain ( analyze, buffers )SELECT r.request_id,owner_pacs_id,owner_server_id,owner_app_id,scoped_seq_num,request_timestamp_as_epoch,r.target,type,requester_app_id,requester_server_id,status,COALESCE(num_executions,0) 
as num_executions, array_agg(a.attr_id order by a.attr_id) attr_ids, array_agg(a.value order by a.attr_id) attvalues  FROM requests r  LEFT OUTER JOIN request_attrs a USING(request_id)  
WHERE ( r.status = &apos;PENDING&apos; OR r.status &amp;lt;&amp;gt; &apos;PENDING&apos; )  AND target = ANY ( ARRAY[&apos;2.25.70979651869268635392983113873997187447&apos;, &apos;2.25.202973438196673271781698759096192781730&apos;, &apos;2.25.245218126112063527195048982063928033008&apos;, &apos;2.25.153873976349002842206331192784959895139&apos;, &apos;2.25.231200655670211589132421961448941906368&apos;, &apos;2.25.220834392253048535702911180865176104154&apos;, &apos;2.25.116087238989466129525975767594186820909&apos;, &apos;2.25.285766065297508132554442161793340547964&apos;, &apos;2.25.16325073350043762886794058246418625640&apos;, &apos;2.25.161036639634028993065991183363464648956&apos;, &apos;2.25.160128914055441572779327105557712492797&apos;, &apos;2.25.239620863221159859064648394995051449641&apos;, &apos;2.25.212297185716987082496575113426305831660&apos;, &apos;2.25.177627842767714876284891238909228220590&apos;, &apos;2.25.186325757190591591182408797277181095745&apos;, &apos;2.25.160220156522875703873585341777758905587&apos;, &apos;2.25.23782694806982230698495965125838669417&apos;, &apos;2.25.35991716367392179423884259522473469160&apos;, &apos;2.25.195062323293847252119852625399333923135&apos;, &apos;2.25.36787704809317555943377990124234228532&apos;, &apos;2.25.215841647679880432190276886786092054575&apos;, &apos;2.25.178108554536903647701084719690482351292&apos;, &apos;2.25.161503095710013534726878709157741726277&apos;, &apos;2.25.119783022037534151326970079573938637450&apos;, &apos;2.25.312365874096507830854419166429671187513&apos;, &apos;2.25.27594050524124252199322068671879384115&apos;, &apos;2.25.111718869531849756407180269405302703106&apos;, &apos;2.25.60401827201427926658064425179524001612&apos;, &apos;2.25.174786060796366595871070904626079218876&apos;, &apos;2.25.35831303850491598072419350949053537766&apos;, &apos;2.25.176650803961246041478466902843783500736&apos;, &apos;2.25.268241282843192905323919804446368978121&apos;, &apos;2.25.90727279083190858716505490303949602489&apos;, &apos;2.25.247438986892187518244975018836072840935&apos;,
 &apos;2.25.294023261466846702266215288467847324523&apos;, &apos;2.25.15417593493080963012020849157070513735&apos;, &apos;2.25.123387583231317988885189810142548870272&apos;, &apos;2.25.289449390387237151725951194679108934561&apos;, &apos;2.25.196186865715947795640028348665018293059&apos;, &apos;2.25.276227433973813736577964723866742285189&apos;, &apos;2.25.295367881864195166604087231968369671552&apos;, &apos;2.25.220636624077749901243267367674749546258&apos;, &apos;2.25.199901240106375187117182173903020285714&apos;, &apos;2.25.151645176216564051693673190685914921253&apos;, &apos;2.25.18043622326049733358272355480745234472&apos;, &apos;2.25.302239623811836124231194987358980981270&apos;, &apos;2.25.299487283205211909191022123300339954078&apos;, &apos;2.25.81624952436221315262113703203968133317&apos;, &apos;2.25.285800279299054502881886578249627948133&apos;, &apos;2.25.194071884045521080042127137418462985502&apos;, &apos;2.25.333646179194713399505617400466775553362&apos;, &apos;2.25.138766644495977958490402414639751704649&apos;, &apos;2.25.191255184489112346121990426998792444449&apos;, &apos;2.25.39631740086716184231915214140273969055&apos;, &apos;2.25.282256429222521043516467916141024684756&apos;, &apos;2.25.247801980353691997929019553079765997526&apos;, &apos;2.25.270709443807930409254356583885690829952&apos;, &apos;2.25.90191164763763939304601447453933197691&apos;, &apos;2.25.238868968166067407823436323946323161776&apos;, &apos;2.25.84788558576878115303561331056257043775&apos;, &apos;2.25.238677127919764660102257126234228822361&apos;, &apos;2.25.60750433353986332885416513400200617622&apos;, &apos;2.25.44762735598383726794305243631842700263&apos;, &apos;2.25.294400124379171118958351535025345510005&apos;, &apos;2.25.272781205356791823414399677345435500735&apos;, &apos;2.25.338526702359365310446192631371713777262&apos;, &apos;2.25.52867517998066978293783588429090143457&apos;, &apos;2.25.320882406219357108776331076715016217770&apos;, &apos;2.25.315199540987607456709150490636310589466&apos;, &apos;2.25.90290327392196180745288999522564748900&apos;, &apos;2.25.64797033046857422951417558191176917876&apos;, &apos;2.25.264745520867113421157920495744677542893&apos;, &apos;2.25.29182625284579897484220930452165358740&apos;, &apos;2.25.17775234013010333504696708125449342128&apos;, 
&apos;2.25.51963148775316324947976832703168441390&apos;, &apos;2.25.174745221128076126575482117409189092458&apos;, &apos;2.25.164954529613002869778791937374746819636&apos;, &apos;2.25.168511867391766828400637992337964498820&apos;,
&apos;2.25.18408238587280881811527547628357014016&apos;, &apos;2.25.99326551838549290381955218139566279675&apos;, &apos;2.25.147532208049521924480991907039683851140&apos;, &apos;2.25.113361669650219216856891600527356163423&apos;, &apos;2.25.200164715216014612284533469086793750024&apos;, &apos;2.25.4570120126659723280009735912488267043&apos;, &apos;2.25.224033466519468641638689114307785695745&apos;, &apos;2.25.316019264299179281210383380372692102862&apos;, &apos;2.25.33814587671557861207340490980688910265&apos;, &apos;2.25.184923387465592003632820150167025808012&apos;, &apos;2.25.80134700423246339390522954335531713072&apos;, &apos;2.25.50818124605923982958183654398923145442&apos;, &apos;2.25.288384034029323868401284572679627629996&apos;, &apos;2.25.187389428995281774985358119516831942526&apos;, &apos;2.25.286497531433001237621541440870322274023&apos;, &apos;2.25.13313815226780681033535574951249536998&apos;, &apos;2.25.134524811267372094913742750749589151414&apos;, &apos;2.25.110119721710804597181734476810084460775&apos;, &apos;2.25.244764200513361281108650475704604493227&apos;, &apos;2.25.268837287185314024900439478842614347072&apos;, &apos;2.25.86861247906619965919897579625066845998&apos;, &apos;2.25.114312361115940171891965241572716254215&apos;] ) GROUP BY r.request_id,
owner_pacs_id,owner_server_id,owner_app_id,scoped_seq_num,request_timestamp_as_epoch,r.target,type,requester_app_id,requester_server_id,status,COALESCE(num_executions,0);
                                                                                                                                                                                                                   
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 GroupAggregate  (cost=8949905.68..8959673.69 rows=46826 width=132) (actual time=304.765..341.717 rows=3007 loops=1)
   Group Key: r.request_id, r.owner_pacs_id, r.owner_server_id, r.owner_app_id, r.scoped_seq_num, r.request_timestamp_as_epoch, r.target, r.type, r.requester_app_id, r.requester_server_id, r.status, (COALESCE(r.
   Buffers: shared hit=195145 read=5926 written=240, temp read=289 written=289
   -&amp;gt;  Sort  (cost=8949905.68..8950510.05 rows=241750 width=132) (actual time=304.708..314.218 rows=16110 loops=1)
         Sort Key: r.request_id, r.owner_pacs_id, r.owner_server_id, r.owner_app_id, r.scoped_seq_num, r.request_timestamp_as_epoch, r.target, r.type, r.requester_app_id, r.requester_server_id, r.status, (COALES
         Sort Method: external sort  Disk: 2312kB
         Buffers: shared hit=195145 read=5926 written=240, temp read=289 written=289
         -&amp;gt;  Nested Loop Left Join  (cost=2832.58..8912175.41 rows=241750 width=132) (actual time=2.477..262.875 rows=16110 loops=1)
               Buffers: shared hit=195145 read=5926 written=240
               -&amp;gt;  Bitmap Heap Scan on requests r  (cost=2832.46..184396.60 rows=46826 width=112) (actual time=2.382..17.611 rows=3007 loops=1)
                     Recheck Cond: ((target)::text = ANY (&apos;{2.25.70979651869268635392983113873997187447,2.25.202973438196673271781698759096192781730,2.25.245218126112063527195048982063928033008,2.25.153873976349
                     Filter: (((status)::text = &apos;PENDING&apos;::text) OR ((status)::text &amp;lt;&amp;gt; &apos;PENDING&apos;::text))
                     Heap Blocks: exact=1930
                     Buffers: shared hit=283 read=2155 written=101
                     -&amp;gt;  Bitmap Index Scan on requests_target_full_idx  (cost=0.00..2820.75 rows=46826 width=0) (actual time=2.078..2.078 rows=3007 loops=1)
                           Index Cond: ((target)::text = ANY (&apos;{2.25.70979651869268635392983113873997187447,2.25.202973438196673271781698759096192781730,2.25.245218126112063527195048982063928033008,2.25.15387397
                           Buffers: shared hit=283 read=225 written=26
               -&amp;gt;  Append  (cost=0.12..183.25 rows=314 width=28) (actual time=0.063..0.074 rows=5 loops=3007)
                     Buffers: shared hit=194862 read=3771 written=139
                     -&amp;gt;  Index Scan using request_attrs_request_id_idx on request_attrs a  (cost=0.12..0.14 rows=1 width=44) (actual time=0.001..0.001 rows=0 loops=3007)
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=3007
                     -&amp;gt;  Index Scan using request_attrs_pk on request_attrs_partition_221581157 a_1  (cost=0.58..15.97 rows=166 width=28) (actual time=0.002..0.002 rows=0 loops=3007)
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=12028
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx on request_attrs_partition_226911515 a_2  (cost=0.44..8.35 rows=7 width=28) (actual time=0.002..0.002 rows=0 loops=3007)
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx1 on request_attrs_partition_232578730 a_3  (cost=0.44..8.35 rows=7 width=28) (actual time=0.002..0.002 rows=0 loops=3007)
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx2 on request_attrs_partition_237994310 a_4  (cost=0.44..8.35 rows=7 width=28) (actual time=0.002..0.002 rows=0 loops=3007)
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx3 on request_attrs_partition_244085484 a_5  (cost=0.44..8.35 rows=7 width=29) (actual time=0.002..0.002 rows=0 loops=3007)
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx4 on request_attrs_partition_249524880 a_6  (cost=0.44..8.35 rows=7 width=29) (actual time=0.002..0.002 rows=0 loops=3007)
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx5 on request_attrs_partition_254557713 a_7  (cost=0.44..8.35 rows=7 width=28) (actual time=0.002..0.002 rows=0 loops=3007)
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx6 on request_attrs_partition_259874198 a_8  (cost=0.44..8.35 rows=7 width=29) (actual time=0.002..0.002 rows=0 loops=3007)
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx7 on request_attrs_partition_265093373 a_9  (cost=0.44..8.35 rows=7 width=29) (actual time=0.002..0.002 rows=0 loops=3007)
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx8 on request_attrs_partition_270377661 a_10  (cost=0.44..8.35 rows=7 width=29) (actual time=0.002..0.002 rows=0 loops=3007)
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx9 on request_attrs_partition_275891132 a_11  (cost=0.44..8.35 rows=7 width=29) (actual time=0.002..0.002 rows=0 loops=3007)
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx10 on request_attrs_partition_281501436 a_12  (cost=0.44..8.37 rows=8 width=29) (actual time=0.002..0.002 rows=0 loops=3007
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx11 on request_attrs_partition_286963400 a_13  (cost=0.44..8.37 rows=8 width=29) (actual time=0.002..0.002 rows=0 loops=3007
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx12 on request_attrs_partition_292485350 a_14  (cost=0.44..8.37 rows=8 width=29) (actual time=0.002..0.002 rows=0 loops=3007
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx13 on request_attrs_partition_297959611 a_15  (cost=0.44..8.35 rows=7 width=29) (actual time=0.002..0.002 rows=0 loops=3007
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx14 on request_attrs_partition_303614864 a_16  (cost=0.44..8.35 rows=7 width=29) (actual time=0.002..0.002 rows=0 loops=3007
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx15 on request_attrs_partition_309246323 a_17  (cost=0.44..8.37 rows=8 width=29) (actual time=0.002..0.002 rows=0 loops=3007
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx16 on request_attrs_partition_314671705 a_18  (cost=0.44..8.37 rows=8 width=29) (actual time=0.002..0.002 rows=0 loops=3007
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx17 on request_attrs_partition_320316735 a_19  (cost=0.44..8.37 rows=8 width=29) (actual time=0.002..0.002 rows=0 loops=3007
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=9021
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx18 on request_attrs_partition_326054187 a_20  (cost=0.44..8.37 rows=8 width=29) (actual time=0.008..0.011 rows=5 loops=3007
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=8563 read=3235 written=110
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx19 on request_attrs_partition_current a_21  (cost=0.44..8.39 rows=7 width=29) (actual time=0.003..0.004 rows=1 loops=3007)
                           Index Cond: (r.request_id = request_id)
                           Buffers: shared hit=8886 read=536 written=29
 Planning time: 3.014 ms
 Execution time: 344.104 ms

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="527017" author="bdasilva" created="Wed, 8 May 2019 11:08:11 -0400"  >&lt;p&gt;Plan for the non optimized query with 1000 studies.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;GroupAggregate  (cost=427285631.18..463993507.94 rows=329176712 width=132)
   Group Key: r.request_id, r.owner_pacs_id, r.owner_server_id, r.owner_app_id, r.scoped_seq_num, r.request_timestamp_as_epoch, r.target, r.type, r.requester_app_id, r.requester_server_id, r.status, (COALESCE(r.
   -&amp;gt;  Sort  (cost=427285631.18..429403646.25 rows=847206029 width=132)
         Sort Key: r.request_id, r.owner_pacs_id, r.owner_server_id, r.owner_app_id, r.scoped_seq_num, r.request_timestamp_as_epoch, r.target, r.type, r.requester_app_id, r.requester_server_id, r.status, (COALES
         -&amp;gt;  Merge Join  (cost=32418711.76..188719640.19 rows=847206029 width=132)
               Merge Cond: (a.request_id = r.request_id)
               -&amp;gt;  Merge Append  (cost=9.94..138976221.86 rows=1694468515 width=28)
                     Sort Key: a.request_id
                     -&amp;gt;  Index Scan using request_attrs_request_id_idx on request_attrs a  (cost=0.12..8.14 rows=1 width=44)
                     -&amp;gt;  Index Scan using request_attrs_pk on request_attrs_partition_221562697 a_1  (cost=0.58..40742841.45 rows=1141876480 width=28)
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx on request_attrs_partition_226912529 a_2  (cost=0.44..888477.21 rows=26770412 width=28)
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx1 on request_attrs_partition_232613849 a_3  (cost=0.44..914118.35 rows=27563442 width=28)
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx2 on request_attrs_partition_238458194 a_4  (cost=0.44..934031.83 rows=28156636 width=28)
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx3 on request_attrs_partition_244124150 a_5  (cost=0.44..898226.23 rows=27005854 width=29)
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx4 on request_attrs_partition_249551379 a_6  (cost=0.44..919128.45 rows=27634086 width=29)
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx5 on request_attrs_partition_254853149 a_7  (cost=0.44..913100.19 rows=27476572 width=28)
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx6 on request_attrs_partition_260281345 a_8  (cost=0.44..927029.18 rows=27924388 width=29)
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx7 on request_attrs_partition_265641364 a_9  (cost=0.44..912042.20 rows=27331688 width=29)
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx8 on request_attrs_partition_270861535 a_10  (cost=0.44..892960.19 rows=26733376 width=29)
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx9 on request_attrs_partition_276335522 a_11  (cost=0.44..937106.88 rows=28077328 width=29)
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx10 on request_attrs_partition_281464835 a_12  (cost=0.44..886038.31 rows=26543250 width=29)
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx11 on request_attrs_partition_286926621 a_13  (cost=0.44..963378.66 rows=28825668 width=29)
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx12 on request_attrs_partition_292448696 a_14  (cost=0.44..968869.55 rows=28965552 width=29)
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx13 on request_attrs_partition_297922775 a_15  (cost=0.44..942884.28 rows=28104108 width=29)
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx14 on request_attrs_partition_303578283 a_16  (cost=0.44..982675.97 rows=29411216 width=29)
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx15 on request_attrs_partition_309209601 a_17  (cost=0.44..976003.87 rows=29275488 width=29)
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx16 on request_attrs_partition_314634834 a_18  (cost=0.44..951689.47 rows=28406226 width=29)
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx17 on request_attrs_partition_320280087 a_19  (cost=0.44..987085.62 rows=29639928 width=29)
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx18 on request_attrs_partition_326017480 a_20  (cost=0.44..996227.74 rows=29794216 width=29)
                     -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx19 on request_attrs_partition_current a_21  (cost=0.44..642461.60 rows=18952600 width=29)
               -&amp;gt;  Materialize  (cost=32388960.08..33211901.86 rows=164588356 width=112)
                     -&amp;gt;  Sort  (cost=32388960.08..32800430.97 rows=164588356 width=112)
                           Sort Key: r.request_id
                           -&amp;gt;  Nested Loop  (cost=9.59..363866.92 rows=164588356 width=112)
                                 -&amp;gt;  HashAggregate  (cost=8.90..10.90 rows=200 width=32)
                                       Group Key: &quot;*VALUES*&quot;.column1
                                       -&amp;gt;  Values Scan on &quot;*VALUES*&quot;  (cost=0.00..7.41 rows=593 width=32)
                                 -&amp;gt;  Index Scan using requests_target_full_idx on requests r  (cost=0.70..1814.80 rows=448 width=112)
                                       Index Cond: ((target)::text = &quot;*VALUES*&quot;.column1)
                                       Filter: (((status)::text = &apos;PENDING&apos;::text) OR ((status)::text &amp;lt;&amp;gt; &apos;PENDING&apos;::text))
(40 rows)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="527259" author="bdasilva" created="Thu, 9 May 2019 12:19:04 -0400"  >&lt;p&gt;Update for dev rpm:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[bdasilva@bruno PACS-4-16-1]$ hg up PACS-4-16-1-P312
517 files updated, 0 files merged, 338 files removed, 0 files unresolved

[bdasilva@bruno PACS-4-16-1]$ hg diff -c  893b39fd1216 &amp;gt; ~/IP-97341.diff
[bdasilva@bruno PACS-4-16-1]$ hg import IP-97341 --no-commit
applying IP-97341

[bdasilva@bruno PACS-4-16-1]$ hg diff -c  b3a9b42eab99 &amp;gt; ~/IP-103384.diff
[bdasilva@bruno PACS-4-16-1]$ hg import ~/IP-103384.diff --no-commit
applying /home/bdasilva/IP-103384.diff

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="527830" author="bdasilva" created="Mon, 13 May 2019 15:09:37 -0400"  >&lt;p&gt;Tests using integration tests:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    testsToRun = [
        &apos;com.intelerad.integrationtesting.imaging.workflow.TestOutOfOrderMultiCorrections&apos;,
        &apos;com.intelerad.integrationtesting.imaging.workflow.TestCorrections&apos;,  
        &apos;com.intelerad.integrationtesting.imaging.workflow.TestDeletions&apos;,
    ]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="527997" author="bdasilva" created="Tue, 14 May 2019 14:31:00 -0400"  >&lt;p&gt;Tests on Rasp using different stat bucket sizes for requests.target:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://docs.google.com/document/d/1z1jK-d-rtRlVc7itOQJaHNLr9yiiIa15HoVz39klkEg/edit&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://docs.google.com/document/d/1z1jK-d-rtRlVc7itOQJaHNLr9yiiIa15HoVz39klkEg/edit&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="528075" author="bdasilva" created="Wed, 15 May 2019 09:28:23 -0400"  >&lt;p&gt;Example of the query running :&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[admin@mst1] {/var/log/PACS/DicomMasterService} grep d1a238b5-fab2-4cd6-94c4-821531715fec *
DMS_DicomRequestsProcessor.log:/*d1a238b5-fab2-4cd6-94c4-821531715fec*/SELECT r.request_id,owner_pacs_id,owner_server_id,owner_app_id,scoped_seq_num,request_timestamp_as_epoch,r.target,type,requester_app_id,requester_server_id,status,COALESCE(num_executions,0) as num_executions, array_agg(a.attr_id order by a.attr_id) attr_ids, array_agg(a.value order by a.attr_id) attvalues  FROM requests r  LEFT OUTER JOIN request_attrs a USING(request_id)  WHERE ( r.status = &apos;PENDING&apos; OR r.status &amp;lt;&amp;gt; &apos;PENDING&apos; )  AND target = ANY ( ARRAY[&apos;2.25.269580598407867088873900042283150341766&apos;] )  GROUP BY r.request_id,owner_pacs_id,owner_server_id,owner_app_id,scoped_seq_num,request_timestamp_as_epoch,r.target,type,requester_app_id,requester_server_id,status,COALESCE(num_executions,0)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Example of DMS changing the stats on target:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2019-05-15 16:26:25.784 DMS mst1.intelerad.com (SQL:GlobalDicom)] Get Column Statistics Gathering Target (on connection: &apos;mst1.intelerad.com:5483&apos;):
SELECT /* 2eb7e4da-64f3-45ac-ad30-9abe2eb73522 */ attstattarget 
FROM pg_attribute 
WHERE attrelid = &apos;globaldicom.requests&apos;::regclass 
AND attname = &apos;target&apos;
[2019-05-15 16:26:25.785 DMS mst1.intelerad.com (TRACE)] Resetting stats target value for requests.target since current target value -1 differs from desired value 1000
[2019-05-15 16:26:25.785 DMS mst1.intelerad.com (SQL:GlobalDicom)] Set Column Statistics Gathering Target (on connection: &apos;mst1.intelerad.com:5483&apos;):
ALTER /* 12626ca5-22bc-4497-bd02-131d3c1cdb15 */ TABLE globaldicom.requests ALTER COLUMN target SET STATISTICS 1000
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="528230" author="bross" created="Thu, 16 May 2019 09:03:30 -0400"  >&lt;p&gt;We found this same issue at AIS, a query had duration of 759 seconds.&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://inteleradprod.service-now.com/nav_to.do?uri=textsearch.do?sysparm_search=CS0146667&quot; target=&quot;_blank&quot;&gt;CS0146667&lt;/a&gt;.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

[2019-05-06 15:17:56.519 MST] 192.168.20.22(37812) {5cd0af9c.5ef6} dicommasterservice LOG:  duration: 759519.510 ms  execute &amp;lt;unnamed&amp;gt;: SELECT r.request_id,owner_pacs_id,owner_server_id,owner_app_id,scoped_seq_num,request_timestamp_as_epoch,r.target,type,requester_app_id,requester_server_id,status,COALESCE(num_executions,0) as num_executions, array_agg(a.attr_id order by a.attr_id) attr_ids, array_agg(a.value order by a.attr_id) attvalues  FROM requests r  LEFT OUTER JOIN request_attrs a USING(request_id)  WHERE ( r.status = &lt;span class=&quot;code-quote&quot;&gt;&apos;PENDING&apos;&lt;/span&gt; OR r.status &amp;lt;&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;PENDING&apos;&lt;/span&gt; )  AND target = ANY ( ARRAY[&lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.255.2242444960172.6082180619110741.20001&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.114202.4.2456408951.3703228473.1977724863.2787633653&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.358.3.772413758.182.1551969974.358&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.392.200036.9125.2.241393613755.64847833048.168012&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.392.200036.9125.2.18417211140107121.64785088460.39682&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.392.200036.9107.307.10673.111067318112733218&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.358.3.772413836.796.1546267663.199&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.401.217394137197487017867531241429797398358&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.358.3.772413758.928.1516728100.900&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.358.3.772413749.952.1504872079.9&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.392.200036.9125.2.23681073144194.64870705416.19288&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.392.200036.9125.2.72152077067176.64859830842.47368&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.334.3.783030548.832.1460385213.644&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.312.3596.12002646.13024.1535651224.131&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.359.3.889902912.166.1404835931.830&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.255.224244491209.11481190205154603.20001&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.392.200036.9107.307.10673.111067318112733220&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.176.3596.7616574.8666.1499728843.238&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.255.2242444960244.2721171024140304.20001&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.255.22424449238210.28719170420114022.20001&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.312.6945.296880.14097.1454111483.291&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.66.2214652308.9413131127120436.20000&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.358.3.772413868.859.1543604626.977&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.358.3.772413766.692.1556200464.15&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.3.51.0.7.2005769955.13302.15437.34252.2680.54936.14365&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.255.10452023719161.23584170811164440.20001&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.392.200036.9125.2.24014628219125214.64861894680.55568&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.3.51.0.7.1932173120.36394.41546.46606.39135.58516.33568&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.55.3.772413743.69.1550850379.511&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.255.2242444958195.5097180522093039.20001&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.176.3596.6636210.7349.1501735125.558&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.255.2242444958195.21917170301091649.20001&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.6.322.167294808932885871648178410402349972635&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.255.2242444960244.6518190111163501.20001&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.340.3.772413752.214.1499767375.132&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.107.165.100.10.1.20161222.115108.1013&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.340.3.772413752.182.1497012897.175&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.392.200036.9125.2.3710016932149.64730671431.10843&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.327.3.772419096.853.1533909225.402&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.256.896737724678.1489514961.6707&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.6.322.37346408484718803034228824847571138504&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.255.1045202398916.25591190311161932.20001&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.66.2164150432.18762131009144329.20000&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.107.165.100.10.1.20190110.165857.17580&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.392.200036.9125.2.160140253198156217.64885312258.51528&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.358.3.772413777.845.1505420040.749&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.255.2242444960244.5772170419135220.20001&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1104.15.1202.141.178.1136.20171103100738.1764&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.3.51.0.7.1312984059.64721.17998.37423.15159.26741.46492&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.392.200036.9107.307.11018.111101817111603677&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.392.200036.9107.307.20625.112062517110702269&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.340.3.772413752.200.1517327119.911&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.437.3.772413869.917.1548683076.833&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.255.2242444816198.26043160826130242.20001&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.840.113619.2.255.1045202398916.21252180508113132.20001&apos;&lt;/span&gt;, &apos;1.3.51.0.7.273
...
...
840.113619.2.312.3596.12002646.12124.1533564919.371&lt;span class=&quot;code-quote&quot;&gt;&apos;, &apos;&lt;/span&gt;1.2.840.113619.2.327.3.772419096.229.1521552734.318&apos;] ) GROUP BY r.request_id,owner_pacs_id,owner_server_id,owner_app_id,scoped_seq_num,request_timestamp_as_epoch,r.target,type,reque
ster_app_id,requester_server_id,status,COALESCE(num_executions,0)
        GroupAggregate  (cost=70921684.18..70988668.09 rows=273949 width=137)
          Group Key: r.request_id, r.owner_pacs_id, r.owner_server_id, r.owner_app_id, r.scoped_seq_num, r.request_timestamp_as_epoch, r.target, r.type, r.requester_app_id, r.requester_server_id, r.status, (COALESCE(r.num_executions, 0))
          -&amp;gt;  Sort  (cost=70921684.18..70925875.82 rows=1676658 width=137)
                Sort Key: r.request_id, r.owner_pacs_id, r.owner_server_id, r.owner_app_id, r.scoped_seq_num, r.request_timestamp_as_epoch, r.target, r.type, r.requester_app_id, r.requester_server_id, r.status, (COALESCE(r.num_executions
, 0))
                -&amp;gt;  Hash Right Join  (cost=1099655.98..70513379.57 rows=1676658 width=137)
                      Hash Cond: (a.request_id = r.request_id)
                      -&amp;gt;  Append  (cost=0.12..47153260.81 rows=1352292886 width=26)
                            -&amp;gt;  Index Scan using request_attrs_request_id_idx on request_attrs a  (cost=0.12..8.14 rows=1 width=44)
                            -&amp;gt;  Index Scan using request_attrs_pk on request_attrs_partition_143201525 a_1  (cost=0.58..31360054.56 rows=880462720 width=26)
                            -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx on request_attrs_partition_147363097 a_2  (cost=0.44..836127.72 rows=25185436 width=26)
                            -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx1 on request_attrs_partition_151743477 a_3  (cost=0.44..887190.09 rows=26703816 width=26)
                            -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx2 on request_attrs_partition_156209445 a_4  (cost=0.44..908005.46 rows=27396816 width=26)
                            -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx3 on request_attrs_partition_160502782 a_5  (cost=0.44..865674.47 rows=25559476 width=26)
                            -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx4 on request_attrs_partition_164950095 a_6  (cost=0.44..890747.13 rows=26851384 width=26)
                            -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx5 on request_attrs_partition_169124773 a_7  (cost=0.44..853832.28 rows=25364304 width=26)
                            -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx6 on request_attrs_partition_173650988 a_8  (cost=0.44..909949.60 rows=27257812 width=26)
                            -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx7 on request_attrs_partition_178152919 a_9  (cost=0.44..897190.11 rows=26318320 width=26)
                            -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx8 on request_attrs_partition_182523662 a_10  (cost=0.44..874488.34 rows=26164860 width=26)
                            -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx9 on request_attrs_partition_186934841 a_11  (cost=0.44..868117.46 rows=26323568 width=26)
                            -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx10 on request_attrs_partition_191789473 a_12  (cost=0.44..868705.20 rows=25992874 width=27)
                            -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx11 on request_attrs_partition_196157658 a_13  (cost=0.44..861309.92 rows=25668452 width=26)
                            -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx12 on request_attrs_partition_200423345 a_14  (cost=0.44..840617.97 rows=25431952 width=26)
                            -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx13 on request_attrs_partition_204921717 a_15  (cost=0.44..880563.69 rows=26617964 width=26)
                            -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx14 on request_attrs_partition_209283866 a_16  (cost=0.44..867533.10 rows=26266404 width=26)
                            -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx15 on request_attrs_partition_213560580 a_17  (cost=0.44..847643.02 rows=25307790 width=26)
                            -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx16 on request_attrs_partition_217736242 a_18  (cost=0.44..865649.33 rows=25730256 width=26)
                            -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx17 on request_attrs_partition_222142662 a_19  (cost=0.44..899825.05 rows=26464708 width=26)
                            -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx18 on request_attrs_partition_current a_20  (cost=0.43..70028.17 rows=1223973 width=27)
                      -&amp;gt;  Hash  (cost=1091415.50..1091415.50 rows=273949 width=119)
                            Buckets: 32768  Batches: 16  Memory Usage: 239kB
                            -&amp;gt;  Index Scan using requests_target_full_idx on requests r  (cost=0.70..1091415.50 rows=273949 width=119)
                                  Index Cond: ((target)::text = ANY (&apos;{1.2.840.113619.2.255.2242444960172.6082180619110741.20001,1.2.840.114202.4.2456408951.3703228473.1977724863.2787633653,1.2.840.113619.2.358.3.772413758.182.1551969974
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There are 709 studies with PatID = &apos;TEST&apos;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

{sqsh}.rdc@AISMDB2.DicomMaster.1&amp;gt; select count (*) from StudyLevel where PatParent = &lt;span class=&quot;code-quote&quot;&gt;&apos;TEST&apos;&lt;/span&gt;
{sqsh}.rdc@AISMDB2.DicomMaster.2&amp;gt; go
            
 -----------
         709

(1 row affected)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;So we hacked studyRequestBatchSizeOutOfOrderProcessing as was done at RASP.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
# Study batch size when loading related requests in out of order processing.
#
# type:    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;
# &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;: 1000
studyRequestBatchSizeOutOfOrderProcessing = 100
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Filing KB1190/KB1191 now.&lt;/p&gt;
</comment>
                            <comment id="528299" author="bdasilva" created="Thu, 16 May 2019 14:13:09 -0400"  >&lt;p&gt;Clients with query plan issue may need to have this fix too: &lt;a href=&quot;https://jira.intelerad.com/browse/IP-84741&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://jira.intelerad.com/browse/IP-84741&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="528434" author="bdasilva" created="Fri, 17 May 2019 11:24:30 -0400"  >&lt;p&gt;Code reviewed, rpms attached are dev rpms for RASP. Ready for QA.&lt;/p&gt;</comment>
                            <comment id="528452" author="bdasilva" created="Fri, 17 May 2019 12:29:52 -0400"  >&lt;p&gt;Example of the metric on max number of studies to be loaded:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[admin@mst1] {/usr/local/tools/control_files} curl localhost:20008 | grep -i ims_dms_outoforder_number_studies_related_to_requests
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 30402  100 30402    0     0  3009k      0 --:--:-- --:--:-- --:--:-- 3298k
# HELP ims_dms_outoforder_number_studies_related_to_requests_total # of studies related to request on outOfOrderProcessor 
# TYPE ims_dms_outoforder_number_studies_related_to_requests_total summary
ims_dms_outoforder_number_studies_related_to_requests_total{quantile=&quot;1.0&quot;,app_version=&quot;PACS-development&quot;,} 2.0
ims_dms_outoforder_number_studies_related_to_requests_total_count{app_version=&quot;PACS-development&quot;,} 1.0
ims_dms_outoforder_number_studies_related_to_requests_total_sum{app_version=&quot;PACS-development&quot;,} 2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="528453" author="bdasilva" created="Fri, 17 May 2019 12:33:54 -0400"  >&lt;p&gt;Possible evidence that could lead to preemptive changes on the statistics of request.target could be the number of rows on Requests.&lt;br/&gt;
I checked AIS, RASP and IPOD and they all have a large number of requests +200 million of rows.&lt;/p&gt;</comment>
                            <comment id="528489" author="sramachandra" created="Fri, 17 May 2019 15:03:25 -0400"  >&lt;p&gt;&lt;b&gt;Test Case:&lt;/b&gt;&lt;br/&gt;
1) Check in DicomMasterService.cfg if studyRequestBatchSizeOutOfOrderProcessing is set to 200&lt;br/&gt;
2) Trigger out of order processing of DMS requests (stop DicomMasterService, mark past requests for a study to PENDING in globalDicom, start DicomMasterService and send DMS requests for the same study) and check /var/log/PACS/DicomMasterService/DMS.log for query identifier 2eb7e4da-64f3-45ac-ad30-9abe2eb73522 and /var/log/PACS/DicomMasterService/DMS_DicomRequestsProcessor.log for query identifier d1a238b5-fab2-4cd6-94c4-821531715fec.&lt;br/&gt;
3) In general check DMS logs for anything abnormal.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Test results:&lt;/b&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;admin@qa4161mst1&amp;#93;&lt;/span&gt; &lt;/p&gt;
{/usr/local/tools/src/PACSinstall/repo/current/updates}
&lt;p&gt; rpm &lt;del&gt;qa | grep DicomMasterService&lt;/del&gt;&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;DicomMasterService-Config-4.16.1.P381-ims99.noarch&lt;br/&gt;
DicomMasterService-4.16.1.P381-ims99.noarch&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;admin@qa4161mst1&amp;#93;&lt;/span&gt; &lt;/p&gt;
{/usr/local/tools/control_files}
&lt;p&gt; grep studyRequestBatchSizeOutOfOrderProcessing DicomMasterService.cfg&lt;br/&gt;
studyRequestBatchSizeOutOfOrderProcessing        = &lt;font color=&quot;red&quot;&gt;200&lt;/font&gt;&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;admin@qa4161mst1&amp;#93;&lt;/span&gt; &lt;/p&gt;
{/var/log/PACS/DicomMasterService} grep d1a238b5-fab2-4cd6-94c4-821531715fec *&lt;br/&gt;
DMS_DicomRequestsProcessor.log:/&lt;b&gt;&lt;font color=&quot;red&quot;&gt;d1a238b5-fab2-4cd6-94c4-821531715fec&lt;/font&gt;&lt;/b&gt;/SELECT r.request_id,owner_pacs_id,owner_server_id,owner_app_id,scoped_seq_num,request_timestamp_as_epoch,r.target,type,requester_app_id,requester_server_id,status,COALESCE(num_executions,0) as num_executions, array_agg(a.attr_id order by a.attr_id) attr_ids, array_agg(a.value order by a.attr_id) attvalues  FROM requests r  LEFT OUTER JOIN request_attrs a USING(request_id)  WHERE ( r.status = &apos;PENDING&apos; OR r.status &amp;lt;&amp;gt; &apos;PENDING&apos; )  AND target = ANY ( ARRAY&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;1.2.840.114202.999.1.2.3.1560966657.264.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.183.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.300.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.176.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.108.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.308.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.320.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.142.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.152.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.242.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.442.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.589.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.198.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.229.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.179.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.219.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.299.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.323.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.429.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.319.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.151.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.278.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.241.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.168.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.171.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.158.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.188.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.613.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.141.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.324.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.628.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.304.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.301.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.317.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.293.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.453.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.223.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.273.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.233.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.147.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.185.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.236.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.215.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.115.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.194.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.245.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.174.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.216.20180213.0&amp;#39;&amp;#93;&lt;/span&gt; )  GROUP BY r.request_id,owner_pacs_id,owner_server_id,owner_app_id,scoped_seq_num,request_timestamp_as_epoch,r.target,type,requester_app_id,requester_server_id,status,COALESCE(num_executions,0)&lt;br/&gt;
DMS_DicomRequestsProcessor.log:/&lt;b&gt;d1a238b5-fab2-4cd6-94c4-821531715fec&lt;/b&gt;/SELECT r.request_id,owner_pacs_id,owner_server_id,owner_app_id,scoped_seq_num,request_timestamp_as_epoch,r.target,type,requester_app_id,requester_server_id,status,COALESCE(num_executions,0) as num_executions, array_agg(a.attr_id order by a.attr_id) attr_ids, array_agg(a.value order by a.attr_id) attvalues  FROM requests r  LEFT OUTER JOIN request_attrs a USING(request_id)  WHERE ( r.status = &apos;PENDING&apos; OR r.status &amp;lt;&amp;gt; &apos;PENDING&apos; )  AND target = ANY ( ARRAY&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;1.2.276.0.7230010.3.1.2.1510621826.12419.1519322773.495520&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510621826.17948.1519322896.45162&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510621826.11350.1519322752.852002&amp;#39;&amp;#93;&lt;/span&gt; )  GROUP BY r.request_id,owner_pacs_id,owner_server_id,owner_app_id,scoped_seq_num,request_timestamp_as_epoch,r.target,type,requester_app_id,requester_server_id,status,COALESCE(num_executions,0)&lt;br/&gt;
DMS_DicomRequestsProcessor.log:/&lt;b&gt;d1a238b5-fab2-4cd6-94c4-821531715fec&lt;/b&gt;/SELECT r.request_id,owner_pacs_id,owner_server_id,owner_app_id,scoped_seq_num,request_timestamp_as_epoch,r.target,type,requester_app_id,requester_server_id,status,COALESCE(num_executions,0) as num_executions, array_agg(a.attr_id order by a.attr_id) attr_ids, array_agg(a.value order by a.attr_id) attvalues  FROM requests r  LEFT OUTER JOIN request_attrs a USING(request_id)  WHERE ( r.status = &apos;PENDING&apos; OR r.status &amp;lt;&amp;gt; &apos;PENDING&apos; )  AND target = ANY ( ARRAY&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;2.25.249939855039029433613711620390722249028&amp;#39;&amp;#93;&lt;/span&gt; )  GROUP BY r.request_id,owner_pacs_id,owner_server_id,owner_app_id,scoped_seq_num,request_timestamp_as_epoch,r.target,type,requester_app_id,requester_server_id,status,COALESCE(num_executions,0)&lt;br/&gt;
DMS_DicomRequestsProcessor.log:/&lt;b&gt;d1a238b5-fab2-4cd6-94c4-821531715fec&lt;/b&gt;/SELECT r.request_id,owner_pacs_id,owner_server_id,owner_app_id,scoped_seq_num,request_timestamp_as_epoch,r.target,type,requester_app_id,requester_server_id,status,COALESCE(num_executions,0) as num_executions, array_agg(a.attr_id order by a.attr_id) attr_ids, array_agg(a.value order by a.attr_id) attvalues  FROM requests r  LEFT OUTER JOIN request_attrs a USING(request_id)  WHERE ( r.status = &apos;PENDING&apos; OR r.status &amp;lt;&amp;gt; &apos;PENDING&apos; )  AND target = ANY ( ARRAY&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;2.25.279782908020728125111845571349551434541&amp;#39;&amp;#93;&lt;/span&gt; )  GROUP BY r.request_id,owner_pacs_id,owner_server_id,owner_app_id,scoped_seq_num,request_timestamp_as_epoch,r.target,type,requester_app_id,requester_server_id,status,COALESCE(num_executions,0)&lt;br/&gt;
DMS_DicomRequestsProcessor.log:/&lt;b&gt;d1a238b5-fab2-4cd6-94c4-821531715fec&lt;/b&gt;/SELECT r.request_id,owner_pacs_id,owner_server_id,owner_app_id,scoped_seq_num,request_timestamp_as_epoch,r.target,type,requester_app_id,requester_server_id,status,COALESCE(num_executions,0) as num_executions, array_agg(a.attr_id order by a.attr_id) attr_ids, array_agg(a.value order by a.attr_id) attvalues  FROM requests r  LEFT OUTER JOIN request_attrs a USING(request_id)  WHERE ( r.status = &apos;PENDING&apos; OR r.status &amp;lt;&amp;gt; &apos;PENDING&apos; )  AND target = ANY ( ARRAY&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;2.25.337489018392885773146402502508837966743&amp;#39;&amp;#93;&lt;/span&gt; )  GROUP BY r.request_id,owner_pacs_id,owner_server_id,owner_app_id,scoped_seq_num,request_timestamp_as_epoch,r.target,type,requester_app_id,requester_server_id,status,COALESCE(num_executions,0)&lt;br/&gt;
DMS_DicomRequestsProcessor.log:/&lt;b&gt;d1a238b5-fab2-4cd6-94c4-821531715fec&lt;/b&gt;/SELECT r.request_id,owner_pacs_id,owner_server_id,owner_app_id,scoped_seq_num,request_timestamp_as_epoch,r.target,type,requester_app_id,requester_server_id,status,COALESCE(num_executions,0) as num_executions, array_agg(a.attr_id order by a.attr_id) attr_ids, array_agg(a.value order by a.attr_id) attvalues  FROM requests r  LEFT OUTER JOIN request_attrs a USING(request_id)  WHERE ( r.status = &apos;PENDING&apos; OR r.status &amp;lt;&amp;gt; &apos;PENDING&apos; )  AND target = ANY ( ARRAY&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;2.25.89915258175771473555888015231674243639&amp;#39;&amp;#93;&lt;/span&gt; )  GROUP BY r.request_id,owner_pacs_id,owner_server_id,owner_app_id,scoped_seq_num,request_timestamp_as_epoch,r.target,type,requester_app_id,requester_server_id,status,COALESCE(num_executions,0)&lt;br/&gt;
DMS_DicomRequestsProcessor.log:/&lt;b&gt;d1a238b5-fab2-4cd6-94c4-821531715fec&lt;/b&gt;/SELECT r.request_id,owner_pacs_id,owner_server_id,owner_app_id,scoped_seq_num,request_timestamp_as_epoch,r.target,type,requester_app_id,requester_server_id,status,COALESCE(num_executions,0) as num_executions, array_agg(a.attr_id order by a.attr_id) attr_ids, array_agg(a.value order by a.attr_id) attvalues  FROM requests r  LEFT OUTER JOIN request_attrs a USING(request_id)  WHERE ( r.status = &apos;PENDING&apos; OR r.status &amp;lt;&amp;gt; &apos;PENDING&apos; )  AND target = ANY ( ARRAY&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;2.25.90307437693869439997524110200766521253&amp;#39;&amp;#93;&lt;/span&gt; )  GROUP BY r.request_id,owner_pacs_id,owner_server_id,owner_app_id,scoped_seq_num,request_timestamp_as_epoch,r.target,type,requester_app_id,requester_server_id,status,COALESCE(num_executions,0)&lt;br/&gt;
DMS_DicomRequestsProcessor.log:/&lt;b&gt;d1a238b5-fab2-4cd6-94c4-821531715fec&lt;/b&gt;/SELECT r.request_id,owner_pacs_id,owner_server_id,owner_app_id,scoped_seq_num,request_timestamp_as_epoch,r.target,type,requester_app_id,requester_server_id,status,COALESCE(num_executions,0) as num_executions, array_agg(a.attr_id order by a.attr_id) attr_ids, array_agg(a.value order by a.attr_id) attvalues  FROM requests r  LEFT OUTER JOIN request_attrs a USING(request_id)  WHERE ( r.status = &apos;PENDING&apos; OR r.status &amp;lt;&amp;gt; &apos;PENDING&apos; )  AND target = ANY ( ARRAY&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;1.2.840.114202.999.1.2.3.1560966657.264.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.183.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.300.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.176.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.108.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.308.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.320.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.142.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.152.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.242.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.442.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.589.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.198.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.229.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.179.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.219.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.299.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.323.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.429.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.319.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.151.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.278.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.241.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.168.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.171.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.158.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.188.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.613.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.141.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.324.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.628.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.304.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.301.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.317.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.293.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.453.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.223.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.273.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.233.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.147.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.185.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.236.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.215.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.115.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.194.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.245.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.174.20180213.0&amp;#39;, &amp;#39;1.2.840.114202.999.1.2.3.1560966657.216.20180213.0&amp;#39;&amp;#93;&lt;/span&gt; )  GROUP BY r.request_id,owner_pacs_id,owner_server_id,owner_app_id,scoped_seq_num,request_timestamp_as_epoch,r.target,type,requester_app_id,requester_server_id,status,COALESCE(num_executions,0)&lt;br/&gt;
DMS_DicomRequestsProcessor.log:/&lt;b&gt;d1a238b5-fab2-4cd6-94c4-821531715fec&lt;/b&gt;/SELECT r.request_id,owner_pacs_id,owner_server_id,owner_app_id,scoped_seq_num,request_timestamp_as_epoch,r.target,type,requester_app_id,requester_server_id,status,COALESCE(num_executions,0) as num_executions, array_agg(a.attr_id order by a.attr_id) attr_ids, array_agg(a.value order by a.attr_id) attvalues  FROM requests r  LEFT OUTER JOIN request_attrs a USING(request_id)  WHERE ( r.status = &apos;PENDING&apos; OR r.status &amp;lt;&amp;gt; &apos;PENDING&apos; )  AND target = ANY ( ARRAY&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;1.2.840.113619.2.55.1.1762864402.1971.1066808045.462&amp;#39;, &amp;#39;1.2.840.114202.1.1.1226673.41.22201174&amp;#39;, &amp;#39;1.2.840.113619.2.199.32640.6696.38030.1158754230.678.10&amp;#39;, &amp;#39;1.2.840.113619.2.55.1.1762864402.1968.1077018575.414&amp;#39;, &amp;#39;1.2.840.114202.1.1.1226673.41.22201237&amp;#39;, &amp;#39;1.2.840.113704.6.76962305529&amp;#39;, &amp;#39;1.2.840.114202.4.3580141143.3069948652.3195834420.2383872187&amp;#39;, &amp;#39;1.2.840.114202.1.1.1226673.41.22271059&amp;#39;, &amp;#39;1.2.840.114202.4.3159457094.3390893257.2829493954.592736361&amp;#39;, &amp;#39;1.2.840.114202.1.1.1226673.41.22271499&amp;#39;, &amp;#39;1.2.840.114202.1.1.1226673.41.22271498&amp;#39;, &amp;#39;1.2.840.113619.2.199.32640.6696.38030.1161086712.829.6&amp;#39;, &amp;#39;1.2.840.114202.4.612995512.1137057929.2256636901.2349429110&amp;#39;, &amp;#39;1.2.840.113619.2.55.1.1762870802.1977.1123187166.496&amp;#39;, &amp;#39;1.2.840.114202.4.97357791.1398112094.2892294319.2629900649&amp;#39;, &amp;#39;1.2.840.114202.1.1.1226673.41.23205357&amp;#39;, &amp;#39;1.2.840.114202.1.1.1226673.41.23205356&amp;#39;, &amp;#39;1.2.840.114202.1.1.1226673.41.23205355&amp;#39;, &amp;#39;1.2.840.113619.2.55.1.1762870802.2027.1076222223.136&amp;#39;, &amp;#39;1.3.51.0.7.633924771.633920000810.6339093008&amp;#39;, &amp;#39;1.2.840.114202.1.1.1226673.41.22204158&amp;#39;, &amp;#39;1.2.840.114202.1.1.1226673.41.21701305&amp;#39;, &amp;#39;1.2.840.113619.2.126.32640.4401.60173.1066738964.159.51&amp;#39;, &amp;#39;1.2.840.113704.6.76962305038&amp;#39;, &amp;#39;1.3.51.0.7.633915388.633920031022.6339090235&amp;#39;&amp;#93;&lt;/span&gt; )  GROUP BY r.request_id,owner_pacs_id,owner_server_id,owner_app_id,scoped_seq_num,request_timestamp_as_epoch,r.target,type,requester_app_id,requester_server_id,status,COALESCE(num_executions,0)&lt;br/&gt;
DMS_DicomRequestsProcessor.log:/&lt;b&gt;d1a238b5-fab2-4cd6-94c4-821531715fec&lt;/b&gt;/SELECT r.request_id,owner_pacs_id,owner_server_id,owner_app_id,scoped_seq_num,request_timestamp_as_epoch,r.target,type,requester_app_id,requester_server_id,status,COALESCE(num_executions,0) as num_executions, array_agg(a.attr_id order by a.attr_id) attr_ids, array_agg(a.value order by a.attr_id) attvalues  FROM requests r  LEFT OUTER JOIN request_attrs a USING(request_id)  WHERE ( r.status = &apos;PENDING&apos; OR r.status &amp;lt;&amp;gt; &apos;PENDING&apos; )  AND target = ANY ( ARRAY&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;1.2.840.113619.2.55.1.1762864402.1971.1066808045.462&amp;#39;, &amp;#39;1.2.840.114202.1.1.1226673.41.22201174&amp;#39;, &amp;#39;1.2.840.113619.2.199.32640.6696.38030.1158754230.678.10&amp;#39;, &amp;#39;1.2.840.113619.2.55.1.1762864402.1968.1077018575.414&amp;#39;, &amp;#39;1.2.840.114202.1.1.1226673.41.22201237&amp;#39;, &amp;#39;1.2.840.113704.6.76962305529&amp;#39;, &amp;#39;1.2.840.114202.4.3580141143.3069948652.3195834420.2383872187&amp;#39;, &amp;#39;1.2.840.114202.1.1.1226673.41.22271059&amp;#39;, &amp;#39;1.2.840.114202.4.3159457094.3390893257.2829493954.592736361&amp;#39;, &amp;#39;1.2.840.114202.1.1.1226673.41.22271499&amp;#39;, &amp;#39;1.2.840.114202.1.1.1226673.41.22271498&amp;#39;, &amp;#39;1.2.840.113619.2.199.32640.6696.38030.1161086712.829.6&amp;#39;, &amp;#39;1.2.840.114202.4.612995512.1137057929.2256636901.2349429110&amp;#39;, &amp;#39;1.2.840.113619.2.55.1.1762870802.1977.1123187166.496&amp;#39;, &amp;#39;1.2.840.114202.4.97357791.1398112094.2892294319.2629900649&amp;#39;, &amp;#39;1.2.840.114202.1.1.1226673.41.23205357&amp;#39;, &amp;#39;1.2.840.114202.1.1.1226673.41.23205356&amp;#39;, &amp;#39;1.2.840.114202.1.1.1226673.41.23205355&amp;#39;, &amp;#39;1.2.840.113619.2.55.1.1762870802.2027.1076222223.136&amp;#39;, &amp;#39;1.3.51.0.7.633924771.633920000810.6339093008&amp;#39;, &amp;#39;1.2.840.114202.1.1.1226673.41.22204158&amp;#39;, &amp;#39;1.2.840.114202.1.1.1226673.41.21701305&amp;#39;, &amp;#39;1.2.840.113619.2.126.32640.4401.60173.1066738964.159.51&amp;#39;, &amp;#39;1.2.840.113704.6.76962305038&amp;#39;, &amp;#39;1.3.51.0.7.633915388.633920031022.6339090235&amp;#39;&amp;#93;&lt;/span&gt; )  GROUP BY r.request_id,owner_pacs_id,owner_server_id,owner_app_id,scoped_seq_num,request_timestamp_as_epoch,r.target,type,requester_app_id,requester_server_id,status,COALESCE(num_executions,0)&lt;br/&gt;
DMS_DicomRequestsProcessor.log:/&lt;b&gt;d1a238b5-fab2-4cd6-94c4-821531715fec&lt;/b&gt;/SELECT r.request_id,owner_pacs_id,owner_server_id,owner_app_id,scoped_seq_num,request_timestamp_as_epoch,r.target,type,requester_app_id,requester_server_id,status,COALESCE(num_executions,0) as num_executions, array_agg(a.attr_id order by a.attr_id) attr_ids, array_agg(a.value order by a.attr_id) attvalues  FROM requests r  LEFT OUTER JOIN request_attrs a USING(request_id)  WHERE ( r.status = &apos;PENDING&apos; OR r.status &amp;lt;&amp;gt; &apos;PENDING&apos; )  AND target = ANY ( ARRAY&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;1.2.276.0.7230010.3.1.2.1510634370.19492.1548960258.738623&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.20123.1548962572.176095&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.18815.1548960998.702613&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.24424.1549464521.340220&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.7371.1548959207.233855&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.22119.1548959549.444037&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.4192.1548964288.733190&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.10922.1548960816.219787&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.31096.1549048987.356066&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.4975.1548953777.210407&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.3618.1548959129.820018&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.12291.1549469596.35260&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.1597.1548955092.379682&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.6492.1549039182.503988&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.24605.1548954222.131376&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.15179.1548954003.118368&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.346817280.26069.1553028688.500645&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.6347.1548970182.774673&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.22657.1548954848.987969&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.5223.1548961426.710723&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.11468.1548960069.559092&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.29663.1548969966.940027&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.23163.1548969786.478958&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.7723.1548959989.711669&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.11634.1548962366.14671&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.27159.1549048162.220398&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.3339.1548954439.958669&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.11682.1548959313.967638&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.346817280.15988.1553028552.226930&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.26269.1548959676.159964&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.7524.1549471577.742275&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.3541.1548959882.978217&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.24001.1549469875.83516&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.21213.1549048003.17155&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.30070.1549464663.554173&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.12755.1549471702.8669&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.13143.1548964482.312558&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.17001.1548959428.605156&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.2963.1549048336.876546&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.7388.1549465574.685894&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.22423.1548960341.284984&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.15515.1548960162.919551&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.23091.1548961104.170519&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.346817280.6480.1553028395.673153&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.17440.1549469723.644112&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.9704.1548961545.400614&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.13728.1548954659.366753&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.12693.1549039335.450190&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.32591.1549471427.131150&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.16787.1548962494.506581&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.2145.1548960619.591091&amp;#39;, &amp;#39;1.2.276.0.7230010.3.1.2.1510634370.31074.1548961286.23984&amp;#39;&amp;#93;&lt;/span&gt; )  GROUP BY r.request_id,owner_pacs_id,owner_server_id,owner_app_id,scoped_seq_num,request_timestamp_as_epoch,r.target,type,requester_app_id,requester_server_id,status,COALESCE(num_executions,0)&lt;br/&gt;
grep: filed_logs: Is a directory&lt;br/&gt;
&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;admin@qa4161mst1&amp;#93;&lt;/span&gt; {/var/log/PACS/DicomMasterService}
&lt;p&gt; grep 2eb7e4da-64f3-45ac-ad30-9abe2eb73522 DMS.log &lt;br/&gt;
SELECT /* &lt;font color=&quot;red&quot;&gt;2eb7e4da-64f3-45ac-ad30-9abe2eb73522&lt;/font&gt; */ attstattarget &lt;br/&gt;
SELECT /* 2eb7e4da-64f3-45ac-ad30-9abe2eb73522 */ attstattarget &lt;/p&gt;</comment>
                            <comment id="528492" author="sramachandra" created="Fri, 17 May 2019 15:06:18 -0400"  >&lt;p&gt;Verified test cases with Bruno and we are good with the testing. Moving it to QA verified.&lt;/p&gt;</comment>
                            <comment id="528495" author="sramachandra" created="Fri, 17 May 2019 15:09:05 -0400"  >&lt;p&gt;QA verified, sending to dev&lt;/p&gt;</comment>
                            <comment id="528557" author="robot-bc-rw" created="Tue, 21 May 2019 08:27:07 -0400"  >&lt;p&gt;Released by bdasilva to master at 2019-05-21 08:27:03 (push 72871):&lt;br/&gt;
  PACS-4-14-1 (fix)        (previous build: PACS-4-14-1-P508)&lt;br/&gt;
  PACS-4-15-1 (fix)        (previous build: PACS-4-15-1-P249)&lt;br/&gt;
  PACS-4-16-1 (dummy)      (previous build: PACS-4-16-1-P383)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/edaabacf3666&quot; target=&quot;_blank&quot;&gt;intelepacs:edaabacf3666&lt;/a&gt;  bdasilva    PACS-4-14-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-104196&quot; title=&quot;DMS: request processing blocked by pathological query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-104196&quot;&gt;&lt;del&gt;IP-104196&lt;/del&gt;&lt;/a&gt; fix: DMS: batch size reduction of studies loaded for OOP, increase of&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/273167c23881&quot; target=&quot;_blank&quot;&gt;intelepacs:273167c23881&lt;/a&gt;  bdasilva    PACS-4-15-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-104196&quot; title=&quot;DMS: request processing blocked by pathological query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-104196&quot;&gt;&lt;del&gt;IP-104196&lt;/del&gt;&lt;/a&gt; fix: DMS: batch size reduction of studies loaded for OOP, increase of&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/1c04f6fcaa4a&quot; target=&quot;_blank&quot;&gt;intelepacs:1c04f6fcaa4a&lt;/a&gt;  bdasilva    PACS-4-16-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-104196&quot; title=&quot;DMS: request processing blocked by pathological query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-104196&quot;&gt;&lt;del&gt;IP-104196&lt;/del&gt;&lt;/a&gt; dummy: dummy merge from PACS-4-15-1&lt;/p&gt;</comment>
                            <comment id="528559" author="robot-bc-rw" created="Tue, 21 May 2019 08:32:39 -0400"  >&lt;p&gt;Released by bdasilva to master at 2019-05-21 08:32:35 (push 72872):&lt;br/&gt;
  PACS-4-16-1 (fix)        (previous build: PACS-4-16-1-P383)&lt;br/&gt;
  PACS-4-17-1 (fix)        (previous build: PACS-4-17-1-P209)&lt;br/&gt;
  PACS-4-18-1 (fix)        (previous build: PACS-4-18-1-P40)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-18-2-A19)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/1edf09f6b6d0&quot; target=&quot;_blank&quot;&gt;intelepacs:1edf09f6b6d0&lt;/a&gt;  bdasilva    PACS-4-16-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-104196&quot; title=&quot;DMS: request processing blocked by pathological query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-104196&quot;&gt;&lt;del&gt;IP-104196&lt;/del&gt;&lt;/a&gt; fix: DMS: batch size reduction of studies loaded for OOP, increase of&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/086841bd72d7&quot; target=&quot;_blank&quot;&gt;intelepacs:086841bd72d7&lt;/a&gt;  bdasilva    PACS-4-17-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-104196&quot; title=&quot;DMS: request processing blocked by pathological query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-104196&quot;&gt;&lt;del&gt;IP-104196&lt;/del&gt;&lt;/a&gt; fix: DMS: batch size reduction of studies loaded for OOP, increase of&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/9c694672c360&quot; target=&quot;_blank&quot;&gt;intelepacs:9c694672c360&lt;/a&gt;  bdasilva    PACS-4-18-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-104196&quot; title=&quot;DMS: request processing blocked by pathological query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-104196&quot;&gt;&lt;del&gt;IP-104196&lt;/del&gt;&lt;/a&gt; fix: DMS: batch size reduction of studies loaded for OOP, increase of&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/0e613cc15353&quot; target=&quot;_blank&quot;&gt;intelepacs:0e613cc15353&lt;/a&gt;  bdasilva    trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-104196&quot; title=&quot;DMS: request processing blocked by pathological query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-104196&quot;&gt;&lt;del&gt;IP-104196&lt;/del&gt;&lt;/a&gt; fix: DMS: batch size reduction of studies loaded for OOP, increase of&lt;/p&gt;</comment>
                            <comment id="528560" author="bdasilva" created="Tue, 21 May 2019 08:34:28 -0400"  >&lt;p&gt;Description of the solution:&lt;br/&gt;
Batch size reduction of studies loaded for OOP, an increase of&lt;br/&gt;
statistics on request.target to improve query getModificationsForStudiesBatch in&lt;br/&gt;
case of huge request tables, and change on the quantile for&lt;br/&gt;
ims_dms_outoforder_number_studies_related_to_requests_total.&lt;/p&gt;

&lt;p&gt;Tests executed: as per comments&lt;/p&gt;

&lt;p&gt;Unit tests added or modified: none&lt;/p&gt;</comment>
                            <comment id="529036" author="dvu" created="Thu, 23 May 2019 13:47:58 -0400"  >&lt;p&gt;&lt;a href=&quot;https://rnd-ci.intelerad.com/job/IntelePACS_IntegrationTest_CloudTesting/260/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://rnd-ci.intelerad.com/job/IntelePACS_IntegrationTest_CloudTesting/260/&lt;/a&gt; ( Tests pass)&lt;/p&gt;</comment>
                            <comment id="529209" author="dvu" created="Fri, 24 May 2019 12:08:32 -0400"  >&lt;p&gt; Included in PACS-4-14-1-R63 (atlas 1.10.P53)&lt;/p&gt;</comment>
                            <comment id="529298" author="dvu" created="Fri, 24 May 2019 15:14:38 -0400"  >&lt;p&gt;Included in PACS-4-16-1-R45 (atlas 1.14.P67)&lt;/p&gt;</comment>
                            <comment id="529396" author="dvu" created="Mon, 27 May 2019 10:45:22 -0400"  >&lt;p&gt; Included in PACS-4-15-1-R45 (atlas 1.13.P118)&lt;/p&gt;</comment>
                            <comment id="529491" author="dvu" created="Mon, 27 May 2019 16:47:07 -0400"  >&lt;p&gt;Included in PACS-4-17-1-R21 (atlas 1.15.P54)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="154411">IP-104300</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="154426">MAINT-9610</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="154457">MAINT-9615</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="154529">MAINT-9619</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="52109" name="DicomMasterService-4.16.1.P381-ims99.noarch.rpm" size="2934390" author="bdasilva" created="Fri, 17 May 2019 11:05:52 -0400"/>
                            <attachment id="52110" name="DicomMasterService-Config-4.16.1.P381-ims99.noarch.rpm" size="3115" author="bdasilva" created="Fri, 17 May 2019 11:05:52 -0400"/>
                            <attachment id="51890" name="IP-103384.diff" size="6057" author="bdasilva" created="Thu, 9 May 2019 12:29:24 -0400"/>
                            <attachment id="52108" name="IP-104196.diff" size="4048" author="bdasilva" created="Fri, 17 May 2019 11:03:35 -0400"/>
                            <attachment id="52086" name="IP-104196_cte.diff" size="3509" author="bdasilva" created="Thu, 16 May 2019 11:43:27 -0400"/>
                            <attachment id="51891" name="IP-97341.diff" size="6654" author="bdasilva" created="Thu, 9 May 2019 12:29:24 -0400"/>
                            <attachment id="51797" name="optimized_rasp_query.txt" size="47938" author="bdasilva" created="Mon, 6 May 2019 15:26:35 -0400"/>
                            <attachment id="51796" name="original_problematic_query.txt" size="28957" author="bdasilva" created="Mon, 6 May 2019 15:26:32 -0400"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12603" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Affected Clients</customfieldname>
                        <customfieldvalues>
                                        <label>AIS</label>
            <label>IPO</label>
            <label>RASP</label>
            <label>RIA</label>
            <label>TMI</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[5.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_13901" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Code Committed</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14502"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;h4&gt;&lt;a name=&quot;RPMVersion&quot;&gt;&lt;/a&gt;RPM Version&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ISPClient%3A%3Cclientcode%3E&quot;&gt;&lt;/a&gt;ISP - Client : &lt;a href=&quot;https://inteleradprod.service-now.com/nav_to.do?uri=textsearch.do?sysparm_search=xxxx&quot; target=&quot;_blank&quot;&gt;xxxx&lt;/a&gt; - &amp;lt;client code&amp;gt;&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ClinicalImpact%3A&quot;&gt;&lt;/a&gt;Clinical Impact:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce%3A&quot;&gt;&lt;/a&gt;Minimal steps to reproduce:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour%3A&quot;&gt;&lt;/a&gt;Expected behaviour:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F%3A&quot;&gt;&lt;/a&gt;What happened instead?:&lt;/h4&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12110" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Documentation</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14406"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>IP-104625</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_14002" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Key Roles Affected</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14606"><![CDATA[All]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12114" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Manual Deployment Step Required</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12044"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_14001" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Probability of Reoccurrance</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14603"><![CDATA[Medium]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13135"><![CDATA[DicomMasterService]]></customfieldvalue>
    <customfieldvalue key="13304"><![CDATA[PACSConfigurator]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzcn4v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11908" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Impact info</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Add the new size for requests.target statistics:&lt;br/&gt;
requests.target = 1000&lt;br/&gt;
&lt;br/&gt;
On  pacsCore.cfg section [PostgresStatistics.globaldicom]&lt;br/&gt;
&lt;br/&gt;
DMS needs to be restarted after this change.&lt;br/&gt;
Also, I strongly suggest that an alert is needed on ims_dms_outoforder_number_studies_related_to_requests_total, as this metric will give a trend on the max number of studies loaded so we can act before issues arrive. </customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12102" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Release Notes</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14407"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13815" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Risk</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14445"><![CDATA[Standard Change]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13501" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Scrum Team</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14111"><![CDATA[Scrum Team #1]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11001" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>ServiceNow Case #</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>CS0145075, CS0146667</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10801"><![CDATA[CRITICAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="2051">Team#1 -  2019 Sprint 9</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:float">
                        <customfieldname>Story Points</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-104083] DicomEvidence initialize partition actioned on each DMS starting</title>
                <link>https://jira.intelerad.com/browse/IP-104083</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;h4&gt;&lt;a name=&quot;Note%3A&quot;&gt;&lt;/a&gt;Note:&lt;/h4&gt;
&lt;p&gt;Each time starting DMS, if dicomevidence..state_info has key &quot;DicomEvidenceParititoning.State&quot; with value &quot;PARTITIONED&quot;, initializing partition should not be applied again. However, initializing partition is applied on each DMS start even the partition has been initialized before.&lt;/p&gt;

&lt;p&gt;The only impact so far is repeated initializing partition could slow down DMS startup slightly. But  it could misleading future task if there is any to be added to the transaction.&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour%3A&quot;&gt;&lt;/a&gt;Expected behaviour:&lt;/h4&gt;
&lt;p&gt;Given dicomevidence partition has been initialized, when restarting DMS, following statement should be in log file /var/log/PACS/DicomMasterService/DMS_INITIALIZATION_ADMIN_QUEUE.log - &lt;br/&gt;
&quot;DICOMEVIDENCE partition schema exists. Therefore not applying it again.&quot;&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F%3A&quot;&gt;&lt;/a&gt;What happened instead?:&lt;/h4&gt;
&lt;p&gt;However, &quot;DICOMEVIDENCE partition schema does not exist exist. Therefore applying it.&quot; is in the log.&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Cause&quot;&gt;&lt;/a&gt;Cause&lt;/h4&gt;
&lt;p&gt;com.intelerad.dicommasterservice.appinit.DicomMasterMigrationTask.updateStateInfoAndInitPartitions(...):&lt;br/&gt;
In the transaction, checking partition state happens after updating state to &quot;PARTITIONING&quot;, as a result, code cannot find out if partition has been initialized.&lt;/p&gt;
</description>
            <key id="153623">IP-104083</key>
            <summary>DicomEvidence initialize partition actioned on each DMS starting</summary>
                <type id="3" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13918&amp;avatarType=issuetype">Task</type>
                                            <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="ldegruchy">Luke de Gruchy</assignee>
                                    <reporter username="pzhan">Peter Zhan</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Apr 2019 14:18:01 -0400</created>
                <updated>Fri, 17 May 2019 11:19:29 -0400</updated>
                            <resolved>Fri, 10 May 2019 14:33:28 -0400</resolved>
                                    <version>4-17-1</version>
                                    <fixVersion>4-17-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                    <timeoriginalestimate seconds="0">0 minutes</timeoriginalestimate>
                            <timeestimate seconds="0">0 minutes</timeestimate>
                            <timespent seconds="167400">1 week, 6 hours, 30 minutes</timespent>
                                <comments>
                            <comment id="526343" author="luke.degruchy" created="Thu, 2 May 2019 16:07:32 -0400"  >&lt;h4&gt;&lt;a name=&quot;Solution&quot;&gt;&lt;/a&gt;Solution&lt;/h4&gt;

&lt;ul&gt;
	&lt;li&gt;Fix the signature and implementation of dropPartition() in TablePartitioningDatabaseDicomEvidencePostgres&lt;/li&gt;
	&lt;li&gt;Ensure that TablePartitioningDatabaseDicomEvidencePostgres.PartitionPatch.getLatest() returns NOT_PATCHED instead of null if it finds nothing&lt;/li&gt;
	&lt;li&gt;Refactor DicomMasterTask to split out init partition from patching the partition stored proc&lt;/li&gt;
	&lt;li&gt;Do not update the partition state_info if partitioning already occurred&lt;/li&gt;
	&lt;li&gt;Otherwise, preserve the existing behaviour from the previous version of DicomMasterTask&lt;/li&gt;
	&lt;li&gt;Add more unit tests to TestDicomMasterTask and assertions to existing tests&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="526346" author="luke.degruchy" created="Thu, 2 May 2019 16:15:04 -0400"  >&lt;h4&gt;&lt;a name=&quot;DeveloperTesting&quot;&gt;&lt;/a&gt;Developer Testing&lt;/h4&gt;

&lt;ul&gt;
	&lt;li&gt;Test VIAM scenario of patching an existing DMS postgres installation (P186:  old combined patient_birth_date column)
	&lt;ul&gt;
		&lt;li&gt;Migrate to postgres with existing Sybase data&lt;/li&gt;
		&lt;li&gt;View the state_info&lt;/li&gt;
		&lt;li&gt;Restart DMS&lt;/li&gt;
		&lt;li&gt;See state_info record for partition updated&lt;/li&gt;
		&lt;li&gt;Update DMS and DicomEvidence RPMs&lt;/li&gt;
		&lt;li&gt;Run manual ALTER TABLEs to fix the schema
		&lt;ul&gt;
			&lt;li&gt;ALTER TABLE patient ALTER COLUMN patient_birth_date TYPE text;&lt;/li&gt;
			&lt;li&gt;ALTER TABLE patient ADD COLUMN IF NOT EXISTS patient_birth_time text;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
		&lt;li&gt;Restart DMS&lt;/li&gt;
		&lt;li&gt;Ensure patch is applied&lt;/li&gt;
		&lt;li&gt;Ensure state_info for partition is NOT updated again&lt;/li&gt;
		&lt;li&gt;Ensure state_info for patch is created&lt;/li&gt;
		&lt;li&gt;Ensure that create_trigger_for_pk_uniqueness_func is created&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Test a client that newly migrates to postgres with latest code
	&lt;ul&gt;
		&lt;li&gt;Update DMS and DicomEvidence RPMs&lt;/li&gt;
		&lt;li&gt;Flip to postgres mode&lt;/li&gt;
		&lt;li&gt;dbConfigurator --upgrade  --sapassword admpass /usr/local/tools/DatabaseSchemas/Postgres/Schema-DicomEvidence.cfg&lt;/li&gt;
		&lt;li&gt;Restart DMS&lt;/li&gt;
		&lt;li&gt;Ensure state_info rows for partition and patch are created&lt;/li&gt;
		&lt;li&gt;Ensure create_trigger_for_pk_uniqueness_func is created&lt;/li&gt;
		&lt;li&gt;Restart DMS again&lt;/li&gt;
		&lt;li&gt;Ensure state_info row for partition is not updated&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="526371" author="luke.degruchy" created="Fri, 3 May 2019 07:32:43 -0400"  >&lt;p&gt;Evolve branch:   PACS-4-17-1-ldegruchy-state-info-partitioned&lt;/p&gt;</comment>
                            <comment id="527336" author="mtavallaei" created="Thu, 9 May 2019 15:49:24 -0400"  >&lt;p&gt;QA is done. The fix works well.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;DicomEvidence initialize partition does not happen with each DMS restart, if it has already been partitioned.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;You can find more details here: &lt;a href=&quot;https://docs.google.com/document/d/1e71ejTJSbVkWwaNh62wTwlUmb2OrtL1Se9zbpwPoFLA/edit?usp=sharing&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://docs.google.com/document/d/1e71ejTJSbVkWwaNh62wTwlUmb2OrtL1Se9zbpwPoFLA/edit?usp=sharing&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="527561" author="robot-bc-rw" created="Fri, 10 May 2019 14:31:53 -0400"  >&lt;p&gt;Released by ldegruchy to master at 2019-05-10 14:31:50 (push 72754):&lt;br/&gt;
  PACS-4-17-1 (fix)        (previous build: PACS-4-17-1-P204)&lt;br/&gt;
  PACS-4-17-1 (fix)        (previous build: PACS-4-17-1-P204)&lt;br/&gt;
  PACS-4-18-1 (fix)        (previous build: PACS-4-18-1-P34)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-18-2-A14)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/10230ee58d60&quot; target=&quot;_blank&quot;&gt;intelepacs:10230ee58d60&lt;/a&gt;  ldegruchy   PACS-4-17-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-104083&quot; title=&quot;DicomEvidence initialize partition actioned on each DMS starting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-104083&quot;&gt;&lt;del&gt;IP-104083&lt;/del&gt;&lt;/a&gt; fix: Fix signature &amp;amp; SQL dropPartition() &amp;amp; NOT_PATCHED instead of null for default latest patch status.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/0ead90e02e5e&quot; target=&quot;_blank&quot;&gt;intelepacs:0ead90e02e5e&lt;/a&gt;  ldegruchy   PACS-4-17-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-104083&quot; title=&quot;DicomEvidence initialize partition actioned on each DMS starting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-104083&quot;&gt;&lt;del&gt;IP-104083&lt;/del&gt;&lt;/a&gt; fix: Refactor DicomMasterMigrationTask to only mark state_info for PARTIONED once.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/5a5243591bb3&quot; target=&quot;_blank&quot;&gt;intelepacs:5a5243591bb3&lt;/a&gt;  ldegruchy   PACS-4-18-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-104083&quot; title=&quot;DicomEvidence initialize partition actioned on each DMS starting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-104083&quot;&gt;&lt;del&gt;IP-104083&lt;/del&gt;&lt;/a&gt; fix: merge from PACS-4-17-1&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/6ceeb034603f&quot; target=&quot;_blank&quot;&gt;intelepacs:6ceeb034603f&lt;/a&gt;  ldegruchy   trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-104083&quot; title=&quot;DicomEvidence initialize partition actioned on each DMS starting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-104083&quot;&gt;&lt;del&gt;IP-104083&lt;/del&gt;&lt;/a&gt; fix: merge from PACS-4-18-1&lt;/p&gt;</comment>
                            <comment id="527563" author="luke.degruchy" created="Fri, 10 May 2019 14:33:28 -0400"  >&lt;p&gt;Refactor DicomMasterMigrationTask to segregate partitioning code from patching code.&lt;/p&gt;

&lt;p&gt;Fix signature and implementation of dropPartition()&lt;/p&gt;</comment>
                            <comment id="528421" author="dvu" created="Fri, 17 May 2019 11:19:29 -0400"  >&lt;p&gt; Included in PACS-4-17-1-R19 (atlas 1.15.P41)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="51839" name="DicomMasterService-4.17.1.P202-ims99.noarch.rpm" size="2795705" author="ldegruchy" created="Wed, 8 May 2019 08:41:02 -0400"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_13901" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Code Committed</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14502"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;h4&gt;&lt;a name=&quot;RPMVersion&quot;&gt;&lt;/a&gt;RPM Version&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ISPClient%3A%3Cclientcode%3E&quot;&gt;&lt;/a&gt;ISP - Client : &lt;a href=&quot;https://inteleradprod.service-now.com/nav_to.do?uri=textsearch.do?sysparm_search=xxxx&quot; target=&quot;_blank&quot;&gt;xxxx&lt;/a&gt; - &amp;lt;client code&amp;gt;&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ClinicalImpact%3A&quot;&gt;&lt;/a&gt;Clinical Impact:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce%3A&quot;&gt;&lt;/a&gt;Minimal steps to reproduce:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour%3A&quot;&gt;&lt;/a&gt;Expected behaviour:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F%3A&quot;&gt;&lt;/a&gt;What happened instead?:&lt;/h4&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12110" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Documentation</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14406"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>IP-95447</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_14002" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Key Roles Affected</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14606"><![CDATA[All]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_14001" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Probability of Reoccurrance</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14603"><![CDATA[Medium]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13135"><![CDATA[DicomMasterService]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzcpdb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12102" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Release Notes</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14407"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13815" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Risk</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14445"><![CDATA[Standard Change]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13501" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Scrum Team</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14112"><![CDATA[Backend Raptors]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="2038">Raptors 2019 - S8</customfieldvalue>
    <customfieldvalue id="2058">Raptors 2019 - S9</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:float">
                        <customfieldname>Story Points</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-104082] Switch DMS toggle back from Postgres to Sybase</title>
                <link>https://jira.intelerad.com/browse/IP-104082</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;h4&gt;&lt;a name=&quot;Background&quot;&gt;&lt;/a&gt;Background&lt;/h4&gt;

&lt;ul&gt;
	&lt;li&gt;As a change in plans, we&apos;ve decided to disable DicomMasterService postgres mode by default in 4-18-1.&lt;/li&gt;
&lt;/ul&gt;


&lt;h4&gt;&lt;a name=&quot;AcceptanceCriteria&quot;&gt;&lt;/a&gt;Acceptance Criteria&lt;/h4&gt;

&lt;ul&gt;
	&lt;li&gt;PACS.cfg.in will have enablePostgresMode as false&lt;/li&gt;
	&lt;li&gt;(It&apos;s possible zero work is required for this) All default automation recipes will have enablePostgresMode as false&lt;/li&gt;
	&lt;li&gt;Create postgres enabled copies of all recipes&lt;/li&gt;
	&lt;li&gt;(Probably need separate task for this) Ensure automation runs all the postgres recipes as well as the Sybase recipes&lt;/li&gt;
&lt;/ul&gt;
</description>
            <key id="153616">IP-104082</key>
            <summary>Switch DMS toggle back from Postgres to Sybase</summary>
                <type id="3" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13918&amp;avatarType=issuetype">Task</type>
                                            <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="ldegruchy">Luke de Gruchy</assignee>
                                    <reporter username="ldegruchy">Luke de Gruchy</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Apr 2019 13:56:05 -0400</created>
                <updated>Tue, 7 May 2019 10:55:31 -0400</updated>
                            <resolved>Tue, 30 Apr 2019 12:50:29 -0400</resolved>
                                    <version>4-18-1</version>
                                    <fixVersion>4-18-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="0">0 minutes</timeoriginalestimate>
                            <timeestimate seconds="0">0 minutes</timeestimate>
                            <timespent seconds="10188">2 hours, 49 minutes</timespent>
                                <comments>
                            <comment id="525927" author="robot-bc-rw" created="Tue, 30 Apr 2019 12:44:39 -0400"  >&lt;p&gt;Released by ldegruchy to master at 2019-04-30 12:44:37 (push 72596):&lt;br/&gt;
  PACS-4-18-1 (fix)        (previous build: PACS-4-18-1-P25)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-18-2-A11)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/bbc8563f2b9c&quot; target=&quot;_blank&quot;&gt;intelepacs:bbc8563f2b9c&lt;/a&gt;  ldegruchy   PACS-4-18-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-104082&quot; title=&quot;Switch DMS toggle back from Postgres to Sybase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-104082&quot;&gt;&lt;del&gt;IP-104082&lt;/del&gt;&lt;/a&gt; fix: Set DMS to Sybase mode by default and introduce automation postgres recipes.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/7ddfb8d7e934&quot; target=&quot;_blank&quot;&gt;intelepacs:7ddfb8d7e934&lt;/a&gt;  ldegruchy   trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-104082&quot; title=&quot;Switch DMS toggle back from Postgres to Sybase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-104082&quot;&gt;&lt;del&gt;IP-104082&lt;/del&gt;&lt;/a&gt; fix: Set DMS to Sybase mode by default and introduce automation postgres recipes.&lt;/p&gt;</comment>
                            <comment id="525929" author="robot-bc-rw" created="Tue, 30 Apr 2019 12:49:24 -0400"  >&lt;p&gt;Released by ldegruchy to master at 2019-04-30 12:49:22 (push 72597):&lt;br/&gt;
  PACS-4-18-1 (fix)        (previous build: PACS-4-18-1-P25)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-18-2-A11)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/083c5f856a68&quot; target=&quot;_blank&quot;&gt;intelepacs:083c5f856a68&lt;/a&gt;  ldegruchy   PACS-4-18-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-104082&quot; title=&quot;Switch DMS toggle back from Postgres to Sybase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-104082&quot;&gt;&lt;del&gt;IP-104082&lt;/del&gt;&lt;/a&gt; fix: Forgot to rename recipes within recipe files.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/3556b9455384&quot; target=&quot;_blank&quot;&gt;intelepacs:3556b9455384&lt;/a&gt;  ldegruchy   trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-104082&quot; title=&quot;Switch DMS toggle back from Postgres to Sybase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-104082&quot;&gt;&lt;del&gt;IP-104082&lt;/del&gt;&lt;/a&gt; fix: Forgot to rename recipes within recipe files.&lt;/p&gt;</comment>
                            <comment id="525930" author="luke.degruchy" created="Tue, 30 Apr 2019 12:50:29 -0400"  >&lt;ul&gt;
	&lt;li&gt;DMS reverted to Sybase mode&lt;/li&gt;
	&lt;li&gt;Created modified copies of all automation recipes with postgres enabled&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="526498" author="luke.degruchy" created="Fri, 3 May 2019 15:55:42 -0400"  >&lt;p&gt;Not sure how to do this but we need to indicate that 4-18-1 DMS will be in Sybase mode, not postgres mode.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="153782">IP-104149</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_13901" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Code Committed</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14502"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;h4&gt;&lt;a name=&quot;RPMVersion&quot;&gt;&lt;/a&gt;RPM Version&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ISPClient%3A%3Cclientcode%3E&quot;&gt;&lt;/a&gt;ISP - Client : &lt;a href=&quot;https://inteleradprod.service-now.com/nav_to.do?uri=textsearch.do?sysparm_search=xxxx&quot; target=&quot;_blank&quot;&gt;xxxx&lt;/a&gt; - &amp;lt;client code&amp;gt;&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ClinicalImpact%3A&quot;&gt;&lt;/a&gt;Clinical Impact:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce%3A&quot;&gt;&lt;/a&gt;Minimal steps to reproduce:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour%3A&quot;&gt;&lt;/a&gt;Expected behaviour:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F%3A&quot;&gt;&lt;/a&gt;What happened instead?:&lt;/h4&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12110" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Documentation</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14406"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>IP-90140</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_14002" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Key Roles Affected</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14606"><![CDATA[All]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_14001" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Probability of Reoccurrance</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14603"><![CDATA[Medium]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13207"><![CDATA[IntegrationTesting]]></customfieldvalue>
    <customfieldvalue key="13304"><![CDATA[PACSConfigurator]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzcpc7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12102" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Release Notes</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14407"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13815" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Risk</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14445"><![CDATA[Standard Change]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13501" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Scrum Team</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14112"><![CDATA[Backend Raptors]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="2038">Raptors 2019 - S8</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:float">
                        <customfieldname>Story Points</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-104056] LDS: NPE in VERSION1 after interruption</title>
                <link>https://jira.intelerad.com/browse/IP-104056</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;h4&gt;&lt;a name=&quot;RPMVersion&quot;&gt;&lt;/a&gt;RPM Version&lt;/h4&gt;

&lt;p&gt;LocalDicomService-4.14.1.P500-ims01.src.rpm&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;ISPClient%3ASER&quot;&gt;&lt;/a&gt;ISP - Client : SER&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ClinicalImpact%3A&quot;&gt;&lt;/a&gt;Clinical Impact:&lt;/h4&gt;

&lt;p&gt;If image ingestions is interrupted at VERSION1, the incoming files get stuck.&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce%3A&quot;&gt;&lt;/a&gt;Minimal steps to reproduce:&lt;/h4&gt;
&lt;ol&gt;
	&lt;li&gt;Set LDS to stop at DICOMIMAGE &lt;span class=&quot;error&quot;&gt;&amp;#91;LocalDicomService.cfg stopIncomingFileProcessingAtStatus key&amp;#93;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;Send an image to the PACS&lt;/li&gt;
	&lt;li&gt;Manually delete the version 1 folder.&lt;/li&gt;
	&lt;li&gt;Move the incoming files rows back to VERSION1&lt;/li&gt;
&lt;/ol&gt;


&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour%3A&quot;&gt;&lt;/a&gt;Expected behaviour:&lt;/h4&gt;

&lt;p&gt;LDS should regenerate the version 1 folder and continue ingestion&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F%3A&quot;&gt;&lt;/a&gt;What happened instead?:&lt;/h4&gt;

&lt;p&gt;LDS got the following exception:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.NullPointerException
	at com.intelerad.localdicomservice.incomingfiles.IngestVersion1.process(IngestVersion1.java:50)
	at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.processBatch(IncomingFileWorker.java:808)
	at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.access$000(IncomingFileWorker.java:51)
	at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker$2.call(IncomingFileWorker.java:777)
	at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker$2.call(IncomingFileWorker.java:773)
	at com.intelerad.localdicomservice.databasequeues.LocalDicomDatabaseUtil.makeCall(LocalDicomDatabaseUtil.java:34)
	at com.intelerad.localdicomservice.databasequeues.LocalDicomDatabaseUtil.access$000(LocalDicomDatabaseUtil.java:20)
	at com.intelerad.localdicomservice.databasequeues.LocalDicomDatabaseUtil$1.callHandlingTx(LocalDicomDatabaseUtil.java:53)
	at com.intelerad.localdicomservice.databasequeues.LocalDicomAbstractDatabaseCallable.call(LocalDicomAbstractDatabaseCallable.java:69)
	at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.processBatchInTx(IncomingFileWorker.java:792)
	at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.doBatch(IncomingFileWorker.java:678)
	at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.doSeries(IncomingFileWorker.java:598)
	at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.processSeries(IncomingFileWorker.java:295)
	at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.callDoSeriesGroupBySeries(IncomingFileWorker.java:267)
	at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.callWithStudyLocked(IncomingFileWorker.java:237)
	at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.call(IncomingFileWorker.java:168)
	at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.call(IncomingFileWorker.java:51)
	at com.intelerad.localdicomservice.databasequeues.LDSDatabaseQueue$CallableWrapper.performCall(LDSDatabaseQueue.java:148)
	at com.intelerad.localdicomservice.databasequeues.LDSDatabaseQueue$CallableWrapper.monitoredCall(LDSDatabaseQueue.java:129)
	at com.intelerad.localdicomservice.databasequeues.LDSDatabaseQueue$CallableWrapper.call(LDSDatabaseQueue.java:107)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at com.intelerad.tools.lib.concurrent.DefaultComparableFuture.run(DefaultComparableFuture.java:89)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at com.intelerad.db.lib.CleanupThreadFactory$1.run(CleanupThreadFactory.java:38)
	at com.intelerad.tools.lib.scheduling.LoggingThreadFactory.runCommand(LoggingThreadFactory.java:134)
	at com.intelerad.tools.lib.scheduling.LoggingThreadFactory.access$000(LoggingThreadFactory.java:19)
	at com.intelerad.tools.lib.scheduling.LoggingThreadFactory$2.run(LoggingThreadFactory.java:98)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
            <key id="153551">IP-104056</key>
            <summary>LDS: NPE in VERSION1 after interruption</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                            <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="glaza">George Laza</assignee>
                                    <reporter username="glaza">George Laza</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Apr 2019 13:17:14 -0400</created>
                <updated>Mon, 13 May 2019 09:44:29 -0400</updated>
                            <resolved>Wed, 1 May 2019 15:20:45 -0400</resolved>
                                    <version>4-14-1</version>
                                    <fixVersion>4-14-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <timeoriginalestimate seconds="0">0 minutes</timeoriginalestimate>
                                    <timespent seconds="28800">1 day</timespent>
                                <comments>
                            <comment id="525587" author="glaza" created="Fri, 26 Apr 2019 13:59:36 -0400"  >&lt;p&gt;Branch: &lt;a href=&quot;https://rnd-kallithea.intelerad.com/kallithea/intelepacs/master-pirates/changelog?branch=PACS-4-18-2-glaza-lds-npe&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;PACS-4-18-2-glaza-lds-npe&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="525657" author="kjette" created="Mon, 29 Apr 2019 08:18:24 -0400"  >&lt;p&gt;&lt;a href=&quot;https://jira.intelerad.com/secure/ViewProfile.jspa?name=glaza&quot; class=&quot;user-hover&quot; rel=&quot;glaza&quot;&gt;George Laza&lt;/a&gt; Does this require release notes?&lt;/p&gt;</comment>
                            <comment id="526089" author="bleung" created="Wed, 1 May 2019 11:22:00 -0400"  >&lt;h3&gt;&lt;a name=&quot;Testing&quot;&gt;&lt;/a&gt;Testing&lt;/h3&gt;

&lt;h4&gt;&lt;a name=&quot;Reproduction&quot;&gt;&lt;/a&gt;Reproduction&lt;/h4&gt;

&lt;ul&gt;
	&lt;li&gt;Set LocalDicomService.cfg key &lt;em&gt;stopIncomingFileProcessingAtStatus&lt;/em&gt; to DICOMIMAGE.&lt;/li&gt;
	&lt;li&gt;Sent in image, verified status in incoming_files database.
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;(cmdline@mst1) [localdicom] &amp;gt; select * from incoming_files where study_uid = &apos;1.2.276.0.7230010.3.1.2.346817280.26980.1556718673.627453&apos;;
-[ RECORD 1 ]-------------+-------------------------------------------------------------------------------------------------------------------------
incoming_files_id         | 43
study_uid                 | 1.2.276.0.7230010.3.1.2.346817280.26980.1556718673.627453
series_uid                | 1.2.276.0.7230010.3.1.3.346817280.26980.1556718673.627452
sop_uid                   | 1.2.276.0.7230010.3.1.4.346817280.26980.1556718673.627451
patient_id                | BLPID29154
acc_num                   | BLACC27120
image_path                | /usr/local/PACS/images/tmp/incoming_files/20190501/0951/1.2.276.0.7230010.3.1.4.346817280.26980.1556718673.627451/1
sender_ae_title           | TESTAE29
receiver_ae_title         | MST1
status                    | DICOMIMAGE
j2c_file_created          | f
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Delete the v1 folder on disk
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[admin@mst1] {/usr/local/PACS/images/20190501/1.2.276.0.7230010.3.1.2.346817280.26980.1556718673.627453} ll
total 20
drwxrwxr-x. 3 admin admin 4096 May  1 10:15 ./
drwxrwxrwx. 5 admin admin 4096 May  1 09:51 ../
lrwxrwxrwx. 1 admin admin   61 May  1 10:15 1.2.276.0.7230010.3.1.3.346817280.26980.1556718673.627452 -&amp;gt; 1.2.276.0.7230010.3.1.3.346817280.26980.1556718673.627452-v/2/
drwxrwxr-x. 4 admin admin 4096 May  1 10:15 1.2.276.0.7230010.3.1.3.346817280.26980.1556718673.627452-v/
[admin@mst1] {/usr/local/PACS/images/20190501/1.2.276.0.7230010.3.1.2.346817280.26980.1556718673.627453} cd 1.2.276.0.7230010.3.1.3.346817280.26980.1556718673.627452-v/
[admin@mst1] {/usr/local/PACS/images/20190501/1.2.276.0.7230010.3.1.2.346817280.26980.1556718673.627453/1.2.276.0.7230010.3.1.3.346817280.26980.1556718673.627452-v} ll
total 16
drwxrwxr-x. 4 admin admin 4096 May  1 10:15 ./
drwxrwxr-x. 3 admin admin 4096 May  1 10:15 ../
drwxrwxr-x. 2 admin admin 4096 May  1 10:57 0/
drwxrwxr-x. 2 admin admin 4096 May  1 10:57 2/
[admin@mst1] {/usr/local/PACS/images/20190501/1.2.276.0.7230010.3.1.2.346817280.26980.1556718673.627453/1.2.276.0.7230010.3.1.3.346817280.26980.1556718673.627452-v} rm -rf 1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Rollback status to &lt;em&gt;VERSION1&lt;/em&gt; and oberserve errors. IFW logs and database.
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;(cmdline@mst1) [localdicom] &amp;gt; select * from incoming_files where study_uid = &apos;1.2.276.0.7230010.3.1.2.346817280.26980.1556718673.627453&apos;;
-[ RECORD 1 ]-------------+-------------------------------------------------------------------------------------------------------------------------
incoming_files_id         | 43
study_uid                 | 1.2.276.0.7230010.3.1.2.346817280.26980.1556718673.627453
series_uid                | 1.2.276.0.7230010.3.1.3.346817280.26980.1556718673.627452
sop_uid                   | 1.2.276.0.7230010.3.1.4.346817280.26980.1556718673.627451
patient_id                | BLPID29154
acc_num                   | BLACC27120
image_path                | /usr/local/PACS/images/tmp/incoming_files/20190501/0951/1.2.276.0.7230010.3.1.4.346817280.26980.1556718673.627451/1
sender_ae_title           | TESTAE29
receiver_ae_title         | MST1
status                    | VERSION1
j2c_file_created          | f
association_time_as_epoch | 1556718673000
timestamp_inserted        | 2019-05-01 09:51:14.178875-04
timestamp_updated         | 2019-05-01 09:55:24.604-04
last_failure              | null                                                                                                                    
                          | java.lang.NullPointerException                                                                                          
                          |         at com.intelerad.localdicomservice.incomingfiles.IngestVersion1.process(IngestVersion1.java:50)                 
                          |         at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.processBatch(IncomingFileWorker.java:832)   
                          |         at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.access$000(IncomingFileWorker.java:54)      
                          |         at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker$2.call(IncomingFileWorker.java:791)         
                          |         at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker$2.call(IncomingFileWorker.java:787)         
                          |         at com.intelerad.localdicomservice.databasequeues.LocalDicomDatabaseUtil.makeCall(LocalDicomDatabaseUtil.java:34
                          |         at com.intelerad.localdicomservice.databasequeues.LocalDicomDatabaseUtil.access$000(LocalDicomDatabaseUtil.java:
                          |         at com.intelerad.localdicomservice.databasequeues.LocalDicomDatabaseUtil$1.callHandlingTx(LocalDicomDatabaseUtil
                          |         at com.intelerad.localdicomservice.databasequeues.LocalDicomAbstractDatabaseCallable.call(LocalDicomAbstractData
                          |         at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.processBatchInTx(IncomingFileWorker.java:806
                          |         at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.doBatch(IncomingFileWorker.java:692)        
                          |         at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.doSeries(IncomingFileWorker.java:612)       
                          |         at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.processSeries(IncomingFileWorker.java:309)  
                          |         at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.callDoSeriesGroupBySeries(IncomingFileWorker
                          |         at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.callWithStudyLocked(IncomingFileWorker.java:
                          |         at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.call(IncomingFileWorker.java:182)           
                          |         at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.call(IncomingFileWorker.java:54)            
                          |         at com.intelerad.localdicomservice.databasequeues.LDSDatabaseQueue$CallableWrapper.performCall(LDSDatabaseQueue.
                          |         at com.intelerad.localdicomservice.databasequeues.LDSDatabaseQueue$CallableWrapper.monitoredCall(LDSDatabaseQueu
                          |         at com.intelerad.localdicomservice.databasequeues.LDSDatabaseQueue$CallableWrapper.call(LDSDatabaseQueue.java:10
                          |         at java.util.concurrent.FutureTask.run(FutureTask.java:266)                                                     
                          |         at com.intelerad.tools.lib.concurrent.DefaultComparableFuture.run(DefaultComparableFuture.java:89)              
                          |         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)                              
                          |         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)                              
                          |         at com.intelerad.db.lib.CleanupThreadFactory$1.run(CleanupThreadFactory.java:38)                                
                          |         at com.intelerad.tools.lib.scheduling.LoggingThreadFactory.runCommand(LoggingThreadFactory.java:134)            
                          |         at com.intelerad.tools.lib.scheduling.LoggingThreadFactory.access$000(LoggingThreadFactory.java:19)             
                          |         at com.intelerad.tools.lib.scheduling.LoggingThreadFactory$2.run(LoggingThreadFactory.java:98)                  
                          |         at java.lang.Thread.run(Thread.java:748)                                                                        
                          | 
state_change_failures     | 5
retry_after               | 2019-05-01 09:58:04.604-04
is_reintroduction         | f
restore_dest_ae_title     | 
should_convert_to_j2c     | t
conflict_study_uid        | NULL
is_discarded              | f
has_alerted_ingestion     | t
sop_class_uid             | 1.2.840.10008.5.1.4.1.1.1.2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;IFW logs&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2019-05-01 09:55:24.603 LDS_9 mst1.intelerad.com (PROFILE)] --&amp;gt; Start: 1.2.276.0.7230010.3.1.3.346817280.26980.1556718673.627452 (timer VERSION1)
[2019-05-01 09:55:24.603 LDS_9 mst1.intelerad.com (WARNING)] rolling back database operation [processBatch]
[2019-05-01 09:55:24.603 LDS_9 mst1.intelerad.com (PROFILE)] --&amp;gt; Start: IFW (timer IFW)
[2019-05-01 09:55:24.604 LDS_9 mst1.intelerad.com] 
*************************
ERROR: Error processing incoming file ID [43]; will retry after waiting at least 160.0 seconds
*************************
[2019-05-01 09:55:24.604 LDS_9 mst1.intelerad.com] Stack trace:
java.lang.NullPointerException
        at com.intelerad.localdicomservice.incomingfiles.IngestVersion1.process(IngestVersion1.java:50)
        at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.processBatch(IncomingFileWorker.java:832)
        at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.access$000(IncomingFileWorker.java:54)
        at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker$2.call(IncomingFileWorker.java:791)
        at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker$2.call(IncomingFileWorker.java:787)
        at com.intelerad.localdicomservice.databasequeues.LocalDicomDatabaseUtil.makeCall(LocalDicomDatabaseUtil.java:34)
        at com.intelerad.localdicomservice.databasequeues.LocalDicomDatabaseUtil.access$000(LocalDicomDatabaseUtil.java:20)
        at com.intelerad.localdicomservice.databasequeues.LocalDicomDatabaseUtil$1.callHandlingTx(LocalDicomDatabaseUtil.java:53)
        at com.intelerad.localdicomservice.databasequeues.LocalDicomAbstractDatabaseCallable.call(LocalDicomAbstractDatabaseCallable.java:71)
        at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.processBatchInTx(IncomingFileWorker.java:806)
        at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.doBatch(IncomingFileWorker.java:692)
        at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.doSeries(IncomingFileWorker.java:612)
        at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.processSeries(IncomingFileWorker.java:309)
        at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.callDoSeriesGroupBySeries(IncomingFileWorker.java:281)
        at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.callWithStudyLocked(IncomingFileWorker.java:251)
        at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.call(IncomingFileWorker.java:182)
        at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.call(IncomingFileWorker.java:54)
        at com.intelerad.localdicomservice.databasequeues.LDSDatabaseQueue$CallableWrapper.performCall(LDSDatabaseQueue.java:148)
        at com.intelerad.localdicomservice.databasequeues.LDSDatabaseQueue$CallableWrapper.monitoredCall(LDSDatabaseQueue.java:129)
        at com.intelerad.localdicomservice.databasequeues.LDSDatabaseQueue$CallableWrapper.call(LDSDatabaseQueue.java:107)
        at java.util.concurrent.FutureTask.run(FutureTask.java:266)
        at com.intelerad.tools.lib.concurrent.DefaultComparableFuture.run(DefaultComparableFuture.java:89)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
        at com.intelerad.db.lib.CleanupThreadFactory$1.run(CleanupThreadFactory.java:38)
        at com.intelerad.tools.lib.scheduling.LoggingThreadFactory.runCommand(LoggingThreadFactory.java:134)
        at com.intelerad.tools.lib.scheduling.LoggingThreadFactory.access$000(LoggingThreadFactory.java:19)
        at com.intelerad.tools.lib.scheduling.LoggingThreadFactory$2.run(LoggingThreadFactory.java:98)
        at java.lang.Thread.run(Thread.java:748)

[2019-05-01 09:55:24.606 LDS_9 mst1.intelerad.com (PROFILE)] &amp;lt;-- Elapsed: 0.003 sec: IFW (timer IFW)
[2019-05-01 09:55:24.606 LDS_9 mst1.intelerad.com] 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;h4&gt;&lt;a name=&quot;Validation&quot;&gt;&lt;/a&gt;Validation&lt;/h4&gt;

&lt;ul&gt;
	&lt;li&gt;State moves to &lt;em&gt;DICOMIMAGE&lt;/em&gt; and is able to get past &lt;em&gt;VERSION1&lt;/em&gt; state. last_failure column remains.
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;(cmdline@mst1) [localdicom] &amp;gt; select * from incoming_files where study_uid = &apos;1.2.276.0.7230010.3.1.2.346817280.26980.1556718673.627453&apos;;
-[ RECORD 1 ]-------------+-------------------------------------------------------------------------------------------------------------------------
incoming_files_id         | 43
study_uid                 | 1.2.276.0.7230010.3.1.2.346817280.26980.1556718673.627453
series_uid                | 1.2.276.0.7230010.3.1.3.346817280.26980.1556718673.627452
sop_uid                   | 1.2.276.0.7230010.3.1.4.346817280.26980.1556718673.627451
patient_id                | BLPID29154
acc_num                   | BLACC27120
image_path                | /usr/local/PACS/images/tmp/incoming_files/20190501/0951/1.2.276.0.7230010.3.1.4.346817280.26980.1556718673.627451/1
sender_ae_title           | TESTAE29
receiver_ae_title         | MST1
status                    | DICOMIMAGE
j2c_file_created          | f
association_time_as_epoch | 1556718673000
timestamp_inserted        | 2019-05-01 09:51:14.178875-04
timestamp_updated         | 2019-05-01 10:15:15.169-04
last_failure              | null                                                                                                                    
                          | java.lang.NullPointerException                                                                                          
                          |         at com.intelerad.localdicomservice.incomingfiles.IngestVersion1.process(IngestVersion1.java:50)                 
                          |         at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.processBatch(IncomingFileWorker.java:832)   
                          |         at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.access$000(IncomingFileWorker.java:54)      
                          |         at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker$2.call(IncomingFileWorker.java:791)         
                          |         at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker$2.call(IncomingFileWorker.java:787)         
                          |         at com.intelerad.localdicomservice.databasequeues.LocalDicomDatabaseUtil.makeCall(LocalDicomDatabaseUtil.java:34
                          |         at com.intelerad.localdicomservice.databasequeues.LocalDicomDatabaseUtil.access$000(LocalDicomDatabaseUtil.java:
                          |         at com.intelerad.localdicomservice.databasequeues.LocalDicomDatabaseUtil$1.callHandlingTx(LocalDicomDatabaseUtil
                          |         at com.intelerad.localdicomservice.databasequeues.LocalDicomAbstractDatabaseCallable.call(LocalDicomAbstractData
                          |         at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.processBatchInTx(IncomingFileWorker.java:806
                          |         at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.doBatch(IncomingFileWorker.java:692)        
                          |         at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.doSeries(IncomingFileWorker.java:612)       
                          |         at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.processSeries(IncomingFileWorker.java:309)  
                          |         at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.callDoSeriesGroupBySeries(IncomingFileWorker
                          |         at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.callWithStudyLocked(IncomingFileWorker.java:
                          |         at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.call(IncomingFileWorker.java:182)           
                          |         at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.call(IncomingFileWorker.java:54)            
                          |         at com.intelerad.localdicomservice.databasequeues.LDSDatabaseQueue$CallableWrapper.performCall(LDSDatabaseQueue.
                          |         at com.intelerad.localdicomservice.databasequeues.LDSDatabaseQueue$CallableWrapper.monitoredCall(LDSDatabaseQueu
                          |         at com.intelerad.localdicomservice.databasequeues.LDSDatabaseQueue$CallableWrapper.call(LDSDatabaseQueue.java:10
                          |         at java.util.concurrent.FutureTask.run(FutureTask.java:266)                                                     
                          |         at com.intelerad.tools.lib.concurrent.DefaultComparableFuture.run(DefaultComparableFuture.java:89)              
                          |         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)                              
                          |         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)                              
                          |         at com.intelerad.db.lib.CleanupThreadFactory$1.run(CleanupThreadFactory.java:38)                                
                          |         at com.intelerad.tools.lib.scheduling.LoggingThreadFactory.runCommand(LoggingThreadFactory.java:134)            
                          |         at com.intelerad.tools.lib.scheduling.LoggingThreadFactory.access$000(LoggingThreadFactory.java:19)             
                          |         at com.intelerad.tools.lib.scheduling.LoggingThreadFactory$2.run(LoggingThreadFactory.java:98)                  
                          |         at java.lang.Thread.run(Thread.java:748)                                                                        
                          | 
state_change_failures     | 2
retry_after               | 2019-05-01 10:12:29.795-04
is_reintroduction         | f
restore_dest_ae_title     | 
should_convert_to_j2c     | t
conflict_study_uid        | NULL
is_discarded              | f
has_alerted_ingestion     | t
sop_class_uid             | 1.2.840.10008.5.1.4.1.1.1.2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;when i look into the filesystem, the version has been incremented to 2.
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[admin@mst1] {/usr/local/PACS/images/20190501/1.2.276.0.7230010.3.1.2.346817280.26980.1556718673.627453/1.2.276.0.7230010.3.1.3.346817280.26980.1556718673.627452-v} ll
total 16
drwxrwxr-x. 4 admin admin 4096 May  1 10:59 ./
drwxrwxr-x. 3 admin admin 4096 May  1 10:15 ../
drwxrwxr-x. 2 admin admin 4096 May  1 10:59 0/
drwxrwxr-x. 2 admin admin 4096 May  1 10:59 2/
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;h4&gt;&lt;a name=&quot;OtherTests&quot;&gt;&lt;/a&gt;Other Tests&lt;/h4&gt;

&lt;ul&gt;
	&lt;li&gt;Rolling back to all previous states completes as expected.
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;(cmdline@mst1) [localdicom] &amp;gt; update incoming_files set status = &apos;PENDING&apos;;
UPDATE 1

(cmdline@mst1) [localdicom] &amp;gt; update incoming_files set status = &apos;IN_PROGRESS&apos;;
UPDATE 1

(cmdline@mst1) [localdicom] &amp;gt; update incoming_files set status = &apos;VALIDATE&apos;;
UPDATE 1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Rolling back to &lt;em&gt;VERSION1&lt;/em&gt; and deleting the v-0 folder works as well
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;(cmdline@mst1) [localdicom] &amp;gt; update incoming_files set status = &apos;VERSION0&apos;;
UPDATE 1

[admin@mst1] {/usr/local/PACS/images/20190501/1.2.276.0.7230010.3.1.2.346817280.26980.1556718673.627453/1.2.276.0.7230010.3.1.3.346817280.26980.1556718673.627452-v} rm -rf 0
[admin@mst1] {/usr/local/PACS/images/20190501/1.2.276.0.7230010.3.1.2.346817280.26980.1556718673.627453/1.2.276.0.7230010.3.1.3.346817280.26980.1556718673.627452-v} ll
total 16
drwxrwxr-x. 4 admin admin 4096 May  1 10:59 ./
drwxrwxr-x. 3 admin admin 4096 May  1 10:15 ../
drwxrwxr-x. 2 admin admin 4096 May  1 10:59 0/
drwxrwxr-x. 2 admin admin 4096 May  1 10:59 2/
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Validated.&lt;/font&gt;&lt;/p&gt;</comment>
                            <comment id="526156" author="robot-bc-rw" created="Wed, 1 May 2019 15:09:12 -0400"  >&lt;p&gt;Released by glaza to master at 2019-05-01 15:09:11 (push 72620):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-18-2-A11)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/e0fb507227f9&quot; target=&quot;_blank&quot;&gt;intelepacs:e0fb507227f9&lt;/a&gt;  glaza       trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-104056&quot; title=&quot;LDS: NPE in VERSION1 after interruption&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-104056&quot;&gt;&lt;del&gt;IP-104056&lt;/del&gt;&lt;/a&gt; fix: Use StudyUID from IFW instead of the DB&lt;/p&gt;</comment>
                            <comment id="526159" author="robot-bc-rw" created="Wed, 1 May 2019 15:14:08 -0400"  >&lt;p&gt;Released by glaza to master at 2019-05-01 15:14:07 (push 72621):&lt;br/&gt;
  PACS-4-18-1 (fix)        (previous build: PACS-4-18-1-P26)&lt;br/&gt;
  trunk      (dummy)      (previous build: PACS-4-18-2-A11)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/05ea602b6b15&quot; target=&quot;_blank&quot;&gt;intelepacs:05ea602b6b15&lt;/a&gt;  glaza       PACS-4-18-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-104056&quot; title=&quot;LDS: NPE in VERSION1 after interruption&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-104056&quot;&gt;&lt;del&gt;IP-104056&lt;/del&gt;&lt;/a&gt; fix: Use StudyUID from IFW instead of the DB&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/d078cf6737e8&quot; target=&quot;_blank&quot;&gt;intelepacs:d078cf6737e8&lt;/a&gt;  glaza       trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-104056&quot; title=&quot;LDS: NPE in VERSION1 after interruption&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-104056&quot;&gt;&lt;del&gt;IP-104056&lt;/del&gt;&lt;/a&gt; dummy: dummy merge from PACS-4-18-1&lt;/p&gt;</comment>
                            <comment id="526161" author="robot-bc-rw" created="Wed, 1 May 2019 15:15:17 -0400"  >&lt;p&gt;Released by glaza to master at 2019-05-01 15:15:15 (push 72622):&lt;br/&gt;
  PACS-4-17-1 (fix)        (previous build: PACS-4-17-1-P198)&lt;br/&gt;
  PACS-4-18-1 (dummy)      (previous build: PACS-4-18-1-P26)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/11c73ef9d111&quot; target=&quot;_blank&quot;&gt;intelepacs:11c73ef9d111&lt;/a&gt;  glaza       PACS-4-17-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-104056&quot; title=&quot;LDS: NPE in VERSION1 after interruption&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-104056&quot;&gt;&lt;del&gt;IP-104056&lt;/del&gt;&lt;/a&gt; fix: Use StudyUID from IFW instead of the DB&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/e24cbf2daddd&quot; target=&quot;_blank&quot;&gt;intelepacs:e24cbf2daddd&lt;/a&gt;  glaza       PACS-4-18-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-104056&quot; title=&quot;LDS: NPE in VERSION1 after interruption&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-104056&quot;&gt;&lt;del&gt;IP-104056&lt;/del&gt;&lt;/a&gt; dummy: dummy merge from PACS-4-17-1&lt;/p&gt;</comment>
                            <comment id="526162" author="robot-bc-rw" created="Wed, 1 May 2019 15:16:01 -0400"  >&lt;p&gt;Released by glaza to master at 2019-05-01 15:16:00 (push 72623):&lt;br/&gt;
  PACS-4-16-1 (fix)        (previous build: PACS-4-16-1-P371)&lt;br/&gt;
  PACS-4-17-1 (dummy)      (previous build: PACS-4-17-1-P198)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/395182227efb&quot; target=&quot;_blank&quot;&gt;intelepacs:395182227efb&lt;/a&gt;  glaza       PACS-4-16-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-104056&quot; title=&quot;LDS: NPE in VERSION1 after interruption&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-104056&quot;&gt;&lt;del&gt;IP-104056&lt;/del&gt;&lt;/a&gt; fix: Use StudyUID from IFW instead of the DB&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/6258c7af46f0&quot; target=&quot;_blank&quot;&gt;intelepacs:6258c7af46f0&lt;/a&gt;  glaza       PACS-4-17-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-104056&quot; title=&quot;LDS: NPE in VERSION1 after interruption&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-104056&quot;&gt;&lt;del&gt;IP-104056&lt;/del&gt;&lt;/a&gt; dummy: dummy merge from PACS-4-16-1&lt;/p&gt;</comment>
                            <comment id="526163" author="robot-bc-rw" created="Wed, 1 May 2019 15:16:49 -0400"  >&lt;p&gt;Released by glaza to master at 2019-05-01 15:16:47 (push 72624):&lt;br/&gt;
  PACS-4-15-1 (fix)        (previous build: PACS-4-15-1-P248)&lt;br/&gt;
  PACS-4-16-1 (dummy)      (previous build: PACS-4-16-1-P371)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/c80dd4c6c892&quot; target=&quot;_blank&quot;&gt;intelepacs:c80dd4c6c892&lt;/a&gt;  glaza       PACS-4-15-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-104056&quot; title=&quot;LDS: NPE in VERSION1 after interruption&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-104056&quot;&gt;&lt;del&gt;IP-104056&lt;/del&gt;&lt;/a&gt; fix: Use StudyUID from IFW instead of the DB&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/a012d128e061&quot; target=&quot;_blank&quot;&gt;intelepacs:a012d128e061&lt;/a&gt;  glaza       PACS-4-16-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-104056&quot; title=&quot;LDS: NPE in VERSION1 after interruption&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-104056&quot;&gt;&lt;del&gt;IP-104056&lt;/del&gt;&lt;/a&gt; dummy: dummy merge from PACS-4-15-1&lt;/p&gt;</comment>
                            <comment id="526164" author="robot-bc-rw" created="Wed, 1 May 2019 15:18:04 -0400"  >&lt;p&gt;Released by glaza to master at 2019-05-01 15:18:03 (push 72625):&lt;br/&gt;
  PACS-4-14-1 (fix)        (previous build: PACS-4-14-1-P505)&lt;br/&gt;
  PACS-4-15-1 (dummy)      (previous build: PACS-4-15-1-P248)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/59fb934d401a&quot; target=&quot;_blank&quot;&gt;intelepacs:59fb934d401a&lt;/a&gt;  glaza       PACS-4-14-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-104056&quot; title=&quot;LDS: NPE in VERSION1 after interruption&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-104056&quot;&gt;&lt;del&gt;IP-104056&lt;/del&gt;&lt;/a&gt; fix: Use StudyUID from IFW instead of the DB&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/67338cd99fa3&quot; target=&quot;_blank&quot;&gt;intelepacs:67338cd99fa3&lt;/a&gt;  glaza       PACS-4-15-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-104056&quot; title=&quot;LDS: NPE in VERSION1 after interruption&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-104056&quot;&gt;&lt;del&gt;IP-104056&lt;/del&gt;&lt;/a&gt; dummy: dummy merge from PACS-4-14-1&lt;/p&gt;</comment>
                            <comment id="526166" author="glaza" created="Wed, 1 May 2019 15:20:45 -0400"  >&lt;h4&gt;&lt;a name=&quot;Descriptionofthesolution&quot;&gt;&lt;/a&gt;Description of the solution&lt;/h4&gt;

&lt;p&gt;When healing the VERSION1 after an interruption, use the StudyUID that is already loaded instead of the one from the database, which may not be present.&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Testsexecuted&quot;&gt;&lt;/a&gt;Tests executed&lt;/h4&gt;

&lt;p&gt;Listed in the description&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Unittestsaddedormodified&quot;&gt;&lt;/a&gt;Unit tests added or modified&lt;/h4&gt;

&lt;p&gt;None.&lt;/p&gt;</comment>
                            <comment id="526574" author="bleung" created="Mon, 6 May 2019 11:08:36 -0400"  >&lt;p&gt;Passed Automation &lt;b&gt;Build PACS-4-15-1-P248&lt;/b&gt;.&lt;/p&gt;</comment>
                            <comment id="527111" author="dvu" created="Wed, 8 May 2019 15:33:35 -0400"  >&lt;p&gt;Included in PACS-4-15-1-R44 (atlas 1.13.P113)&lt;/p&gt;</comment>
                            <comment id="527486" author="dvu" created="Fri, 10 May 2019 13:11:39 -0400"  >&lt;p&gt;Included in PACS-4-17-1-R18 (atlas 1.15.P41)&lt;/p&gt;</comment>
                            <comment id="527515" author="dvu" created="Fri, 10 May 2019 13:23:12 -0400"  >&lt;p&gt;Included in PACS-4-16-1-R44 (atlas 1.14.P57)&lt;/p&gt;</comment>
                            <comment id="527710" author="dvu" created="Mon, 13 May 2019 09:44:29 -0400"  >&lt;p&gt;Included in PACS-4-14-1-R62 (atlas 1.10.P46)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10500">
                    <name>Issue split</name>
                                                                <inwardlinks description="split from">
                                        <issuelink>
            <issuekey id="153364">MAINT-9538</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10400">
                    <name>Regression</name>
                                                                <inwardlinks description="is introduced by">
                                        <issuelink>
            <issuekey id="98209">IP-65955</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="51642" name="LocalDicomService-4.14.1.P497-ims99.i386.rpm" size="7953288" author="glaza" created="Fri, 26 Apr 2019 13:56:24 -0400"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12603" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Affected Clients</customfieldname>
                        <customfieldvalues>
                                        <label>IMED</label>
            <label>SER</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[2.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13101" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Client Release Notes</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>If image ingestion is interrupted while applying corrections, it fails to resume because the folder structure was only partially created.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13901" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Code Committed</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14502"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;h4&gt;&lt;a name=&quot;RPMVersion&quot;&gt;&lt;/a&gt;RPM Version&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ISPClient%3A%3Cclientcode%3E&quot;&gt;&lt;/a&gt;ISP - Client : &lt;a href=&quot;https://inteleradprod.service-now.com/nav_to.do?uri=textsearch.do?sysparm_search=xxxx&quot; target=&quot;_blank&quot;&gt;xxxx&lt;/a&gt; - &amp;lt;client code&amp;gt;&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ClinicalImpact%3A&quot;&gt;&lt;/a&gt;Clinical Impact:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce%3A&quot;&gt;&lt;/a&gt;Minimal steps to reproduce:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour%3A&quot;&gt;&lt;/a&gt;Expected behaviour:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F%3A&quot;&gt;&lt;/a&gt;What happened instead?:&lt;/h4&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12110" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Documentation</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14406"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>IP-87798</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_14002" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Key Roles Affected</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14606"><![CDATA[All]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_14001" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Probability of Reoccurrance</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14603"><![CDATA[Medium]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13268"><![CDATA[LocalDicomService]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzcqev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12102" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Release Notes</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12017"><![CDATA[Approved]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13815" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Risk</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14445"><![CDATA[Standard Change]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13501" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Scrum Team</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14403"><![CDATA[Backend Pirates]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10801"><![CDATA[CRITICAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="2032">Backend Pirates Sprint 15</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:float">
                        <customfieldname>Story Points</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-103967] Migrate CleanupScripts to Postgres</title>
                <link>https://jira.intelerad.com/browse/IP-103967</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;h4&gt;&lt;a name=&quot;BusinessValue%3A&quot;&gt;&lt;/a&gt;Business Value:&lt;/h4&gt;
&lt;ul&gt;
	&lt;li&gt;Allow to use studyDeleter and ordersWithoutImagesCanceller scripts in Postgres mode on&lt;/li&gt;
&lt;/ul&gt;


&lt;h4&gt;&lt;a name=&quot;Description%3A&quot;&gt;&lt;/a&gt;Description:&lt;/h4&gt;
&lt;ul&gt;
	&lt;li&gt;This JIRA is a consequence of &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103891&quot; title=&quot;DBConfigurator (DicomMaster migration to postgres): DBConfigurator failing to &amp;quot;update&amp;quot; DicomMaster, scripts refer to missing schema files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103891&quot;&gt;&lt;del&gt;IP-103891&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;While DicomMaster DB schema has been removed, those python tests were broken:
	&lt;ul&gt;
		&lt;li&gt;PACS/Scripts/CleanupScripts/python/ims/cleanupscripts/test_common.py&lt;/li&gt;
		&lt;li&gt;PACS/Scripts/CleanupScripts/python/ims/cleanupscripts/test_studydeleterlib.py&lt;/li&gt;
		&lt;li&gt;PACS/Scripts/CleanupScripts/python/ims/cleanupscripts/test_ordercancellerlib.py&lt;br/&gt;
They where renamed to be able to close &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103891&quot; title=&quot;DBConfigurator (DicomMaster migration to postgres): DBConfigurator failing to &amp;quot;update&amp;quot; DicomMaster, scripts refer to missing schema files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103891&quot;&gt;&lt;del&gt;IP-103891&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;They must be reactivated&lt;/li&gt;
&lt;/ul&gt;


&lt;h4&gt;&lt;a name=&quot;AcceptanceCriteria%3A&quot;&gt;&lt;/a&gt;Acceptance Criteria:&lt;/h4&gt;
&lt;ul&gt;
	&lt;li&gt;studyDeleter and  ordersWithoutImagesCanceller work as designed (see &lt;a href=&quot;https://jira.intelerad.com/browse/IP-64851&quot; title=&quot;Need a command-line tool (CLI) to purge orders and images matching certain criterias such as age and organization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-64851&quot;&gt;&lt;del&gt;IP-64851&lt;/del&gt;&lt;/a&gt;)  in Postgres mode&lt;/li&gt;
&lt;/ul&gt;


&lt;h4&gt;&lt;a name=&quot;Notes&quot;&gt;&lt;/a&gt;Notes&lt;/h4&gt;
&lt;ul&gt;
	&lt;li&gt;This is considered blocksGA for DicomMaster Postgres mode on 4-17-1 and 4-18-1&lt;/li&gt;
&lt;/ul&gt;
</description>
            <key id="153275">IP-103967</key>
            <summary>Migrate CleanupScripts to Postgres</summary>
                <type id="7" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13914&amp;avatarType=issuetype">Story</type>
                                            <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="ldegruchy">Luke de Gruchy</assignee>
                                    <reporter username="fhouillon">Francois Houillon</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Apr 2019 14:47:53 -0400</created>
                <updated>Fri, 7 Jun 2019 12:50:26 -0400</updated>
                            <resolved>Wed, 29 May 2019 10:42:03 -0400</resolved>
                                    <version>4-17-1</version>
                                    <fixVersion>4-17-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                    <timeoriginalestimate seconds="0">0 minutes</timeoriginalestimate>
                            <timeestimate seconds="0">0 minutes</timeestimate>
                            <timespent seconds="397800">2 weeks, 3 days, 6 hours, 30 minutes</timespent>
                                <comments>
                            <comment id="527853" author="pzhan" created="Mon, 13 May 2019 16:10:17 -0400"  >&lt;p&gt;Certificate issue in &lt;a href=&quot;https://jira.intelerad.com/browse/MAINT-9578&quot; title=&quot;Python ISFJsonClient Give Certificate Error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAINT-9578&quot;&gt;&lt;del&gt;MAINT-9578&lt;/del&gt;&lt;/a&gt; has been resolved by copying  the directory /opt/intelerad/etc/pki from qa4181mst1.&lt;/p&gt;</comment>
                            <comment id="529032" author="mtavallaei" created="Thu, 23 May 2019 13:45:24 -0400"  >&lt;p&gt;QA is done. The fix works well.&lt;br/&gt;
Four test scenarios have been tested on the fix and they all worked as expected.&lt;br/&gt;
studyDeleter and ordersWithoutImagesCanceller scripts work the same in Sybase and Postgres mode.&lt;/p&gt;

&lt;p&gt;You can find more details here: &lt;a href=&quot;https://docs.google.com/document/d/1VGlPYdr2Vx6CkWYIfbX5jay-uUtI3H_ARuOx-7LsVvo/edit?usp=sharing&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://docs.google.com/document/d/1VGlPYdr2Vx6CkWYIfbX5jay-uUtI3H_ARuOx-7LsVvo/edit?usp=sharing&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="529331" author="pzhan" created="Fri, 24 May 2019 16:29:56 -0400"  >&lt;p&gt;Full scons gives error as below. It seems not related to this jira; Francois and Hardik got same error on building PACS-4-17-1 without my change.&lt;br/&gt;
To be safe, I would leave it to you guys to submit the change.&lt;br/&gt;
The change is in the branch PACS-4-17-1-pzhan-CleanupScriptsToPostgres.&lt;/p&gt;

&lt;p&gt;TODO:&lt;br/&gt;
1. submit change in PACS-4-17-1-pzhan-CleanupScriptsToPostgres&lt;br/&gt;
2. enable 3 test cases below in PACS-4-18-1 and trunk (they are disabled currently with the name ending with &quot;.disabled&quot;)&lt;br/&gt;
PACS/Scripts/CleanupScripts/python/ims/cleanupscripts/test_common.py&lt;br/&gt;
PACS/Scripts/CleanupScripts/python/ims/cleanupscripts/test_studydeleterlib.py&lt;br/&gt;
PACS/Scripts/CleanupScripts/python/ims/cleanupscripts/test_ordercancellerlib.py&lt;/p&gt;




&lt;p&gt;SCONS Error:&lt;br/&gt;
(java:52726): Gtk-WARNING **: 12:17:55.577: Unable to locate theme engine in module_path: &quot;adwaita&quot;,&lt;br/&gt;
Gtk-Message: 12:17:55.580: Failed to load module &quot;pk-gtk-module&quot;&lt;br/&gt;
Gtk-Message: 12:17:55.582: Failed to load module &quot;atk-bridge&quot;&lt;br/&gt;
Gtk-Message: 12:17:55.582: Failed to load module &quot;canberra-gtk-module&quot;&lt;br/&gt;
...........................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................E........................................&lt;br/&gt;
Time: 61.932&lt;br/&gt;
There was 1 failure:&lt;br/&gt;
1) testWatchForFile(com.intelerad.lib.desktoputilities.util.TestFileWatcher)&lt;br/&gt;
junit.framework.AssertionFailedError&lt;br/&gt;
	at junit.framework.Assert.fail(Assert.java:55)&lt;br/&gt;
	at junit.framework.Assert.assertTrue(Assert.java:22)&lt;br/&gt;
	at junit.framework.Assert.assertTrue(Assert.java:31)&lt;br/&gt;
	at junit.framework.TestCase.assertTrue(TestCase.java:201)&lt;br/&gt;
	at com.intelerad.lib.desktoputilities.util.TestFileWatcher.testWatchForFile(TestFileWatcher.java:46)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:498)&lt;br/&gt;
	at junit.framework.TestCase.runTest(TestCase.java:176)&lt;br/&gt;
	at junit.framework.TestCase.runBare(TestCase.java:141)&lt;/p&gt;
</comment>
                            <comment id="529692" author="robot-bc-rw" created="Wed, 29 May 2019 10:40:39 -0400"  >&lt;p&gt;Released by ldegruchy to master at 2019-05-29 10:40:33 (push 72980):&lt;br/&gt;
  PACS-4-17-1 (fix)        (previous build: PACS-4-17-1-P220)&lt;br/&gt;
  PACS-4-18-1 (fix)        (previous build: PACS-4-18-1-P48)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-18-2-A26)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/6256050b216b&quot; target=&quot;_blank&quot;&gt;intelepacs:6256050b216b&lt;/a&gt;  pzhan       PACS-4-17-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103967&quot; title=&quot;Migrate CleanupScripts to Postgres&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103967&quot;&gt;&lt;del&gt;IP-103967&lt;/del&gt;&lt;/a&gt; fix: Update scripts to use DMS service instead of direct SQL.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/fde82c3f67c5&quot; target=&quot;_blank&quot;&gt;intelepacs:fde82c3f67c5&lt;/a&gt;  ldegruchy   PACS-4-18-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103967&quot; title=&quot;Migrate CleanupScripts to Postgres&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103967&quot;&gt;&lt;del&gt;IP-103967&lt;/del&gt;&lt;/a&gt; fix: Update scripts to use DMS service instead of direct SQL.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/aa7e09a43122&quot; target=&quot;_blank&quot;&gt;intelepacs:aa7e09a43122&lt;/a&gt;  ldegruchy   trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103967&quot; title=&quot;Migrate CleanupScripts to Postgres&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103967&quot;&gt;&lt;del&gt;IP-103967&lt;/del&gt;&lt;/a&gt; fix: Update scripts to use DMS service instead of direct SQL.&lt;/p&gt;</comment>
                            <comment id="529696" author="luke.degruchy" created="Wed, 29 May 2019 10:42:03 -0400"  >&lt;p&gt;Changes committed to master.&lt;/p&gt;</comment>
                            <comment id="530905" author="dvu" created="Fri, 7 Jun 2019 12:50:26 -0400"  >&lt;p&gt;    Included in PACS-4-17-1-R23 (atlas 1.15.P56)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Blocks</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="153868">MAINT-9578</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10300">
                    <name>Feature Link</name>
                                            <outwardlinks description="feature has">
                                        <issuelink>
            <issuekey id="153917">IP-104173</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="153022">IP-103891</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="97105">IP-64851</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="52039" name="CleanupScripts-4.17.1.P207-ims99.noarch.rpm" size="909928" author="pzhan" created="Wed, 15 May 2019 11:30:34 -0400"/>
                            <attachment id="52041" name="IP-103967-test.txt" size="2768" author="pzhan" created="Wed, 15 May 2019 11:45:04 -0400"/>
                            <attachment id="52040" name="supportTools-4.17.1.P207-ims99.noarch.rpm" size="1424161" author="pzhan" created="Wed, 15 May 2019 11:30:34 -0400"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_13901" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Code Committed</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14502"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;h4&gt;&lt;a name=&quot;RPMVersion&quot;&gt;&lt;/a&gt;RPM Version&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ISPClient%3A%3Cclientcode%3E&quot;&gt;&lt;/a&gt;ISP - Client : &lt;a href=&quot;https://inteleradprod.service-now.com/nav_to.do?uri=textsearch.do?sysparm_search=xxxx&quot; target=&quot;_blank&quot;&gt;xxxx&lt;/a&gt; - &amp;lt;client code&amp;gt;&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ClinicalImpact%3A&quot;&gt;&lt;/a&gt;Clinical Impact:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce%3A&quot;&gt;&lt;/a&gt;Minimal steps to reproduce:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour%3A&quot;&gt;&lt;/a&gt;Expected behaviour:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F%3A&quot;&gt;&lt;/a&gt;What happened instead?:&lt;/h4&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12110" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Documentation</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14406"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>IP-87798</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_14002" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Key Roles Affected</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14606"><![CDATA[All]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_14001" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Probability of Reoccurrance</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14603"><![CDATA[Medium]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13044"><![CDATA[CleanupScripts]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzzv8v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12102" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Release Notes</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14407"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13815" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Risk</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14445"><![CDATA[Standard Change]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13501" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Scrum Team</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14112"><![CDATA[Backend Raptors]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="2038">Raptors 2019 - S8</customfieldvalue>
    <customfieldvalue id="2058">Raptors 2019 - S9</customfieldvalue>
    <customfieldvalue id="2076">Raptors 2019 - S10</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:float">
                        <customfieldname>Story Points</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-103957] DMS: NullPointerException when performing findPatients from PatientSearchProtocol5.0</title>
                <link>https://jira.intelerad.com/browse/IP-103957</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;h4&gt;&lt;a name=&quot;Notes&quot;&gt;&lt;/a&gt;Notes&lt;/h4&gt;

&lt;p&gt;This is blocksPLA 4-17-1 DicomMaster Postgres mode.&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;RPMVersion&quot;&gt;&lt;/a&gt;RPM Version&lt;/h4&gt;
&lt;p&gt;DicomMasterService-4.18.1.P13-ims01.noarch&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce%3A&quot;&gt;&lt;/a&gt;Minimal steps to reproduce:&lt;/h4&gt;
&lt;p&gt;1. Log into IB&lt;br/&gt;
2. Perform a Patient Search&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour%3A&quot;&gt;&lt;/a&gt;Expected behaviour:&lt;/h4&gt;
&lt;p&gt;Patient Search is performed successfully&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F%3A&quot;&gt;&lt;/a&gt;What happened instead?:&lt;/h4&gt;
&lt;p&gt;Patient Search returns error&lt;/p&gt;

&lt;p&gt;Looking at DMS logs there is bellow exception thrown:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2019-04-18 08:53:12.028 HttpServer_5012_IOD_1_0000000000000000 qa4181mst1.intelerad.com (PROFILE)] --&amp;gt; Start: Invoking a method from protocol &apos;PatientSearchProtocol5.0&apos;... (timer ProfilingSkeleton_1555591992028)
[2019-04-18 08:53:12.028 HttpServer_5012_IOD_1_0000000000000000 qa4181mst1.intelerad.com] --------------------- New findPatients As Postgres DicomSearch Request --------------------
[2019-04-18 08:53:12.028 HttpServer_5012_IOD_1_0000000000000000 qa4181mst1.intelerad.com] --------------- New restricted findPatients As Postgres DicomSearch Request ---------------
[2019-04-18 08:53:12.028 HttpServer_5012_IOD_1_0000000000000000 qa4181mst1.intelerad.com (TRACE)] QueryConditions Hierarchy: []
[2019-04-18 08:53:12.028 HttpServer_5012_IOD_1_0000000000000000 qa4181mst1.intelerad.com (TRACE)] Search Parameters

[2019-04-18 08:53:12.095 HttpServer_5012_IOD_1_0000000000000000 qa4181mst1.intelerad.com (WARNING)] com.caucho.hessian.server.HessianSkeleton.invoke: java.lang.NullPointerException: throwing exception to client.
[2019-04-18 08:53:12.095 HttpServer_5012_IOD_1_0000000000000000 qa4181mst1.intelerad.com]
*************************
ERROR: null
*************************
[2019-04-18 08:53:12.095 HttpServer_5012_IOD_1_0000000000000000 qa4181mst1.intelerad.com] Stack trace:
java.lang.NullPointerException
        at com.intelerad.datamodels.dicomsearch.DateValue.&amp;lt;init&amp;gt;(DateValue.java:11)
        at com.intelerad.dicommasterservice.db.dicomevidence.dicomsearch.ResultConverter$1.addAttributeValue(ResultConverter.java:124)
        at com.intelerad.dicommasterservice.db.dicomevidence.dicomsearch.ResultConverter$1.map(ResultConverter.java:63)
        at com.intelerad.dicommasterservice.db.dicomevidence.dicomsearch.ResultConverter$1.map(ResultConverter.java:47)
        at org.jooq.impl.ResultImpl.map(ResultImpl.java:1405)
        at org.jooq.impl.AbstractResultQuery.fetch(AbstractResultQuery.java:1455)
        at org.jooq.impl.SelectImpl.fetch(SelectImpl.java:3756)
        at com.intelerad.dicommasterservice.db.dicomevidence.PostgresDicomEvidenceDatabase.submitQuery(PostgresDicomEvidenceDatabase.java:240)
        at com.intelerad.dicommasterservice.task.dicomsearch.DbCallDicomSearchQueryWithRestrictionsTask.call(DbCallDicomSearchQueryWithRestrictionsTask.java:86)
        at com.intelerad.dicommasterservice.task.dicomsearch.DbCallDicomSearchQueryWithRestrictionsTask.call(DbCallDicomSearchQueryWithRestrictionsTask.java:17)
        at com.intelerad.db.lib.DefaultDatabaseQueue$CallableWrapper.performCall(DefaultDatabaseQueue.java:130)
        at com.intelerad.db.lib.DefaultDatabaseQueue$CallableWrapper.monitoredCall(DefaultDatabaseQueue.java:107)
        at com.intelerad.db.lib.DefaultDatabaseQueue$CallableWrapper.call(DefaultDatabaseQueue.java:85)
        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
        at com.intelerad.tools.lib.concurrent.DefaultComparableFuture.run(DefaultComparableFuture.java:89)
        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
        at com.intelerad.db.lib.CleanupThreadFactory$1.run(CleanupThreadFactory.java:38)
        at com.intelerad.tools.lib.scheduling.LoggingThreadFactory.runCommand(LoggingThreadFactory.java:134)
        at com.intelerad.tools.lib.scheduling.LoggingThreadFactory$2.run(LoggingThreadFactory.java:98)
        at java.base/java.lang.Thread.run(Thread.java:834)

[2019-04-18 08:53:12.095 HttpServer_5012_IOD_1_0000000000000000 qa4181mst1.intelerad.com (TRACE)] Method findPatients is retryable? false
[2019-04-18 08:53:12.095 HttpServer_5012_IOD_1_0000000000000000 qa4181mst1.intelerad.com (PROFILE)] &amp;lt;-- Elapsed: 0.067 sec: Successfully invoked findPatients from protocol &apos;PatientSearchProtocol5.0&apos; (timer ProfilingSkeleton_1555591992028)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
            <key id="153240">IP-103957</key>
            <summary>DMS: NullPointerException when performing findPatients from PatientSearchProtocol5.0</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                            <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="ldegruchy">Luke de Gruchy</assignee>
                                    <reporter username="gmeira">Guilherme Meira Lins</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Apr 2019 09:36:48 -0400</created>
                <updated>Fri, 10 May 2019 13:11:40 -0400</updated>
                            <resolved>Tue, 30 Apr 2019 12:34:30 -0400</resolved>
                                    <version>4-17-1</version>
                                    <fixVersion>4-17-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                    <timeoriginalestimate seconds="1800">30 minutes</timeoriginalestimate>
                            <timeestimate seconds="0">0 minutes</timeestimate>
                            <timespent seconds="115200">4 days</timespent>
                                <comments>
                            <comment id="524722" author="luke.degruchy" created="Thu, 18 Apr 2019 10:22:04 -0400"  >&lt;p&gt;I would expect the 4-17-1 and 4-18-1 PatientSearch code to be the same.  Can you reproduce this with 4-17-1-R15?&lt;/p&gt;</comment>
                            <comment id="524726" author="luke.degruchy" created="Thu, 18 Apr 2019 10:34:48 -0400"  >&lt;p&gt;Bad data was migrated to bad data.   DMS in Sybase mode was able to handle it better:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;(cmdline@qa4181mst1) [dicomevidence] &amp;gt; select patient_id, patient_birth_date, patient_birth_time from patient where patient_birth_date IN (&apos;0&apos;, &apos;11121101&apos;, &apos;11231&apos; );
 patient_id  | patient_birth_date | patient_birth_time 
--------------+--------------------+--------------------
10081        | 11231              | 220000
10063        | 11231              | 220000
10036        | 11231              | 220000
10064        | 11121101           | 220000
99887799     | 0                  | 220000
62354PQGRRST | 0                  | 220000
16013        | 11231              | 220000
(7 rows)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;{sqsh}.rdc@QA4181MST1.DicomMasterMigrated.3&amp;gt; select PatID, PatBirDat, PatBirTim from PatientLevelMigrated where PatID IN (&apos;10081&apos;,&apos;10063&apos;,&apos;10036&apos;,&apos;10064&apos;,&apos;99887799&apos;,&apos;62354PQGRRST&apos;,&apos;16013&apos;)
{sqsh}.rdc@QA4181MST1.DicomMasterMigrated.4&amp;gt; go -m vert
PatID:     10081
PatBirDat: 11231
PatBirTim:         79200.000000

PatID:     10063
PatBirDat: 11231
PatBirTim:         79200.000000

PatID:     10036
PatBirDat: 11231
PatBirTim:         79200.000000

PatID:     10064
PatBirDat: 11121101
PatBirTim:         79200.000000

PatID:     99887799
PatBirDat: 0
PatBirTim:         79200.000000

PatID:     62354PQGRRST
PatBirDat: 0
PatBirTim:         79200.000000

PatID:     16013
PatBirDat: 11231
PatBirTim:         79200.000000

(7 rows affected)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="524730" author="luke.degruchy" created="Thu, 18 Apr 2019 10:39:36 -0400"  >&lt;p&gt;Control patient_ids with no bad data to test with:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;(cmdline@qa4181mst1) [dicomevidence] &amp;gt; select patient_id, patient_birth_date, patient_birth_time from patient limit 5;
  patient_id  | patient_birth_date | patient_birth_time 
--------------+--------------------+--------------------
 ADRCSF323    | 19831106           | 220000
 ADRCSF124IMS | 19831106           | 220000
 ADR4510      | 20020609           | 050907.70312
 ADR23024     | 20020609           | 050907.70312
 10070        | 19491128           | 220000
(5 rows)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="524732" author="gmeira" created="Thu, 18 Apr 2019 10:45:39 -0400"  >&lt;p&gt;It works fine on:&lt;br/&gt;
InteleBrowser-4.17.1.P192-ims01.noarch&lt;br/&gt;
DicomMasterService-4.17.1.P192-ims01.noarch&lt;/p&gt;</comment>
                            <comment id="524749" author="luke.degruchy" created="Thu, 18 Apr 2019 11:13:19 -0400"  >&lt;p&gt;Just to be clear this is blocks PLA for 4-17-1 and 4-18-1 for DMS &lt;b&gt;postgres mode&lt;/b&gt;.&lt;/p&gt;</comment>
                            <comment id="524763" author="pzhan" created="Thu, 18 Apr 2019 11:32:57 -0400"  >&lt;p&gt;In Sybase mode, there seems a Date conversion dealing with bad Date at:&lt;/p&gt;

&lt;p&gt;DateUtilities.parseInteleradDate(...) &lt;/p&gt;

&lt;p&gt;it is called from:&lt;br/&gt;
DicomMasterPatientQuery.convertDate (line 771)&lt;br/&gt;
DicomMasterPatientQuery.addToPatientMap (line 710)&lt;br/&gt;
DicomMasterPatientQuery.buildPatientMap (line 685)&lt;br/&gt;
DicomMasterPatientQuery.findPatients (line 263)&lt;br/&gt;
DicomMasterPatientQuery.findPatients (line 230)&lt;/p&gt;</comment>
                            <comment id="525060" author="luke.degruchy" created="Tue, 23 Apr 2019 14:59:47 -0400"  >&lt;p&gt;So, oddly enough, NULL patient birth dates, birth times, and sexes are fine, at least as far as InteleBrowser Patient Search is concerned.&lt;/p&gt;

&lt;p&gt;It&apos;s garbage data like &quot;0&quot; in patient_birth_date that&apos;s causing problems.   Null data is ignored by the patient search resultset converter and the DICOM tag is left out entirely from the search results.   It&apos;s the garbage data that gets converted to NULL within the resultset converter and then gets added to the DICOM tag results, resulting in the NPE above.&lt;/p&gt;
</comment>
                            <comment id="525350" author="luke.degruchy" created="Thu, 25 Apr 2019 11:45:57 -0400"  >&lt;h4&gt;&lt;a name=&quot;Developertesting%3A&quot;&gt;&lt;/a&gt;Developer testing:&lt;/h4&gt;

&lt;ul&gt;
	&lt;li&gt;Run modifyAndSend 42 times in Sybase mode&lt;/li&gt;
	&lt;li&gt;Update several PatientLevel records with a variety of PatBirDats:
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; 
   -19700101
           0
           1
          19
         197
        1970
       10101
       11231
       19700
      197001
     1970010
    19300101
    19320101
    19330101
    19340101
    19350101
    19360101
    19370101
    19380101
    19390101
    19800101
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Then update to a variety of PatBirTims:
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;                 NULL
             0.000000
         75600.000000
         79200.000000
         77168.000000
         18547.070312
             0.999000
         75601.000000
         79201.000000
         70505.000000
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Query with InteleBrowser PatientSearch for all results
	&lt;ul&gt;
		&lt;li&gt;Take a screenshot&lt;/li&gt;
		&lt;li&gt;Compare screenshots of PatientSearch for both Sybase and Postgres mode and ensure displayed patient birth dates are the same for the given patients&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;findscu for all patients
	&lt;ul&gt;
		&lt;li&gt;findscu -S -v -aet SCANNER -aec MST1 -k &quot;0010,0020=
{PATIENT_ID}
&lt;p&gt;&quot; -k 0008,0052=&quot;STUDY&quot; -k AccessionNumber -k PatientSex -k PatientBirthDate -k PatientBirthTime mst1 5000&lt;/p&gt;&lt;/li&gt;
		&lt;li&gt;Pipe to a text file&lt;/li&gt;
		&lt;li&gt;Diff the two findscu files and ensure they&apos;re identical except for patient_birth_time (off by milli/microseconds)&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Migrate to postgres&lt;/li&gt;
	&lt;li&gt;Query with InteleBrowser PatientSearch for all results and record
	&lt;ul&gt;
		&lt;li&gt;Ensure no errors&lt;/li&gt;
		&lt;li&gt;Take a screenshot&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;modifyAndSend and update to null patient_birth_date&lt;/li&gt;
	&lt;li&gt;modifyAndSend and update to null patient_sex&lt;/li&gt;
	&lt;li&gt;modifyAndSend and update to abcd patient_birth_date&lt;/li&gt;
	&lt;li&gt;findscu for all new patients
	&lt;ul&gt;
		&lt;li&gt;Ensure that null values are left out of the results&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Again: InteleBrowser Patient search for all
	&lt;ul&gt;
		&lt;li&gt;Ensure no errors&lt;/li&gt;
		&lt;li&gt;Ensure record with null patient sex shows the patient sex as blank&lt;/li&gt;
		&lt;li&gt;Ensure record with null patient birth date shows the patient birth date as blank&lt;/li&gt;
		&lt;li&gt;Ensure record with null patient birth time shows the patient birth date corresponding to the patient birth date column&lt;/li&gt;
		&lt;li&gt;Ensure record with abcd patient birth date shows the patient birth date as blank&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;findscu for the above patients
	&lt;ul&gt;
		&lt;li&gt;Ensure record with null patient sex shows the patient sex as missing&lt;/li&gt;
		&lt;li&gt;Ensure record with null patient birth date shows the patient birth date as missing&lt;/li&gt;
		&lt;li&gt;Ensure record with null patient birth time shows the patient birth time as missing&lt;/li&gt;
		&lt;li&gt;Ensure record with abcd patient birth date shows the patient birth date as missing&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="525377" author="luke.degruchy" created="Thu, 25 Apr 2019 13:37:32 -0400"  >&lt;p&gt;Automation run on rnd-testci:&lt;br/&gt;
&lt;a href=&quot;https://rnd-testci.intelerad.com/job/IntelePACS_IntegrationTest_PACS-4-17-1/144/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://rnd-testci.intelerad.com/job/IntelePACS_IntegrationTest_PACS-4-17-1/144/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="525486" author="luke.degruchy" created="Fri, 26 Apr 2019 07:02:11 -0400"  >&lt;p&gt;Work done on this branch:  PACS-4-17-1-ldegruchy-birth-date-null-weird-invalid&lt;/p&gt;</comment>
                            <comment id="525642" author="hmishra" created="Fri, 26 Apr 2019 17:36:33 -0400"  >&lt;p&gt;InteleBrowser works fine with various dates; No NULL Pointer Exception&lt;/p&gt;

&lt;p&gt;IB shows some variations in the results but its for invalid values.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Sample Data:&lt;/b&gt;&lt;br/&gt;
&lt;a href=&quot;https://docs.google.com/document/d/1BdtCeShqoKUDjmN4rVqni9QdmuI1zYZ9p8WKrV5o6dg/edit&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://docs.google.com/document/d/1BdtCeShqoKUDjmN4rVqni9QdmuI1zYZ9p8WKrV5o6dg/edit&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="525656" author="luke.degruchy" created="Mon, 29 Apr 2019 08:10:54 -0400"  >&lt;p&gt;Remember you need to test DICOM search as well.&lt;/p&gt;</comment>
                            <comment id="525826" author="hmishra" created="Mon, 29 Apr 2019 15:30:21 -0400"  >&lt;p&gt;&apos;findscu&apos; does &apos;C-FIND&apos; which covers DICOM Search.&lt;/p&gt;

&lt;p&gt;Validated &apos;findscu&apos; with garbage date values. &lt;/p&gt;

&lt;p&gt;Results are update in the same doc.&lt;/p&gt;

&lt;p&gt;Also, Uploaded Dicom search results to &lt;a href=&quot;https://drive.google.com/drive/folders/18L6-fJJFBzdeWr5oCcOtzfDcAR45iARd&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;one drive&lt;/a&gt;.&lt;/p&gt;

</comment>
                            <comment id="525831" author="hmishra" created="Mon, 29 Apr 2019 15:52:55 -0400"  >&lt;p&gt;Finished QA... &lt;/p&gt;

&lt;p&gt;Attached doc contains results.&lt;/p&gt;</comment>
                            <comment id="525924" author="robot-bc-rw" created="Tue, 30 Apr 2019 12:31:05 -0400"  >&lt;p&gt;Released by ldegruchy to master at 2019-04-30 12:31:03 (push 72595):&lt;br/&gt;
  PACS-4-17-1 (fix)        (previous build: PACS-4-17-1-P198)&lt;br/&gt;
  PACS-4-18-1 (fix)        (previous build: PACS-4-18-1-P25)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-18-2-A11)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/0f96dd965da3&quot; target=&quot;_blank&quot;&gt;intelepacs:0f96dd965da3&lt;/a&gt;  ldegruchy   PACS-4-17-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103957&quot; title=&quot;DMS: NullPointerException when performing findPatients from PatientSearchProtocol5.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103957&quot;&gt;&lt;del&gt;IP-103957&lt;/del&gt;&lt;/a&gt; fix: Ensure weird dates are parsed as much as possible and null or garbage dates left out of results.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/56587a1d439e&quot; target=&quot;_blank&quot;&gt;intelepacs:56587a1d439e&lt;/a&gt;  ldegruchy   PACS-4-18-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103957&quot; title=&quot;DMS: NullPointerException when performing findPatients from PatientSearchProtocol5.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103957&quot;&gt;&lt;del&gt;IP-103957&lt;/del&gt;&lt;/a&gt; fix: Ensure weird dates are parsed as much as possible and null or garbage dates left out of results.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/6d83ba029af9&quot; target=&quot;_blank&quot;&gt;intelepacs:6d83ba029af9&lt;/a&gt;  ldegruchy   trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103957&quot; title=&quot;DMS: NullPointerException when performing findPatients from PatientSearchProtocol5.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103957&quot;&gt;&lt;del&gt;IP-103957&lt;/del&gt;&lt;/a&gt; fix: Ensure weird dates are parsed as much as possible and null or garbage dates left out of results.&lt;/p&gt;</comment>
                            <comment id="525925" author="luke.degruchy" created="Tue, 30 Apr 2019 12:34:30 -0400"  >&lt;ul&gt;
	&lt;li&gt;Parse as many weird invalid dates as possible into something resembling an actual date as DMS does in Sybase mode&lt;/li&gt;
	&lt;li&gt;If a date is completely invalid (ex null, empty, or something unrecoverable like &quot;abcd&quot;
	&lt;ul&gt;
		&lt;li&gt;Leave as null in PatientSearch (InteleBrowser PatientSearch will display it as blank)&lt;/li&gt;
		&lt;li&gt;Leave out the DICOM tag entirely from the results of DICOM search.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="527497" author="dvu" created="Fri, 10 May 2019 13:11:40 -0400"  >&lt;p&gt;Included in PACS-4-17-1-R18 (atlas 1.15.P41)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                    <customfield id="customfield_13806" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Availability Impact</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14409"><![CDATA[BlocksPLA]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_13901" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Code Committed</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14502"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;h4&gt;&lt;a name=&quot;RPMVersion&quot;&gt;&lt;/a&gt;RPM Version&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ISPClient%3A%3Cclientcode%3E&quot;&gt;&lt;/a&gt;ISP - Client : &lt;a href=&quot;https://inteleradprod.service-now.com/nav_to.do?uri=textsearch.do?sysparm_search=xxxx&quot; target=&quot;_blank&quot;&gt;xxxx&lt;/a&gt; - &amp;lt;client code&amp;gt;&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ClinicalImpact%3A&quot;&gt;&lt;/a&gt;Clinical Impact:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce%3A&quot;&gt;&lt;/a&gt;Minimal steps to reproduce:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour%3A&quot;&gt;&lt;/a&gt;Expected behaviour:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F%3A&quot;&gt;&lt;/a&gt;What happened instead?:&lt;/h4&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12110" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Documentation</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14406"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>IP-103698</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_14002" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Key Roles Affected</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14606"><![CDATA[All]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_14001" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Probability of Reoccurrance</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14603"><![CDATA[Medium]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13135"><![CDATA[DicomMasterService]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzcpb3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12102" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Release Notes</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14407"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13815" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Risk</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14445"><![CDATA[Standard Change]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13501" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Scrum Team</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14112"><![CDATA[Backend Raptors]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10801"><![CDATA[CRITICAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="2038">Raptors 2019 - S8</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:float">
                        <customfieldname>Story Points</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-103740] DicomMaster postgres PatientSearch/DicomSearchImpl not returning PatientHistory in result (TestInboundVnaCorrectionLegacyStudy fails on trunk)</title>
                <link>https://jira.intelerad.com/browse/IP-103740</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;h4&gt;&lt;a name=&quot;RPMVersionDicomMasterService4.18.1.P5ims01.noarch&quot;&gt;&lt;/a&gt;RPM Version DicomMasterService-4.18.1.P5-ims01.noarch&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ISPClient%3A%3Cclientcode%3E&quot;&gt;&lt;/a&gt;ISP - Client : &lt;a href=&quot;https://inteleradprod.service-now.com/nav_to.do?uri=textsearch.do?sysparm_search=xxxx&quot; target=&quot;_blank&quot;&gt;xxxx&lt;/a&gt; - &amp;lt;client code&amp;gt;&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ClinicalImpact%3AUnclear.PatientSearchdoesnotreturntheStudyLevel.PatientHistoryvaluebacktoclients.Theknownimpactrightnowisaintegrationtestfailure....&quot;&gt;&lt;/a&gt;Clinical Impact: Unclear. PatientSearch does not return the StudyLevel.PatientHistory value back to clients. The known impact right now is a integration test failure. The failure indicates that this is a behavioral change from when the test was written (prior to the DicomMaster postgres migration). It is safe to assume that the field used to be returned and no longer is. Perhaps this is on purpose, perhaps not.&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce%3A&quot;&gt;&lt;/a&gt;Minimal steps to reproduce:&lt;/h4&gt;
&lt;p&gt;Run TestInboundVnaCorrectionLegacyStudy on 4-18-1&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour%3A&quot;&gt;&lt;/a&gt;Expected behaviour:&lt;/h4&gt;
&lt;p&gt;The test passes&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F%3A&quot;&gt;&lt;/a&gt;What happened instead?:&lt;/h4&gt;
&lt;p&gt;The test fails - it creates a legacy study using DicomMasterService, and the uses patient search to confirm that the legacy was created successfully. The check fails because the returned study doesn&apos;t have the PatientHistory field populated with a value.&lt;/p&gt;

&lt;p&gt;If you check in the DicomMaster database, the field is correctly saved there, so the problem is not at writing time, but at reading time.&lt;/p&gt;

&lt;p&gt;A quick check through the DicomMasterService code leads me to class/field PatientSearchAsPostgresDicomSearchImpl.ATTRIBUTE_TO_SELECT, which, from what I understand, lists the fields to select - PatientHistory is missing.&lt;/p&gt;

&lt;p&gt;I believe the non-postgres-non-dicom-search version of patient search selects all columns (possibly seen in class/method DicomMasterPatientQuery getStudySeriesPatientColumns)&lt;/p&gt;


&lt;p&gt;&amp;#8212;&lt;/p&gt;

&lt;p&gt;This test was added on 4-17-1, which I believe has dicommaster postgres disabled. This would explain why the test was written as such, and passed.&lt;/p&gt;

&lt;p&gt;As Emil points out, there should probably be other tests ensuring that patient search results are properly sent back, but obviously there are none. FORTUNATELY, Emil was thorough in his unit test to verify things before attempting to test, which is why this fails now. WE ARE LUCKY TO CATCH THIS!&lt;/p&gt;

&lt;p&gt;&amp;#8211;&lt;/p&gt;

&lt;p&gt;There may be more issues/changes/regression around PatientSearch/DicomMasterPostgres that are currently unknown.&lt;/p&gt;</description>
            <key id="152634">IP-103740</key>
            <summary>DicomMaster postgres PatientSearch/DicomSearchImpl not returning PatientHistory in result (TestInboundVnaCorrectionLegacyStudy fails on trunk)</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                            <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="ldegruchy">Luke de Gruchy</assignee>
                                    <reporter username="jan">Jan Lavoie</reporter>
                        <labels>
                            <label>blocking_automation</label>
                            <label>found_by_automation</label>
                            <label>regression_fix</label>
                    </labels>
                <created>Thu, 4 Apr 2019 16:08:44 -0400</created>
                <updated>Tue, 16 Apr 2019 15:06:00 -0400</updated>
                            <resolved>Fri, 12 Apr 2019 11:21:50 -0400</resolved>
                                    <version>4-17-1</version>
                                    <fixVersion>4-17-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                    <timeoriginalestimate seconds="0">0 minutes</timeoriginalestimate>
                                    <timespent seconds="111600">3 days, 7 hours</timespent>
                                <comments>
                            <comment id="522897" author="jan" created="Thu, 4 Apr 2019 16:09:20 -0400"  >&lt;p&gt;&lt;del&gt;Note that this may affect 4-18-1, unsure.&lt;/del&gt; this does affect 4-18-1&lt;/p&gt;</comment>
                            <comment id="522903" author="luke.degruchy" created="Thu, 4 Apr 2019 16:16:55 -0400"  >&lt;p&gt;What I don&apos;t understand is why this hasn&apos;t occurred in the months that the trunk automation runs were on DicomMaster postgres.&lt;/p&gt;</comment>
                            <comment id="522908" author="jan" created="Thu, 4 Apr 2019 16:34:28 -0400"  >&lt;p&gt;&lt;a href=&quot;https://jira.intelerad.com/secure/ViewProfile.jspa?name=ldegruchy&quot; class=&quot;user-hover&quot; rel=&quot;ldegruchy&quot;&gt;Luke de Gruchy&lt;/a&gt; : because this test was created  5 days ago ish&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[jan@jan trunk]$ hg log components/integrationtesting/src/main/java/com/intelerad/integrationtesting/iocm/TestInboundVnaCorrectionLegacyStudy.java
changeset:   197109:02a411bb301c
branch:      PACS-4-17-1
parent:      197092:004d5d676bff
user:        Emil Belardo &amp;lt;ebelardo@intelerad.com&amp;gt;
date:        2019-03-30 08:01:20 -0400
summary:     IP-94954 fix,IP-102924 fix: InboundIOCM: LDS creates full correction for SOP ingestion from legacy study

[jan@jan trunk]$ 

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="522944" author="luke.degruchy" created="Fri, 5 Apr 2019 08:48:57 -0400"  >&lt;p&gt;Looking at the code, I can confirm &lt;a href=&quot;https://jira.intelerad.com/secure/ViewProfile.jspa?name=jan&quot; class=&quot;user-hover&quot; rel=&quot;jan&quot;&gt;Jan Lavoie&lt;/a&gt;&apos;s conclusion.   Hopefully all we need to do to fix this is:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Add patient history (either as a standard or private DICOM tag) to com.intelerad.datamodels.dicom.DicomAttribute&lt;/li&gt;
	&lt;li&gt;Add this new tag to com.intelerad.dicommasterservice.implementation.PatientSearchAsPostgresDicomSearchImpl.ATTRIBUTE_TO_SELECT&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="522948" author="bdasilva" created="Fri, 5 Apr 2019 09:05:50 -0400"  >&lt;p&gt;Integration tests are great!!... &lt;/p&gt;</comment>
                            <comment id="523108" author="luke.degruchy" created="Fri, 5 Apr 2019 16:14:06 -0400"  >&lt;p&gt;There are other columns missing as well.   Need to figure out which ones to add as part of this task.&lt;/p&gt;</comment>
                            <comment id="523197" author="luke.degruchy" created="Mon, 8 Apr 2019 10:57:18 -0400"  >&lt;p&gt;Tracking PatientSearchApi columns here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://docs.google.com/spreadsheets/d/17U9ILTc01GIg6TeRq-LNfsbD1CYpEAMyL1OurXLfymc/edit#gid=0&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://docs.google.com/spreadsheets/d/17U9ILTc01GIg6TeRq-LNfsbD1CYpEAMyL1OurXLfymc/edit#gid=0&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="523526" author="luke.degruchy" created="Tue, 9 Apr 2019 14:30:34 -0400"  >&lt;p&gt;Evolve branch where this work will be done:&lt;/p&gt;

&lt;p&gt;PACS-4-17-1-ldegruchy-postgres-patient-hist&lt;/p&gt;</comment>
                            <comment id="523608" author="robot-qa-ro" created="Wed, 10 Apr 2019 09:42:38 -0400"  >&lt;p&gt;Broke build &lt;a href=&quot;https://rnd-ci.intelerad.com/job/IntelePACS_IntegrationTest_CloudTesting/171/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;PACS-4-18-2-A7-171 (Apr 09, 2019 02:33:22 PM) SingleServer_NonAtlasDrivenWorkflow (3081)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Posted from anguyen-pc.intelerad.com.&lt;/p&gt;</comment>
                            <comment id="523629" author="robot-qa-ro" created="Wed, 10 Apr 2019 10:25:17 -0400"  >&lt;p&gt;Broke build &lt;a href=&quot;https://rnd-ci.intelerad.com/job/IntelePACS_IntegrationTest_trunk/1558/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;PACS-4-18-2-A7-1558 (Apr 09, 2019 02:34:22 PM) SingleServer_AtlasDrivenDictationWorkflow (3081)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Posted from anguyen-pc.intelerad.com.&lt;/p&gt;</comment>
                            <comment id="523630" author="robot-qa-ro" created="Wed, 10 Apr 2019 10:30:31 -0400"  >&lt;p&gt;Broke build &lt;a href=&quot;https://rnd-ci.intelerad.com/job/IntelePACS_IntegrationTest_PACS-4-18-1/20/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;PACS-4-18-1-P10-20 (Apr 09, 2019 12:32:56 PM) SingleServer_AtlasDrivenDictationWorkflow (4412)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Posted from anguyen-pc.intelerad.com.&lt;/p&gt;</comment>
                            <comment id="523632" author="robot-qa-ro" created="Wed, 10 Apr 2019 10:47:25 -0400"  >&lt;p&gt;Broke build &lt;a href=&quot;https://rnd-ci.intelerad.com/job/IntelePACS_IntegrationTest_PACS-4-18-1/22/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;PACS-4-18-1-P10-22 (Apr 09, 2019 02:36:22 PM) SingleServer_NonAtlasDrivenWorkflow (4412)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Posted from anguyen-pc.intelerad.com.&lt;/p&gt;</comment>
                            <comment id="523701" author="luke.degruchy" created="Wed, 10 Apr 2019 15:43:53 -0400"  >&lt;p&gt;rnd-testci automation run here:  &lt;a href=&quot;https://rnd-testci.intelerad.com/job/IntelePACS_IntegrationTest_PACS-4-17-1/135/consoleFull&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://rnd-testci.intelerad.com/job/IntelePACS_IntegrationTest_PACS-4-17-1/135/consoleFull&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="523702" author="luke.degruchy" created="Wed, 10 Apr 2019 15:44:42 -0400"  >&lt;p&gt;Code review on PACS-4-17-1-ldegruchy-postgres-patient-hist pending.&lt;/p&gt;

&lt;p&gt;scons run for all IntelePACS projects passed.&lt;/p&gt;</comment>
                            <comment id="523731" author="robot-qa-ro" created="Wed, 10 Apr 2019 17:01:50 -0400"  >&lt;p&gt;Broke build &lt;a href=&quot;https://rnd-ci.intelerad.com/job/IntelePACS_IntegrationTest_PACS-4-18-1/23/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;PACS-4-18-1-P11-23 (Apr 10, 2019 02:09:56 AM) SingleServer_NonAtlasDrivenWorkflow (4412)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Posted from anguyen-pc.intelerad.com.&lt;/p&gt;</comment>
                            <comment id="523740" author="robot-qa-ro" created="Wed, 10 Apr 2019 18:26:55 -0400"  >&lt;p&gt;Broke build &lt;a href=&quot;https://rnd-ci.intelerad.com/job/IntelePACS_IntegrationTest_PACS-4-18-1/24/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;PACS-4-18-1-P11-24 (Apr 10, 2019 02:10:56 AM) SingleServer_AtlasDrivenDictationWorkflow (4412)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Posted from anguyen-pc.intelerad.com.&lt;/p&gt;</comment>
                            <comment id="523775" author="robot-qa-ro" created="Thu, 11 Apr 2019 10:06:49 -0400"  >&lt;p&gt;Broke build &lt;a href=&quot;https://rnd-ci.intelerad.com/job/IntelePACS_IntegrationTest_PACS-4-18-1/25/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;PACS-4-18-1-P11-25 (Apr 10, 2019 02:11:56 AM) TwoServer_NonAtlasDrivenWorkflow (4413)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Posted from anguyen-pc.intelerad.com.&lt;/p&gt;</comment>
                            <comment id="523910" author="robot-qa-ro" created="Thu, 11 Apr 2019 16:21:23 -0400"  >&lt;p&gt;Broke build &lt;a href=&quot;https://rnd-ci.intelerad.com/job/IntelePACS_IntegrationTest_PACS-4-18-1/27/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;PACS-4-18-1-P12-27 (Apr 11, 2019 12:55:53 AM) SingleServer_AtlasDrivenDictationWorkflow (4412)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Posted from anguyen-pc.intelerad.com.&lt;/p&gt;</comment>
                            <comment id="523922" author="robot-bc-rw" created="Thu, 11 Apr 2019 16:50:57 -0400"  >&lt;p&gt;Released by hmishra to master at 2019-04-11 16:50:54 (push 72364):&lt;br/&gt;
  PACS-4-17-1 (fix)        (previous build: PACS-4-17-1-P188)&lt;br/&gt;
  PACS-4-18-1 (fix)        (previous build: PACS-4-18-1-P12)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-18-2-A8)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/cd910460134d&quot; target=&quot;_blank&quot;&gt;intelepacs:cd910460134d&lt;/a&gt;  ldegruchy   PACS-4-17-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103740&quot; title=&quot;DicomMaster postgres PatientSearch/DicomSearchImpl not returning PatientHistory in result (TestInboundVnaCorrectionLegacyStudy fails on trunk)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103740&quot;&gt;&lt;del&gt;IP-103740&lt;/del&gt;&lt;/a&gt; fix: fixed patient history in search api&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/f8f07dec278d&quot; target=&quot;_blank&quot;&gt;intelepacs:f8f07dec278d&lt;/a&gt;  hmishra     PACS-4-18-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103740&quot; title=&quot;DicomMaster postgres PatientSearch/DicomSearchImpl not returning PatientHistory in result (TestInboundVnaCorrectionLegacyStudy fails on trunk)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103740&quot;&gt;&lt;del&gt;IP-103740&lt;/del&gt;&lt;/a&gt; fix: fixed patient history in search api&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/aa246bdb1d92&quot; target=&quot;_blank&quot;&gt;intelepacs:aa246bdb1d92&lt;/a&gt;  hmishra     trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103740&quot; title=&quot;DicomMaster postgres PatientSearch/DicomSearchImpl not returning PatientHistory in result (TestInboundVnaCorrectionLegacyStudy fails on trunk)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103740&quot;&gt;&lt;del&gt;IP-103740&lt;/del&gt;&lt;/a&gt; fix: fixed patient history in search api&lt;/p&gt;</comment>
                            <comment id="523923" author="hmishra" created="Thu, 11 Apr 2019 16:53:22 -0400"  >&lt;p&gt;&lt;b&gt;Integration Tests Passed:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://rnd-testci.intelerad.com/job/IntelePACS_IntegrationTest_PACS-4-17-1/135/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://rnd-testci.intelerad.com/job/IntelePACS_IntegrationTest_PACS-4-17-1/135/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="523927" author="robot-qa-ro" created="Thu, 11 Apr 2019 17:36:53 -0400"  >&lt;p&gt;Broke build &lt;a href=&quot;https://rnd-ci.intelerad.com/job/IntelePACS_IntegrationTest_CloudTesting/177/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;PACS-4-18-2-A8-177 (Apr 11, 14:43) SingleServer_NonAtlasDrivenWorkflow (3081)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Posted from anguyen-pc.intelerad.com.&lt;/p&gt;</comment>
                            <comment id="523991" author="robot-qa-ro" created="Fri, 12 Apr 2019 11:05:53 -0400"  >&lt;p&gt;Broke build &lt;a href=&quot;https://rnd-ci.intelerad.com/job/IntelePACS_IntegrationTest_trunk/1560/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;PACS-4-18-2-A8-1560 (Apr 11, 14:44) SingleServer_AtlasDrivenDictationWorkflow (3081)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Posted from anguyen-pc.intelerad.com.&lt;/p&gt;</comment>
                            <comment id="523999" author="robot-qa-ro" created="Fri, 12 Apr 2019 11:06:03 -0400"  >&lt;p&gt;Broke build &lt;a href=&quot;https://rnd-ci.intelerad.com/job/IntelePACS_IntegrationTest_PACS-4-18-1/26/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;PACS-4-18-1-P12-26 (Apr 11, 00:54) SingleServer_NonAtlasDrivenWorkflow (4412)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Posted from anguyen-pc.intelerad.com.&lt;/p&gt;</comment>
                            <comment id="524018" author="hmishra" created="Fri, 12 Apr 2019 11:21:50 -0400"  >&lt;p&gt;Waiting for trunk automation to close it&lt;/p&gt;</comment>
                            <comment id="524044" author="robot-qa-ro" created="Fri, 12 Apr 2019 13:40:44 -0400"  >&lt;p&gt;Broke build &lt;a href=&quot;https://rnd-ci.intelerad.com/job/IntelePACS_IntegrationTest_PACS-4-18-1/29/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;PACS-4-18-1-P13-29 (Apr 11, 19:40) SingleServer_NonAtlasDrivenWorkflow (4412)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Posted from anguyen-pc.intelerad.com.&lt;/p&gt;</comment>
                            <comment id="524115" author="robot-qa-ro" created="Fri, 12 Apr 2019 16:50:29 -0400"  >&lt;p&gt;Broke build &lt;a href=&quot;https://rnd-ci.intelerad.com/job/IntelePACS_IntegrationTest_trunk/1561/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;PACS-4-18-2-A8-1561 (Apr 11, 14:45) TwoServer_NonAtlasDrivenWorkflow (3082)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Posted from anguyen-pc.intelerad.com.&lt;/p&gt;</comment>
                            <comment id="524347" author="dvu" created="Tue, 16 Apr 2019 09:20:46 -0400"  >&lt;p&gt;&lt;a href=&quot;https://rnd-ci.intelerad.com/job/IntelePACS_IntegrationTest_CloudTesting/181/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://rnd-ci.intelerad.com/job/IntelePACS_IntegrationTest_CloudTesting/181/&lt;/a&gt; ( build pass)&lt;/p&gt;</comment>
                            <comment id="524448" author="dvu" created="Tue, 16 Apr 2019 15:06:00 -0400"  >&lt;p&gt;Included in PACS-4-17-1-R15 (atlas 1.15.P41)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_13901" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Code Committed</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14502"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;h4&gt;&lt;a name=&quot;RPMVersion&quot;&gt;&lt;/a&gt;RPM Version&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ISPClient%3A%3Cclientcode%3E&quot;&gt;&lt;/a&gt;ISP - Client : &lt;a href=&quot;https://inteleradprod.service-now.com/nav_to.do?uri=textsearch.do?sysparm_search=xxxx&quot; target=&quot;_blank&quot;&gt;xxxx&lt;/a&gt; - &amp;lt;client code&amp;gt;&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ClinicalImpact%3A&quot;&gt;&lt;/a&gt;Clinical Impact:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce%3A&quot;&gt;&lt;/a&gt;Minimal steps to reproduce:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour%3A&quot;&gt;&lt;/a&gt;Expected behaviour:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F%3A&quot;&gt;&lt;/a&gt;What happened instead?:&lt;/h4&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12110" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Documentation</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14406"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>IP-87798</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13135"><![CDATA[DicomMasterService]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzz9pb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12102" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Release Notes</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14407"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13815" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Risk</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14445"><![CDATA[Standard Change]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13501" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Scrum Team</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14112"><![CDATA[Backend Raptors]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10804"><![CDATA[INTERNAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="2002">Raptors 2019 - S6</customfieldvalue>
    <customfieldvalue id="2020">Raptors 2019 - S7</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:float">
                        <customfieldname>Story Points</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-103690] Duplicate primary-key can be generated in partition tables</title>
                <link>https://jira.intelerad.com/browse/IP-103690</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce%3A&quot;&gt;&lt;/a&gt;Minimal steps to reproduce:&lt;/h4&gt;
&lt;p&gt;On a partitioned table (patient, study, or series), update a primary key value existing in the latest partition to the value existing in any old partition.&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour%3A&quot;&gt;&lt;/a&gt;Expected behaviour:&lt;/h4&gt;
&lt;p&gt;Update action should be failed with exception indicating duplicate primary key.&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F%3A&quot;&gt;&lt;/a&gt;What happened instead?:&lt;/h4&gt;
&lt;p&gt;Update action completes successfully. Rows with updated primary key value exist in both latest partition and old partition.&lt;/p&gt;</description>
            <key id="152512">IP-103690</key>
            <summary>Duplicate primary-key can be generated in partition tables</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                            <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="pzhan">Peter Zhan</assignee>
                                    <reporter username="pzhan">Peter Zhan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Apr 2019 10:23:20 -0400</created>
                <updated>Fri, 10 May 2019 13:11:38 -0400</updated>
                            <resolved>Wed, 1 May 2019 09:54:38 -0400</resolved>
                                    <version>4-17-1</version>
                                    <fixVersion>4-17-1</fixVersion>
                    <fixVersion>4-18-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                    <timeoriginalestimate seconds="0">0 minutes</timeoriginalestimate>
                                    <timespent seconds="214200">1 week, 2 days, 3 hours, 30 minutes</timespent>
                                <comments>
                            <comment id="523568" author="pzhan" created="Tue, 9 Apr 2019 17:05:49 -0400"  >&lt;p&gt;Checked with IB - Correct Patient Information - update an active patient_id to the one in old partition.  PACS does explicitly deleting the old patient_id; then update the new patient_id if existing or insert new patient_id if not existing.&lt;/p&gt;

&lt;p&gt;16:41:17.395 &lt;span class=&quot;error&quot;&gt;&amp;#91;UpdateQueue_0&amp;#93;&lt;/span&gt; DEBUG org.jooq.tools.LoggerListener - Executing query          : delete from &quot;dicomevidence&quot;.&quot;patient&quot; where &quot;dicomevidence&quot;.&quot;patient&quot;.&quot;patient_id&quot; = ?&lt;br/&gt;
16:41:17.395 &lt;span class=&quot;error&quot;&gt;&amp;#91;UpdateQueue_0&amp;#93;&lt;/span&gt; DEBUG org.jooq.tools.LoggerListener - -&amp;gt; with bind values      : delete from &quot;dicomevidence&quot;.&quot;patient&quot; where &quot;dicomevidence&quot;.&quot;patient&quot;.&quot;patient_id&quot; = &apos;IMSQA28322&apos;&lt;br/&gt;
16:41:17.398 &lt;span class=&quot;error&quot;&gt;&amp;#91;UpdateQueue_0&amp;#93;&lt;/span&gt; DEBUG org.jooq.tools.LoggerListener - Affected row(s)          : 1&lt;br/&gt;
16:41:17.399 &lt;span class=&quot;error&quot;&gt;&amp;#91;UpdateQueue_0&amp;#93;&lt;/span&gt; DEBUG org.jooq.tools.LoggerListener - Executing query          : insert into &quot;dicomevidence&quot;.&quot;patient&quot; (&quot;series_count&quot;, &quot;patient_birth_date&quot;, &quot;patient_sex&quot;, &quot;timestamp_inserted&quot;, &quot;patient_id&quot;, &quot;patient_name&quot;, &quot;sop_count&quot;, &quot;study_count&quot;) values (?, cast(? as timestamp with time zone), ?, cast(? as timestamp with time zone), ?, ?, ?, ?)&lt;br/&gt;
16:41:17.399 &lt;span class=&quot;error&quot;&gt;&amp;#91;UpdateQueue_0&amp;#93;&lt;/span&gt; DEBUG org.jooq.tools.LoggerListener - -&amp;gt; with bind values      : insert into &quot;dicomevidence&quot;.&quot;patient&quot; (&quot;series_count&quot;, &quot;patient_birth_date&quot;, &quot;patient_sex&quot;, &quot;timestamp_inserted&quot;, &quot;patient_id&quot;, &quot;patient_name&quot;, &quot;sop_count&quot;, &quot;study_count&quot;) values (0, timestamp with time zone &apos;1980-01-01 00:00:00-05:00&apos;, &apos;O&apos;, timestamp with time zone &apos;2019-04-09 16:41:17.359-04:00&apos;, &apos;PAR52&apos;, &apos;IMSQA28322^IMSQA&apos;, 0, 0)&lt;/p&gt;

&lt;p&gt;16:48:52.770 &lt;span class=&quot;error&quot;&gt;&amp;#91;UpdateQueue_0&amp;#93;&lt;/span&gt; DEBUG org.jooq.tools.LoggerListener - Executing query          : delete from &quot;dicomevidence&quot;.&quot;patient&quot; where &quot;dicomevidence&quot;.&quot;patient&quot;.&quot;patient_id&quot; = ?&lt;br/&gt;
16:48:52.770 &lt;span class=&quot;error&quot;&gt;&amp;#91;UpdateQueue_0&amp;#93;&lt;/span&gt; DEBUG org.jooq.tools.LoggerListener - -&amp;gt; with bind values      : delete from &quot;dicomevidence&quot;.&quot;patient&quot; where &quot;dicomevidence&quot;.&quot;patient&quot;.&quot;patient_id&quot; = &apos;PAR52&apos;&lt;br/&gt;
16:48:52.772 &lt;span class=&quot;error&quot;&gt;&amp;#91;UpdateQueue_0&amp;#93;&lt;/span&gt; DEBUG org.jooq.tools.LoggerListener - Affected row(s)          : 1&lt;br/&gt;
16:48:52.772 &lt;span class=&quot;error&quot;&gt;&amp;#91;UpdateQueue_0&amp;#93;&lt;/span&gt; DEBUG org.jooq.tools.LoggerListener - Executing query          : update &quot;dicomevidence&quot;.&quot;patient&quot; set &quot;patient_birth_date&quot; = cast(? as timestamp with time zone), &quot;patient_sex&quot; = ?, &quot;patient_name&quot; = ? where &quot;dicomevidence&quot;.&quot;patient&quot;.&quot;patient_id&quot; = ?&lt;br/&gt;
16:48:52.772 &lt;span class=&quot;error&quot;&gt;&amp;#91;UpdateQueue_0&amp;#93;&lt;/span&gt; DEBUG org.jooq.tools.LoggerListener - -&amp;gt; with bind values      : update &quot;dicomevidence&quot;.&quot;patient&quot; set &quot;patient_birth_date&quot; = timestamp with time zone &apos;1980-01-01 00:00:00-05:00&apos;, &quot;patient_sex&quot; = &apos;O&apos;, &quot;patient_name&quot; = &apos;IMSQA28322^IMSQA&apos; where &quot;dicomevidence&quot;.&quot;patient&quot;.&quot;patient_id&quot; = &apos;IMSQA13-3&apos;&lt;/p&gt;

&lt;p&gt;So it won&apos;t  be issue in PACS for now; however, it could cause issue potentially.&lt;/p&gt;</comment>
                            <comment id="524299" author="pzhan" created="Mon, 15 Apr 2019 16:43:08 -0400"  >&lt;p&gt;Root Cause:&lt;br/&gt;
The update trigger - XXX_timestamp_updated_trigger - in active (latest) partition only updates timestamp_updated := now(); it does not check if updated PK exists in other partitions.&lt;/p&gt;

&lt;p&gt;Solution:&lt;br/&gt;
Create another update trigger -XXX_unique_pk_trigger - in active partition to check if update PK exists in other partition. It raises error when existing.  New trigger calls trigger function XXX_unique_pk_func() which is modified with logic for updating PK.&lt;/p&gt;

&lt;p&gt;Patching strategy:&lt;br/&gt;
1. Modify XXX_unique_pk_func() in  Databases/Databases/DicomEvidence/Schema/DicomEvidence-PartitionStoredProcs-schema.sql for first time partitioning&lt;br/&gt;
2. Create new file for patching - Databases/Databases/DicomEvidence/Schema/DicomEvidence-PartitionStoredProcs-patch.sql. &lt;br/&gt;
3. Add XXX_unique_pk_func() to PartitionStoredProcs-patch.sql for patching to partitioned dicomevidence database.&lt;br/&gt;
4. In PartitionStoredProcs-patch.sql, loop around partitioned tables, if no XXX_unique_pk_trigger in active partition, create it.&lt;br/&gt;
5. Add new key in state_info table, in which a row section_name=&apos;DicomEvidenceParititoning&apos; and key_name=&apos;DicomEvidenceParititoning.Patch&apos; and key_value=&apos;&lt;/p&gt;
{last patch being applied}
&lt;p&gt;&apos;  indicates the patch has been applied.&lt;br/&gt;
6. in DMS startup task, apply the patch when dicomevidence database has been partitioned but not been patched. Patches listed in PartitionPatch enum greater than last patch being applied which is in patch key of state_info table will be applied in the order in PartitionPatch.&lt;/p&gt;
</comment>
                            <comment id="525463" author="fzaryouh" created="Thu, 25 Apr 2019 17:40:12 -0400"  >&lt;p&gt;Can this issue be triggered with a correction?&lt;br/&gt;
We should only have one row for a patientid at any time.&lt;/p&gt;

&lt;p&gt;I&apos;ll mark this bug as CRITICAL and BlockPLA until someone confirms if it can be triggered with IntelePACS tools/apps.&lt;/p&gt;
</comment>
                            <comment id="525524" author="fboumdamouafo" created="Fri, 26 Apr 2019 10:17:12 -0400"  >&lt;ul&gt;
	&lt;li&gt;&lt;b&gt;Bug confirmed&lt;/b&gt;:
	&lt;ul&gt;
		&lt;li&gt;created two partitions of patient table (postgres mode)&lt;/li&gt;
		&lt;li&gt;populated the partitions&lt;/li&gt;
		&lt;li&gt;updated one row from the active partition with the patient_id from another row in another partition&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;Details&lt;/b&gt;
	&lt;ul&gt;
		&lt;li&gt;No issue after installing the patch&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;1) With initial partition:&lt;/p&gt;

&lt;p&gt;	&amp;gt; update patient set patient_id = &apos;IMSQA15919&apos; WHERE patient_id = &apos;IMSQA57541&apos;;&lt;br/&gt;
	ERROR:  duplicate key value violates unique constraint &quot;patient_partition_active_pkey&quot;&lt;br/&gt;
	DETAIL:  Key (patient_id)=(IMSQA15919) already exists.&lt;/p&gt;


&lt;p&gt;2) With partitioned patient table (two partitions):&lt;/p&gt;

&lt;p&gt;	&amp;gt; update patient set patient_id = &apos;IMSQA13889&apos; where patient_id = &apos;IMSQA10905&apos;;&lt;br/&gt;
	ERROR:  Duplicate key value violates unique primary constraint&lt;br/&gt;
	DETAIL:  A row with this current primary key already exists in another partition. Raised by patient_unique_pk_trigger&lt;br/&gt;
	CONTEXT:  PL/pgSQL function patient_unique_pk_func() line 1 at RAISE&lt;/p&gt;


&lt;p&gt;3) With partitioned patient table (with two archived partitions): [ patient_id in the oldest partition updated with a patient_id in another archived partition ]&lt;/p&gt;

&lt;p&gt;	&amp;gt; update patient set patient_id = &apos;IMSQA10905&apos; where patient_id = &apos;IMSQA13889&apos;;&lt;br/&gt;
	ERROR:  Duplicate key value violates unique primary constraint&lt;br/&gt;
	DETAIL:  A row with this current primary key already exists in another partition. Raised by patient_unique_pk_trigger&lt;br/&gt;
	CONTEXT:  PL/pgSQL function patient_unique_pk_func() line 1 at RAISE&lt;br/&gt;
	SQL statement &quot;INSERT INTO patient_partition_active VALUES ( NEW.* )&quot;&lt;br/&gt;
	PL/pgSQL function patient_moverowtoactivepartition() line 1 at SQL statement&lt;/p&gt;

&lt;p&gt;4) With partitioned patient table (two partions): [ data in both partitions, installed the RPMs ]&lt;/p&gt;

&lt;p&gt;	&amp;gt; update patient set patient_id = &apos;IMSQA13889&apos; where patient_id = &apos;IMSQA11912&apos;;&lt;br/&gt;
	ERROR:  Duplicate key value violates unique primary constraint&lt;br/&gt;
	DETAIL:  A row with this current primary key already exists in another partition. Raised by patient_unique_pk_trigger&lt;br/&gt;
	CONTEXT:  PL/pgSQL function patient_unique_pk_func() line 1 at RAISE&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Conclusion&lt;/b&gt;: problem solved!&lt;/p&gt;</comment>
                            <comment id="525552" author="pzhan" created="Fri, 26 Apr 2019 11:19:03 -0400"  >&lt;p&gt;&lt;a href=&quot;https://jira.intelerad.com/secure/ViewProfile.jspa?name=fzaryouh&quot; class=&quot;user-hover&quot; rel=&quot;fzaryouh&quot;&gt;Fouad Zaryouh&lt;/a&gt; Tried with IB to correct patientid (see first comment above), it does not trigger duplicate patientId.&lt;/p&gt;</comment>
                            <comment id="525816" author="robot-bc-rw" created="Mon, 29 Apr 2019 14:52:50 -0400"  >&lt;p&gt;Released by pzhan to master at 2019-04-29 14:52:46 (push 72580):&lt;br/&gt;
  PACS-4-17-1 (fix)        (previous build: PACS-4-17-1-P197)&lt;br/&gt;
  PACS-4-18-1 (fix)        (previous build: PACS-4-18-1-P24)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-18-2-A11)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/c14064a75127&quot; target=&quot;_blank&quot;&gt;intelepacs:c14064a75127&lt;/a&gt;  pzhan       PACS-4-17-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103690&quot; title=&quot;Duplicate primary-key can be generated in partition tables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103690&quot;&gt;&lt;del&gt;IP-103690&lt;/del&gt;&lt;/a&gt; fix: Add dicomevidence partition patch to prevent duplicate Pkey&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/889cee1c9408&quot; target=&quot;_blank&quot;&gt;intelepacs:889cee1c9408&lt;/a&gt;  pzhan       PACS-4-18-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103690&quot; title=&quot;Duplicate primary-key can be generated in partition tables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103690&quot;&gt;&lt;del&gt;IP-103690&lt;/del&gt;&lt;/a&gt; fix: Add dicomevidence partition patch to prevent duplicate Pkey&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/5f0e2f6c29d4&quot; target=&quot;_blank&quot;&gt;intelepacs:5f0e2f6c29d4&lt;/a&gt;  pzhan       trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103690&quot; title=&quot;Duplicate primary-key can be generated in partition tables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103690&quot;&gt;&lt;del&gt;IP-103690&lt;/del&gt;&lt;/a&gt; fix: Add dicomevidence partition patch to prevent duplicate Pkey&lt;/p&gt;</comment>
                            <comment id="526050" author="pzhan" created="Wed, 1 May 2019 09:54:38 -0400"  >&lt;p&gt;fixed&lt;/p&gt;</comment>
                            <comment id="527479" author="dvu" created="Fri, 10 May 2019 13:11:38 -0400"  >&lt;p&gt;Included in PACS-4-17-1-R18 (atlas 1.15.P41)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="51335" name="Database-DicomEvidence-4.17.1.P192-ims99.noarch.rpm" size="673490" author="pzhan" created="Thu, 18 Apr 2019 10:06:54 -0400"/>
                            <attachment id="51609" name="DicomMasterService-4.17.1.P192-ims99.noarch.rpm" size="2795019" author="pzhan" created="Thu, 25 Apr 2019 16:34:25 -0400"/>
                            <attachment id="51334" name="IP-103690-test-4-17-1.txt" size="5335" author="pzhan" created="Thu, 18 Apr 2019 10:06:05 -0400"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                    <customfield id="customfield_13806" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Availability Impact</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14409"><![CDATA[BlocksPLA]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_13901" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Code Committed</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14502"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;h4&gt;&lt;a name=&quot;RPMVersion&quot;&gt;&lt;/a&gt;RPM Version&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ISPClient%3A%3Cclientcode%3E&quot;&gt;&lt;/a&gt;ISP - Client : &lt;a href=&quot;https://inteleradprod.service-now.com/nav_to.do?uri=textsearch.do?sysparm_search=xxxx&quot; target=&quot;_blank&quot;&gt;xxxx&lt;/a&gt; - &amp;lt;client code&amp;gt;&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ClinicalImpact%3A&quot;&gt;&lt;/a&gt;Clinical Impact:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce%3A&quot;&gt;&lt;/a&gt;Minimal steps to reproduce:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour%3A&quot;&gt;&lt;/a&gt;Expected behaviour:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F%3A&quot;&gt;&lt;/a&gt;What happened instead?:&lt;/h4&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12110" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Documentation</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14406"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>IP-87798</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14400"><![CDATA[Database-DicomEvidence]]></customfieldvalue>
    <customfieldvalue key="13135"><![CDATA[DicomMasterService]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzcpbj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12102" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Release Notes</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14407"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13815" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Risk</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14445"><![CDATA[Standard Change]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13501" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Scrum Team</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14112"><![CDATA[Backend Raptors]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10801"><![CDATA[CRITICAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="2038">Raptors 2019 - S8</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:float">
                        <customfieldname>Story Points</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-103592] dicomevidence: patient_birth_date/patient_birth_time:  New version, update script and dbConfigurator</title>
                <link>https://jira.intelerad.com/browse/IP-103592</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;h4&gt;&lt;a name=&quot;AcceptanceCriteria%3A&quot;&gt;&lt;/a&gt;Acceptance Criteria:&lt;/h4&gt;
&lt;ul&gt;
	&lt;li&gt;The new schema file with separate birth date and birth time should have a new minor version (ex 1.0 to 1.1)&lt;/li&gt;
	&lt;li&gt;A 1.0 to 1.1 update script will be provided&lt;/li&gt;
	&lt;li&gt;Java code to run ALTER TABLEs on the patient table will not be provided&lt;/li&gt;
	&lt;li&gt;In Java, fail hard at DMS startup if the client is still on the old patient schema (meaning dbConfigurator didn&apos;t run)&lt;/li&gt;
	&lt;li&gt;Need to QA the first 2 issues as part of this last one (&lt;a href=&quot;https://jira.intelerad.com/browse/IP-103329&quot; title=&quot;Dicomevidence:  Migration Script:  Split patient_birth_date_time into text date and time fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103329&quot;&gt;&lt;del&gt;IP-103329&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103331&quot; title=&quot;dicomevidence:  Migrate existing 4-17-1 client to patient birth date and time fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103331&quot;&gt;&lt;del&gt;IP-103331&lt;/del&gt;&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
</description>
            <key id="152019">IP-103592</key>
            <summary>dicomevidence: patient_birth_date/patient_birth_time:  New version, update script and dbConfigurator</summary>
                <type id="3" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13918&amp;avatarType=issuetype">Task</type>
                                            <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="hmishra">Hardik Mishra</assignee>
                                    <reporter username="ldegruchy">Luke de Gruchy</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Mar 2019 13:18:46 -0400</created>
                <updated>Wed, 17 Apr 2019 10:48:00 -0400</updated>
                            <resolved>Fri, 12 Apr 2019 10:28:26 -0400</resolved>
                                    <version>4-17-1</version>
                                    <fixVersion>4-17-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                    <timeoriginalestimate seconds="0">0 minutes</timeoriginalestimate>
                            <timeestimate seconds="23400">6 hours, 30 minutes</timeestimate>
                            <timespent seconds="414000">2 weeks, 4 days, 3 hours</timespent>
                                <comments>
                            <comment id="521871" author="luke.degruchy" created="Thu, 28 Mar 2019 08:25:30 -0400"  >&lt;p&gt;If we can make Mat&apos;s suggestion for having dbConfigurator work if it detects rows in the patient table, I&apos;ve attached some plpgsql code that will do it.&lt;/p&gt;</comment>
                            <comment id="522124" author="luke.degruchy" created="Fri, 29 Mar 2019 11:36:48 -0400"  >&lt;h4&gt;&lt;a name=&quot;TestCases&quot;&gt;&lt;/a&gt;Test Cases&lt;/h4&gt;

&lt;ol&gt;
	&lt;li&gt;4-16-1 site FPU&apos;d to 4-17-1 or later:  Client will automatically get the new birth date/time schema whether or not postgres migration happens&lt;/li&gt;
	&lt;li&gt;4-17-1 site in Sybase mode FRUd and remaining on Sybase mode:  dbConfigurator must be run to update dicomevidence from version 1 to version 2.   DicomMasterService will not detect whether or not version 1 or version 2 of the schema is in place.   FRU procedures including running dbConfigurator&lt;/li&gt;
	&lt;li&gt;4-17 site in Sybase mode and getting FRU&apos;d and migrating to Postgres:  dbConfigurator must be run to update dicomevidence from version 1 to version 2.   DicomMasterService will detect whether or not version 1 or version 2 of the schema is in place and that a postgres migration did not previously take place.   If version 1 is still in place DMS will refuse to start.   A clear Exception log message will provide instructions to run dbConfigurator
	&lt;ul&gt;
		&lt;li&gt;Patient Birth Time: Various scenarios:
		&lt;ul&gt;
			&lt;li&gt;Seconds Midnight: &lt;span class=&quot;error&quot;&gt;&amp;#91;NULL&amp;#93;&lt;/span&gt;                  HHmmss.&lt;span class=&quot;error&quot;&gt;&amp;#91;SSSSSS&amp;#93;&lt;/span&gt;: &lt;span class=&quot;error&quot;&gt;&amp;#91;NULL&amp;#93;&lt;/span&gt;&lt;/li&gt;
			&lt;li&gt;Seconds Midnight: &lt;span class=&quot;error&quot;&gt;&amp;#91;0.0&amp;#93;&lt;/span&gt;                  HHmmss.&lt;span class=&quot;error&quot;&gt;&amp;#91;SSSSSS&amp;#93;&lt;/span&gt;: &lt;span class=&quot;error&quot;&gt;&amp;#91;000000&amp;#93;&lt;/span&gt;&lt;/li&gt;
			&lt;li&gt;Seconds Midnight: &lt;span class=&quot;error&quot;&gt;&amp;#91;0.99&amp;#93;&lt;/span&gt;                 HHmmss.&lt;span class=&quot;error&quot;&gt;&amp;#91;SSSSSS&amp;#93;&lt;/span&gt;: &lt;span class=&quot;error&quot;&gt;&amp;#91;000000.990000&amp;#93;&lt;/span&gt;&lt;/li&gt;
			&lt;li&gt;Seconds Midnight: &lt;span class=&quot;error&quot;&gt;&amp;#91;2.34453245&amp;#93;&lt;/span&gt;           HHmmss.&lt;span class=&quot;error&quot;&gt;&amp;#91;SSSSSS&amp;#93;&lt;/span&gt;: &lt;span class=&quot;error&quot;&gt;&amp;#91;000002.344532&amp;#93;&lt;/span&gt;&lt;/li&gt;
			&lt;li&gt;Seconds Midnight: &lt;span class=&quot;error&quot;&gt;&amp;#91;1234.34&amp;#93;&lt;/span&gt;              HHmmss.&lt;span class=&quot;error&quot;&gt;&amp;#91;SSSSSS&amp;#93;&lt;/span&gt;: &lt;span class=&quot;error&quot;&gt;&amp;#91;002034.339999&amp;#93;&lt;/span&gt;&lt;/li&gt;
			&lt;li&gt;Seconds Midnight: &lt;span class=&quot;error&quot;&gt;&amp;#91;50000&amp;#93;&lt;/span&gt;                HHmmss.&lt;span class=&quot;error&quot;&gt;&amp;#91;SSSSSS&amp;#93;&lt;/span&gt;: &lt;span class=&quot;error&quot;&gt;&amp;#91;135320&amp;#93;&lt;/span&gt;&lt;/li&gt;
			&lt;li&gt;Seconds Midnight: &lt;span class=&quot;error&quot;&gt;&amp;#91;86399&amp;#93;&lt;/span&gt;                HHmmss.&lt;span class=&quot;error&quot;&gt;&amp;#91;SSSSSS&amp;#93;&lt;/span&gt;: &lt;span class=&quot;error&quot;&gt;&amp;#91;235959&amp;#93;&lt;/span&gt;&lt;/li&gt;
			&lt;li&gt;Seconds Midnight: &lt;span class=&quot;error&quot;&gt;&amp;#91;86399.99&amp;#93;&lt;/span&gt;             HHmmss.&lt;span class=&quot;error&quot;&gt;&amp;#91;SSSSSS&amp;#93;&lt;/span&gt;: &lt;span class=&quot;error&quot;&gt;&amp;#91;235959.990000&amp;#93;&lt;/span&gt;&lt;/li&gt;
			&lt;li&gt;Seconds Midnight: &lt;span class=&quot;error&quot;&gt;&amp;#91;86400&amp;#93;&lt;/span&gt;                HHmmss.&lt;span class=&quot;error&quot;&gt;&amp;#91;SSSSSS&amp;#93;&lt;/span&gt;: &lt;span class=&quot;error&quot;&gt;&amp;#91;NULL&amp;#93;&lt;/span&gt;&lt;/li&gt;
			&lt;li&gt;Seconds Midnight: &lt;span class=&quot;error&quot;&gt;&amp;#91;87000&amp;#93;&lt;/span&gt;                HHmmss.&lt;span class=&quot;error&quot;&gt;&amp;#91;SSSSSS&amp;#93;&lt;/span&gt;: &lt;span class=&quot;error&quot;&gt;&amp;#91;NULL&amp;#93;&lt;/span&gt;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;4-17-1 site already in Postgres mode with data in dicomevidence getting FRU&apos;d.  In this case, there&apos;s only one:  VIAM.   Manual procedures to upgrade VIAM are provided here:   &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103331&quot; title=&quot;dicomevidence:  Migrate existing 4-17-1 client to patient birth date and time fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103331&quot;&gt;&lt;del&gt;IP-103331&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="522497" author="robot-bc-rw" created="Tue, 2 Apr 2019 13:52:39 -0400"  >&lt;p&gt;Released by ldegruchy to master at 2019-04-02 13:52:35 (push 72235):&lt;br/&gt;
  PACS-4-18-1 (fix)        (previous build: PACS-4-18-1-P3)&lt;br/&gt;
  PACS-4-18-1 (fix)        (previous build: PACS-4-18-1-P3)&lt;br/&gt;
  PACS-4-18-1 (fix)        (previous build: PACS-4-18-1-P3)&lt;br/&gt;
  PACS-4-18-1 (fix)        (previous build: PACS-4-18-1-P3)&lt;br/&gt;
  PACS-4-18-1 (fix)        (previous build: PACS-4-18-1-P3)&lt;br/&gt;
  PACS-4-18-1 (fix)        (previous build: PACS-4-18-1-P3)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-18-2-A3)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/bfd83ab023d8&quot; target=&quot;_blank&quot;&gt;intelepacs:bfd83ab023d8&lt;/a&gt;  ldegruchy   PACS-4-18-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103592&quot; title=&quot;dicomevidence: patient_birth_date/patient_birth_time:  New version, update script and dbConfigurator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103592&quot;&gt;&lt;del&gt;IP-103592&lt;/del&gt;&lt;/a&gt; fix: Schema file change and upgrade files.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/11d3b83a7478&quot; target=&quot;_blank&quot;&gt;intelepacs:11d3b83a7478&lt;/a&gt;  ldegruchy   PACS-4-18-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103592&quot; title=&quot;dicomevidence: patient_birth_date/patient_birth_time:  New version, update script and dbConfigurator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103592&quot;&gt;&lt;del&gt;IP-103592&lt;/del&gt;&lt;/a&gt; fix: changes for patient birth date and time split,empty for invalid time and errors&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/17282707156b&quot; target=&quot;_blank&quot;&gt;intelepacs:17282707156b&lt;/a&gt;  ldegruchy   PACS-4-18-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103592&quot; title=&quot;dicomevidence: patient_birth_date/patient_birth_time:  New version, update script and dbConfigurator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103592&quot;&gt;&lt;del&gt;IP-103592&lt;/del&gt;&lt;/a&gt; fix: Added new date and time conversion/formatting using java.time APIs&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/187c8ad5aba8&quot; target=&quot;_blank&quot;&gt;intelepacs:187c8ad5aba8&lt;/a&gt;  ldegruchy   PACS-4-18-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103592&quot; title=&quot;dicomevidence: patient_birth_date/patient_birth_time:  New version, update script and dbConfigurator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103592&quot;&gt;&lt;del&gt;IP-103592&lt;/del&gt;&lt;/a&gt; fix: Ensure DMS Java and JOOQ code works with and converts to/from new patient schema&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/b3d8ed80b44a&quot; target=&quot;_blank&quot;&gt;intelepacs:b3d8ed80b44a&lt;/a&gt;  ldegruchy   PACS-4-18-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103592&quot; title=&quot;dicomevidence: patient_birth_date/patient_birth_time:  New version, update script and dbConfigurator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103592&quot;&gt;&lt;del&gt;IP-103592&lt;/del&gt;&lt;/a&gt; fix: Implement ALTER table logic for patient birth date/time.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/21ccf9f6dd8a&quot; target=&quot;_blank&quot;&gt;intelepacs:21ccf9f6dd8a&lt;/a&gt;  ldegruchy   PACS-4-18-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103592&quot; title=&quot;dicomevidence: patient_birth_date/patient_birth_time:  New version, update script and dbConfigurator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103592&quot;&gt;&lt;del&gt;IP-103592&lt;/del&gt;&lt;/a&gt; fix: Implement ALTER table logic for patient birth date/time.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/6dc3f2813f3d&quot; target=&quot;_blank&quot;&gt;intelepacs:6dc3f2813f3d&lt;/a&gt;  ldegruchy   trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103592&quot; title=&quot;dicomevidence: patient_birth_date/patient_birth_time:  New version, update script and dbConfigurator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103592&quot;&gt;&lt;del&gt;IP-103592&lt;/del&gt;&lt;/a&gt; fix: merge from PACS-4-18-1&lt;/p&gt;</comment>
                            <comment id="522502" author="luke.degruchy" created="Tue, 2 Apr 2019 14:02:45 -0400"  >&lt;p&gt;Committing on 4-18-1 and trunk only to allow for functionality to be fully captured by 4-18-1 regression testing while functionality is thoroughly tested on 4-17-1 before being delivered to 4-17-1 clients.&lt;/p&gt;</comment>
                            <comment id="522535" author="luke.degruchy" created="Tue, 2 Apr 2019 16:13:10 -0400"  >&lt;p&gt;I&apos;ve attached the following dev RPMS:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Database-DicomEvidence&lt;/li&gt;
	&lt;li&gt;listLocsforStudy&lt;/li&gt;
	&lt;li&gt;DicomMasterService&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="522537" author="hmishra" created="Tue, 2 Apr 2019 16:16:13 -0400"  >&lt;p&gt;&lt;b&gt;Testing Plan:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://docs.google.com/spreadsheets/d/1APR5UMGUD_3W4B-henNLSP2v7DcCklqWd37BMDQAEvI/edit?usp=sharing&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://docs.google.com/spreadsheets/d/1APR5UMGUD_3W4B-henNLSP2v7DcCklqWd37BMDQAEvI/edit?usp=sharing&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://jira.intelerad.com/secure/ViewProfile.jspa?name=mtavallaei&quot; class=&quot;user-hover&quot; rel=&quot;mtavallaei&quot;&gt;Mehrnaz Tavallaei&lt;/a&gt; I have attached Test results and behavior based on my testing. Please feel free to Edit/Comments.&lt;/p&gt;</comment>
                            <comment id="522539" author="luke.degruchy" created="Tue, 2 Apr 2019 16:19:28 -0400"  >&lt;h4&gt;&lt;a name=&quot;DeveloperTestPlan&quot;&gt;&lt;/a&gt;Developer Test Plan&lt;/h4&gt;

&lt;ul&gt;
	&lt;li&gt;Run listLocsforStudy.pl to view patient details by:
	&lt;ul&gt;
		&lt;li&gt;patient ID&lt;/li&gt;
		&lt;li&gt;study ID&lt;/li&gt;
		&lt;li&gt;accession number&lt;/li&gt;
		&lt;li&gt;requested procedure ID&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Perform a Postgres migration with various types of patient birth times (see comments above)&lt;/li&gt;
	&lt;li&gt;Restart DMS in Sybase mode without having run dbConfigurator (doesn&apos;t complain)&lt;/li&gt;
	&lt;li&gt;Restart DMS after just switching to postgres mode without having run dbConfigurator (DMS will fail to start)&lt;/li&gt;
	&lt;li&gt;* Restart DMS after already in postgres mode (DMS will fail to start)&lt;/li&gt;
	&lt;li&gt;Run dbConfigurator command to ensure that schema is updated:
	&lt;ul&gt;
		&lt;li&gt;dbConfigurator --upgrade  --sapassword admpass /usr/local/tools/DatabaseSchemas/Postgres/Schema-DicomEvidence.cfg&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Populate study data with modifyAndSend both before and after postgres migration&lt;/li&gt;
	&lt;li&gt;Ensure that some weird patient birth dates and times are populated:&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; patient_id |   patient_name   | patient_birth_date | patient_birth_time 
------------+------------------+--------------------+--------------------
 IMSQA27902 | IMSQA27902^IMSQA | 19800101           | 000000
 IMSQA31420 | IMSQA31420^IMSQA | 19800101           | 155738.123456
 IMSQA70593 | IMSQA70593^IMSQA | 29991212           | 000000
 IMSQA43951 | IMSQA43951^IMSQA | 19800101           | 202451.234000
 IMSQA48511 | IMSQA48511^IMSQA | NULL               | 000000
 IMSQA13145 | IMSQA13145^IMSQA | 19800101           | 000000
 IMSQA12509 | IMSQA12509^IMSQA | 18950101           | 000000
 IMSQA14436 | IMSQA14436^IMSQA | 19800101           | 235959
 IMSQA15615 | IMSQA15615^IMSQA | 19800101           | NULL
 IMSQA98291 | IMSQA98291^IMSQA | 19800101           | 124107.00000
 IMSQA89812 | IMSQA89812^IMSQA | 19800101           | 000000
 IMSQA97358 | IMSQA97358^IMSQA | 19800101           | 000000
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
	&lt;li&gt;Patient search in InteleBrowser make sure all patient birth dates display without error (in the NULL date case it should be displayed as blank)&lt;/li&gt;
	&lt;li&gt;Worklist in InteleViewer displays all orders
	&lt;ul&gt;
		&lt;li&gt;Ran orderGenerator to update the statuses of the corresponding orders to IP first&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="522540" author="luke.degruchy" created="Tue, 2 Apr 2019 16:20:08 -0400"  >&lt;p&gt;4-17-1 branch:   PACS-4-17-1-ldegruchy-patient-birth-date-time&lt;/p&gt;</comment>
                            <comment id="523040" author="robot-bc-rw" created="Fri, 5 Apr 2019 13:28:11 -0400"  >&lt;p&gt;Released by hmishra to master at 2019-04-05 13:28:08 (push 72286):&lt;br/&gt;
  PACS-4-18-1 (fix)        (previous build: PACS-4-18-1-P6)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-18-2-A5)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/5675f3317ee4&quot; target=&quot;_blank&quot;&gt;intelepacs:5675f3317ee4&lt;/a&gt;  hmishra     PACS-4-18-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103592&quot; title=&quot;dicomevidence: patient_birth_date/patient_birth_time:  New version, update script and dbConfigurator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103592&quot;&gt;&lt;del&gt;IP-103592&lt;/del&gt;&lt;/a&gt; fix: code review feedback&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/48f74bc9a3fd&quot; target=&quot;_blank&quot;&gt;intelepacs:48f74bc9a3fd&lt;/a&gt;  hmishra     trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103592&quot; title=&quot;dicomevidence: patient_birth_date/patient_birth_time:  New version, update script and dbConfigurator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103592&quot;&gt;&lt;del&gt;IP-103592&lt;/del&gt;&lt;/a&gt; fix: code review feedback&lt;/p&gt;</comment>
                            <comment id="523711" author="robot-bc-rw" created="Wed, 10 Apr 2019 16:22:26 -0400"  >&lt;p&gt;Released by hmishra to master at 2019-04-10 16:22:21 (push 72344):&lt;br/&gt;
  PACS-4-17-1 (fix)        (previous build: PACS-4-17-1-P187)&lt;br/&gt;
  PACS-4-17-1 (fix)        (previous build: PACS-4-17-1-P187)&lt;br/&gt;
  PACS-4-17-1 (fix)        (previous build: PACS-4-17-1-P187)&lt;br/&gt;
  PACS-4-17-1 (fix)        (previous build: PACS-4-17-1-P187)&lt;br/&gt;
  PACS-4-17-1 (fix)        (previous build: PACS-4-17-1-P187)&lt;br/&gt;
  PACS-4-17-1 (fix)        (previous build: PACS-4-17-1-P187)&lt;br/&gt;
  PACS-4-17-1 (fix)        (previous build: PACS-4-17-1-P187)&lt;br/&gt;
  PACS-4-18-1 (dummy)      (previous build: PACS-4-18-1-P11)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/dd52ccfbf47b&quot; target=&quot;_blank&quot;&gt;intelepacs:dd52ccfbf47b&lt;/a&gt;  hmishra     PACS-4-17-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103592&quot; title=&quot;dicomevidence: patient_birth_date/patient_birth_time:  New version, update script and dbConfigurator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103592&quot;&gt;&lt;del&gt;IP-103592&lt;/del&gt;&lt;/a&gt; fix: schema files changes&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/892e1965316c&quot; target=&quot;_blank&quot;&gt;intelepacs:892e1965316c&lt;/a&gt;  hmishra     PACS-4-17-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103592&quot; title=&quot;dicomevidence: patient_birth_date/patient_birth_time:  New version, update script and dbConfigurator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103592&quot;&gt;&lt;del&gt;IP-103592&lt;/del&gt;&lt;/a&gt; fix: changes for patient birth date and time split,empty for invalid time and errors&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/8c56f97fa7df&quot; target=&quot;_blank&quot;&gt;intelepacs:8c56f97fa7df&lt;/a&gt;  hmishra     PACS-4-17-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103592&quot; title=&quot;dicomevidence: patient_birth_date/patient_birth_time:  New version, update script and dbConfigurator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103592&quot;&gt;&lt;del&gt;IP-103592&lt;/del&gt;&lt;/a&gt; fix: changes for patient birth date and time split,empty for invalid time and errors&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/0e9a37d8759f&quot; target=&quot;_blank&quot;&gt;intelepacs:0e9a37d8759f&lt;/a&gt;  hmishra     PACS-4-17-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103592&quot; title=&quot;dicomevidence: patient_birth_date/patient_birth_time:  New version, update script and dbConfigurator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103592&quot;&gt;&lt;del&gt;IP-103592&lt;/del&gt;&lt;/a&gt; fix: Added new date and time conversion/formatting using java.time APIs&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/885cd1ff37b5&quot; target=&quot;_blank&quot;&gt;intelepacs:885cd1ff37b5&lt;/a&gt;  hmishra     PACS-4-17-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103592&quot; title=&quot;dicomevidence: patient_birth_date/patient_birth_time:  New version, update script and dbConfigurator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103592&quot;&gt;&lt;del&gt;IP-103592&lt;/del&gt;&lt;/a&gt; fix: DMS: Verify patient birth date/time schema is correct in postgres mode or fail to start.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/65c16330b21b&quot; target=&quot;_blank&quot;&gt;intelepacs:65c16330b21b&lt;/a&gt;  hmishra     PACS-4-17-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103592&quot; title=&quot;dicomevidence: patient_birth_date/patient_birth_time:  New version, update script and dbConfigurator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103592&quot;&gt;&lt;del&gt;IP-103592&lt;/del&gt;&lt;/a&gt; fix: listLocsforStudy.pl:  Display patient birth date&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/e2435b4bd41e&quot; target=&quot;_blank&quot;&gt;intelepacs:e2435b4bd41e&lt;/a&gt;  hmishra     PACS-4-17-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103592&quot; title=&quot;dicomevidence: patient_birth_date/patient_birth_time:  New version, update script and dbConfigurator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103592&quot;&gt;&lt;del&gt;IP-103592&lt;/del&gt;&lt;/a&gt; fix: code review feedback&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/79f8990a6489&quot; target=&quot;_blank&quot;&gt;intelepacs:79f8990a6489&lt;/a&gt;  hmishra     PACS-4-18-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103592&quot; title=&quot;dicomevidence: patient_birth_date/patient_birth_time:  New version, update script and dbConfigurator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103592&quot;&gt;&lt;del&gt;IP-103592&lt;/del&gt;&lt;/a&gt; dummy: dummy merge from PACS-4-17-1&lt;/p&gt;</comment>
                            <comment id="523719" author="mtavallaei" created="Wed, 10 Apr 2019 16:35:20 -0400"  >&lt;p&gt;QA is done. Everything works well.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;listLocsforStudy.pl is tested on Patient-ID, Study-ID, Accession-Number, Requested Procedure ID (Before and after the migration)&lt;/li&gt;
	&lt;li&gt;DMS fails to start if we switch to Postgres without running dbConfigurator command&lt;/li&gt;
	&lt;li&gt;The dbConfigurator command will upgrade the database schema&lt;/li&gt;
	&lt;li&gt;The data will be generated using _dcmodify _ command (Before and after the migration)&lt;/li&gt;
	&lt;li&gt;The database schema will be upgraded, the migration happens, and the the patient-birth-date and patient-birth-time columns are separated&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;You can find more details here: &lt;a href=&quot;https://docs.google.com/document/d/1EJfmV1Qdrkh5bdKWju_nJLRkTOqhF8YO5GgcsY3UZ1k/edit?usp=sharing&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://docs.google.com/document/d/1EJfmV1Qdrkh5bdKWju_nJLRkTOqhF8YO5GgcsY3UZ1k/edit?usp=sharing&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="524007" author="hmishra" created="Fri, 12 Apr 2019 11:13:56 -0400"  >&lt;p&gt;Integration Test passed on 4-17-1 &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://rnd-ci.intelerad.com/job/IntelePACS_IntegrationTest_PACS-4-17-1/520/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://rnd-ci.intelerad.com/job/IntelePACS_IntegrationTest_PACS-4-17-1/520/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://rnd-ci.intelerad.com/job/IntelePACS_IntegrationTest_PACS-4-17-1/522/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://rnd-ci.intelerad.com/job/IntelePACS_IntegrationTest_PACS-4-17-1/522/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="524446" author="dvu" created="Tue, 16 Apr 2019 15:05:59 -0400"  >&lt;p&gt;Included in PACS-4-17-1-R15 (atlas 1.15.P41)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="51037" name="04-Apr-Migration Testing.txt" size="8323" author="hmishra" created="Thu, 4 Apr 2019 11:11:57 -0400"/>
                            <attachment id="50927" name="Database-DicomEvidence-4.17.1.P181-ims99.noarch.rpm" size="669884" author="ldegruchy" created="Tue, 2 Apr 2019 16:12:10 -0400"/>
                            <attachment id="50928" name="DicomMasterService-4.17.1.P181-ims99.noarch.rpm" size="2791263" author="ldegruchy" created="Tue, 2 Apr 2019 16:12:10 -0400"/>
                            <attachment id="50780" name="blowupifpatientsexist.sql" size="391" author="ldegruchy" created="Thu, 28 Mar 2019 08:25:38 -0400"/>
                            <attachment id="50929" name="listLocsforStudy-4.17.1.P181-ims99.noarch.rpm" size="4041257" author="ldegruchy" created="Tue, 2 Apr 2019 16:12:10 -0400"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_13901" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Code Committed</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14502"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;h4&gt;&lt;a name=&quot;RPMVersion&quot;&gt;&lt;/a&gt;RPM Version&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ISPClient%3A%3Cclientcode%3E&quot;&gt;&lt;/a&gt;ISP - Client : &lt;a href=&quot;https://inteleradprod.service-now.com/nav_to.do?uri=textsearch.do?sysparm_search=xxxx&quot; target=&quot;_blank&quot;&gt;xxxx&lt;/a&gt; - &amp;lt;client code&amp;gt;&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ClinicalImpact%3A&quot;&gt;&lt;/a&gt;Clinical Impact:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce%3A&quot;&gt;&lt;/a&gt;Minimal steps to reproduce:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour%3A&quot;&gt;&lt;/a&gt;Expected behaviour:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F%3A&quot;&gt;&lt;/a&gt;What happened instead?:&lt;/h4&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12110" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Documentation</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14406"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>IP-90140</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14400"><![CDATA[Database-DicomEvidence]]></customfieldvalue>
    <customfieldvalue key="13135"><![CDATA[DicomMasterService]]></customfieldvalue>
    <customfieldvalue key="13260"><![CDATA[listLocsforStudy]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzz9o7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12102" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Release Notes</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14407"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13815" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Risk</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14445"><![CDATA[Standard Change]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13501" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Scrum Team</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14112"><![CDATA[Backend Raptors]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="2002">Raptors 2019 - S6</customfieldvalue>
    <customfieldvalue id="2020">Raptors 2019 - S7</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:float">
                        <customfieldname>Story Points</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-103464] Fix unit tests and re-enable intermediaries unit test after openjdk11 is merge to trunk</title>
                <link>https://jira.intelerad.com/browse/IP-103464</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;h4&gt;&lt;a name=&quot;RPMVersion&quot;&gt;&lt;/a&gt;RPM Version&lt;/h4&gt;
&lt;p&gt;N/A&lt;/p&gt;
&lt;h4&gt;&lt;a name=&quot;ISPClient%3A&quot;&gt;&lt;/a&gt;ISP - Client :&lt;/h4&gt;
&lt;p&gt;N/A&lt;/p&gt;
&lt;h4&gt;&lt;a name=&quot;ClinicalImpact%3A&quot;&gt;&lt;/a&gt;Clinical Impact:&lt;/h4&gt;
&lt;p&gt;N/A&lt;/p&gt;
&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce%3A&quot;&gt;&lt;/a&gt;Minimal steps to reproduce:&lt;/h4&gt;
&lt;p&gt;execute scons&lt;/p&gt;
&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour%3A&quot;&gt;&lt;/a&gt;Expected behaviour:&lt;/h4&gt;
&lt;p&gt;intermediaries testall is executed&lt;/p&gt;
&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F%3A&quot;&gt;&lt;/a&gt;What happened instead?:&lt;/h4&gt;


&lt;p&gt;We had to disable the test &lt;br/&gt;
./components/dbintermediarieslib/src/test/java/com/intelerad/db/intermediaries/lib/TestAll.java&lt;br/&gt;
since it would time out the build.(Buildbot would stop test all after 600 seconds of inactivity) - see &lt;a href=&quot;https://jira.intelerad.com/browse/BC-4532&quot; title=&quot;Investigate devel-openjdk11 build timeouts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BC-4532&quot;&gt;&lt;del&gt;BC-4532&lt;/del&gt;&lt;/a&gt; for more details.&lt;/p&gt;

&lt;p&gt;Fixing this bug should re-enable the TestAll and fix the timeout issue.&lt;/p&gt;</description>
            <key id="151673">IP-103464</key>
            <summary>Fix unit tests and re-enable intermediaries unit test after openjdk11 is merge to trunk</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://jira.intelerad.com/images/icons/priorities/critical.svg">High</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="pzhan">Peter Zhan</assignee>
                                    <reporter username="jsabella">Jean-Sebastien Abella</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Mar 2019 13:24:40 -0400</created>
                <updated>Wed, 24 Apr 2019 13:37:13 -0400</updated>
                            <resolved>Tue, 2 Apr 2019 17:55:07 -0400</resolved>
                                    <version>4-18-1</version>
                                    <fixVersion>4-18-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                    <timeoriginalestimate seconds="0">0 minutes</timeoriginalestimate>
                                    <timespent seconds="126000">4 days, 3 hours</timespent>
                                <comments>
                            <comment id="522427" author="robot-bc-rw" created="Tue, 2 Apr 2019 09:55:00 -0400"  >&lt;p&gt;Released by pzhan to master at 2019-04-02 09:54:57 (push 72229):&lt;br/&gt;
  PACS-4-18-1 (fix)        (previous build: PACS-4-18-1-P3)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-18-2-A3)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/7a009255c5db&quot; target=&quot;_blank&quot;&gt;intelepacs:7a009255c5db&lt;/a&gt;  pzhan       PACS-4-18-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103464&quot; title=&quot;Fix unit tests and re-enable intermediaries unit test after openjdk11 is merge to trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103464&quot;&gt;&lt;del&gt;IP-103464&lt;/del&gt;&lt;/a&gt; fix: reduce blocking in CloseableListeningReactor.close(); enable dbintermediarieslib test cases&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/7aed1ea670e5&quot; target=&quot;_blank&quot;&gt;intelepacs:7aed1ea670e5&lt;/a&gt;  pzhan       trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103464&quot; title=&quot;Fix unit tests and re-enable intermediaries unit test after openjdk11 is merge to trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103464&quot;&gt;&lt;del&gt;IP-103464&lt;/del&gt;&lt;/a&gt; fix: reduce blocking in CloseableListeningReactor.close(); enable dbintermediarieslib test cases&lt;/p&gt;</comment>
                            <comment id="522431" author="pzhan" created="Tue, 2 Apr 2019 10:20:14 -0400"  >&lt;p&gt;Simulate el6 environment:&lt;br/&gt;
1. download attached scripts - initcontainer, launchcontainer - to root of PACS code, for example ~/repos/trunk&lt;br/&gt;
2. launch the container by run &quot;./launchcontainer&quot;&lt;br/&gt;
3. now you are in el6 container, you can prefix your commands with xvfb-run, for example &quot;xvfb-run scons&quot;. The command will run under el6.&lt;/p&gt;

&lt;p&gt;Example:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;pzhan@pzhan trunk&amp;#93;&lt;/span&gt;$ ./launchcontainer&lt;br/&gt;
-&lt;del&gt;2019-04-02 10:15:14&lt;/del&gt;-  &lt;a href=&quot;http://forge.intelerad.com/hg/docker-utils/raw-file/default/launchcontainer&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://forge.intelerad.com/hg/docker-utils/raw-file/default/launchcontainer&lt;/a&gt;&lt;br/&gt;
Resolving forge.intelerad.com (forge.intelerad.com)... 10.90.129.8&lt;br/&gt;
Connecting to forge.intelerad.com (forge.intelerad.com)|10.90.129.8|:80... connected.&lt;br/&gt;
HTTP request sent, awaiting response... 200 Script output follows&lt;br/&gt;
Length: 2363 (2.3K) &lt;span class=&quot;error&quot;&gt;&amp;#91;application/binary&amp;#93;&lt;/span&gt;&lt;br/&gt;
Saving to: &#8216;/home/pzhan/repos/trunk/build/launchcontainer&#8217;&lt;/p&gt;

&lt;p&gt;100%&lt;span class=&quot;error&quot;&gt;&amp;#91;=========================================================================================================================================================================&amp;gt;&amp;#93;&lt;/span&gt; 2,363       --.-K/s   in 0s      &lt;/p&gt;

&lt;p&gt;2019-04-02 10:15:14 (202 MB/s) - &#8216;/home/pzhan/repos/trunk/build/launchcontainer&#8217; saved &lt;span class=&quot;error&quot;&gt;&amp;#91;2363/2363&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;creating group id 513 (pzhan_g) to match current user&lt;br/&gt;
creating user id 10671 (pzhan) to match current user&lt;br/&gt;
set /etc/localtime symlink to &apos;/usr/share/zoneinfo/America/Toronto&apos;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;pzhan@pzhan-ims-buildbot-el6-20180501-1 trunk&amp;#93;&lt;/span&gt;$ xvfb-run scons components/dbintermediarieslib/&lt;/p&gt;</comment>
                            <comment id="522459" author="pzhan" created="Tue, 2 Apr 2019 11:14:44 -0400"  >&lt;p&gt;The timeout is caused by com.intelerad.db.intermediaries.lib.http.CloseableListeningReactor.close() which is called 7 times in the test suit.&lt;br/&gt;
After this method being called, it should be allowed existing socket to complete IO and disallowed new socket open. &lt;br/&gt;
To achieve the goal,  ServerSocketChannelImpl should be killed; this depends on the key to be de-registered from selector. De-registration should be done by a selector.select() call. &lt;br/&gt;
AbstractMultiworkerIOReactor has infinite loop to call selector.select(); to ensure select() is called before CloseableListeningReactor.close() exit, CloseableListeningReactor.close() has to call selector.selectNow() explicitly. &lt;br/&gt;
However, selector.select() has synchronized code on the selector. The results in selector.selectNow() from CloseableListeningReactor.close()  having to waint indefinite time - could be couple of minutes - to get monitor of the selector.&lt;/p&gt;

&lt;p&gt;Solution:&lt;br/&gt;
Instead of going to synchronized code, CloseableListeningReactor.close() can wait for the key being de-registered so that channel.close() can kill the channel.&lt;/p&gt;</comment>
                            <comment id="522562" author="pzhan" created="Tue, 2 Apr 2019 17:55:07 -0400"  >&lt;p&gt;fixed.&lt;br/&gt;
Since the code change is in library. Too many RPM could be involved.  &quot;RPM Upgrade List&quot; could not be accurate.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10400">
                    <name>Regression</name>
                                                                <inwardlinks description="is introduced by">
                                        <issuelink>
            <issuekey id="151485">BC-4532</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="50903" name="initcontainer" size="698" author="pzhan" created="Tue, 2 Apr 2019 10:09:13 -0400"/>
                            <attachment id="50904" name="launchcontainer" size="1199" author="pzhan" created="Tue, 2 Apr 2019 10:09:13 -0400"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                    <customfield id="customfield_13806" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Availability Impact</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14409"><![CDATA[BlocksPLA]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_13901" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Code Committed</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14502"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;h4&gt;&lt;a name=&quot;RPMVersion&quot;&gt;&lt;/a&gt;RPM Version&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ISPClient%3A%3Cclientcode%3E&quot;&gt;&lt;/a&gt;ISP - Client : &lt;a href=&quot;https://inteleradprod.service-now.com/nav_to.do?uri=textsearch.do?sysparm_search=xxxx&quot; target=&quot;_blank&quot;&gt;xxxx&lt;/a&gt; - &amp;lt;client code&amp;gt;&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ClinicalImpact%3A&quot;&gt;&lt;/a&gt;Clinical Impact:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce%3A&quot;&gt;&lt;/a&gt;Minimal steps to reproduce:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour%3A&quot;&gt;&lt;/a&gt;Expected behaviour:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F%3A&quot;&gt;&lt;/a&gt;What happened instead?:&lt;/h4&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12110" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Documentation</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14406"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>IP-97184</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13009"><![CDATA[AnalyticsIntegrationServices]]></customfieldvalue>
    <customfieldvalue key="13011"><![CDATA[AnalyticsJasperIntegration]]></customfieldvalue>
    <customfieldvalue key="13017"><![CDATA[AtcService]]></customfieldvalue>
    <customfieldvalue key="13025"><![CDATA[Auditing]]></customfieldvalue>
    <customfieldvalue key="13026"><![CDATA[AuditTrailService]]></customfieldvalue>
    <customfieldvalue key="13033"><![CDATA[AutoPull]]></customfieldvalue>
    <customfieldvalue key="13036"><![CDATA[BringOnlineQueueBuilder]]></customfieldvalue>
    <customfieldvalue key="13041"><![CDATA[CentricitySync]]></customfieldvalue>
    <customfieldvalue key="13047"><![CDATA[ComponentUpgraderService]]></customfieldvalue>
    <customfieldvalue key="13053"><![CDATA[CorrectPatientInfo]]></customfieldvalue>
    <customfieldvalue key="13129"><![CDATA[DicomAgent]]></customfieldvalue>
    <customfieldvalue key="13130"><![CDATA[DicomExternService]]></customfieldvalue>
    <customfieldvalue key="13135"><![CDATA[DicomMasterService]]></customfieldvalue>
    <customfieldvalue key="13139"><![CDATA[DicomMover]]></customfieldvalue>
    <customfieldvalue key="14500"><![CDATA[DicomReportGenerator]]></customfieldvalue>
    <customfieldvalue key="13708"><![CDATA[DicomResourceProvider]]></customfieldvalue>
    <customfieldvalue key="13141"><![CDATA[DicomRetrievalService]]></customfieldvalue>
    <customfieldvalue key="13145"><![CDATA[DicomToJpeg]]></customfieldvalue>
    <customfieldvalue key="13147"><![CDATA[DicomUpload]]></customfieldvalue>
    <customfieldvalue key="13168"><![CDATA[ExternalDataService]]></customfieldvalue>
    <customfieldvalue key="13707"><![CDATA[GenericUserObjectService]]></customfieldvalue>
    <customfieldvalue key="13180"><![CDATA[Hl7FileSender]]></customfieldvalue>
    <customfieldvalue key="13183"><![CDATA[Hl7GatewayServer]]></customfieldvalue>
    <customfieldvalue key="13186"><![CDATA[HoldingArea]]></customfieldvalue>
    <customfieldvalue key="13194"><![CDATA[ImageRenderingService]]></customfieldvalue>
    <customfieldvalue key="13195"><![CDATA[ImageService]]></customfieldvalue>
    <customfieldvalue key="13196"><![CDATA[ImageStorageMonitor]]></customfieldvalue>
    <customfieldvalue key="13207"><![CDATA[IntegrationTesting]]></customfieldvalue>
    <customfieldvalue key="14102"><![CDATA[IntegrationTestingTools]]></customfieldvalue>
    <customfieldvalue key="13914"><![CDATA[IntegrationTestService]]></customfieldvalue>
    <customfieldvalue key="13209"><![CDATA[InteleBrowser]]></customfieldvalue>
    <customfieldvalue key="13211"><![CDATA[InteleBrowser-RisUpdater]]></customfieldvalue>
    <customfieldvalue key="13214"><![CDATA[InteleConnectAppService]]></customfieldvalue>
    <customfieldvalue key="13216"><![CDATA[intelepacs-lib-swl]]></customfieldvalue>
    <customfieldvalue key="13474"><![CDATA[IntelePacsDicomDocumentSource]]></customfieldvalue>
    <customfieldvalue key="13237"><![CDATA[InteleViewerService]]></customfieldvalue>
    <customfieldvalue key="13709"><![CDATA[IocmAgent]]></customfieldvalue>
    <customfieldvalue key="13243"><![CDATA[IpmonLocal]]></customfieldvalue>
    <customfieldvalue key="13245"><![CDATA[IpmonRemote]]></customfieldvalue>
    <customfieldvalue key="13256"><![CDATA[KeyImagesApi]]></customfieldvalue>
    <customfieldvalue key="13260"><![CDATA[listLocsforStudy]]></customfieldvalue>
    <customfieldvalue key="13261"><![CDATA[listLocsforStudy-Config]]></customfieldvalue>
    <customfieldvalue key="13262"><![CDATA[LocalAuditService]]></customfieldvalue>
    <customfieldvalue key="13263"><![CDATA[LocalAuditServiceTools]]></customfieldvalue>
    <customfieldvalue key="13268"><![CDATA[LocalDicomService]]></customfieldvalue>
    <customfieldvalue key="13279"><![CDATA[ModalityWorklist]]></customfieldvalue>
    <customfieldvalue key="13289"><![CDATA[MultiMethodReportingService]]></customfieldvalue>
    <customfieldvalue key="13291"><![CDATA[MultiMethodWorkflowService]]></customfieldvalue>
    <customfieldvalue key="13294"><![CDATA[Notifier]]></customfieldvalue>
    <customfieldvalue key="13307"><![CDATA[PacsGlobals]]></customfieldvalue>
    <customfieldvalue key="13309"><![CDATA[PacsGlobalsTools]]></customfieldvalue>
    <customfieldvalue key="13951"><![CDATA[PacsMerger]]></customfieldvalue>
    <customfieldvalue key="14200"><![CDATA[PatientPortalService]]></customfieldvalue>
    <customfieldvalue key="14002"><![CDATA[PglogicalTools]]></customfieldvalue>
    <customfieldvalue key="13328"><![CDATA[postgres-monitor]]></customfieldvalue>
    <customfieldvalue key="13335"><![CDATA[PushNotificationService]]></customfieldvalue>
    <customfieldvalue key="13343"><![CDATA[RegionalArchiveIntegration]]></customfieldvalue>
    <customfieldvalue key="13345"><![CDATA[RegionalArchiveIntegrationTools]]></customfieldvalue>
    <customfieldvalue key="13351"><![CDATA[ReplicateReportDistribution]]></customfieldvalue>
    <customfieldvalue key="13353"><![CDATA[ReplicateReportWorkflowDB]]></customfieldvalue>
    <customfieldvalue key="13355"><![CDATA[ReplicateUsersDB]]></customfieldvalue>
    <customfieldvalue key="13371"><![CDATA[ReportWorkflowService]]></customfieldvalue>
    <customfieldvalue key="13376"><![CDATA[RisOrderEntryModule]]></customfieldvalue>
    <customfieldvalue key="13473"><![CDATA[RisPrefetchingBackEnd]]></customfieldvalue>
    <customfieldvalue key="13379"><![CDATA[RisPrefetchingFrontEnd]]></customfieldvalue>
    <customfieldvalue key="13389"><![CDATA[SeriesEditorDaemon]]></customfieldvalue>
    <customfieldvalue key="13391"><![CDATA[SeriesEditorTools]]></customfieldvalue>
    <customfieldvalue key="13392"><![CDATA[SeriesMover]]></customfieldvalue>
    <customfieldvalue key="13394"><![CDATA[SeriesRouter]]></customfieldvalue>
    <customfieldvalue key="13396"><![CDATA[SingleSignOn]]></customfieldvalue>
    <customfieldvalue key="13404"><![CDATA[StorageCommitmentHandler]]></customfieldvalue>
    <customfieldvalue key="13409"><![CDATA[StudyReportStatusServlet]]></customfieldvalue>
    <customfieldvalue key="13423"><![CDATA[TeachingFile]]></customfieldvalue>
    <customfieldvalue key="13432"><![CDATA[TranscriptionistWorklistService]]></customfieldvalue>
    <customfieldvalue key="13509"><![CDATA[UniversalViewerService]]></customfieldvalue>
    <customfieldvalue key="13438"><![CDATA[UpdateMasterDb]]></customfieldvalue>
    <customfieldvalue key="13444"><![CDATA[UserAuthentication]]></customfieldvalue>
    <customfieldvalue key="13446"><![CDATA[UsersDB-Tools]]></customfieldvalue>
    <customfieldvalue key="13447"><![CDATA[UserService]]></customfieldvalue>
    <customfieldvalue key="13448"><![CDATA[UserServiceTools]]></customfieldvalue>
    <customfieldvalue key="13451"><![CDATA[ValidationServlet]]></customfieldvalue>
    <customfieldvalue key="13455"><![CDATA[VolumeRenderingService]]></customfieldvalue>
    <customfieldvalue key="13459"><![CDATA[WaveletServer]]></customfieldvalue>
    <customfieldvalue key="13460"><![CDATA[WebMonitor]]></customfieldvalue>
    <customfieldvalue key="13463"><![CDATA[WebUtilities]]></customfieldvalue>
    <customfieldvalue key="13465"><![CDATA[WorkflowCacheService]]></customfieldvalue>
    <customfieldvalue key="13467"><![CDATA[WorkflowQualityService]]></customfieldvalue>
    <customfieldvalue key="13469"><![CDATA[WorklistService]]></customfieldvalue>
    <customfieldvalue key="13471"><![CDATA[XmlDataServlet]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzz9on:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12102" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Release Notes</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14407"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13815" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Risk</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14445"><![CDATA[Standard Change]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13501" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Scrum Team</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14112"><![CDATA[Backend Raptors]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10801"><![CDATA[CRITICAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="1982">Raptors 2019 - S5</customfieldvalue>
    <customfieldvalue id="2002">Raptors 2019 - S6</customfieldvalue>
    <customfieldvalue id="2020">Raptors 2019 - S7</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:float">
                        <customfieldname>Story Points</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-103384] New metrics measure dcd request processing backlog</title>
                <link>https://jira.intelerad.com/browse/IP-103384</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description></description>
            <key id="151381">IP-103384</key>
            <summary>New metrics measure dcd request processing backlog</summary>
                <type id="3" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13918&amp;avatarType=issuetype">Task</type>
                                            <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="bdasilva">Bruno Da Silva</assignee>
                                    <reporter username="bdasilva">Bruno Da Silva</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Mar 2019 12:41:37 -0400</created>
                <updated>Fri, 3 May 2019 16:18:42 -0400</updated>
                            <resolved>Wed, 3 Apr 2019 14:08:04 -0400</resolved>
                                                    <fixVersion>4-16-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="0">0 minutes</timeoriginalestimate>
                            <timeestimate seconds="0">0 minutes</timeestimate>
                            <timespent seconds="54000">1 day, 7 hours</timespent>
                                            <aggregatetimeoriginalestimate seconds="0">0 minutes</aggregatetimeoriginalestimate>
                                        <aggregatetimeremainingestimate seconds="0">0 minutes</aggregatetimeremainingestimate>
                                        <aggregatetimespent seconds="108000">3 days, 6 hours</aggregatetimespent>
                                    <comments>
                            <comment id="522696" author="bdasilva" created="Wed, 3 Apr 2019 13:56:01 -0400"  >&lt;p&gt;these are the new metrics:&lt;/p&gt;

&lt;p&gt;Counter &lt;br/&gt;
name: ims_dms_request_inserted_total&lt;br/&gt;
Help : &quot;total number of dcd request inserted&quot; &lt;br/&gt;
label :  &quot;status&quot; &lt;/p&gt;

&lt;p&gt;Counter &lt;br/&gt;
name:  ims_dms_requests_status_changed_total&lt;br/&gt;
Help:  &quot;# of requests status changes &quot;  &lt;br/&gt;
label: status&lt;/p&gt;

&lt;p&gt;Histogram&lt;br/&gt;
name: ims_dms_requests_elapsed_done_seconds&lt;br/&gt;
Help:  &quot;time elapsed to request to get done since request creation &quot;&lt;/p&gt;</comment>
                            <comment id="522698" author="robot-bc-rw" created="Wed, 3 Apr 2019 14:05:43 -0400"  >&lt;p&gt;Released by bdasilva to master at 2019-04-03 14:05:39 (push 72258):&lt;br/&gt;
  PACS-4-16-1 (fix)        (previous build: PACS-4-16-1-P360)&lt;br/&gt;
  PACS-4-17-1 (fix)        (previous build: PACS-4-17-1-P182)&lt;br/&gt;
  PACS-4-18-1 (fix)        (previous build: PACS-4-18-1-P4)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-18-2-A4)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/b3a9b42eab99&quot; target=&quot;_blank&quot;&gt;intelepacs:b3a9b42eab99&lt;/a&gt;  bdasilva    PACS-4-16-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103384&quot; title=&quot;New metrics measure dcd request processing backlog&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103384&quot;&gt;&lt;del&gt;IP-103384&lt;/del&gt;&lt;/a&gt; fix: DMS: New metrics measure dcd request processing backlog&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/ab23c7d9a46d&quot; target=&quot;_blank&quot;&gt;intelepacs:ab23c7d9a46d&lt;/a&gt;  bdasilva    PACS-4-17-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103384&quot; title=&quot;New metrics measure dcd request processing backlog&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103384&quot;&gt;&lt;del&gt;IP-103384&lt;/del&gt;&lt;/a&gt; fix: DMS: New metrics measure dcd request processing backlog&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/9928bc6a4197&quot; target=&quot;_blank&quot;&gt;intelepacs:9928bc6a4197&lt;/a&gt;  bdasilva    PACS-4-18-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103384&quot; title=&quot;New metrics measure dcd request processing backlog&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103384&quot;&gt;&lt;del&gt;IP-103384&lt;/del&gt;&lt;/a&gt; fix: DMS: New metrics measure dcd request processing backlog&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/8fc02ec5a271&quot; target=&quot;_blank&quot;&gt;intelepacs:8fc02ec5a271&lt;/a&gt;  bdasilva    trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103384&quot; title=&quot;New metrics measure dcd request processing backlog&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103384&quot;&gt;&lt;del&gt;IP-103384&lt;/del&gt;&lt;/a&gt; fix: DMS: New metrics measure dcd request processing backlog&lt;/p&gt;</comment>
                            <comment id="522700" author="bdasilva" created="Wed, 3 Apr 2019 14:08:04 -0400"  >&lt;p&gt;Description of the solution:&lt;br/&gt;
New metrics measure dcd request processing backlog.&lt;/p&gt;

&lt;p&gt;Tests executed: as per QA subtask&lt;/p&gt;

&lt;p&gt;Unit tests added or modified: none&lt;/p&gt;</comment>
                            <comment id="522995" author="dvu" created="Fri, 5 Apr 2019 11:17:09 -0400"  >&lt;p&gt;&lt;a href=&quot;https://rnd-ci.intelerad.com/job/IntelePACS_IntegrationTest_CloudTesting/164/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://rnd-ci.intelerad.com/job/IntelePACS_IntegrationTest_CloudTesting/164/&lt;/a&gt; ( tests pass)&lt;/p&gt;</comment>
                            <comment id="523050" author="dvu" created="Fri, 5 Apr 2019 13:54:40 -0400"  >&lt;p&gt;Included in PACS-4-16-1-R39 (atlas 1.14.P57)&lt;/p&gt;</comment>
                            <comment id="523117" author="dvu" created="Fri, 5 Apr 2019 16:37:42 -0400"  >&lt;p&gt;Included in PACS-4-17-1-R14 (atlas 1.15.P41)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="50505" name="Z DicomMasterService by instance with Update Queue metric Beta-1552680656985.json" size="76979" author="bdasilva" created="Fri, 15 Mar 2019 16:11:32 -0400"/>
                            <attachment id="51018" name="dcdmetrics.diff" size="6057" author="bdasilva" created="Wed, 3 Apr 2019 13:45:29 -0400"/>
                    </attachments>
                <subtasks>
                            <subtask id="151932">IP-103560</subtask>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_13901" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Code Committed</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14502"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;h4&gt;&lt;a name=&quot;RPMVersion&quot;&gt;&lt;/a&gt;RPM Version&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ISPClient%3A%3Cclientcode%3E&quot;&gt;&lt;/a&gt;ISP - Client : &lt;a href=&quot;https://inteleradprod.service-now.com/nav_to.do?uri=textsearch.do?sysparm_search=xxxx&quot; target=&quot;_blank&quot;&gt;xxxx&lt;/a&gt; - &amp;lt;client code&amp;gt;&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ClinicalImpact%3A&quot;&gt;&lt;/a&gt;Clinical Impact:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce%3A&quot;&gt;&lt;/a&gt;Minimal steps to reproduce:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour%3A&quot;&gt;&lt;/a&gt;Expected behaviour:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F%3A&quot;&gt;&lt;/a&gt;What happened instead?:&lt;/h4&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12110" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Documentation</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14406"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>IP-104170</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13135"><![CDATA[DicomMasterService]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzcn1z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12102" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Release Notes</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14407"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13815" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Risk</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14445"><![CDATA[Standard Change]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13501" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Scrum Team</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14111"><![CDATA[Scrum Team #1]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="1984">Team#1 -  2019 Sprint 5</customfieldvalue>
    <customfieldvalue id="2003">Team#1 -  2019 Sprint 6</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:float">
                        <customfieldname>Story Points</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-103246] JDK11: DMS:  JOOQ unit tests fail</title>
                <link>https://jira.intelerad.com/browse/IP-103246</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;scons fails when building the mudball in devel-openjdk11 but passes in trunk.   hl7apps seems to be good on both trunk and devel-openjdk11.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;1) testCompareReGeneratedJooqFile(com.intelerad.dicommasterservice.db.dicomevidence.DicomEvidenceGenerator)
java.lang.AssertionError: You forgot to generate jOOQ files. Please run DicomEvidenceGenerator.generateDicomEvidence() function as Junit Test to generate jOOQ files. Don&apos;t forget to remove @Ignore annotation before running.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
            <key id="150910">IP-103246</key>
            <summary>JDK11: DMS:  JOOQ unit tests fail</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                            <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="ldegruchy">Luke de Gruchy</assignee>
                                    <reporter username="ldegruchy">Luke de Gruchy</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Mar 2019 15:06:42 -0500</created>
                <updated>Wed, 20 Mar 2019 19:45:32 -0400</updated>
                            <resolved>Wed, 6 Mar 2019 16:06:41 -0500</resolved>
                                    <version>4-18-1</version>
                                    <fixVersion>4-17-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="0">0 minutes</timeoriginalestimate>
                            <timeestimate seconds="1800">30 minutes</timeestimate>
                            <timespent seconds="5400">1 hour, 30 minutes</timespent>
                                <comments>
                            <comment id="518702" author="luke.degruchy" created="Wed, 6 Mar 2019 16:06:41 -0500"  >&lt;p&gt;Resolved by regenerating JOOQ files.&lt;/p&gt;</comment>
                            <comment id="520913" author="robot-bc-rw" created="Wed, 20 Mar 2019 19:45:32 -0400"  >&lt;p&gt;Released by sclark to master at 2019-03-20 19:45:16 (push 72007):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-17-2-A186)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/fbca2dfb477b&quot; target=&quot;_blank&quot;&gt;intelepacs:fbca2dfb477b&lt;/a&gt;  ldegruchy   trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103246&quot; title=&quot;JDK11: DMS:  JOOQ unit tests fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103246&quot;&gt;&lt;del&gt;IP-103246&lt;/del&gt;&lt;/a&gt; fix: Regenerate JOOQ files on JDK 11.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                    <customfield id="customfield_13806" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Availability Impact</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14409"><![CDATA[BlocksPLA]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_13901" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Code Committed</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14502"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;h4&gt;&lt;a name=&quot;RPMVersion&quot;&gt;&lt;/a&gt;RPM Version&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ISPClient%3A%3Cclientcode%3E&quot;&gt;&lt;/a&gt;ISP - Client : &lt;a href=&quot;https://inteleradprod.service-now.com/nav_to.do?uri=textsearch.do?sysparm_search=xxxx&quot; target=&quot;_blank&quot;&gt;xxxx&lt;/a&gt; - &amp;lt;client code&amp;gt;&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ClinicalImpact%3A&quot;&gt;&lt;/a&gt;Clinical Impact:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce%3A&quot;&gt;&lt;/a&gt;Minimal steps to reproduce:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour%3A&quot;&gt;&lt;/a&gt;Expected behaviour:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F%3A&quot;&gt;&lt;/a&gt;What happened instead?:&lt;/h4&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12110" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Documentation</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14406"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>IP-97184</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13135"><![CDATA[DicomMasterService]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzz9n3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12102" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Release Notes</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14407"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13815" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Risk</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14445"><![CDATA[Standard Change]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13501" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Scrum Team</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14112"><![CDATA[Backend Raptors]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10802"><![CDATA[MAJOR]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="1956">Raptors 2019 - S4</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[IP-103245] LocalDicomService: request_attrs archive partitions affect performance as old requests are deleted</title>
                <link>https://jira.intelerad.com/browse/IP-103245</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;h4&gt;&lt;a name=&quot;RPMVersion&quot;&gt;&lt;/a&gt;RPM Version&lt;/h4&gt;
&lt;p&gt;LocalDicomService-4.16.1.P248-ims01.i386&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;ISPClient%3AAUSIG&quot;&gt;&lt;/a&gt;ISP - Client : &lt;a href=&quot;https://inteleradprod.service-now.com/nav_to.do?uri=textsearch.do?sysparm_search=CS0117359&quot; target=&quot;_blank&quot;&gt;CS0117359&lt;/a&gt; - AUSIG&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ClinicalImpact%3A&quot;&gt;&lt;/a&gt;Clinical Impact:&lt;/h4&gt;

&lt;p&gt;Image partitions fill up so that no images can be sent to the server&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce%3A&quot;&gt;&lt;/a&gt;Minimal steps to reproduce:&lt;/h4&gt;

&lt;p&gt;1.  Have a MOD server with 2 or more request_attrs partitions&lt;br/&gt;
2. Perform many study deletions for older images so that rows get deleted from the request_attrs archive partition, and thus generate a lot of index bloat&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour%3A&quot;&gt;&lt;/a&gt;Expected behaviour:&lt;/h4&gt;

&lt;p&gt;LDS request performance remains optimal&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F%3A&quot;&gt;&lt;/a&gt;What happened instead?:&lt;/h4&gt;

&lt;p&gt;As more and more studies get deleted from the MOD server the performance degrades.  The degradation is due to the increase in index bloat for the request_attrs archive partitions, and the number of partitions will also affect performance.&lt;/p&gt;

&lt;p&gt;We can see this in the postgres logs&apos; query planner output&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;
[2019-03-07 06:56:27.686 AEDT] 10.84.10.79(41740) {5c5e413f.36b6} localdicomservice LOG:  duration: 13766.033 ms  &lt;span class=&quot;code-keyword&quot;&gt;plan&lt;/span&gt;:
        Query &lt;span class=&quot;code-keyword&quot;&gt;Text&lt;/span&gt;: &lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt; r.request_id, r.request_timestamp_as_epoch &lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt; requests r
          &lt;span class=&quot;code-keyword&quot;&gt;JOIN&lt;/span&gt; request_attrs attr &lt;span class=&quot;code-keyword&quot;&gt;ON&lt;/span&gt; attr.request_id = r.request_id
          &lt;span class=&quot;code-keyword&quot;&gt;WHERE&lt;/span&gt;
          attr.attr_id = 2 &lt;span class=&quot;code-keyword&quot;&gt;AND&lt;/span&gt;
          &lt;span class=&quot;code-keyword&quot;&gt;type&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&apos;SERIES_DELETION&apos;&lt;/span&gt; 
          &lt;span class=&quot;code-keyword&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;status&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&apos;DONE&apos;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;AND&lt;/span&gt; 
          request_timestamp_as_epoch &amp;lt;= 1551297373918 &lt;span class=&quot;code-keyword&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;BY&lt;/span&gt; request_timestamp_as_epoch 
           &lt;span class=&quot;code-keyword&quot;&gt;LIMIT&lt;/span&gt; 1000
        &lt;span class=&quot;code-keyword&quot;&gt;Limit&lt;/span&gt;  (cost=4808253.47..4808255.97 &lt;span class=&quot;code-keyword&quot;&gt;rows&lt;/span&gt;=1000 width=16)
          -&amp;gt;  Sort  (cost=4808253.47..4808314.64 &lt;span class=&quot;code-keyword&quot;&gt;rows&lt;/span&gt;=24468 width=16)
                Sort &lt;span class=&quot;code-keyword&quot;&gt;Key&lt;/span&gt;: r.request_timestamp_as_epoch
                -&amp;gt;  Hash &lt;span class=&quot;code-keyword&quot;&gt;Join&lt;/span&gt;  (cost=167516.28..4806911.92 &lt;span class=&quot;code-keyword&quot;&gt;rows&lt;/span&gt;=24468 width=16)
                      Hash Cond: (attr.request_id = r.request_id)
                      -&amp;gt;  Append  (cost=0.12..4631284.79 &lt;span class=&quot;code-keyword&quot;&gt;rows&lt;/span&gt;=576878 width=8)
                            -&amp;gt;  &lt;span class=&quot;code-keyword&quot;&gt;Index&lt;/span&gt; Scan &lt;span class=&quot;code-keyword&quot;&gt;using&lt;/span&gt; request_attrs_request_id_idx &lt;span class=&quot;code-keyword&quot;&gt;on&lt;/span&gt; request_attrs attr  (cost=0.12..8.14 &lt;span class=&quot;code-keyword&quot;&gt;rows&lt;/span&gt;=1 width=8)
                                  &lt;span class=&quot;code-keyword&quot;&gt;Filter&lt;/span&gt;: (attr_id = 2)
                            -&amp;gt;  &lt;span class=&quot;code-keyword&quot;&gt;Index&lt;/span&gt; Scan &lt;span class=&quot;code-keyword&quot;&gt;using&lt;/span&gt; request_attrs_pk &lt;span class=&quot;code-keyword&quot;&gt;on&lt;/span&gt; request_attrs_partition_95138720 attr_1  (cost=0.15..22.30 &lt;span class=&quot;code-keyword&quot;&gt;rows&lt;/span&gt;=1 width=8)
                                  &lt;span class=&quot;code-keyword&quot;&gt;Filter&lt;/span&gt;: (attr_id = 2)
                            -&amp;gt;  &lt;span class=&quot;code-keyword&quot;&gt;Index&lt;/span&gt; Scan &lt;span class=&quot;code-keyword&quot;&gt;using&lt;/span&gt; request_attrs_partition_current_request_id_idx &lt;span class=&quot;code-keyword&quot;&gt;on&lt;/span&gt; request_attrs_partition_138704078 attr_2  (cost=0.40..3735.48 &lt;span class=&quot;code-keyword&quot;&gt;rows&lt;/span&gt;=5 width=8)
                                  &lt;span class=&quot;code-keyword&quot;&gt;Filter&lt;/span&gt;: (attr_id = 2)
                            -&amp;gt;  &lt;span class=&quot;code-keyword&quot;&gt;Index&lt;/span&gt; Scan &lt;span class=&quot;code-keyword&quot;&gt;using&lt;/span&gt; request_attrs_partition_current_request_id_idx1 &lt;span class=&quot;code-keyword&quot;&gt;on&lt;/span&gt; request_attrs_partition_142433261 attr_3  (cost=0.28..676.97 &lt;span class=&quot;code-keyword&quot;&gt;rows&lt;/span&gt;=1 width=8)
                                  &lt;span class=&quot;code-keyword&quot;&gt;Filter&lt;/span&gt;: (attr_id = 2)
                            -&amp;gt;  &lt;span class=&quot;code-keyword&quot;&gt;Index&lt;/span&gt; Scan &lt;span class=&quot;code-keyword&quot;&gt;using&lt;/span&gt; request_attrs_partition_current_request_id_idx2 &lt;span class=&quot;code-keyword&quot;&gt;on&lt;/span&gt; request_attrs_partition_146253003 attr_4  (cost=0.28..1294.32 &lt;span class=&quot;code-keyword&quot;&gt;rows&lt;/span&gt;=1 width=8)
                                  &lt;span class=&quot;code-keyword&quot;&gt;Filter&lt;/span&gt;: (attr_id = 2)
                            -&amp;gt;  &lt;span class=&quot;code-keyword&quot;&gt;Index&lt;/span&gt; Scan &lt;span class=&quot;code-keyword&quot;&gt;using&lt;/span&gt; request_attrs_partition_current_request_id_idx3 &lt;span class=&quot;code-keyword&quot;&gt;on&lt;/span&gt; request_attrs_partition_149987653 attr_5  (cost=0.40..27253.46 &lt;span class=&quot;code-keyword&quot;&gt;rows&lt;/span&gt;=2 width=8)
                                  &lt;span class=&quot;code-keyword&quot;&gt;Filter&lt;/span&gt;: (attr_id = 2)
                            -&amp;gt;  &lt;span class=&quot;code-keyword&quot;&gt;Index&lt;/span&gt; Scan &lt;span class=&quot;code-keyword&quot;&gt;using&lt;/span&gt; request_attrs_partition_current_request_id_idx4 &lt;span class=&quot;code-keyword&quot;&gt;on&lt;/span&gt; request_attrs_partition_154197929 attr_6  (cost=0.28..374.93 &lt;span class=&quot;code-keyword&quot;&gt;rows&lt;/span&gt;=1 width=8)
                                  &lt;span class=&quot;code-keyword&quot;&gt;Filter&lt;/span&gt;: (attr_id = 2)
                            -&amp;gt;  &lt;span class=&quot;code-keyword&quot;&gt;Index&lt;/span&gt; Scan &lt;span class=&quot;code-keyword&quot;&gt;using&lt;/span&gt; request_attrs_partition_current_request_id_idx5 &lt;span class=&quot;code-keyword&quot;&gt;on&lt;/span&gt; request_attrs_partition_162067613 attr_7  (cost=0.55..1620302.54 &lt;span class=&quot;code-keyword&quot;&gt;rows&lt;/span&gt;=1 width=8)
                                  &lt;span class=&quot;code-keyword&quot;&gt;Filter&lt;/span&gt;: (attr_id = 2)
                            -&amp;gt;  &lt;span class=&quot;code-keyword&quot;&gt;Index&lt;/span&gt; Scan &lt;span class=&quot;code-keyword&quot;&gt;using&lt;/span&gt; request_attrs_partition_current_request_id_idx6 &lt;span class=&quot;code-keyword&quot;&gt;on&lt;/span&gt; request_attrs_partition_165160348 attr_8  (cost=0.44..974037.71 &lt;span class=&quot;code-keyword&quot;&gt;rows&lt;/span&gt;=1 width=8)
                                  &lt;span class=&quot;code-keyword&quot;&gt;Filter&lt;/span&gt;: (attr_id = 2)
                            -&amp;gt;  &lt;span class=&quot;code-keyword&quot;&gt;Index&lt;/span&gt; Scan &lt;span class=&quot;code-keyword&quot;&gt;using&lt;/span&gt; request_attrs_partition_current_request_id_idx7 &lt;span class=&quot;code-keyword&quot;&gt;on&lt;/span&gt; request_attrs_partition_168181865 attr_9  (cost=0.44..1805481.47 &lt;span class=&quot;code-keyword&quot;&gt;rows&lt;/span&gt;=455581 width=8)
                                  &lt;span class=&quot;code-keyword&quot;&gt;Filter&lt;/span&gt;: (attr_id = 2)
                            -&amp;gt;  &lt;span class=&quot;code-keyword&quot;&gt;Index&lt;/span&gt; Scan &lt;span class=&quot;code-keyword&quot;&gt;using&lt;/span&gt; request_attrs_partition_current_request_id_idx8 &lt;span class=&quot;code-keyword&quot;&gt;on&lt;/span&gt; request_attrs_partition_current attr_10  (cost=0.43..198097.46 &lt;span class=&quot;code-keyword&quot;&gt;rows&lt;/span&gt;=121283 width=8)
                                  &lt;span class=&quot;code-keyword&quot;&gt;Filter&lt;/span&gt;: (attr_id = 2)
                      -&amp;gt;  Hash  (cost=163263.71..163263.71 &lt;span class=&quot;code-keyword&quot;&gt;rows&lt;/span&gt;=244596 width=16)
                            Buckets: 131072  Batches: 4  Memory &lt;span class=&quot;code-keyword&quot;&gt;Usage&lt;/span&gt;: 519kB
                            -&amp;gt;  Bitmap &lt;span class=&quot;code-keyword&quot;&gt;Heap&lt;/span&gt; Scan &lt;span class=&quot;code-keyword&quot;&gt;on&lt;/span&gt; requests r  (cost=14312.04..163263.71 &lt;span class=&quot;code-keyword&quot;&gt;rows&lt;/span&gt;=244596 width=16)
                                  &lt;span class=&quot;code-keyword&quot;&gt;Recheck&lt;/span&gt; Cond: ((request_timestamp_as_epoch &amp;lt;= &lt;span class=&quot;code-quote&quot;&gt;&apos;1551297373918&apos;&lt;/span&gt;::&lt;span class=&quot;code-keyword&quot;&gt;bigint&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;AND&lt;/span&gt; ((&lt;span class=&quot;code-keyword&quot;&gt;type&lt;/span&gt;)::&lt;span class=&quot;code-keyword&quot;&gt;text&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&apos;SERIES_DELETION&apos;&lt;/span&gt;::&lt;span class=&quot;code-keyword&quot;&gt;text&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;AND&lt;/span&gt; ((&lt;span class=&quot;code-keyword&quot;&gt;status&lt;/span&gt;)::&lt;span class=&quot;code-keyword&quot;&gt;text&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&apos;DONE&apos;&lt;/span&gt;::&lt;span class=&quot;code-keyword&quot;&gt;text&lt;/span&gt;))
                                  -&amp;gt;  Bitmap &lt;span class=&quot;code-keyword&quot;&gt;Index&lt;/span&gt; Scan &lt;span class=&quot;code-keyword&quot;&gt;on&lt;/span&gt; series_deletion_idx  (cost=0.00..14250.89 &lt;span class=&quot;code-keyword&quot;&gt;rows&lt;/span&gt;=244596 width=0)
                                        &lt;span class=&quot;code-keyword&quot;&gt;Index&lt;/span&gt; Cond: (request_timestamp_as_epoch &amp;lt;= &lt;span class=&quot;code-quote&quot;&gt;&apos;1551297373918&apos;&lt;/span&gt;::&lt;span class=&quot;code-keyword&quot;&gt;bigint&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Notice that there are 10 archive partitions and the cost associated with attr 7-10 are quite high&lt;/p&gt;</description>
            <key id="150909">IP-103245</key>
            <summary>LocalDicomService: request_attrs archive partitions affect performance as old requests are deleted</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                            <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="agangadharan">Aswin Gangadharan</assignee>
                                    <reporter username="mfrancisco">Maximiano Francisco</reporter>
                        <labels>
                            <label>CODE_BLUE_PA</label>
                            <label>Ready</label>
                    </labels>
                <created>Wed, 6 Mar 2019 14:59:59 -0500</created>
                <updated>Wed, 15 May 2019 12:18:03 -0400</updated>
                            <resolved>Thu, 11 Apr 2019 11:13:58 -0400</resolved>
                                    <version>4-16-1</version>
                                    <fixVersion>4-16-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>12</watches>
                                    <timeoriginalestimate seconds="0">0 minutes</timeoriginalestimate>
                            <timeestimate seconds="0">0 minutes</timeestimate>
                            <timespent seconds="231300">1 week, 3 days, 15 minutes</timespent>
                                            <aggregatetimeoriginalestimate seconds="0">0 minutes</aggregatetimeoriginalestimate>
                                        <aggregatetimeremainingestimate seconds="9000">2 hours, 30 minutes</aggregatetimeremainingestimate>
                                        <aggregatetimespent seconds="240300">1 week, 3 days, 2 hours, 45 minutes</aggregatetimespent>
                                    <comments>
                            <comment id="518688" author="mfrancisco" created="Wed, 6 Mar 2019 15:01:51 -0500"  >&lt;p&gt;The only workaround we have here is to perform a VACUUM FULL on the archive partitions periodically.&lt;/p&gt;</comment>
                            <comment id="518828" author="sbergeron" created="Thu, 7 Mar 2019 15:18:39 -0500"  >&lt;h5&gt;&lt;a name=&quot;Idea1%28preferred%29&quot;&gt;&lt;/a&gt;Idea 1 ( preferred )&lt;/h5&gt;

&lt;p&gt;Partition or not depending on server-type (ex: mod server = not partitioned).&lt;/p&gt;

&lt;p&gt;LDS knows the server type ands acts accordingly on startup.&lt;/p&gt;

&lt;p&gt;Retroactively undoing partitions is required in this solution.&lt;/p&gt;

&lt;h5&gt;&lt;a name=&quot;Idea2&quot;&gt;&lt;/a&gt;Idea 2&lt;/h5&gt;

&lt;p&gt;Create cron job or LDS background thread to go in and perform vacuum full on the partitions. &lt;/p&gt;

&lt;h5&gt;&lt;a name=&quot;Idea3&quot;&gt;&lt;/a&gt;Idea 3&lt;/h5&gt;

&lt;p&gt;Look at threshold of the table to evaluate if almost empty, and merge it with another table to reduce number of partitions.&lt;/p&gt;
</comment>
                            <comment id="518835" author="sbergeron" created="Thu, 7 Mar 2019 15:34:42 -0500"  >&lt;h4&gt;&lt;a name=&quot;StoryDescription%3A&quot;&gt;&lt;/a&gt;Story Description:&lt;/h4&gt;
&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/forbidden.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Business Value is clearly articulated&lt;br/&gt;
&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Details of the WHAT are sufficiently understood by the Team.&lt;br/&gt;
&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Dependencies are identified.&lt;br/&gt;
&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; All enabling items are present.&lt;br/&gt;
&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; AC: Functional Scope are defined&lt;br/&gt;
&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; AC: Performance criteria are defined, if any.&lt;/p&gt;

&lt;p&gt;Tables are not partitioned on specific server types and not bloating badly.&lt;/p&gt;

&lt;p&gt;LDS should not take more than 20 seconds to initialize. LDS should be aware what type of server it is running on and take the correct action with regard to partitioning or not.&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Demo strategy.&lt;/p&gt;

&lt;p&gt;Communicate to integrators the importance of this change.&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Documentation Flag&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;INVEST%3A&quot;&gt;&lt;/a&gt;INVEST:&lt;/h4&gt;
&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Independent&lt;br/&gt;
&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Negotiable&lt;br/&gt;
&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Valuable&lt;br/&gt;
&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Estimable &lt;br/&gt;
&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Small&lt;br/&gt;
&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Testable&lt;/p&gt;</comment>
                            <comment id="519192" author="mfrancisco" created="Tue, 12 Mar 2019 09:54:07 -0400"  >&lt;p&gt;Could we resolve this issue by making the following key in LocalDicomService.cfg configurable per host?&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;# Use table partitioning for tables that have more than maxPartitionSize number of rows.
# This feature toggle will enable the following tasks:
#    1) Initialization of the partitioning:
#       - Creates the first partition
#       - Creates a trigger to insert into the first partition
#    2) Schedules a repartitioning task that runs every tablePartitioningFrequencyInDays days
#       - Creates a new partition if the current one has more than maxPartitionSize rows.
#
# type:    bool
# default: true
enableTablePartitioning = &amp;lt;/usr/local/tools/control_files/source/PACS.cfg:LocalDicomService:enableTablePartitioning:default=true&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="520019" author="mark.groves" created="Thu, 14 Mar 2019 10:11:59 -0400"  >&lt;p&gt;Please run your solution by Mat before starting work on this task.&lt;/p&gt;</comment>
                            <comment id="520156" author="mli" created="Fri, 15 Mar 2019 09:38:33 -0400"  >&lt;p&gt;IMED got affected :  db performance issue related to table bloat is raised again in CS0127329 . &lt;br/&gt;
request_attrs_partition tables stand out as one of most bloated tables on many servers,  &lt;br/&gt;
A ransom server auact001svint01 &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
the size &amp;amp; total row count:
 localdicom | request_attrs_partition_130529857    | table    | sa    | 4753 MB    |
...
 (sa@auact001svint01) [localdicom] # select count(*) from request_attrs_partition_130529857  ;
 count
--------
 284620
(1 row)

Time: 35351.722 ms &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;with manual vacuum full , we see the big change  &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 (sa@auact001svint01) [localdicom] # vacuum full request_attrs_partition_130529857 ;
VACUUM
Time: 18223.851 ms
(sa@auact001svint01) [localdicom] # select count(*) from request_attrs_partition_130529857  ;
 count
--------
 284620
(1 row)
....
      localdicom | request_attrs_partition_130529857    | table    | sa    | 15 MB      |

 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;we need a way to keep it under control.&lt;br/&gt;
BTW, with partitioned table,  the bug fix &lt;a href=&quot;https://jira.intelerad.com/browse/IP-79377&quot; title=&quot;LDS incoming_files autovacuum optimizations (aggressive) in postgres&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-79377&quot;&gt;&lt;del&gt;IP-79377&lt;/del&gt;&lt;/a&gt; probably not helpful on this, at lest,  the request / request_attrs* tables are not covered by the bug. &lt;/p&gt;</comment>
                            <comment id="520158" author="mli" created="Fri, 15 Mar 2019 09:57:25 -0400"  >&lt;p&gt;Continues of my last comment,  here is a live sample query from  server auact001svint01 &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

[2019-02-26 08:11:27.021 AEDT] 10.5.6.44(48040) {5c717ccd.5dce} localdicomservice LOG:  duration: 1018.379 ms  execute &amp;lt;unnamed&amp;gt;: WITH interestingTarget AS (
            SELECT target FROM requests WHERE request_id = 239624228), workRequest AS (
            SELECT r.request_id,r.owner_pacs_id,r.owner_server_id,r.owner_app_id,r.scoped_seq_num,r.request_timestamp_as_epoch,r.target,r.type,r.status,r.timestamp_inserted,r.num_executions,r.work_ord
er_timestamp,r.last_failure
            FROM requests r 
            JOIN interestingTarget t USING (target)
            WHERE ( status = &lt;span class=&quot;code-quote&quot;&gt;&apos;PENDING&apos;&lt;/span&gt; OR status != &lt;span class=&quot;code-quote&quot;&gt;&apos;PENDING&apos;&lt;/span&gt; )
        )
        SELECT r.*, c.attr_id , c.value FROM workRequest r 
        LEFT OUTER JOIN request_attrs c USING (request_id) 
        ORDER BY r.request_timestamp_as_epoch, r.request_id
[2019-02-26 08:11:27.022 AEDT] 10.5.6.44(48040) {5c717ccd.5dce} localdicomservice LOG:  duration: 1018.371 ms  plan:
        Query Text: WITH interestingTarget AS (
            SELECT target FROM requests WHERE request_id = 239624228), workRequest AS (
            SELECT r.request_id,r.owner_pacs_id,r.owner_server_id,r.owner_app_id,r.scoped_seq_num,r.request_timestamp_as_epoch,r.target,r.type,r.status,r.timestamp_inserted,r.num_executions,r.work_ord
er_timestamp,r.last_failure
            FROM requests r 
            JOIN interestingTarget t USING (target)
            WHERE ( status = &lt;span class=&quot;code-quote&quot;&gt;&apos;PENDING&apos;&lt;/span&gt; OR status != &lt;span class=&quot;code-quote&quot;&gt;&apos;PENDING&apos;&lt;/span&gt; )
        )
        SELECT r.*, c.attr_id , c.value FROM workRequest r 
        LEFT OUTER JOIN request_attrs c USING (request_id) 
        ORDER BY r.request_timestamp_as_epoch, r.request_id
        Sort  (cost=82426.01..82544.21 rows=47281 width=195)
          Sort Key: r.request_timestamp_as_epoch, r.request_id
          CTE interestingtarget
            -&amp;gt;  Index Scan using requests_pk on requests  (cost=0.56..8.58 rows=1 width=36)
                  Index Cond: (request_id = 239624228)
          CTE workrequest
            -&amp;gt;  Nested Loop  (cost=0.56..161.05 rows=38 width=1523)
                  -&amp;gt;  CTE Scan on interestingtarget t  (cost=0.00..0.02 rows=1 width=32)
                  -&amp;gt;  Index Scan using requests_target_full_idx on requests r_1  (cost=0.56..160.65 rows=38 width=1523)
                        Index Cond: ((target)::text = (t.target)::text)
                        Filter: (((status)::text = &lt;span class=&quot;code-quote&quot;&gt;&apos;PENDING&apos;&lt;/span&gt;::text) OR ((status)::text &amp;lt;&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;PENDING&apos;&lt;/span&gt;::text))
          -&amp;gt;  Nested Loop Left Join  (cost=0.12..74140.25 rows=47281 width=195)
                -&amp;gt;  CTE Scan on workrequest r  (cost=0.00..0.76 rows=38 width=178)
                -&amp;gt;  Append  (cost=0.12..1948.23 rows=281 width=25)
                      -&amp;gt;  Index Scan using request_attrs_request_id_idx on request_attrs c  (cost=0.12..0.35 rows=1 width=44)
                            Index Cond: (r.request_id = request_id)
                      -&amp;gt;  Index Scan using request_attrs_pk on request_attrs_partition_130529857 c_1  (cost=0.55..1504.22 rows=166 width=25)
                            Index Cond: (r.request_id = request_id)
                      -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx on request_attrs_partition_220237654 c_2  (cost=0.56..221.61 rows=56 width=25)
                            Index Cond: (r.request_id = request_id)
                      -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx1 on request_attrs_partition_current c_3  (cost=0.56..222.05 rows=58 width=25)
                            Index Cond: (r.request_id = request_id)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="520214" author="mfrancisco" created="Fri, 15 Mar 2019 13:22:50 -0400"  >&lt;p&gt;I do not think the IMED case applies here because we are looking specifically at how index bloat on request_attrs affects query performance, but from the query plan posted the cost for request_attrs associated with the long running query was not very high.  I think the cause for the long running query is due to something else.&lt;/p&gt;</comment>
                            <comment id="520237" author="mli" created="Fri, 15 Mar 2019 14:46:48 -0400"  >&lt;p&gt;hi Max,  here is another sample from IMED, aunsw010svint01&lt;br/&gt;
the exact same query,  &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[2019-02-28 12:08:58.947 AEDT] 10.2.15.41(60940) {5c717cd1.b2e5} localdicomservice LOG:  duration: 2894.448 ms  execute &amp;lt;unnamed&amp;gt;: SELECT r.request_id, r.request_timestamp_as_epoch FROM requests r
          JOIN request_attrs attr ON attr.request_id = r.request_id
          WHERE
          attr.attr_id = 2 AND
          type = &lt;span class=&quot;code-quote&quot;&gt;&apos;SERIES_DELETION&apos;&lt;/span&gt;
          AND status = &lt;span class=&quot;code-quote&quot;&gt;&apos;DONE&apos;&lt;/span&gt; AND
          request_timestamp_as_epoch &amp;lt;= 1550711336051 ORDER BY request_timestamp_as_epoch
           LIMIT 1000
[2019-02-28 12:08:58.948 AEDT] 10.2.15.41(60940) {5c717cd1.b2e5} localdicomservice LOG:  duration: 2894.440 ms  plan:
        Query Text: SELECT r.request_id, r.request_timestamp_as_epoch FROM requests r
          JOIN request_attrs attr ON attr.request_id = r.request_id
          WHERE
          attr.attr_id = 2 AND
          type = &lt;span class=&quot;code-quote&quot;&gt;&apos;SERIES_DELETION&apos;&lt;/span&gt;
          AND status = &lt;span class=&quot;code-quote&quot;&gt;&apos;DONE&apos;&lt;/span&gt; AND
          request_timestamp_as_epoch &amp;lt;= 1550711336051 ORDER BY request_timestamp_as_epoch
           LIMIT 1000
        Limit  (cost=0.55..10225719.44 rows=1000 width=16)
          -&amp;gt;  Nested Loop  (cost=0.55..796430115.80 rows=77885 width=16)
                -&amp;gt;  Index Scan using series_deletion_idx on requests r  (cost=0.43..2055410.87 rows=751571 width=16)
                      Index Cond: (request_timestamp_as_epoch &amp;lt;= &lt;span class=&quot;code-quote&quot;&gt;&apos;1550711336051&apos;&lt;/span&gt;::bigint)
                -&amp;gt;  Append  (cost=0.12..1056.86 rows=9 width=8)
                      -&amp;gt;  Index Scan using request_attrs_request_id_idx on request_attrs attr  (cost=0.12..0.15 rows=1 width=8)
                            Index Cond: (request_id = r.request_id)
                            Filter: (attr_id = 2)
                      -&amp;gt;  Bitmap Heap Scan on request_attrs_partition_125877040 attr_1  (cost=2.20..10.70 rows=1 width=8)
                            Recheck Cond: (request_id = r.request_id)
                            Filter: (attr_id = 2)
                            -&amp;gt;  Bitmap Index Scan on request_attrs_pk  (cost=0.00..2.20 rows=6 width=0)
                                  Index Cond: (request_id = r.request_id)
                      -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx on request_attrs_partition_142780325 attr_2  (cost=0.42..118.41 rows=1 width=8)
                            Index Cond: (request_id = r.request_id)
                            Filter: (attr_id = 2)
                      -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx1 on request_attrs_partition_146875194 attr_3  (cost=0.42..138.45 rows=1 width=8)
                            Index Cond: (request_id = r.request_id)
                            Filter: (attr_id = 2)
                      -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx2 on request_attrs_partition_152134378 attr_4  (cost=0.55..212.97 rows=1 width=8)
                            Index Cond: (request_id = r.request_id)
                            Filter: (attr_id = 2)
                      -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx3 on request_attrs_partition_157201029 attr_5  (cost=0.55..218.14 rows=1 width=8)
                            Index Cond: (request_id = r.request_id)
                            Filter: (attr_id = 2)
                      -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx4 on request_attrs_partition_220401053 attr_6  (cost=0.56..181.22 rows=1 width=8)
                            Index Cond: (request_id = r.request_id)
                            Filter: (attr_id = 2)
                      -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx5 on request_attrs_partition_current attr_7  (cost=0.56..176.83 rows=2 width=8)
                            Index Cond: (request_id = r.request_id)
                            Filter: (attr_id = 2)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;yes, not that many rows returned in partitioned table index scan like your sample, &lt;br/&gt;
seems the major thing is with &quot;Index Scan using series_deletion_idx on requests r &quot; &lt;/p&gt;</comment>
                            <comment id="521009" author="bleung" created="Thu, 21 Mar 2019 13:50:05 -0400"  >&lt;p&gt;Attached document for solution discussion.&lt;/p&gt;</comment>
                            <comment id="521657" author="bleung" created="Tue, 26 Mar 2019 16:07:35 -0400"  >&lt;p&gt;Proposed Solution:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Create a composite primary key on request_attrs table (request_id, attribute_id) allowing it to be cleaned with pg_repack.&lt;/li&gt;
	&lt;li&gt;Schedule a task to perform the pg_repack.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="522851" author="agangadharan" created="Thu, 4 Apr 2019 13:50:16 -0400"  >&lt;p&gt;Postgres automatically creates an index for the primary key and so the size of this index could be big. After discussions with Dave and George it&apos;s decided to add the primary key for request_attrs and partitions for LDS only(not to DMS). &lt;/p&gt;</comment>
                            <comment id="522939" author="agangadharan" created="Fri, 5 Apr 2019 08:32:54 -0400"  >&lt;h5&gt;&lt;a name=&quot;Descriptionofthesolution%3A&quot;&gt;&lt;/a&gt;Description of the solution:&lt;/h5&gt;
&lt;p&gt;Add a unique to LDS request_attrs and partition tables, allowing us to leverage the pg_repack extension.&lt;/p&gt;

&lt;h5&gt;&lt;a name=&quot;Testsexecuted%3A&quot;&gt;&lt;/a&gt;Tests executed:&lt;/h5&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Restart LDS and check if the unique index is created for request_attrs and it&apos;s partitions&lt;/li&gt;
	&lt;li&gt;In case of a unique index creation failure, LDS will startup normally and send a failure notification&lt;/li&gt;
&lt;/ul&gt;


&lt;h5&gt;&lt;a name=&quot;Unittestsaddedormodified%3A&quot;&gt;&lt;/a&gt;Unit tests added or modified: &lt;/h5&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;TestTablePartitioning.TestAddUniqueIndex&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="522976" author="agangadharan" created="Fri, 5 Apr 2019 10:38:03 -0400"  >&lt;h4&gt;&lt;a name=&quot;&quot;&gt;&lt;/a&gt;&lt;font color=&quot;#d04437&quot;&gt;Review changeset&lt;/font&gt;&lt;/h4&gt;

&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Code review ( code, Intelerad coding conventions )&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;a href=&quot;https://rnd-kallithea.intelerad.com/kallithea/intelepacs/master-pirates/pull-request/2521/_/PACS-4-19-1-aganga-lds-rqstAttr-pkey#&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Kallithea review request&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Code commit message ( Kallithea/Forge )&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;&quot;&gt;&lt;/a&gt;&lt;font color=&quot;#d04437&quot;&gt;Verify Jira&lt;/font&gt;&lt;/h4&gt;

&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Release notes&lt;br/&gt;
&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Canned response &apos;Dev: Resolve&apos;&lt;br/&gt;
&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; RPM Upgrade List&lt;br/&gt;
&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Fix versions&lt;br/&gt;
&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/forbidden.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Release impact info&lt;br/&gt;
&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/forbidden.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; TestRail&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;&quot;&gt;&lt;/a&gt;&lt;font color=&quot;#d04437&quot;&gt;Others&lt;/font&gt;&lt;/h4&gt;

&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/forbidden.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Documentations ( If any )&lt;/p&gt;</comment>
                            <comment id="523416" author="agangadharan" created="Tue, 9 Apr 2019 10:23:38 -0400"  >&lt;p&gt;Adding a primary key to big request_attrs tables could be costly. The requirement for pg_repack is that the table should have a primary key or a UNIQUE index on it. So we&apos;ll add a unique index concurrently to LDS request_attrs and partitions, and add it to post service tasks of LDS.&lt;/p&gt;</comment>
                            <comment id="523668" author="afaiyaz" created="Wed, 10 Apr 2019 13:49:33 -0400"  >&lt;p&gt;&lt;b&gt;Reproduced with RPMs:&lt;/b&gt;  LocalDicomService-4.18.2.A2-ims01.i386&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Indexes currently on the request_attrs
	&lt;ul&gt;
		&lt;li&gt;&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;(cmdline@mst1) [localdicom] &amp;gt; \d request_attrs
                Table &quot;localdicom.request_attrs&quot;
   Column   |       Type        | Collation | Nullable | Default 
------------+-------------------+-----------+----------+---------
 request_id | bigint            |           | not null | 
 attr_id    | integer           |           | not null | 
 value      | character varying |           |          | 
Indexes:
    &quot;request_attrs_request_id_idx1&quot; btree (request_id)
    &quot;request_attrs_value_idx1&quot; btree (value) WHERE attr_id = ANY (ARRAY[5, 1048608])
Foreign-key constraints:
    &quot;request_attrs_request_id_fkey1&quot; FOREIGN KEY (request_id) REFERENCES requests(request_id) ON DELETE CASCADE DEFERRABLE
Triggers:
    request_attrs_partition_trigger BEFORE INSERT ON request_attrs FOR EACH ROW EXECUTE PROCEDURE request_attrs_partition_function()
Number of child tables: 1 (Use \d+ to list them.)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Indexes on other request_attr partitions before the fix
	&lt;ul&gt;
		&lt;li&gt;&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;(cmdline@mst1) [localdicom] &amp;gt; \d request_attrs_partition_current
       Table &quot;localdicom.request_attrs_partition_current&quot;
   Column   |       Type        | Collation | Nullable | Default 
------------+-------------------+-----------+----------+---------
 request_id | bigint            |           | not null | 
 attr_id    | integer           |           | not null | 
 value      | character varying |           |          | 
Indexes:
    &quot;request_attrs_request_id_idx&quot; btree (request_id)
    &quot;request_attrs_value_idx&quot; btree (value) WHERE attr_id = ANY (ARRAY[5, 1048608])
Foreign-key constraints:
    &quot;request_attrs_request_id_fkey&quot; FOREIGN KEY (request_id) REFERENCES requests(request_id) ON DELETE CASCADE DEFERRABLE
Inherits: request_attrs

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;the pg_repack is not allowed to run on localdicom db since it does not have a primary or a unique index
	&lt;ul&gt;
		&lt;li&gt;&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[admin@mst1] {/usr/local/tools/control_files} pg_repack -t localdicom.request_attrs -U sa -p 5483 --dbname postgres
Password: 
WARNING: relation &quot;localdicom.request_attrs&quot; must have a primary key or not-null unique keys
[admin@mst1] {/usr/local/tools/control_files} pg_repack -t localdicom.request_attrs_partition_current -U sa -p 5483 --dbname postgres
Password: 
WARNING: relation &quot;localdicom.request_attrs_partition_current&quot; must have a primary key or not-null unique keys
[admin@mst1] {/usr/local/tools/control_files} pg_repack -t localdicom.request_attrs_partition_current_1 -U sa -p 5483 --dbname postgres
Password: 
ERROR: pg_repack failed with error: ERROR:  relation &quot;localdicom.request_attrs_partition_current_1&quot; does not exist

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;




&lt;p&gt;&lt;b&gt;Verified with RPMs:&lt;/b&gt;&lt;br/&gt;
LocalDicomService-4.19.1.P000-ims99.i386.rpm, &lt;br/&gt;
DicomMasterService-4.19.1.P000-ims99.noarch.rpm&lt;/p&gt;


&lt;p&gt;&lt;b&gt;Verification steps:&lt;/b&gt;&lt;/p&gt;
&lt;h4&gt;&lt;a name=&quot;Test1%60&quot;&gt;&lt;/a&gt;Test1`&lt;/h4&gt;
&lt;p&gt;&lt;b&gt;Verify index creation on request_attrs and it&apos;s other child partitions after installation of the fix&lt;/b&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;After installation of the fix, restart LDS and DMS&lt;/li&gt;
	&lt;li&gt;check the indexes on localdicom.request_attrs
	&lt;ul&gt;
		&lt;li&gt;&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;(cmdline@mst1) [localdicom] &amp;gt; \d request_attrs
                Table &quot;localdicom.request_attrs&quot;
   Column   |       Type        | Collation | Nullable | Default 
------------+-------------------+-----------+----------+---------
 request_id | bigint            |           | not null | 
 attr_id    | integer           |           | not null | 
 value      | character varying |           |          | 
Indexes:
    &quot;request_attrs_u_idx&quot; UNIQUE, btree (request_id, attr_id)
    &quot;request_attrs_request_id_idx1&quot; btree (request_id)
    &quot;request_attrs_value_idx1&quot; btree (value) WHERE attr_id = ANY (ARRAY[5, 1048608])
Foreign-key constraints:
    &quot;request_attrs_request_id_fkey1&quot; FOREIGN KEY (request_id) REFERENCES requests(request_id) ON DELETE CASCADE DEFERRABLE
Triggers:
    request_attrs_partition_trigger BEFORE INSERT ON request_attrs FOR EACH ROW EXECUTE PROCEDURE request_attrs_partition_function()
Number of child tables: 1 (Use \d+ to list them.)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Also, verify the unique index creation on other paritions of the request_attrs
	&lt;ul&gt;
		&lt;li&gt;&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;(cmdline@mst1) [localdicom] &amp;gt; \d request_attrs_partition_current
       Table &quot;localdicom.request_attrs_partition_current&quot;
   Column   |       Type        | Collation | Nullable | Default 
------------+-------------------+-----------+----------+---------
 request_id | bigint            |           | not null | 
 attr_id    | integer           |           | not null | 
 value      | character varying |           |          | 
Indexes:
    &quot;request_attrs_partition_current_u_idx&quot; UNIQUE, btree (request_id, attr_id)
    &quot;request_attrs_request_id_idx&quot; btree (request_id)
    &quot;request_attrs_value_idx&quot; btree (value) WHERE attr_id = ANY (ARRAY[5, 1048608])
Foreign-key constraints:
    &quot;request_attrs_request_id_fkey&quot; FOREIGN KEY (request_id) REFERENCES requests(request_id) ON DELETE CASCADE DEFERRABLE
Inherits: request_attrs
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;h4&gt;&lt;a name=&quot;Test2&quot;&gt;&lt;/a&gt;Test2 &lt;/h4&gt;
&lt;p&gt;&lt;b&gt;pg_repack should be allowed on the localdicom request_attrs and it&apos;s child tables since a unique index has been created&lt;/b&gt;&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[admin@mst1] {~/adil/images} pg_repack -t localdicom.request_attrs -U sa -p 5483 --dbname postgres
Password: 
INFO: repacking table &quot;localdicom.request_attrs&quot;
[admin@mst1] {~/adil/images} 
[admin@mst1] {~/adil/images} 
[admin@mst1] {~/adil/images} 
[admin@mst1] {~/adil/images} pg_repack -t localdicom.request_attrs_partition_current -U sa -p 5483 --dbname postgres
Password: 
INFO: repacking table &quot;localdicom.request_attrs_partition_current&quot;

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;h4&gt;&lt;a name=&quot;Test3&quot;&gt;&lt;/a&gt;Test3&lt;/h4&gt;
&lt;p&gt;&lt;b&gt;Verify any new partition should also be having the index created&lt;/b&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Modify maxPartitionSize   = 2000 in LocalDicomService.cfg&lt;/li&gt;
	&lt;li&gt;Send 1000&apos;s of series so that request_attrs is filled up and a new partition is created&lt;/li&gt;
	&lt;li&gt;check the index on the new partition&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;(cmdline@mst1) [localdicom] &amp;gt; \d request_attrs_partition_3006
         Table &quot;localdicom.request_attrs_partition_3006&quot;
   Column   |       Type        | Collation | Nullable | Default 
------------+-------------------+-----------+----------+---------
 request_id | bigint            |           | not null | 
 attr_id    | integer           |           | not null | 
 value      | character varying |           |          | 
Indexes:
    &quot;request_attrs_partition_current_u_idx&quot; UNIQUE, btree (request_id, attr_id)
    &quot;request_attrs_request_id_idx&quot; btree (request_id)
    &quot;request_attrs_value_idx&quot; btree (value) WHERE attr_id = ANY (ARRAY[5, 1048608])
Check constraints:
    &quot;max_request_id&quot; CHECK (request_id &amp;lt;= 3006)
Foreign-key constraints:
    &quot;request_attrs_request_id_fkey&quot; FOREIGN KEY (request_id) REFERENCES requests(request_id) ON DELETE CASCADE DEFERRABLE
Inherits: request_attrs


(cmdline@mst1) [localdicom] &amp;gt; \d request_attrs_partition_10898
        Table &quot;localdicom.request_attrs_partition_10898&quot;
   Column   |       Type        | Collation | Nullable | Default 
------------+-------------------+-----------+----------+---------
 request_id | bigint            |           | not null | 
 attr_id    | integer           |           | not null | 
 value      | character varying |           |          | 
Indexes:
    &quot;request_attrs_partition_10898_u_idx&quot; UNIQUE, btree (request_id, attr_id)
    &quot;request_attrs_partition_current_request_id_idx&quot; btree (request_id)
    &quot;request_attrs_partition_current_value_idx&quot; btree (value) WHERE attr_id = ANY (ARRAY[5, 1048608])
Check constraints:
    &quot;max_request_id&quot; CHECK (request_id &amp;lt;= 10898)
    &quot;min_request_id&quot; CHECK (request_id &amp;gt; 3006)
Foreign-key constraints:
    &quot;request_attrs_partition_current_request_id_fkey&quot; FOREIGN KEY (request_id) REFERENCES requests(request_id) ON DELETE CASCADE DEFERRABLE
Inherits: request_attrs

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;b&gt;End result:&lt;/b&gt; All tests pass. Assigning to dev for commit &lt;/p&gt;</comment>
                            <comment id="523797" author="robot-bc-rw" created="Thu, 11 Apr 2019 11:04:34 -0400"  >&lt;p&gt;Released by agangadharan to master at 2019-04-11 11:04:30 (push 72360):&lt;br/&gt;
  PACS-4-16-1 (fix)        (previous build: PACS-4-16-1-P363)&lt;br/&gt;
  PACS-4-17-1 (fix)        (previous build: PACS-4-17-1-P188)&lt;br/&gt;
  PACS-4-18-1 (fix)        (previous build: PACS-4-18-1-P12)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-18-2-A7)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/965f7ed7fe07&quot; target=&quot;_blank&quot;&gt;intelepacs:965f7ed7fe07&lt;/a&gt;  agangadharan  PACS-4-16-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103245&quot; title=&quot;LocalDicomService: request_attrs archive partitions affect performance as old requests are deleted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103245&quot;&gt;&lt;del&gt;IP-103245&lt;/del&gt;&lt;/a&gt; fix: Add unique index on localdicom request_attrs and partitions&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/264224c9ab08&quot; target=&quot;_blank&quot;&gt;intelepacs:264224c9ab08&lt;/a&gt;  agangadharan  PACS-4-17-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103245&quot; title=&quot;LocalDicomService: request_attrs archive partitions affect performance as old requests are deleted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103245&quot;&gt;&lt;del&gt;IP-103245&lt;/del&gt;&lt;/a&gt; fix: Add unique index on localdicom request_attrs and partitions&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/49364fc04eda&quot; target=&quot;_blank&quot;&gt;intelepacs:49364fc04eda&lt;/a&gt;  agangadharan  PACS-4-18-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103245&quot; title=&quot;LocalDicomService: request_attrs archive partitions affect performance as old requests are deleted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103245&quot;&gt;&lt;del&gt;IP-103245&lt;/del&gt;&lt;/a&gt; fix: Add unique index on localdicom request_attrs and partitions&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/ddb45e86cdc9&quot; target=&quot;_blank&quot;&gt;intelepacs:ddb45e86cdc9&lt;/a&gt;  agangadharan  trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-103245&quot; title=&quot;LocalDicomService: request_attrs archive partitions affect performance as old requests are deleted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-103245&quot;&gt;&lt;del&gt;IP-103245&lt;/del&gt;&lt;/a&gt; fix: Add unique index on localdicom request_attrs and partitions&lt;/p&gt;</comment>
                            <comment id="523800" author="agangadharan" created="Thu, 11 Apr 2019 11:13:58 -0400"  >&lt;p&gt;Released to forge.&lt;/p&gt;</comment>
                            <comment id="523969" author="dvu" created="Fri, 12 Apr 2019 10:27:24 -0400"  >&lt;p&gt;&lt;a href=&quot;https://rnd-ci.intelerad.com/job/IntelePACS_IntegrationTest_CloudTesting/179/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://rnd-ci.intelerad.com/job/IntelePACS_IntegrationTest_CloudTesting/179/&lt;/a&gt; ( tests pass)&lt;/p&gt;</comment>
                            <comment id="524011" author="dvu" created="Fri, 12 Apr 2019 11:16:06 -0400"  >&lt;p&gt;    Included in PACS-4-16-1-R40 (atlas 1.14.P57)&lt;/p&gt;</comment>
                            <comment id="524285" author="mli" created="Mon, 15 Apr 2019 15:37:42 -0400"  >&lt;p&gt; CS0134084 RPEG&lt;br/&gt;
  4-14-1 is affected by  this bug  &lt;br/&gt;
see details in PRB0042408  (comment ID: SNF0609915 and previous ones)&lt;/p&gt;
</comment>
                            <comment id="524451" author="dvu" created="Tue, 16 Apr 2019 15:06:00 -0400"  >&lt;p&gt;Included in PACS-4-17-1-R15 (atlas 1.15.P41)&lt;/p&gt;</comment>
                            <comment id="524844" author="sperna" created="Thu, 18 Apr 2019 16:07:10 -0400"  >&lt;p&gt;AIS CS0140219 affected &lt;/p&gt;</comment>
                            <comment id="524932" author="mli" created="Mon, 22 Apr 2019 12:23:48 -0400"  >&lt;p&gt;DCA CS0140566 &lt;/p&gt;

&lt;p&gt;depot2 was affected by this bug , one of the major reason causing slowness. &lt;/p&gt;</comment>
                            <comment id="524935" author="mli" created="Mon, 22 Apr 2019 13:05:54 -0400"  >&lt;p&gt;&lt;a href=&quot;https://jira.intelerad.com/secure/ViewProfile.jspa?name=agangadharan&quot; class=&quot;user-hover&quot; rel=&quot;agangadharan&quot;&gt;Aswin Gangadharan&lt;/a&gt;&lt;br/&gt;
By my understanding,  with the bug fix,  pg_repack can be executed on the request_attrs* tables.&lt;br/&gt;
does it mean, we (Support) need to do the manual maintenance when every time we found the bloated tables, or setup a cron job ?&lt;/p&gt;</comment>
                            <comment id="524996" author="mfrancisco" created="Tue, 23 Apr 2019 09:26:59 -0400"  >&lt;p&gt;&lt;a href=&quot;https://jira.intelerad.com/secure/ViewProfile.jspa?name=mli&quot; class=&quot;user-hover&quot; rel=&quot;mli&quot;&gt;Muwei Li&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Yes, the idea of adding the composite primary key to the request_attrs table and its child partitions is to allow for us to run pg_repack.  You can certainly set up a cronjob to clear it out regularly with pg_repack.&lt;/p&gt;</comment>
                            <comment id="528092" author="bross" created="Wed, 15 May 2019 10:42:34 -0400"  >&lt;p&gt;This is needed on PACS-4-14-1 for RPEG and AIS. Muwei opened &lt;a href=&quot;https://jira.intelerad.com/browse/IP-104336&quot; title=&quot;Backport pg_repack and IP-103245 to 4-14-1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-104336&quot;&gt;IP-104336&lt;/a&gt;  to get this addressed.&lt;/p&gt;</comment>
                            <comment id="528120" author="agangadharan" created="Wed, 15 May 2019 12:18:03 -0400"  >&lt;p&gt;Hi &lt;a href=&quot;https://jira.intelerad.com/secure/ViewProfile.jspa?name=bross&quot; class=&quot;user-hover&quot; rel=&quot;bross&quot;&gt;Bob Ross&lt;/a&gt;, &lt;a href=&quot;https://jira.intelerad.com/secure/ViewProfile.jspa?name=mli&quot; class=&quot;user-hover&quot; rel=&quot;mli&quot;&gt;Muwei Li&lt;/a&gt;&lt;br/&gt;
pg_repack extension is available only in 4-15-1 and up for now. This is a fix that enable us to use this extension. So we&apos;ll have to backport pg_repack to 4-14-1 first.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="151974">IP-103582</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="153186">IP-103945</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="153336">MAINT-9534</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="151973">IP-103581</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="150406">MAINT-9306</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="51103" name="DicomMasterService-4.19.1.P000-ims99.noarch.rpm" size="2786040" author="agangadharan" created="Tue, 9 Apr 2019 10:27:27 -0400"/>
                            <attachment id="51102" name="LocalDicomService-4.19.1.P000-ims99.i386.rpm" size="7796505" author="agangadharan" created="Tue, 9 Apr 2019 10:27:19 -0400"/>
                    </attachments>
                <subtasks>
                            <subtask id="151691">IP-103473</subtask>
                            <subtask id="151692">IP-103474</subtask>
                            <subtask id="152859">IP-103803</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12603" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Affected Clients</customfieldname>
                        <customfieldvalues>
                                        <label>AIS</label>
            <label>AUSIG</label>
            <label>DCA</label>
            <label>RPEG</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[4.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_13901" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Code Committed</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14502"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;h4&gt;&lt;a name=&quot;RPMVersion&quot;&gt;&lt;/a&gt;RPM Version&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ISPClient%3A%3Cclientcode%3E&quot;&gt;&lt;/a&gt;ISP - Client : &lt;a href=&quot;https://inteleradprod.service-now.com/nav_to.do?uri=textsearch.do?sysparm_search=xxxx&quot; target=&quot;_blank&quot;&gt;xxxx&lt;/a&gt; - &amp;lt;client code&amp;gt;&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ClinicalImpact%3A&quot;&gt;&lt;/a&gt;Clinical Impact:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce%3A&quot;&gt;&lt;/a&gt;Minimal steps to reproduce:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour%3A&quot;&gt;&lt;/a&gt;Expected behaviour:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F%3A&quot;&gt;&lt;/a&gt;What happened instead?:&lt;/h4&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12110" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Documentation</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14406"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>IP-87798</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13135"><![CDATA[DicomMasterService]]></customfieldvalue>
    <customfieldvalue key="13268"><![CDATA[LocalDicomService]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzcqkf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12102" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Release Notes</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14407"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13815" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Risk</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14445"><![CDATA[Standard Change]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13501" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Scrum Team</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14403"><![CDATA[Backend Pirates]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11001" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>ServiceNow Case #</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>CS0117359, CS0134084, CS0140219, CS0140566</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10802"><![CDATA[MAJOR]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="1995">Backend Pirates Sprint 13</customfieldvalue>
    <customfieldvalue id="2000">Backend Pirates Sprint 14</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:float">
                        <customfieldname>Story Points</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-102924] Inbound IOCM: As an integration tester, I can write a test against a legacy study</title>
                <link>https://jira.intelerad.com/browse/IP-102924</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;&lt;b&gt;&lt;ins&gt;Business Value:&lt;/ins&gt;&lt;/b&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Provides test coverage for legacy studies.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;ins&gt;&lt;b&gt;Description:&lt;/b&gt;&lt;/ins&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Creates a legacy study on the PACS and performs inbound IOCM tests on it to test the behavior of the image workflow ( LDS, DMS ).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;ins&gt;&lt;b&gt;Acceptance Criteria:&lt;/b&gt;&lt;/ins&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Functional requirements
	&lt;ul&gt;
		&lt;li&gt;Creates legacy study setup on the PACS&lt;/li&gt;
		&lt;li&gt;Verifies legacy study information on the PACS&lt;/li&gt;
		&lt;li&gt;Executes a legacy study test
		&lt;ul&gt;
			&lt;li&gt;When a sop with a corrected tag arrives from an overwriting calling AE, the corrected tag must propagate from LDS to DMS ( test verifies if this passes or fails )&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Non-Functional requirements (including performance)
	&lt;ul&gt;
		&lt;li&gt;TBD&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;ins&gt;&lt;b&gt;Test Strategy:&lt;/b&gt;&lt;/ins&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Write integration test with the appropriate assertions&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;ins&gt;&lt;b&gt;Can Be demoed?&lt;/b&gt;&lt;/ins&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;
</description>
            <key id="149958">IP-102924</key>
            <summary>Inbound IOCM: As an integration tester, I can write a test against a legacy study</summary>
                <type id="3" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13918&amp;avatarType=issuetype">Task</type>
                                            <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="ebelardo">Emil Belardo</assignee>
                                    <reporter username="ebelardo">Emil Belardo</reporter>
                        <labels>
                            <label>Ready</label>
                    </labels>
                <created>Tue, 19 Feb 2019 12:18:25 -0500</created>
                <updated>Sun, 5 May 2019 09:52:25 -0400</updated>
                            <resolved>Sun, 31 Mar 2019 12:04:17 -0400</resolved>
                                    <version>4-18-1</version>
                                    <fixVersion>4-17-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                    <component>Image Workflow</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <timeoriginalestimate seconds="0">0 minutes</timeoriginalestimate>
                            <timeestimate seconds="0">0 minutes</timeestimate>
                            <timespent seconds="90000">3 days, 1 hour</timespent>
                                <comments>
                            <comment id="522217" author="robot-bc-rw" created="Sat, 30 Mar 2019 08:25:43 -0400"  >&lt;p&gt;Released by ebelardo to master at 2019-03-30 08:25:41 (push 72176):&lt;br/&gt;
  PACS-4-17-1 (fix)        (previous build: PACS-4-17-1-P180)&lt;br/&gt;
  trunk      (dummy)      (previous build: PACS-4-17-2-A200)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/02a411bb301c&quot; target=&quot;_blank&quot;&gt;intelepacs:02a411bb301c&lt;/a&gt;  ebelardo    PACS-4-17-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-94954&quot; title=&quot;Inbound IOCM does not work for legacy studies (studies without requests)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-94954&quot;&gt;&lt;del&gt;IP-94954&lt;/del&gt;&lt;/a&gt; fix,&lt;a href=&quot;https://jira.intelerad.com/browse/IP-102924&quot; title=&quot;Inbound IOCM: As an integration tester, I can write a test against a legacy study&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-102924&quot;&gt;&lt;del&gt;IP-102924&lt;/del&gt;&lt;/a&gt; fix: InboundIOCM: LDS creates full correction for SOP ingestion from legacy study&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/623d992727c7&quot; target=&quot;_blank&quot;&gt;intelepacs:623d992727c7&lt;/a&gt;  ebelardo    trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-94954&quot; title=&quot;Inbound IOCM does not work for legacy studies (studies without requests)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-94954&quot;&gt;&lt;del&gt;IP-94954&lt;/del&gt;&lt;/a&gt; dummy,&lt;a href=&quot;https://jira.intelerad.com/browse/IP-102924&quot; title=&quot;Inbound IOCM: As an integration tester, I can write a test against a legacy study&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-102924&quot;&gt;&lt;del&gt;IP-102924&lt;/del&gt;&lt;/a&gt; dummy: dummy merge from PACS-4-17-1&lt;/p&gt;</comment>
                            <comment id="522220" author="robot-bc-rw" created="Sun, 31 Mar 2019 11:14:30 -0400"  >&lt;p&gt;Released by ebelardo to master at 2019-03-31 11:14:27 (push 72186):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-17-2-A200)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/43eeda9d0fe5&quot; target=&quot;_blank&quot;&gt;intelepacs:43eeda9d0fe5&lt;/a&gt;  ebelardo    trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-94954&quot; title=&quot;Inbound IOCM does not work for legacy studies (studies without requests)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-94954&quot;&gt;&lt;del&gt;IP-94954&lt;/del&gt;&lt;/a&gt; fix,&lt;a href=&quot;https://jira.intelerad.com/browse/IP-102924&quot; title=&quot;Inbound IOCM: As an integration tester, I can write a test against a legacy study&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-102924&quot;&gt;&lt;del&gt;IP-102924&lt;/del&gt;&lt;/a&gt; fix: InboundIOCM: LDS creates full correction for SOP ingestion from legacy study&lt;/p&gt;</comment>
                            <comment id="522223" author="ebelardo" created="Sun, 31 Mar 2019 12:01:25 -0400"  >&lt;h4&gt;&lt;a name=&quot;Descriptionofthesolution%3A&quot;&gt;&lt;/a&gt;Description of the solution:&lt;/h4&gt;

&lt;p&gt;Write an integration test for inbound IOCM in the context of legacy studies.&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Testsexecuted%3A&quot;&gt;&lt;/a&gt;Tests executed:&lt;/h4&gt;

&lt;p&gt;TestInboundVnaCorrectionLegacyStudy.sopFromOverwritingAeShouldTriggerFullCorrection( )&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Unittestsaddedormodified%3A&quot;&gt;&lt;/a&gt;Unit tests added or modified: &lt;/h4&gt;

&lt;p&gt;None.&lt;/p&gt;</comment>
                            <comment id="522224" author="ebelardo" created="Sun, 31 Mar 2019 12:03:40 -0400"  >&lt;h4&gt;&lt;a name=&quot;&quot;&gt;&lt;/a&gt;&lt;font color=&quot;#d04437&quot;&gt;Review changeset&lt;/font&gt;&lt;/h4&gt;

&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Code review ( code, Intelerad coding conventions )&lt;br/&gt;
&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Code commit message ( Kallithea/Forge )&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;&quot;&gt;&lt;/a&gt;&lt;font color=&quot;#d04437&quot;&gt;Verify Jira&lt;/font&gt;&lt;/h4&gt;

&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/forbidden.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Release notes&lt;br/&gt;
&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Canned response &apos;Dev: Resolve&apos;&lt;br/&gt;
&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; RPM Upgrade List&lt;br/&gt;
&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Fix versions&lt;br/&gt;
&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Release impact info&lt;br/&gt;
&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; TestRail&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;&quot;&gt;&lt;/a&gt;&lt;font color=&quot;#d04437&quot;&gt;Others&lt;/font&gt;&lt;/h4&gt;

&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/forbidden.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Documentations ( If any )&lt;/p&gt;</comment>
                            <comment id="522225" author="ebelardo" created="Sun, 31 Mar 2019 12:04:17 -0400"  >&lt;p&gt;Commited to forge.&lt;/p&gt;</comment>
                            <comment id="522482" author="robot-bc-rw" created="Tue, 2 Apr 2019 12:26:02 -0400"  >&lt;p&gt;Released by ebelardo to master at 2019-04-02 12:25:58 (push 72233):&lt;br/&gt;
  PACS-4-17-1 (fix)        (previous build: PACS-4-17-1-P181)&lt;br/&gt;
  PACS-4-18-1 (fix)        (previous build: PACS-4-18-1-P3)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-18-2-A3)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/a35e7368d889&quot; target=&quot;_blank&quot;&gt;intelepacs:a35e7368d889&lt;/a&gt;  ebelardo    PACS-4-17-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-94954&quot; title=&quot;Inbound IOCM does not work for legacy studies (studies without requests)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-94954&quot;&gt;&lt;del&gt;IP-94954&lt;/del&gt;&lt;/a&gt; fix,&lt;a href=&quot;https://jira.intelerad.com/browse/IP-102924&quot; title=&quot;Inbound IOCM: As an integration tester, I can write a test against a legacy study&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-102924&quot;&gt;&lt;del&gt;IP-102924&lt;/del&gt;&lt;/a&gt; fix: Correcting keystore path&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/600ad5216f4e&quot; target=&quot;_blank&quot;&gt;intelepacs:600ad5216f4e&lt;/a&gt;  ebelardo    PACS-4-18-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-102924&quot; title=&quot;Inbound IOCM: As an integration tester, I can write a test against a legacy study&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-102924&quot;&gt;&lt;del&gt;IP-102924&lt;/del&gt;&lt;/a&gt; fix,&lt;a href=&quot;https://jira.intelerad.com/browse/IP-94954&quot; title=&quot;Inbound IOCM does not work for legacy studies (studies without requests)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-94954&quot;&gt;&lt;del&gt;IP-94954&lt;/del&gt;&lt;/a&gt; fix: Correcting keystore path&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/529e55d7b24c&quot; target=&quot;_blank&quot;&gt;intelepacs:529e55d7b24c&lt;/a&gt;  ebelardo    trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-102924&quot; title=&quot;Inbound IOCM: As an integration tester, I can write a test against a legacy study&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-102924&quot;&gt;&lt;del&gt;IP-102924&lt;/del&gt;&lt;/a&gt; fix,&lt;a href=&quot;https://jira.intelerad.com/browse/IP-94954&quot; title=&quot;Inbound IOCM does not work for legacy studies (studies without requests)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-94954&quot;&gt;&lt;del&gt;IP-94954&lt;/del&gt;&lt;/a&gt; fix: Correcting keystore path&lt;/p&gt;</comment>
                            <comment id="523118" author="dvu" created="Fri, 5 Apr 2019 16:37:42 -0400"  >&lt;p&gt;Included in PACS-4-17-1-R14 (atlas 1.15.P41)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Blocks</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="149956">IP-102922</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="149957">IP-102923</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_13901" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Code Committed</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14502"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[2.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;h4&gt;&lt;a name=&quot;RPMVersion&quot;&gt;&lt;/a&gt;RPM Version&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ISPClient%3A%3Cclientcode%3E&quot;&gt;&lt;/a&gt;ISP - Client : &lt;a href=&quot;https://inteleradprod.service-now.com/nav_to.do?uri=textsearch.do?sysparm_search=xxxx&quot; target=&quot;_blank&quot;&gt;xxxx&lt;/a&gt; - &amp;lt;client code&amp;gt;&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ClinicalImpact%3A&quot;&gt;&lt;/a&gt;Clinical Impact:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce%3A&quot;&gt;&lt;/a&gt;Minimal steps to reproduce:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour%3A&quot;&gt;&lt;/a&gt;Expected behaviour:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F%3A&quot;&gt;&lt;/a&gt;What happened instead?:&lt;/h4&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12110" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Documentation</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14406"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>IP-97141</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13207"><![CDATA[IntegrationTesting]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzcmqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12102" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Release Notes</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14407"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13815" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Risk</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14445"><![CDATA[Standard Change]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13501" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Scrum Team</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14403"><![CDATA[Backend Pirates]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="1943">Backend Pirates Sprint 10</customfieldvalue>
    <customfieldvalue id="1944">Backend Pirates Sprint 11</customfieldvalue>
    <customfieldvalue id="1995">Backend Pirates Sprint 13</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:float">
                        <customfieldname>Story Points</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.5</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-97657] JDK 11:  Implement new C++ command line LDS Java JSON communication</title>
                <link>https://jira.intelerad.com/browse/IP-97657</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;h4&gt;&lt;a name=&quot;AcceptanceCriteria%3A&quot;&gt;&lt;/a&gt;Acceptance Criteria:&lt;/h4&gt;
&lt;p&gt;&lt;em&gt;Functional &amp;amp; Non-Functional requirements&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Use results from spike to design and implement solution\&lt;/li&gt;
	&lt;li&gt;Write a CPP command line app that receives and sends JSON&lt;/li&gt;
	&lt;li&gt;Rewrite LDS Java validation code to communication with new CPP command line app using JSON&lt;/li&gt;
	&lt;li&gt;Estimate story points based on results of spike&lt;/li&gt;
&lt;/ul&gt;
</description>
            <key id="149631">IP-97657</key>
            <summary>JDK 11:  Implement new C++ command line LDS Java JSON communication</summary>
                <type id="7" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13914&amp;avatarType=issuetype">Story</type>
                                            <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="fhouillon">Francois Houillon</assignee>
                                    <reporter username="aluz">Alessandra Mauricio Luz</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Feb 2019 15:20:15 -0500</created>
                <updated>Mon, 1 Apr 2019 10:25:36 -0400</updated>
                            <resolved>Thu, 28 Mar 2019 17:17:23 -0400</resolved>
                                    <version>4-18-1</version>
                                    <fixVersion>4-18-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <timeoriginalestimate seconds="0">0 minutes</timeoriginalestimate>
                                    <timespent seconds="243000">1 week, 3 days, 3 hours, 30 minutes</timespent>
                                            <aggregatetimeoriginalestimate seconds="1800">30 minutes</aggregatetimeoriginalestimate>
                                        <aggregatetimeremainingestimate seconds="9000">2 hours, 30 minutes</aggregatetimeremainingestimate>
                                        <aggregatetimespent seconds="1178100">8 weeks, 7 hours, 15 minutes</aggregatetimespent>
                                    <comments>
                            <comment id="519125" author="robot-bc-rw" created="Mon, 11 Mar 2019 15:06:01 -0400"  >&lt;p&gt;Released by fhouillon to master at 2019-03-11 15:05:59 (push 71839):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-17-2-A178)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/ad4052c925c2&quot; target=&quot;_blank&quot;&gt;intelepacs:ad4052c925c2&lt;/a&gt;  fboumdamouafo  trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-97657&quot; title=&quot;JDK 11:  Implement new C++ command line LDS Java JSON communication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-97657&quot;&gt;&lt;del&gt;IP-97657&lt;/del&gt;&lt;/a&gt; fix: Replace Jni library with CPP binary calls and Jsonize the arguments&lt;/p&gt;</comment>
                            <comment id="520920" author="robot-bc-rw" created="Wed, 20 Mar 2019 19:45:34 -0400"  >&lt;p&gt;Released by sclark to master at 2019-03-20 19:45:16 (push 72007):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-17-2-A186)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/7bdcbdc6c7d3&quot; target=&quot;_blank&quot;&gt;intelepacs:7bdcbdc6c7d3&lt;/a&gt;  fhouillon   trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-97657&quot; title=&quot;JDK 11:  Implement new C++ command line LDS Java JSON communication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-97657&quot;&gt;&lt;del&gt;IP-97657&lt;/del&gt;&lt;/a&gt; fix: Fixed bad merge&lt;/p&gt;</comment>
                            <comment id="522016" author="robot-bc-rw" created="Thu, 28 Mar 2019 17:15:50 -0400"  >&lt;p&gt;Released by fhouillon to master at 2019-03-28 17:15:48 (push 72147):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-17-2-A197)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/297275aa18cc&quot; target=&quot;_blank&quot;&gt;intelepacs:297275aa18cc&lt;/a&gt;  fhouillon   trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-97657&quot; title=&quot;JDK 11:  Implement new C++ command line LDS Java JSON communication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-97657&quot;&gt;&lt;del&gt;IP-97657&lt;/del&gt;&lt;/a&gt; fix: PR remarks, cleanup JNI links in LDS, add C++ unit tests&lt;/p&gt;</comment>
                            <comment id="522259" author="mtavallaei" created="Mon, 1 Apr 2019 10:22:50 -0400"  >&lt;p&gt;QA is done. Everything works properly.&lt;/p&gt;

&lt;p&gt;The followings are tested in LDS validation:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Automatic Validation&lt;/li&gt;
	&lt;li&gt;Automatic Validation using AutoRetryMinutesforValidation&lt;/li&gt;
	&lt;li&gt;Manual Validation&lt;/li&gt;
	&lt;li&gt;Automatic Order Generation&lt;/li&gt;
	&lt;li&gt;HL7 to DICOM mapping&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;You can find more details here: &lt;a href=&quot;https://docs.google.com/document/d/1puF3YZorPIeldx67OJdfH1rhadCWpYl9rvnJCqtjOvk/edit?usp=sharing&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://docs.google.com/document/d/1puF3YZorPIeldx67OJdfH1rhadCWpYl9rvnJCqtjOvk/edit?usp=sharing&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Blocks</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="149630">IP-97656</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="149801">IP-97716</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="148848">IP-97498</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="50683" name="LocalDicomService.rpm" size="7878646" author="fhouillon" created="Fri, 22 Mar 2019 15:30:12 -0400"/>
                    </attachments>
                <subtasks>
                            <subtask id="149887">IP-102246</subtask>
                            <subtask id="149889">IP-102247</subtask>
                    </subtasks>
                <customfields>
                                                                                                                                    <customfield id="customfield_13806" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Availability Impact</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14409"><![CDATA[BlocksPLA]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_13901" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Code Committed</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14502"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;h4&gt;&lt;a name=&quot;RPMVersion&quot;&gt;&lt;/a&gt;RPM Version&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ISPClient%3A%3Cclientcode%3E&quot;&gt;&lt;/a&gt;ISP - Client : &lt;a href=&quot;https://inteleradprod.service-now.com/nav_to.do?uri=textsearch.do?sysparm_search=xxxx&quot; target=&quot;_blank&quot;&gt;xxxx&lt;/a&gt; - &amp;lt;client code&amp;gt;&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ClinicalImpact%3A&quot;&gt;&lt;/a&gt;Clinical Impact:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce%3A&quot;&gt;&lt;/a&gt;Minimal steps to reproduce:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour%3A&quot;&gt;&lt;/a&gt;Expected behaviour:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F%3A&quot;&gt;&lt;/a&gt;What happened instead?:&lt;/h4&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12110" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Documentation</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14406"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>IP-97184</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13268"><![CDATA[LocalDicomService]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzz9l3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12102" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Release Notes</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14407"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13501" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Scrum Team</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14112"><![CDATA[Backend Raptors]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="1932">Raptors 2019 - S3</customfieldvalue>
    <customfieldvalue id="1956">Raptors 2019 - S4</customfieldvalue>
    <customfieldvalue id="1982">Raptors 2019 - S5</customfieldvalue>
    <customfieldvalue id="2002">Raptors 2019 - S6</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:float">
                        <customfieldname>Story Points</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-97622] JDK 11:   LDS:  Rewrite CppUtilsDefault in Java</title>
                <link>https://jira.intelerad.com/browse/IP-97622</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;h4&gt;&lt;a name=&quot;AcceptanceCriteria&quot;&gt;&lt;/a&gt;Acceptance Criteria&lt;/h4&gt;

&lt;ul&gt;
	&lt;li&gt;Replace symlink C++ JNI code with Java NIO2 code&lt;/li&gt;
	&lt;li&gt;Ensure that all unit tests still pass&lt;/li&gt;
	&lt;li&gt;Ensure that all automation tests still pass&lt;/li&gt;
	&lt;li&gt;Ensure that there is no significant performance degradation for large numbers of files&lt;/li&gt;
	&lt;li&gt;Commit this against trunk master&lt;/li&gt;
&lt;/ul&gt;


&lt;h4&gt;&lt;a name=&quot;TechnicalInformation&quot;&gt;&lt;/a&gt;Technical Information&lt;/h4&gt;

&lt;p&gt;com.intelerad.localdicomservice.common.CppUtilsDefault is written as a native JNI class that handles symlinks.&lt;/p&gt;

&lt;p&gt;This should either be rewritten in Java or invoked as Linux command-line calls.&lt;/p&gt;

&lt;p&gt;It should be possible to do all of this in Java according to this link:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://docs.oracle.com/javase/tutorial/essential/io/links.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://docs.oracle.com/javase/tutorial/essential/io/links.html&lt;/a&gt;&lt;/p&gt;
</description>
            <key id="149524">IP-97622</key>
            <summary>JDK 11:   LDS:  Rewrite CppUtilsDefault in Java</summary>
                <type id="3" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13918&amp;avatarType=issuetype">Task</type>
                                            <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="ldegruchy">Luke de Gruchy</assignee>
                                    <reporter username="ldegruchy">Luke de Gruchy</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Feb 2019 14:10:25 -0500</created>
                <updated>Tue, 12 Mar 2019 14:44:15 -0400</updated>
                            <resolved>Mon, 25 Feb 2019 16:15:29 -0500</resolved>
                                    <version>4-18-1</version>
                                    <fixVersion>4-18-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <timeoriginalestimate seconds="0">0 minutes</timeoriginalestimate>
                            <timeestimate seconds="0">0 minutes</timeestimate>
                            <timespent seconds="261000">1 week, 4 days, 30 minutes</timespent>
                                <comments>
                            <comment id="516905" author="pzhan" created="Thu, 21 Feb 2019 13:21:04 -0500"  >&lt;p&gt;Complete full integration test in test CI - &lt;a href=&quot;https://rnd-testci.intelerad.com/job/IntelePACS_IntegrationTest_trunk/819/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://rnd-testci.intelerad.com/job/IntelePACS_IntegrationTest_trunk/819/&lt;/a&gt;&lt;br/&gt;
Two tests failures which are not related to the code change:&lt;br/&gt;
java.lang.AssertionError&lt;br/&gt;
	at org.junit.Assert.fail(Assert.java:86)&lt;br/&gt;
	at org.junit.Assert.assertTrue(Assert.java:41)&lt;br/&gt;
	at org.junit.Assert.assertFalse(Assert.java:64)&lt;br/&gt;
	at org.junit.Assert.assertFalse(Assert.java:74)&lt;br/&gt;
	at com.intelerad.integrationtesting.diskmon.TestDiskmonEnable.testDoNotDeleteWhenSeriesInAutoRoute(TestDiskmonEnable.java:195)&lt;/p&gt;

&lt;p&gt;java.util.concurrent.TimeoutException: Operation &apos;Try searching multiple times&apos; has timed out. Timeout of PT1M exceeded after PT1M9.354S, tried every PT15S for a total of 3 times. The last result was null&lt;br/&gt;
	at com.intelerad.lib.integrationtesting.call.PeriodicPoller.poll(PeriodicPoller.java:126)&lt;br/&gt;
	at com.intelerad.integrationtesting.intelebrowser.TestDicomQueues.testAutoRouteDicomQueue(TestDicomQueues.java:121)&lt;/p&gt;

&lt;p&gt;Re-run two failure test cases via local test-effectiveness:&lt;br/&gt;
1. passed with trunk code&lt;br/&gt;
2. passed with change code&lt;/p&gt;
</comment>
                            <comment id="516929" author="luke.degruchy" created="Thu, 21 Feb 2019 15:30:41 -0500"  >&lt;p&gt;Performance testing results by elapsed time over 2,000,000 iterations:&lt;/p&gt;

&lt;p&gt;symlinkCount = 2,000,000&lt;/p&gt;

&lt;p&gt;Java:&lt;br/&gt;
----------&lt;br/&gt;
totalCreateSymlinkTime = 46,581 ms&lt;br/&gt;
totalCreateHardLinkTime = 15,627 ms&lt;br/&gt;
totalIsSymlinkTime = 8,921 ms&lt;br/&gt;
totalSymlinkExistsTime = 2,646 ms&lt;br/&gt;
totalResolveSymlinkTime = 28,706 ms&lt;br/&gt;
totalRemoveSymlinkTime = 23,092 ms&lt;/p&gt;

&lt;p&gt;totalCreateSymlinkTime = 45,993 ms&lt;br/&gt;
totalCreateHardLinkTime = 15,020 ms&lt;br/&gt;
totalIsSymlinkTime = 8,143 ms&lt;br/&gt;
totalSymlinkExistsTime = 2,507 ms&lt;br/&gt;
totalResolveSymlinkTime = 27,035 ms&lt;br/&gt;
totalRemoveSymlinkTime = 21,381 ms&lt;/p&gt;

&lt;p&gt;totalCreateSymlinkTime = 47,509 ms&lt;br/&gt;
totalCreateHardLinkTime = 15,011 ms&lt;br/&gt;
totalIsSymlinkTime = 8,425 ms&lt;br/&gt;
totalSymlinkExistsTime = 2,370 ms&lt;br/&gt;
totalResolveSymlinkTime = 27,280 ms&lt;br/&gt;
totalRemoveSymlinkTime = 22,388 ms&lt;/p&gt;

&lt;p&gt;totalCreateSymlinkTime = 45,887 ms&lt;br/&gt;
totalCreateHardLinkTime = 14,904 ms&lt;br/&gt;
totalIsSymlinkTime = 8,686 ms&lt;br/&gt;
totalSymlinkExistsTime = 2,558 ms&lt;br/&gt;
totalResolveSymlinkTime = 27,613 ms&lt;br/&gt;
totalRemoveSymlinkTime = 22,680 ms&lt;/p&gt;

&lt;p&gt;totalCreateSymlinkTime = 46,574 ms&lt;br/&gt;
totalCreateHardLinkTime = 14,734 ms&lt;br/&gt;
totalIsSymlinkTime = 8,317 ms&lt;br/&gt;
totalSymlinkExistsTime = 2,460 ms&lt;br/&gt;
totalResolveSymlinkTime = 26,729 ms&lt;br/&gt;
totalRemoveSymlinkTime = 21,682 ms&lt;/p&gt;



&lt;p&gt;C++:&lt;br/&gt;
----------&lt;/p&gt;

&lt;p&gt;totalCreateSymlinkTime = 45,356 ms&lt;br/&gt;
totalCreateHardLinkTime = 11,200 ms&lt;br/&gt;
totalIsSymlinkTime = 8,764 ms&lt;br/&gt;
totalSymlinkExistsTime = 5,706 ms&lt;br/&gt;
totalResolveSymlinkTime = 22,834 ms&lt;br/&gt;
totalRemoveSymlinkTime = 16,133 ms&lt;/p&gt;

&lt;p&gt;totalCreateSymlinkTime = 45,944 ms&lt;br/&gt;
totalCreateHardLinkTime = 10,775 ms&lt;br/&gt;
totalIsSymlinkTime = 8,747 ms&lt;br/&gt;
totalSymlinkExistsTime = 5,392 ms&lt;br/&gt;
totalResolveSymlinkTime = 23,031 ms&lt;br/&gt;
totalRemoveSymlinkTime = 16,294 ms&lt;/p&gt;

&lt;p&gt;totalCreateSymlinkTime = 45,991 ms&lt;br/&gt;
totalCreateHardLinkTime = 10,748 ms&lt;br/&gt;
totalIsSymlinkTime = 8,336 ms&lt;br/&gt;
totalSymlinkExistsTime = 5,394 ms&lt;br/&gt;
totalResolveSymlinkTime = 22,551 ms&lt;br/&gt;
totalRemoveSymlinkTime = 15,889 ms&lt;/p&gt;

&lt;p&gt;totalCreateSymlinkTime = 47,934 ms&lt;br/&gt;
totalCreateHardLinkTime = 10,991 ms&lt;br/&gt;
totalIsSymlinkTime = 8,820 ms&lt;br/&gt;
totalSymlinkExistsTime = 5,470 ms&lt;br/&gt;
totalResolveSymlinkTime = 22,880 ms&lt;br/&gt;
totalRemoveSymlinkTime = 16,041 ms&lt;/p&gt;

&lt;p&gt;totalCreateSymlinkTime = 47,896 ms&lt;br/&gt;
totalCreateHardLinkTime = 11,338 ms&lt;br/&gt;
totalIsSymlinkTime = 8,919 ms&lt;br/&gt;
totalSymlinkExistsTime = 5,444 ms&lt;br/&gt;
totalResolveSymlinkTime = 23,418 ms&lt;br/&gt;
totalRemoveSymlinkTime = 16,534 ms&lt;/p&gt;</comment>
                            <comment id="516930" author="luke.degruchy" created="Thu, 21 Feb 2019 15:31:28 -0500"  >&lt;p&gt;Only the remove symlink operation seems to be worse under Java.  Bruno suggests setting up profiling for CPU and memory usage between the two.&lt;/p&gt;</comment>
                            <comment id="517037" author="luke.degruchy" created="Fri, 22 Feb 2019 10:59:29 -0500"  >&lt;p&gt;VisualVM profiling results:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Java fluctuates between 15 and 50 MB of heap... C++ is at 5MB to 20 MB&lt;/li&gt;
	&lt;li&gt;Java&apos;s pretty much consistently at 10%  CPU   C++ is 12-13%&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="517278" author="luke.degruchy" created="Mon, 25 Feb 2019 12:02:14 -0500"  >&lt;p&gt;Manually pasting the associated changesets:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;changeset:   196482:5eae9d113634
tag:         tip
user:        Luke de Gruchy &amp;lt;ldegruchy@intelerad.com&amp;gt;
date:        2019-02-25 11:37:48 -0500
summary:     IP-97622 fix: Delete JniUtil and CppUtils from both Java and C++.

changeset:   196481:bb7fda7734ad
user:        Luke de Gruchy &amp;lt;ldegruchy@intelerad.com&amp;gt;
date:        2019-02-25 11:24:16 -0500
summary:     IP-97622 fix: New Java implementation of SymlinkOperationsImpl to replace JniUtils.

changeset:   196480:5cc07bf9e18d
user:        Luke de Gruchy &amp;lt;ldegruchy@intelerad.com&amp;gt;
date:        2019-02-25 11:01:38 -0500
summary:     IP-97622 fix: SymlinkOperations interface for JniUtils.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="517291" author="robot-bc-rw" created="Mon, 25 Feb 2019 12:31:52 -0500"  >&lt;p&gt;Released by ldegruchy to master at 2019-02-25 11:43:20 (push 71645):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-17-2-A169)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-17-2-A169)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-17-2-A169)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/5cc07bf9e18d&quot; target=&quot;_blank&quot;&gt;intelepacs:5cc07bf9e18d&lt;/a&gt;  ldegruchy   trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-97622&quot; title=&quot;JDK 11:   LDS:  Rewrite CppUtilsDefault in Java&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-97622&quot;&gt;&lt;del&gt;IP-97622&lt;/del&gt;&lt;/a&gt; fix: SymlinkOperations interface for JniUtils.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/bb7fda7734ad&quot; target=&quot;_blank&quot;&gt;intelepacs:bb7fda7734ad&lt;/a&gt;  ldegruchy   trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-97622&quot; title=&quot;JDK 11:   LDS:  Rewrite CppUtilsDefault in Java&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-97622&quot;&gt;&lt;del&gt;IP-97622&lt;/del&gt;&lt;/a&gt; fix: New Java implementation of SymlinkOperationsImpl to replace JniUtils.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/5eae9d113634&quot; target=&quot;_blank&quot;&gt;intelepacs:5eae9d113634&lt;/a&gt;  ldegruchy   trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-97622&quot; title=&quot;JDK 11:   LDS:  Rewrite CppUtilsDefault in Java&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-97622&quot;&gt;&lt;del&gt;IP-97622&lt;/del&gt;&lt;/a&gt; fix: Delete JniUtil and CppUtils from both Java and C++.&lt;/p&gt;</comment>
                            <comment id="517398" author="luke.degruchy" created="Mon, 25 Feb 2019 16:15:29 -0500"  >&lt;p&gt;Resolution:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Create a new Java interface (SymlinkOperations) for symlink and hardlink operations corresponding to JniUtils&lt;/li&gt;
	&lt;li&gt;Create a new Java-based implementation (SymlinkOperationsImpl) that will be used in place of JniUtils&lt;/li&gt;
	&lt;li&gt;Delete JniUtils, CppUtils, CppUtils, and CppUtilsDefault.cpp&lt;/li&gt;
	&lt;li&gt;Exclude CppUtilsDefault.cpp from the scons compile&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Developer testing:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Execute all existing LDS unit tests and ensure that they pass&lt;/li&gt;
	&lt;li&gt;Implement new unit tests that assert the behaviour of all methods is functionally equivalent to the JNI code&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="148848">IP-97498</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                    <customfield id="customfield_13806" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Availability Impact</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14409"><![CDATA[BlocksPLA]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_13901" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Code Committed</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14502"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;h4&gt;&lt;a name=&quot;RPMVersion&quot;&gt;&lt;/a&gt;RPM Version&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ISPClient%3A%3Cclientcode%3E&quot;&gt;&lt;/a&gt;ISP - Client : &lt;a href=&quot;https://inteleradprod.service-now.com/nav_to.do?uri=textsearch.do?sysparm_search=xxxx&quot; target=&quot;_blank&quot;&gt;xxxx&lt;/a&gt; - &amp;lt;client code&amp;gt;&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ClinicalImpact%3A&quot;&gt;&lt;/a&gt;Clinical Impact:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce%3A&quot;&gt;&lt;/a&gt;Minimal steps to reproduce:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour%3A&quot;&gt;&lt;/a&gt;Expected behaviour:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F%3A&quot;&gt;&lt;/a&gt;What happened instead?:&lt;/h4&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12110" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Documentation</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14406"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>IP-97184</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13268"><![CDATA[LocalDicomService]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzz9jz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12102" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Release Notes</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14407"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13501" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Scrum Team</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14112"><![CDATA[Backend Raptors]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="1926">Raptors 2019 - S2</customfieldvalue>
    <customfieldvalue id="1932">Raptors 2019 - S3</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[IP-97279] Update intelepacs codebase for Mockito2</title>
                <link>https://jira.intelerad.com/browse/IP-97279</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;In preparation for java 11 upgrade, we will update mockito on master trunk and fix the code, and then merge that back in devel-openjdk, so that at least we&apos;ll have a compatible mockito and most unit tests fixed (I expect some to break due to java 11 specific issues, but at least they won&apos;t be due to mockito issues).&lt;/p&gt;</description>
            <key id="148406">IP-97279</key>
            <summary>Update intelepacs codebase for Mockito2</summary>
                <type id="3" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13918&amp;avatarType=issuetype">Task</type>
                                            <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="jan">Jan Lavoie</assignee>
                                    <reporter username="jan">Jan Lavoie</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Jan 2019 10:53:42 -0500</created>
                <updated>Mon, 25 Mar 2019 14:03:38 -0400</updated>
                            <resolved>Mon, 21 Jan 2019 16:32:00 -0500</resolved>
                                    <version>4-18-1</version>
                                    <fixVersion>4-18-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="0">0 minutes</timeoriginalestimate>
                                    <timespent seconds="83700">2 days, 7 hours, 15 minutes</timespent>
                                <comments>
                            <comment id="512415" author="jan" created="Thu, 17 Jan 2019 10:53:59 -0500"  >&lt;p&gt;Note that component is bogus in this case.&lt;/p&gt;</comment>
                            <comment id="512556" author="robot-bc-rw" created="Thu, 17 Jan 2019 18:24:42 -0500"  >&lt;p&gt;Released by jan to master at 2019-01-17 18:24:40 (push 70946):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-17-2-A134)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-17-2-A134)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-17-2-A134)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-17-2-A134)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-17-2-A134)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/2057e863aada&quot; target=&quot;_blank&quot;&gt;intelepacs:2057e863aada&lt;/a&gt;  jan         trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-97279&quot; title=&quot;Update intelepacs codebase for Mockito2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-97279&quot;&gt;&lt;del&gt;IP-97279&lt;/del&gt;&lt;/a&gt; ongoing: Update LBE with new mockito and related jars&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/d12f104f9c2e&quot; target=&quot;_blank&quot;&gt;intelepacs:d12f104f9c2e&lt;/a&gt;  jan         trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-97279&quot; title=&quot;Update intelepacs codebase for Mockito2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-97279&quot;&gt;&lt;del&gt;IP-97279&lt;/del&gt;&lt;/a&gt; ongoing: Update scons files which reference mockito for new mockito jars&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/350b7974e437&quot; target=&quot;_blank&quot;&gt;intelepacs:350b7974e437&lt;/a&gt;  jan         trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-97279&quot; title=&quot;Update intelepacs codebase for Mockito2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-97279&quot;&gt;&lt;del&gt;IP-97279&lt;/del&gt;&lt;/a&gt; ongoing: Adapt code base to compile time changes in Mockito 2&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/4b121237f8bc&quot; target=&quot;_blank&quot;&gt;intelepacs:4b121237f8bc&lt;/a&gt;  jan         trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-97279&quot; title=&quot;Update intelepacs codebase for Mockito2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-97279&quot;&gt;&lt;del&gt;IP-97279&lt;/del&gt;&lt;/a&gt; ongoing: Fix failing unit tests due to mockito 2 semantic change on matchers and other&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/32e057aaa82c&quot; target=&quot;_blank&quot;&gt;intelepacs:32e057aaa82c&lt;/a&gt;  jan         trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-97279&quot; title=&quot;Update intelepacs codebase for Mockito2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-97279&quot;&gt;&lt;del&gt;IP-97279&lt;/del&gt;&lt;/a&gt; fix: Remove references to mockito-1.8.5 in various files which may be relevant&lt;/p&gt;</comment>
                            <comment id="512557" author="jan" created="Thu, 17 Jan 2019 18:30:59 -0500"  >&lt;p&gt;I&apos;ll do a better update tomorrow, but in a nutshell :&lt;br/&gt;
1) LBE update&lt;br/&gt;
2) compile time fixes for mockito2 (mostly around matchers and removal of stub)&lt;br/&gt;
3) runtime fixes for unit tests due to semantic change on matchers mostly (any( Klazz.class ) used to match null, it doesn&apos;t anymore)&lt;br/&gt;
4) Raise xmx for running tests to 512 since hl7gs tests run out of memory with 256 (probably someone somewhere mocking debug - the memory was mostly what looked like print invocations on debug) - I should open a different issue for this&lt;br/&gt;
5) grepped the tree what relevant mockito instances and updated them to new jar name and new dependencies (I didn&apos;t fix the netbeans projects, and I may have not added the new dependencies to certain Makefiles, but I doubt they are used anyway).&lt;/p&gt;</comment>
                            <comment id="512666" author="jan" created="Fri, 18 Jan 2019 11:15:47 -0500"  >&lt;p&gt;I&apos;ve filled &lt;a href=&quot;https://jira.intelerad.com/browse/IP-97293&quot; title=&quot;HL7GS unit tests run out of memory with Xmx256 with Mockito2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-97293&quot;&gt;&lt;del&gt;IP-97293&lt;/del&gt;&lt;/a&gt; for &quot;Raise xmx for running tests to 512 since hl7gs tests run out of memory with 256 (probably someone somewhere mocking debug - the memory was mostly what looked like print invocations on debug) - I should open a different issue for this&quot;&lt;/p&gt;</comment>
                            <comment id="512980" author="jan" created="Mon, 21 Jan 2019 16:32:33 -0500"  >&lt;p&gt;Description of the solution:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Update LBE with new mockito jars and dependencies (byte-buddy, byte-buddy-agent, objenesis)&lt;/li&gt;
	&lt;li&gt;Update various scons files which referenced the mockito-1.8.5 jar to point to mockito-core and dependencies&lt;br/&gt;
(Re compile time breakage)&lt;/li&gt;
	&lt;li&gt;Update various ArgumentMatcher/Matchers for new interface and hamcrest separation&lt;/li&gt;
	&lt;li&gt;Changed any stub() calls to equivalent mock() calls&lt;/li&gt;
	&lt;li&gt;Changed Contains matcher for StringContains matcher (old one doesn&apos;t exist anymore)&lt;/li&gt;
	&lt;li&gt;Replaced Mockito.timeout(..).never() invocation to just never() (it doesn&apos;t make sense to never with timeout, which is why the method no longer exists, see mockito for details)&lt;br/&gt;
(Re runtime breakage)&lt;/li&gt;
	&lt;li&gt;Changed scons to run tests with 512M instead of 256M (hl7gs testall OOMs otherwise)&lt;/li&gt;
	&lt;li&gt;For failing tests, changed any( Klass.class ) to any() in the mocking or the verification due to mockito semantic change on any( class ) matcher
	&lt;ul&gt;
		&lt;li&gt;Some of them required nullable() instead due to ambiguous method choice without&lt;/li&gt;
		&lt;li&gt;Some of them were changed to eq( null ) instead, although any() probably would have been a better choice&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Changed an instance of anyInt for anyLong (code changed from int to long, but anyInt still matched long in older mockito)&lt;/li&gt;
	&lt;li&gt;Had to change an anyInt to any() - this one is weird - I&apos;m guessing this has something do to with autoboxing, because in general, change anyInt to any doesn&apos;t work.&lt;/li&gt;
	&lt;li&gt;removed some useless mocking which was causing the MockitoJUnitRunner to throw an UnnecessaryMockingException
	&lt;ul&gt;
		&lt;li&gt;Changed to MockitoJUnitRunner.Silent for classes where removing the useless mocking was less than strictly trivial&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Removed useless mocking of vertx elements in  TestPatientOrdersReportHandler which was causing a jvm bug with jdk8 - fortunately, the mocking wasn&apos;t needed, because there was no workaround (although the bug should be fixed with java 11)&lt;/li&gt;
	&lt;li&gt;Updated references to mockito-1.8.5 to the new mockito-core and dependencies (various scons files, various script and files that seem possibly relevant)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Tests executed: full scons&lt;/p&gt;

&lt;p&gt;Unit tests added or modified: N/A&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="148284">BC-4361</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;h4&gt;&lt;a name=&quot;RPMVersion&quot;&gt;&lt;/a&gt;RPM Version&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ISPClient%3A%3Cclientcode%3E&quot;&gt;&lt;/a&gt;ISP - Client : &lt;a href=&quot;https://inteleradprod.service-now.com/nav_to.do?uri=textsearch.do?sysparm_search=xxxx&quot; target=&quot;_blank&quot;&gt;xxxx&lt;/a&gt; - &amp;lt;client code&amp;gt;&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ClinicalImpact%3A&quot;&gt;&lt;/a&gt;Clinical Impact:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce%3A&quot;&gt;&lt;/a&gt;Minimal steps to reproduce:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour%3A&quot;&gt;&lt;/a&gt;Expected behaviour:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F%3A&quot;&gt;&lt;/a&gt;What happened instead?:&lt;/h4&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10600" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>AF-274</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13000"><![CDATA[NO_RPMS]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzdp6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_13501" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Scrum Team</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14105"><![CDATA[Team Yoshi]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="1871">Automation 2019 - Sprint 1</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:float">
                        <customfieldname>Story Points</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-96342] Handle Uniqueness of Primary Keys after DB Partitions</title>
                <link>https://jira.intelerad.com/browse/IP-96342</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;h4&gt;&lt;a name=&quot;AcceptanceCriteria&quot;&gt;&lt;/a&gt;Acceptance Criteria&lt;/h4&gt;
&lt;ul&gt;
	&lt;li&gt;A trigger will be created on the active partition to check for duplicate primary key records being inserted&lt;/li&gt;
	&lt;li&gt;The trigger will check on updates by comparing the new value of the primary key against the existing primary keys on all partitions&lt;/li&gt;
	&lt;li&gt;The trigger will check all archive partitions for duplicates&lt;/li&gt;
	&lt;li&gt;The error message will be similar to a unique index/primary key violation on a non-partitioned table&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;After the partitioning table in Postgres, we are running of risk where there could be duplicate primary key value in two different partitions of the table. Therefore we&apos;ll have to come up with an approach to address this issue. &lt;/p&gt;</description>
            <key id="145998">IP-96342</key>
            <summary>Handle Uniqueness of Primary Keys after DB Partitions</summary>
                <type id="3" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13918&amp;avatarType=issuetype">Task</type>
                                            <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="fboumdamouafo">Franklin Boumda Mouafo</assignee>
                                    <reporter username="dyoganandi">Dhaval Yoganandi</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Nov 2018 13:25:17 -0500</created>
                <updated>Mon, 15 Apr 2019 11:06:36 -0400</updated>
                            <resolved>Wed, 9 Jan 2019 15:40:00 -0500</resolved>
                                    <version>4-17-1</version>
                                    <fixVersion>4-17-1</fixVersion>
                    <fixVersion>Next Branch (Trunk)</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                    <timeoriginalestimate seconds="0">0 minutes</timeoriginalestimate>
                            <timeestimate seconds="0">0 minutes</timeestimate>
                            <timespent seconds="151200">1 week, 2 hours</timespent>
                                <comments>
                            <comment id="501225" author="fhouillon" created="Mon, 12 Nov 2018 16:23:36 -0500"  >&lt;p&gt;It can help : &lt;a href=&quot;http://blog.ioguix.net/postgresql/2015/02/05/Partitionning-and-constraints-part-1.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://blog.ioguix.net/postgresql/2015/02/05/Partitionning-and-constraints-part-1.html&lt;/a&gt;. Not sure we have to deal with lock...&lt;/p&gt;</comment>
                            <comment id="505454" author="fboumdamouafo" created="Thu, 3 Jan 2019 09:07:11 -0500"  >&lt;p&gt;I just started addressing this issue and here are some details that may help us get to a solution (the best?):&lt;/p&gt;

&lt;p&gt;&lt;b&gt;This is one way I managed to reproduce it:&lt;/b&gt; &lt;br/&gt;
insert a row in the patient active partition, then insert the same row in another patient partition ( just need to change the timestamp_updated ).&lt;br/&gt;
Now these two rows have the same primary key, but they belong to different partitions, and they appear in &lt;em&gt;select * from patient&lt;/em&gt; query.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;A couple of questions occurring:&lt;/b&gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;can this happen in a real life process? If yes, how and why?&lt;/li&gt;
	&lt;li&gt;if this really happens, is it a normal situation ? How can we avoid it?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;b&gt;If we don&apos;t do something about that:&lt;/b&gt;&lt;br/&gt;
The DB integrity rule and the PK constraint are broken.&lt;br/&gt;
If we have to do something about it, find ideas around the solution below.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Solution:&lt;/b&gt;&lt;br/&gt;
Using a trigger: this means checking the uniqueness of a PK value across all partitions after any INSERT or UPDATE on any of them, for each rows.&lt;br/&gt;
The trigger function itself is quite easy to understand: if we find a row with the same value as the PK, raise an exception.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;One problem with the trigger is that, it doesn&apos;t resolve the race problem. Thus, while trying to find the best practice here, this can lead us to the best solution proposed by &lt;a href=&quot;https://jira.intelerad.com/browse/IP-96342?focusedCommentId=501225&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-501225&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;this comment&lt;/a&gt; : advisory locks.&lt;/li&gt;
	&lt;li&gt;The other drawback is that, this is a huge solution we may be applying to a &quot;small&quot; problem. Huge in the sens of, we will have to apply it to every single piece of code where there&apos;s an insertion into a partitioned table.&lt;/li&gt;
	&lt;li&gt;No matter the solution applied we should consider that it will affect the current performances. And the best evaluation would be to test the change on a real DB copy (is there one available? Is that possible?).&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;All your comments are welcome.&lt;/p&gt;</comment>
                            <comment id="511396" author="luke.degruchy" created="Tue, 8 Jan 2019 16:01:29 -0500"  >&lt;p&gt;Testing successful:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Duplicate records are allowed before the fix across partitions&lt;/li&gt;
	&lt;li&gt;Initial partition contains the new trigger after postgres migration&lt;/li&gt;
	&lt;li&gt;Adding a new partition via manageDicomEvidencePartitions creates the new trigger&lt;/li&gt;
	&lt;li&gt;Updating records either in the active or archive partitions does not result in errors&lt;/li&gt;
	&lt;li&gt;Inserting a duplicate record within the same partition results in a primary key violation error&lt;/li&gt;
	&lt;li&gt;Added a new partition with manageDicomEvidencePartitions&lt;/li&gt;
	&lt;li&gt;Inserting a duplicate record across partitions results in the following error:&lt;/li&gt;
&lt;/ol&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; ERROR:  Duplicate key value violates unique primary constraint
DETAIL:  A row with this current primary key already exists in another partition. Raised by patient_unique_pk_trigger
CONTEXT:  PL/pgSQL function patient_unique_pk_func() line 1 at RAISE
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;ol&gt;
	&lt;li&gt;Splitting the partition via manageDicomEvidencePartitions results in a new partition with the new trigger created.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="511486" author="robot-bc-rw" created="Wed, 9 Jan 2019 10:54:17 -0500"  >&lt;p&gt;Released by fboumdamouafo to master at 2019-01-09 10:54:15 (push 70791):&lt;br/&gt;
  PACS-4-17-1 (fix)        (previous build: PACS-4-17-1-P125)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-17-2-A129)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/9c548a4dee68&quot; target=&quot;_blank&quot;&gt;intelepacs:9c548a4dee68&lt;/a&gt;  fboumdamouafo  PACS-4-17-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-96342&quot; title=&quot;Handle Uniqueness of Primary Keys after DB Partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-96342&quot;&gt;&lt;del&gt;IP-96342&lt;/del&gt;&lt;/a&gt; fix: Ensure PK uniqueness in all partitions of a table&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/a953ebadddbf&quot; target=&quot;_blank&quot;&gt;intelepacs:a953ebadddbf&lt;/a&gt;  fboumdamouafo  trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-96342&quot; title=&quot;Handle Uniqueness of Primary Keys after DB Partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-96342&quot;&gt;&lt;del&gt;IP-96342&lt;/del&gt;&lt;/a&gt; fix: Ensure PK uniqueness in all partitions of a table&lt;/p&gt;</comment>
                            <comment id="511551" author="fboumdamouafo" created="Wed, 9 Jan 2019 15:40:03 -0500"  >&lt;p&gt;Resolved&lt;/p&gt;</comment>
                            <comment id="512730" author="dvu" created="Fri, 18 Jan 2019 13:52:19 -0500"  >&lt;p&gt;    Included in PACS-4-17-1-R9 (atlas 1.15.P36)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="150320">IP-103036</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;h4&gt;&lt;a name=&quot;RPMVersion&quot;&gt;&lt;/a&gt;RPM Version&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ISPClient%3A%3Cclientcode%3E&quot;&gt;&lt;/a&gt;ISP - Client : &lt;a href=&quot;https://inteleradprod.service-now.com/nav_to.do?uri=textsearch.do?sysparm_search=xxxx&quot; target=&quot;_blank&quot;&gt;xxxx&lt;/a&gt; - &amp;lt;client code&amp;gt;&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ClinicalImpact%3A&quot;&gt;&lt;/a&gt;Clinical Impact:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce%3A&quot;&gt;&lt;/a&gt;Minimal steps to reproduce:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour%3A&quot;&gt;&lt;/a&gt;Expected behaviour:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F%3A&quot;&gt;&lt;/a&gt;What happened instead?:&lt;/h4&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12110" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Documentation</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14406"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>IP-95447</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14400"><![CDATA[Database-DicomEvidence]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzd71r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12102" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Release Notes</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14407"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13501" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Scrum Team</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14112"><![CDATA[Backend Raptors]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="1863">Raptors - Sprint 27 (Holidays)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:float">
                        <customfieldname>Story Points</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-95634] Metadata conflict detection fails when sending the same sop with deferred validation</title>
                <link>https://jira.intelerad.com/browse/IP-95634</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;h4&gt;&lt;a name=&quot;RPMVersion&quot;&gt;&lt;/a&gt;RPM Version &lt;/h4&gt;
&lt;p&gt;LocalDicomService-4.9.1.P321-ims99&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;ISPClient&quot;&gt;&lt;/a&gt;ISP - Client&lt;/h4&gt;
&lt;p&gt;VA-NTP&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce%3A&quot;&gt;&lt;/a&gt;Minimal steps to reproduce:&lt;/h4&gt;
&lt;ul&gt;
	&lt;li&gt;send an image to VAVISNMOD1
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;dcmodify -gst -gse -gin -ma &quot;PatientID=BHH-PAT-15010&quot; -ma &quot;AccessionNumber=BHH-ACC-15010&quot; image.dcm
send_image -a QA491EXT1 -c VADEVVISNMOD1 vadevvisnmod1 5000 image.dcm
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;send the same Study/Series/SOP with a different Accession Number
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;dcmodify -ma &quot;AccessionNumber=BHH-ACC-15011&quot; image.dcm
send_image -a QA491EXT1 -c VADEVVISNMOD1 vadevvisnmod1 5000 image.dcm
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour%3A&quot;&gt;&lt;/a&gt;Expected behaviour:&lt;/h4&gt;
&lt;p&gt;LDS logs the duplicated SOP as an INBOUND_STUDY_INFORMATION Dicom Request&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F%3A&quot;&gt;&lt;/a&gt;What happened instead?:&lt;/h4&gt;
&lt;p&gt;The SOP is silently dropped:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2018-09-26 13:37:13.488 LDS_1 vadevvisnmod1.intelerad.com (TRACE)] DICOM-driven revalidation is disabled; duplicate SOPs will be discarded
[2018-09-26 13:37:13.488 LDS_1 vadevvisnmod1.intelerad.com (TRACE)] Not initiating validation because [VADEVVISNMOD1] has VALIDATION_MODE == DEFERRED
[2018-09-26 13:37:13.488 LDS_1 vadevvisnmod1.intelerad.com (TRACE)] Generation of inbound study information won&apos;t happen because the validation is disabled or not applies for Calling AeTitle
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
            <key id="144069">IP-95634</key>
            <summary>Metadata conflict detection fails when sending the same sop with deferred validation</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                            <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="bdasilva">Bruno Da Silva</assignee>
                                    <reporter username="dflammarion">Damien Flammarion</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Sep 2018 13:58:19 -0400</created>
                <updated>Mon, 25 Mar 2019 14:03:44 -0400</updated>
                            <resolved>Fri, 12 Oct 2018 13:23:00 -0400</resolved>
                                    <version>4-9-1</version>
                                    <fixVersion>4-9-1</fixVersion>
                    <fixVersion>4-14-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                    <timeoriginalestimate seconds="0">0 minutes</timeoriginalestimate>
                                    <timespent seconds="109800">3 days, 6 hours, 30 minutes</timespent>
                                <comments>
                            <comment id="496861" author="nselvadurai" created="Wed, 26 Sep 2018 14:36:02 -0400"  >&lt;p&gt;From what I understand, we intentionally use the SOP during this step in LDS&apos; Incoming File Worker as an identifier to catch duplicates. I don&apos;t find any documentation anywhere indicating that accession number should be part of this test, so I feel as if this is intentional behaviour.&lt;/p&gt;

&lt;p&gt;This is only a problem if there are incidents where a sender sends a SOP that matches one on our PACS but is intended to be part of a completely different study. In practice, I highly doubt this ever happened at VA simply because LDS should have been silently dropping these from the get-go. &lt;/p&gt;

&lt;p&gt;Unless we deleted the old study by the time the new study got in, in which case I don&apos;t think the SOP is considered a duplicate. In this use case, I assume that since there is no other study with a duplicate SOP on the PACS (as it&apos;s been long deleted), that it&apos;s not a conflict.&lt;/p&gt;

&lt;p&gt;I would recommend running this by someone in Image Management with a better understanding of why we work this way and what the implications are for conflicts.&lt;/p&gt;</comment>
                            <comment id="496862" author="bdasilva" created="Wed, 26 Sep 2018 14:40:24 -0400"  >&lt;p&gt;Some examples found at VANTP:&lt;/p&gt;

&lt;p&gt;Example of ingestion in a visin.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;SerInsUID(REMAPPED): 1.2.840.114202.10.782790294.510336229.2666359758.1876856726


18-09-25 19:39:38.923 LDS_12 vhav10ccatrmod2.vantp (TRACE)] DICOM-driven revalidation is disabled; duplicate SOPs will be discarded
[2018-09-25 19:39:38.923 LDS_12 vhav10ccatrmod2.vantp (TRACE)] Not initiating validation because [VHAV10CCATRMOD2] has VALIDATION_MODE == DEFERRED
[2018-09-25 19:39:38.923 LDS_12 vhav10ccatrmod2.vantp (TRACE)] Generation of inbound study information won&apos;t happen because the validation is disabled or not applies for Calling AeTitle
[2018-09-25 19:39:38.923 LDS_12 vhav10ccatrmod2.vantp (TRACE)] Detecting duplicate SOPs within this batch of 39 incoming files, keeping older SOPs
[2018-09-25 19:39:38.923 LDS_12 vhav10ccatrmod2.vantp (TRACE)] Found 0 duplicate SOP(s) within this batch
[2018-09-25 19:39:38.923 LDS_12 vhav10ccatrmod2.vantp (TRACE)] Detecting whether any of these 39 incoming SOPs are already present in the PACS
[2018-09-25 19:39:38.923 LDS_12 vhav10ccatrmod2.vantp (TRACE)] SOP [1.2.840.114202.9.3460043622.84008731.1819735523.2734228684] incoming file ID [27529696] has status [VALIDATE], checking if the file already exists at [/usr/local/PACS/images/20180925/1.3.46.670589.33.1.63673510539013857800001.5512029163845053611/1.2.840.114202.10.782790294.510336229.2666359758.1876856726-v/0/1.2.840.114202.9.3460043622.84008731.1819735523.2734228684.dcm]



[admin@vhav10ccatrmod2] {/var/log/PACS/image_server/filed_logs} zgrep -l 1.2.840.114202.10.782790294.510336229.2666359758.1876856726 *
child_PACSQR_V10.log.4.gz


[admin@vhav10ccatrmod2] {/var/log/PACS/image_server/filed_logs} command checkAE -a | grep PACSQR_V10
No handlers could be found for logger &quot;ims.db.sql&quot;
PACSQR_V10           V10             PHILIPS PACS Interface to Query Retirieve and push studies to the VANTP
PACSQR_V10_538       V10             VistaRAD PACS Interface to Query Retirieve and push studies to the VANTP
PACSQR_V10_539       V10             VistaRAD PACS Interface to Query Retirieve and push studies to the VANTP
PACSQR_V10_552       V10             VistaRAD PACS Interface to Query Retirieve and push studies to the VANTP

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Another example with duplication&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2018-09-25 19:01:37.048 LDS_9 vhav10ccatrmod2.vantp (PROFILE)] --&amp;gt; Start: 1.2.840.114202.10.3495356606.3558447831.2670028757.3981748064 (timer VALIDATE)
[2018-09-25 19:01:37.048 LDS_9 vhav10ccatrmod2.vantp (TRACE)] DICOM-driven revalidation is disabled; duplicate SOPs will be discarded
[2018-09-25 19:01:37.049 LDS_9 vhav10ccatrmod2.vantp (TRACE)] Not initiating validation because [VHAV10CCATRMOD2] has VALIDATION_MODE == DEFERRED
[2018-09-25 19:01:37.049 LDS_9 vhav10ccatrmod2.vantp (TRACE)] Generation of inbound study information won&apos;t happen because the validation is disabled or not applies for Calling AeTitle
[2018-09-25 19:01:37.049 LDS_9 vhav10ccatrmod2.vantp (TRACE)] Detecting duplicate SOPs within this batch of 39 incoming files, keeping older SOPs
[2018-09-25 19:01:37.049 LDS_9 vhav10ccatrmod2.vantp (TRACE)] Found 0 duplicate SOP(s) within this batch
[2018-09-25 19:01:37.049 LDS_9 vhav10ccatrmod2.vantp (TRACE)] Detecting whether any of these 39 incoming SOPs are already present in the PACS
[2018-09-25 19:01:37.049 LDS_9 vhav10ccatrmod2.vantp (TRACE)] SOP [1.2.840.114202.9.3266003795.4041914839.2191942545.3216208471] incoming file ID [27527235] has status [VALIDATE], checking if the file already ex
ists at [/usr/local/PACS/images/20180925/1.2.840.113754.1.4.539.6819074.796.3.539.92518.1937/1.2.840.114202.10.3495356606.3558447831.2670028757.3981748064-v/0/1.2.840.114202.9.3266003795.4041914839.2191942545.32
16208471.dcm]


=&amp;gt; SerInsUID(REMAPPED): 1.2.840.114202.10.3495356606.3558447831.2670028757.3981748064
   Owner: VHASCRCCATRGW2  Mod: CT  SerNum: 7  NumSerRelIma: 1067  isUpdated: F
   InsertDate: 20180925  InsertTime: 18:43:45 ( 67425 ssm )  SPSId: 1
   SeriesDate: 20180925  SeriesTime: 21:06:36  Source AE: PACSQR_V10

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="496863" author="dflammarion" created="Wed, 26 Sep 2018 14:47:03 -0400"  >&lt;p&gt;Created test cases &lt;a href=&quot;http://testrail.intelerad.com/testrail/index.php?/cases/view/17818144&quot; target=&quot;_blank&quot;&gt;TRC:17818144&lt;/a&gt; and &lt;a href=&quot;http://testrail.intelerad.com/testrail/index.php?/cases/view/17818145&quot; target=&quot;_blank&quot;&gt;TRC:17818145&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="496864" author="bdasilva" created="Wed, 26 Sep 2018 14:51:23 -0400"  >&lt;p&gt;&lt;a href=&quot;https://jira.intelerad.com/secure/ViewProfile.jspa?name=nselvadurai&quot; class=&quot;user-hover&quot; rel=&quot;nselvadurai&quot;&gt;Niel Selvadurai&lt;/a&gt; LDS should create new ISI whenever new metadata information arrives at LDS for ingestion. so, in this case, the same sop is re-send with new metadata information ( accnum or patientid ) however LDS doesn&apos;t generate ISIs due to a check on the server AETitle and source AETitle. message from LDS ( &quot; Generation of inbound study information won&apos;t happen because the validation is disabled or not applies for Calling AeTitle&quot;&lt;/p&gt;</comment>
                            <comment id="496868" author="bdasilva" created="Wed, 26 Sep 2018 15:09:07 -0400"  >&lt;p&gt;we need to investigate a feature for VA: I did confirm with Damien using the QA environment that we autoroute the sop already ingested on the PACS, obviously, as we discard the newly duplicated sop. &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2018-09-25 19:01:37.076 LDS_9 vhav10ccatrmod2.vantp (TRACE)] Found 39 duplicate SOP(s) in the PACS
[2018-09-25 19:01:37.076 LDS_9 vhav10ccatrmod2.vantp (TRACE)] SOP [1.2.840.114202.9.1074527946.2066556483.874578428.3888410467] was sent to regular AE [NTPV2QR] =&amp;gt; keeping HL7 priority [HIGH]
[2018-09-25 19:01:37.076 LDS_9 vhav10ccatrmod2.vantp (TRACE)] SOP [1.2.840.114202.9.3633201881.3065685433.3354969634.3514967786] was sent to regular AE [NTPV2QR] =&amp;gt; keeping HL7 priority [HIGH]
[2018-09-25 19:01:37.076 LDS_9 vhav10ccatrmod2.vantp (TRACE)] SOP [1.2.840.114202.9.3413379781.4237034375.562837439.3838582259] was sent to regular AE [NTPV2QR] =&amp;gt; keeping HL7 priority [HIGH]
[2018-09-25 19:01:37.076 LDS_9 vhav10ccatrmod2.vantp (TRACE)] SOP [1.2.840.114202.9.952276741.1527997189.1341627361.304298340] was sent to regular AE [NTPV2QR] =&amp;gt; keeping HL7 priority [HIGH]
[2018-09-25 19:01:37.076 LDS_9 vhav10ccatrmod2.vantp (TRACE)] SOP [1.2.840.114202.9.3266003795.4041914839.2191942545.3216208471] was sent to regular AE [NTPV2QR] =&amp;gt; keeping HL7 priority [HIGH]
[2018-09-25 19:01:37.076 LDS_9 vhav10ccatrmod2.vantp (TRACE)] SOP [1.2.840.114202.9.2979845447.613440164.1231371017.2691644507] was sent to regular AE [NTPV2QR] =&amp;gt; keeping HL7 priority [HIGH]
[2018-09-25 19:01:37.076 LDS_9 vhav10ccatrmod2.vantp (TRACE)] SOP [1.2.840.114202.9.3511562103.3731912783.203421468.2068664799] was sent to regular AE [NTPV2QR] =&amp;gt; keeping HL7 priority [HIGH]
[2018-09-25 19:01:37.076 LDS_9 vhav10ccatrmod2.vantp (TRACE)] SOP [1.2.840.114202.9.1823218307.2764286366.2335488299.966475666] was sent to regular AE [NTPV2QR] =&amp;gt; keeping HL7 priority [HIGH]
[2018-09-25 19:01:37.076 LDS_9 vhav10ccatrmod2.vantp (TRACE)] SOP [1.2.840.114202.9.2864207269.2498073530.1988621048.1334803576] was sent to regular AE [NTPV2QR] =&amp;gt; keeping HL7 priority [HIGH]
[2018-09-25 19:01:37.076 LDS_9 vhav10ccatrmod2.vantp (TRACE)] SOP [1.2.840.114202.9.91398632.30309906.2627012562.3132739438] was sent to regular AE [NTPV2QR] =&amp;gt; keeping HL7 priority [HIGH]
[2018-09-25 19:01:37.076 LDS_9 vhav10ccatrmod2.vantp (TRACE)] SOP [1.2.840.114202.9.2749027271.4187370923.116370271.2899192465] was sent to regular AE [NTPV2QR] =&amp;gt; keeping HL7 priority [HIGH]

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Looks like we autoroute in high priority all duplicated sops. however we autoroute the old sop so we do lose the new metadata not ingested due to duplication. &lt;/p&gt;</comment>
                            <comment id="496998" author="bdasilva" created="Thu, 27 Sep 2018 14:15:55 -0400"  >&lt;p&gt;My suggestion is to follow the same check done by LDS in order to generate the initial study and series checkpoints.&lt;/p&gt;

&lt;p&gt;from : IngestInitial&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        // BZ47242: checkpoints should not be generated when the calling server is 
        // our own because checkpoints were already generated by the calling server.
        // Exception: on masters the DicomUpload servlet does a send from the local server
        // to itself to store new PRs, and we want checkpoints for them.
        
		return ApplicationEntity.isDicomUpload( workUnit.getReceivingAeTitle() )
               || ! config.isInternalPacsServer( workUnit.getCallingAeTitle() );
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="497030" author="bdasilva" created="Thu, 27 Sep 2018 16:33:44 -0400"  >&lt;p&gt;Summary of the fix:&lt;/p&gt;

&lt;p&gt;   new LDS will generate ISIs if the calling aetitle is external or the receivingAeTitle is a DicomUpload as ingestInitial decides if it needs to generate initial study or series checkpoints.&lt;br/&gt;
   so no more checks around if validation is enabled.&lt;/p&gt;</comment>
                            <comment id="497077" author="dflammarion" created="Fri, 28 Sep 2018 10:46:34 -0400"  >&lt;p&gt;Verification status:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;http://testrail.intelerad.com/testrail/index.php?/cases/view/17691355&quot; target=&quot;_blank&quot;&gt;TRC:17691355&lt;/a&gt; (auto-resolve conflicting study w/ same PatId) &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://testrail.intelerad.com/testrail/index.php?/cases/view/17691356&quot; target=&quot;_blank&quot;&gt;TRC:17691356&lt;/a&gt; (conflicting study with different PatId) &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://testrail.intelerad.com/testrail/index.php?/cases/view/17808812&quot; target=&quot;_blank&quot;&gt;TRC:17808812&lt;/a&gt; (non conflicting metadata w/ same PatId) &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://testrail.intelerad.com/testrail/index.php?/cases/view/17808813&quot; target=&quot;_blank&quot;&gt;TRC:17808813&lt;/a&gt; (conflicting metadata with different PatId) &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://testrail.intelerad.com/testrail/index.php?/cases/view/17818144&quot; target=&quot;_blank&quot;&gt;TRC:17818144&lt;/a&gt; (no conflict on duplicate SOP w/ same PatId) &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://testrail.intelerad.com/testrail/index.php?/cases/view/17818145&quot; target=&quot;_blank&quot;&gt;TRC:17818145&lt;/a&gt; (conflict duplicate SOP w/ different PatId) &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="497151" author="dflammarion" created="Fri, 28 Sep 2018 15:42:16 -0400"  >&lt;p&gt;Additional verification:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;sending directly to GW: ISIs are generated locally on the GW.&lt;/li&gt;
	&lt;li&gt;sending to VISNMOD: ISIs are generated on the MOD before autorouting the image to GW, no more ISI is generated after autorouting.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="497212" author="sghatpande" created="Mon, 1 Oct 2018 10:12:00 -0400"  >&lt;p&gt;&lt;a href=&quot;https://jira.intelerad.com/secure/ViewProfile.jspa?name=nselvadurai&quot; class=&quot;user-hover&quot; rel=&quot;nselvadurai&quot;&gt;Niel Selvadurai&lt;/a&gt; This bug and the original feature &lt;a href=&quot;https://jira.intelerad.com/browse/IP-95333&quot; title=&quot;[DMS] VANTP mitigation of excessive number of metadata studies and duplicated studies conflicts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-95333&quot;&gt;&lt;del&gt;IP-95333&lt;/del&gt;&lt;/a&gt; have been verified as ok by &lt;a href=&quot;https://jira.intelerad.com/secure/ViewProfile.jspa?name=dflammarion&quot; class=&quot;user-hover&quot; rel=&quot;dflammarion&quot;&gt;Damien Flammarion&lt;/a&gt; and are now ready to be tested in VA-TEST. Will you be able to coordinate this with VA to test on Tuesday and Wednesday? Thanks.&lt;/p&gt;

&lt;p&gt;CC: &lt;a href=&quot;https://jira.intelerad.com/secure/ViewProfile.jspa?name=tmartyres&quot; class=&quot;user-hover&quot; rel=&quot;tmartyres&quot;&gt;Tara Martyres&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="498233" author="robot-bc-rw" created="Fri, 12 Oct 2018 11:17:48 -0400"  >&lt;p&gt;Released by bdasilva to master at 2018-10-12 11:17:47 (push 69650):&lt;br/&gt;
  PACS-4-10-1 (dummy)      (previous build: PACS-4-10-1-P309)&lt;br/&gt;
  PACS-4-9-1 (fix)        (previous build: PACS-4-9-1-P321)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/5f51f2607f20&quot; target=&quot;_blank&quot;&gt;intelepacs:5f51f2607f20&lt;/a&gt;  bdasilva    PACS-4-9-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-95634&quot; title=&quot;Metadata conflict detection fails when sending the same sop with deferred validation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-95634&quot;&gt;&lt;del&gt;IP-95634&lt;/del&gt;&lt;/a&gt; fix: LDS: make LDS to check for creation ISI using the same logic&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/1cddaeb0892e&quot; target=&quot;_blank&quot;&gt;intelepacs:1cddaeb0892e&lt;/a&gt;  bdasilva    PACS-4-10-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-95634&quot; title=&quot;Metadata conflict detection fails when sending the same sop with deferred validation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-95634&quot;&gt;&lt;del&gt;IP-95634&lt;/del&gt;&lt;/a&gt; dummy: dummy merge from PACS-4-9-1&lt;/p&gt;</comment>
                            <comment id="498269" author="robot-bc-rw" created="Fri, 12 Oct 2018 13:17:01 -0400"  >&lt;p&gt;Released by bdasilva to master at 2018-10-12 13:16:57 (push 69652):&lt;br/&gt;
  PACS-4-14-1 (fix)        (previous build: PACS-4-14-1-P438)&lt;br/&gt;
  PACS-4-15-1 (fix)        (previous build: PACS-4-15-1-P225)&lt;br/&gt;
  PACS-4-16-1 (fix)        (previous build: PACS-4-16-1-P255)&lt;br/&gt;
  PACS-4-17-1 (fix)        (previous build: PACS-4-17-1-P71)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-17-2-A73)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/f7e593077255&quot; target=&quot;_blank&quot;&gt;intelepacs:f7e593077255&lt;/a&gt;  bdasilva    PACS-4-14-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-95634&quot; title=&quot;Metadata conflict detection fails when sending the same sop with deferred validation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-95634&quot;&gt;&lt;del&gt;IP-95634&lt;/del&gt;&lt;/a&gt; fix: LDS: make LDS to check for creation ISI using the same logic&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/d943b5c11c7e&quot; target=&quot;_blank&quot;&gt;intelepacs:d943b5c11c7e&lt;/a&gt;  bdasilva    PACS-4-15-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-95634&quot; title=&quot;Metadata conflict detection fails when sending the same sop with deferred validation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-95634&quot;&gt;&lt;del&gt;IP-95634&lt;/del&gt;&lt;/a&gt; fix: LDS: make LDS to check for creation ISI using the same logic&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/1ea2e13b29c5&quot; target=&quot;_blank&quot;&gt;intelepacs:1ea2e13b29c5&lt;/a&gt;  bdasilva    PACS-4-16-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-95634&quot; title=&quot;Metadata conflict detection fails when sending the same sop with deferred validation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-95634&quot;&gt;&lt;del&gt;IP-95634&lt;/del&gt;&lt;/a&gt; fix: LDS: make LDS to check for creation ISI using the same logic&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/5de180310e24&quot; target=&quot;_blank&quot;&gt;intelepacs:5de180310e24&lt;/a&gt;  bdasilva    PACS-4-17-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-95634&quot; title=&quot;Metadata conflict detection fails when sending the same sop with deferred validation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-95634&quot;&gt;&lt;del&gt;IP-95634&lt;/del&gt;&lt;/a&gt; fix: LDS: make LDS to check for creation ISI using the same logic&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/a996859a4a7f&quot; target=&quot;_blank&quot;&gt;intelepacs:a996859a4a7f&lt;/a&gt;  bdasilva    trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-95634&quot; title=&quot;Metadata conflict detection fails when sending the same sop with deferred validation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-95634&quot;&gt;&lt;del&gt;IP-95634&lt;/del&gt;&lt;/a&gt; fix: LDS: make LDS to check for creation ISI using the same logic&lt;/p&gt;</comment>
                            <comment id="498291" author="bdasilva" created="Fri, 12 Oct 2018 13:23:45 -0400"  >&lt;p&gt;Description of the solution:&lt;br/&gt;
LDS: make LDS check for creation ISI using the same logic&lt;br/&gt;
used for generation of initial study and series checkpoints.&lt;/p&gt;

&lt;p&gt;Tests executed:&lt;br/&gt;
as per described before.&lt;/p&gt;

&lt;p&gt;Unit tests added or modified: &lt;br/&gt;
TestIncomingFilesProcessor.java ( modified )&lt;/p&gt;</comment>
                            <comment id="498840" author="dvu" created="Thu, 18 Oct 2018 13:30:16 -0400"  >&lt;p&gt;    Included in PACS-4-16-1-R22 (atlas 1.14.P45)&lt;/p&gt;</comment>
                            <comment id="499143" author="dvu" created="Mon, 22 Oct 2018 15:09:23 -0400"  >&lt;p&gt;   Included in PACS-4-9-1-R38 (atlas 1.5.88 )&lt;/p&gt;</comment>
                            <comment id="499321" author="rboyle" created="Wed, 24 Oct 2018 10:28:18 -0400"  >&lt;p&gt;Included in the IntelePACS 4.9.1 Release Notes R38 for VANTP.&lt;/p&gt;</comment>
                            <comment id="499701" author="dvu" created="Mon, 29 Oct 2018 10:58:29 -0400"  >&lt;p&gt;Included in PACS-4-14-1-R48 (atlas 1.10.P40)&lt;/p&gt;</comment>
                            <comment id="499790" author="dvu" created="Mon, 29 Oct 2018 14:25:03 -0400"  >&lt;p&gt;    Included in PACS-4-17-1-R3 (atlas 1.15.P27)&lt;/p&gt;</comment>
                            <comment id="500367" author="dvu" created="Fri, 2 Nov 2018 16:07:21 -0400"  >&lt;p&gt;Included in PACS-4-15-1-R32 (atlas 1.13.P31)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10300">
                    <name>Feature Link</name>
                                                                <inwardlinks description="is part of feature">
                                        <issuelink>
            <issuekey id="143422">IP-95349</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="143376">IP-95333</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="46970" name="LocalDicomService-4.9.1.P321-ims99.i386.rpm" size="6372773" author="bdasilva" created="Thu, 27 Sep 2018 16:27:05 -0400"/>
                            <attachment id="46981" name="LocalDicomService-Config-4.9.1.P321-ims99.noarch.rpm" size="2896" author="bdasilva" created="Fri, 28 Sep 2018 09:03:50 -0400"/>
                            <attachment id="46969" name="isiGeneration.diff" size="13029" author="bdasilva" created="Thu, 27 Sep 2018 16:11:15 -0400"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;h4&gt;&lt;a name=&quot;RPMVersion&quot;&gt;&lt;/a&gt;RPM Version&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ISPClient%3A%3Cclientcode%3E&quot;&gt;&lt;/a&gt;ISP - Client : &lt;a href=&quot;https://inteleradprod.service-now.com/nav_to.do?uri=textsearch.do?sysparm_search=xxxx&quot; target=&quot;_blank&quot;&gt;xxxx&lt;/a&gt; - &amp;lt;client code&amp;gt;&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ClinicalImpact%3A&quot;&gt;&lt;/a&gt;Clinical Impact:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce%3A&quot;&gt;&lt;/a&gt;Minimal steps to reproduce:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour%3A&quot;&gt;&lt;/a&gt;Expected behaviour:&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F%3A&quot;&gt;&lt;/a&gt;What happened instead?:&lt;/h4&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12110" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Documentation</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14406"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>IP-95455</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13268"><![CDATA[LocalDicomService]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzyfw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12102" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Release Notes</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14407"><![CDATA[Unrequired]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13409" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Release Project</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[IP-95349]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_13501" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Scrum Team</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14111"><![CDATA[Scrum Team #1]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10801"><![CDATA[CRITICAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="1762">Scrum Team#1 - Sprint 20</customfieldvalue>
    <customfieldvalue id="1766">Scrum Team#1 - Sprint 21</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:float">
                        <customfieldname>Story Points</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-91982] SeriesCorrectionEventHandler: Fetching of the correction queue needs to be hardened from network failures</title>
                <link>https://jira.intelerad.com/browse/IP-91982</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;h4&gt;&lt;a name=&quot;RPMVersion&quot;&gt;&lt;/a&gt;RPM Version&lt;/h4&gt;
&lt;p&gt;SeriesCorrectionEventHandler-4.3.1.P407-ims01&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;EW%2FISPClient%3ARDS&quot;&gt;&lt;/a&gt;EW/ISP - Client : &lt;a href=&quot;https://inteleradprod.service-now.com/nav_to.do?uri=textsearch.do?sysparm_search=PRB0041038&quot; target=&quot;_blank&quot;&gt;PRB0041038&lt;/a&gt; - RDS&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ClinicalImpact&quot;&gt;&lt;/a&gt;Clinical Impact&lt;/h4&gt;

&lt;p&gt;Images are getting deleted from the central PACS&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce&quot;&gt;&lt;/a&gt;Minimal steps to reproduce&lt;/h4&gt;

&lt;p&gt;You will need to create a PACS with RDS&apos;s satellite architecture.  Currently there are about 386 satellites, and this large number of satellites is what is causing the issue.&lt;/p&gt;

&lt;p&gt;When a correction is triggered from the satellite it writes the correction to its DicomMaster DB.  SCEH on the central PACS then needs to connect to each satellite&apos;s DM to pull the correction list, and if there is a network failure this process gets blocked.&lt;/p&gt;

&lt;p&gt;The problem lies in that PCEH on the satellite only waits 5 minutes before marking the correction as failed, so there are times that SCEH on the central is not able to service the correction in time.  The failed correction on the Satellite gets pushed to the back of the queue, and because there are so many failed corrections it may not get reprocessed until several hours have passed.  In the meantime, SCEH is finally able to pull the correction list and performs the series deletion step, and then waits for the corrected images to be sent.  So as you can well imagine there is a period of time when the images are not available on Central.  The worst case is when PCEH has reached its maximum number of retries and gives up on the correction, but central has already deleted the image.&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour&quot;&gt;&lt;/a&gt;Expected behaviour&lt;/h4&gt;

&lt;p&gt;Corrections are able to be processed in a timely manner&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F&quot;&gt;&lt;/a&gt;What happened instead?&lt;/h4&gt;

&lt;p&gt;Images are getting deleted from central.  I think the issue here is that there are so many orgs to hit, so the possibility of PCEH timing out is very high regardless of if there are network failures.&lt;/p&gt;</description>
            <key id="136757">IP-91982</key>
            <summary>SeriesCorrectionEventHandler: Fetching of the correction queue needs to be hardened from network failures</summary>
                <type id="10905" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13911&amp;avatarType=issuetype">Enhancement</type>
                                            <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="lorenzo">Lorenzo Moretti</assignee>
                                    <reporter username="mfrancisco">Maximiano Francisco</reporter>
                        <labels>
                            <label>CSM</label>
                            <label>Client_Escalation</label>
                    </labels>
                <created>Thu, 26 Apr 2018 16:13:40 -0400</created>
                <updated>Mon, 25 Mar 2019 14:04:02 -0400</updated>
                            <resolved>Mon, 16 Jul 2018 09:40:00 -0400</resolved>
                                    <version>4-3-4</version>
                                    <fixVersion>4-3-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                    <timeoriginalestimate seconds="0">0 minutes</timeoriginalestimate>
                                    <timespent seconds="840600">5 weeks, 4 days, 1 hour, 30 minutes</timespent>
                                <comments>
                            <comment id="477100" author="mfrancisco" created="Thu, 26 Apr 2018 16:16:28 -0400"  >&lt;p&gt;One solution would be to paralellize SCEH somehow.  This way even if connectivity to one satellite fails it does not block processing of corrections from the other satellites.&lt;/p&gt;</comment>
                            <comment id="477157" author="cbarre" created="Fri, 27 Apr 2018 10:02:34 -0400"  >&lt;p&gt;This bug is CRITICAL for RDS and needs to be solve ASAP for them to be able to keep PACS 4.3.4 functional until PACS 4.14.1 gets all the satellites&lt;/p&gt;</comment>
                            <comment id="477191" author="tmartyres" created="Fri, 27 Apr 2018 11:39:35 -0400"  >&lt;p&gt;We are currently working on assigning this to a team and acknowledge that this is a critical issue that will get attention ASAP.&lt;/p&gt;</comment>
                            <comment id="479298" author="lorenzo" created="Tue, 15 May 2018 11:20:03 -0400"  >&lt;p&gt;To be properly tested RPM SeriesCorrectionEventHandler-4.3.1.P423-ims99.noarch.rpm.lorenzo_20180508 requires both a standard multi host setup (regression test for single org clients that are still on 4-3-1/4-3-4), and separately a minimal multi-org setup for RDS.&lt;/p&gt;

&lt;p&gt;The multiprocess SCEH is triggered at 300 orgs and only split in 2 processes (SCEH_0 and SCEH_1) each operating on a distinct block of DicomMasters. The assumption provided was that RDS was able to function with ~300 organizations.&lt;/p&gt;

&lt;p&gt;In order to test the RPM on a minimal multiorg setup make sure to edit run_SeriesCorrectionEventHandler.sh to trigger multiprocess SCEH with less than 300 organizations.&lt;/p&gt;

&lt;p&gt;Maximiano opened ticket &lt;a href=&quot;https://inteleradprod.service-now.com/nav_to.do?uri=textsearch.do?sysparm_search=CHG0038782&quot; target=&quot;_blank&quot;&gt;CHG0038782&lt;/a&gt; to setup a multiorg test farm.&lt;/p&gt;

&lt;p&gt;The setup I used for my own tests is qa434mst&lt;/p&gt;
{1,2,3}
&lt;p&gt; which I have manually modified to look like a multiorg (from an SCEH/PCEH perspective). Do not use those hosts as they are for the multiorg V&amp;amp;V of this issue.&lt;/p&gt;</comment>
                            <comment id="479943" author="lorenzo" created="Tue, 22 May 2018 10:51:48 -0400"  >&lt;p&gt;Replacing the patch and RPMs from May 9th with more recent versions.&lt;/p&gt;</comment>
                            <comment id="480162" author="lorenzo" created="Wed, 23 May 2018 14:35:28 -0400"  >&lt;p&gt;To be properly tested RPM SeriesCorrectionEventHandler-4.3.1.P423-ims99.noarch.rpm.lorenzo_20180522 requires both a standard multi host setup (regression test for single org clients that are still on 4-3-1/4-3-4), and separately a minimal multi-org setup for RDS.&lt;/p&gt;

&lt;p&gt;The multiprocess SCEH is triggered at 300 orgs and only split in 2 processes (SCEH_0 and SCEH_1) each operating on a distinct block of DicomMasters. The assumption provided was that RDS was able to function with ~300 organizations.  Both processes will always be running, but SCEH_1 will perform an endless no-op loop unless the header &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;ORGANIZATION_300&amp;#93;&lt;/span&gt;&quot; is present in SCEH configuration file.&lt;/p&gt;

&lt;p&gt;In order to test the RPM on a minimal multiorg setup make sure to edit both run_SeriesCorrectionEventHandler_0.sh and run_SeriesCorrectionEventHandler_1.sh so that SCEH_1 will be handling its own block of corrections. For example replace the test for &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;ORGANIZATION_300&amp;#93;&lt;/span&gt;&quot; with &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;ORGANIZATION_1&amp;#93;&lt;/span&gt;&quot; in the run scripts if the multiorg setup only contains 2 organizations.&lt;/p&gt;

&lt;p&gt;Maximiano opened ticket CHG0038782 to setup a multiorg test farm which today has state &quot;Review&quot; and review status of &quot;3&quot;.&lt;/p&gt;</comment>
                            <comment id="480167" author="mvilleneuve" created="Wed, 23 May 2018 14:42:00 -0400"  >&lt;p&gt;From the last follow up from Andriy in CHG0038782, the test farm is ready. &lt;br/&gt;
The ticket will most likely move from Review to Closed soon, and Review status of 3 does not mean anything in ISP.&lt;/p&gt;

&lt;p&gt;Thanks &lt;/p&gt;

&lt;p&gt;_RDS testfarm is ready. I&apos;ve re-added rdsroc to RDSCentral testfarm. Let me know if you need anything.&lt;br/&gt;
Thanks,&lt;br/&gt;
Andriy.&lt;br/&gt;
How to access deployment testfarm&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://wiki.intelerad.com/jhuang/accessSquareVictoriaVsphere&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://wiki.intelerad.com/jhuang/accessSquareVictoriaVsphere&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Hosts:&lt;/p&gt;


&lt;p&gt;rdsmdb2.rds&lt;br/&gt;
rdsdb1.rds&lt;br/&gt;
rdsgtwy1.rds&lt;br/&gt;
rdsmdb1.rds&lt;br/&gt;
rdsrnorocstd1.rdsrnoroc&lt;br/&gt;
rdssbnsbostd1.rdssbnsbo&lt;/p&gt;

&lt;p&gt;10.90.148.39 rdsrnorocstd1.rdsrnoroc rdsrnorocstd1 rdsrnorocstd1.vmbuild.intelerad.com rdsroc&lt;br/&gt;
10.90.148.68 rdssbnsbostd1.rdssbnsbo rdssbnsbostd1 rdssbnsbostd1.vmbuild.intelerad.com rdssbo&lt;br/&gt;
10.90.148.86 rdsmdb2.rds rdsmdb2 rdsmdb2.vmbuild.intelerad.com&lt;br/&gt;
10.90.148.91 rdsdb1.rds rdsdb1 rdsdb1.vmbuild.intelerad.com&lt;br/&gt;
10.90.148.92 rdsgtwy1.rds rdsgtwy1 rdsgtwy1.vmbuild.intelerad.com&lt;br/&gt;
10.90.148.95 rdsmdb1.rds rdsmdb1 rdsmdb1.vmbuild.intelerad.com rds&lt;br/&gt;
_&lt;/p&gt;</comment>
                            <comment id="480260" author="lorenzo" created="Thu, 24 May 2018 10:16:33 -0400"  >&lt;p&gt;The configuration for SCEH on rdsgtwy1 lists only organizations from 0 to 299, so I updated the default run scripts&lt;br/&gt;
run_SeriesCorrectionEventHandler_0.sh&lt;br/&gt;
run_SeriesCorrectionEventHandler_1.sh&lt;br/&gt;
to test for a ORGANIZATION_299.&lt;/p&gt;

&lt;p&gt;The configured satellites are rdsrnorocstd1 (ROC, organization_81) and rdssbnsbostd1 (SBO, organization_245), and each will be handled by a different SCEH on the central (each SCEH handles 150 consecutive organizations).&lt;/p&gt;

&lt;p&gt;The configuration on the satellites rdsrnorocstd1 and rdssbnsbostd1 lists only ORGANIZATION_0 so there is no need to edit them.&lt;/p&gt;

&lt;p&gt;The test should at least cover the following:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Correct images owned by ROC present only on rdsrnorocstd1&lt;/li&gt;
	&lt;li&gt;Correct images owned by ROC present on rdsgtwy1 and rdsrnorocstd1&lt;/li&gt;
	&lt;li&gt;Correct images owned by SBO present only on rdssbnsbostd1&lt;/li&gt;
	&lt;li&gt;Correct images owned by SBO present on rdsgtwy1 and rdssbnsbostd1&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="480262" author="lorenzo" created="Thu, 24 May 2018 10:20:49 -0400"  >&lt;p&gt;VM snapshots have been created on 2018-05-24 between 10:15 and 10:16.&lt;/p&gt;

&lt;p&gt;(SV)&lt;span class=&quot;error&quot;&gt;&amp;#91;aperkov@vmbcontroller ~&amp;#93;&lt;/span&gt;% vmman -e snapshot -M -op create RDSROC-ap/*  --name RND&lt;br/&gt;
Please input the password: &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2018-05-24 10:15:37,896  INFO&amp;#93;&lt;/span&gt; About to create rdsrnorocstd1.rdsrnoroc&apos;s snapshot &amp;lt;RND&amp;gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2018-05-24 10:15:42,763  INFO&amp;#93;&lt;/span&gt; rdsrnorocstd1.rdsrnoroc VirtualMachine.createSnapshot success&lt;br/&gt;
(SV)&lt;span class=&quot;error&quot;&gt;&amp;#91;aperkov@vmbcontroller ~&amp;#93;&lt;/span&gt;% vmman -e snapshot -M -op create RDS-ap/*  --name RND&lt;br/&gt;
Please input the password: &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2018-05-24 10:15:53,037  INFO&amp;#93;&lt;/span&gt; About to create rdsgtwy1.rds&apos;s snapshot &amp;lt;RND&amp;gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2018-05-24 10:15:53,044  INFO&amp;#93;&lt;/span&gt; About to create rdsdb1.rds&apos;s snapshot &amp;lt;RND&amp;gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2018-05-24 10:15:53,050  INFO&amp;#93;&lt;/span&gt; About to create rdsmdb1.rds&apos;s snapshot &amp;lt;RND&amp;gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2018-05-24 10:15:53,055  INFO&amp;#93;&lt;/span&gt; About to create rdsmdb2.rds&apos;s snapshot &amp;lt;RND&amp;gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2018-05-24 10:15:53,999  INFO&amp;#93;&lt;/span&gt; rdsmdb2.rds VirtualMachine.createSnapshot success&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2018-05-24 10:15:54,023  INFO&amp;#93;&lt;/span&gt; rdsmdb1.rds VirtualMachine.createSnapshot success&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2018-05-24 10:15:54,189  INFO&amp;#93;&lt;/span&gt; rdsgtwy1.rds VirtualMachine.createSnapshot success&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2018-05-24 10:15:54,201  INFO&amp;#93;&lt;/span&gt; rdsdb1.rds VirtualMachine.createSnapshot success&lt;br/&gt;
(SV)&lt;span class=&quot;error&quot;&gt;&amp;#91;aperkov@vmbcontroller ~&amp;#93;&lt;/span&gt;% vmman -e snapshot -M -op create RDSSBO-ap/*  --name RND&lt;br/&gt;
Please input the password: &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2018-05-24 10:16:12,286  INFO&amp;#93;&lt;/span&gt; About to create rdssbnsbostd1.rdssbnsbo&apos;s snapshot &amp;lt;RND&amp;gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2018-05-24 10:16:17,363  INFO&amp;#93;&lt;/span&gt; rdssbnsbostd1.rdssbnsbo VirtualMachine.createSnapshot success&lt;/p&gt;</comment>
                            <comment id="480535" author="emma.lao" created="Fri, 25 May 2018 13:56:30 -0400"  >&lt;p&gt;Performed some regression tests using the attached rpms on qa434 pacs  with the following cases:&lt;/p&gt;

&lt;p&gt;env:  &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;qa434 4-3-4 R38 pacs (3 servers, mst1 as master, mst2 and 3 as modality ), this is treated as a &quot;normal&quot; multi severs pacs.
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[admin@qa434mst1] {~} getVersion 

Found 3 RPM(s) out of sync with installed releases:
   Distribute-4.3.2.P117-ims01                           [400d] U
   SeriesCorrectionEventHandler-4.3.1.P423-ims99         [  0d] U!
   SeriesCorrectionEventHandler-Config-4.3.1.P423-ims99  [  0d] U!

   ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
   +++++++++++++++ PACS Release: PACS-4-3-4-R38 +++++++++++++++
   +++++++++++++++++ IV Release: IV-4-3-4-R21 +++++++++++++++++
   ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;have an autoruote to route study from mst2 to mst1 and 3, if the PatientId contains MST2&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;precondition: all the studies below were sent by a validation not-enabled Scanner AE so that they could be performed correction without waiting for the study to be validated.&lt;/p&gt;

&lt;p&gt;1. distribute attached rpms, checked that cdt has the following related sh file:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[admin@qa434mst2] {/usr/local/tools} ls *SeriesCo*.sh
kill_SeriesCorrectionEventHandler_0.sh  run_SeriesCorrectionEventHandler_0.sh
kill_SeriesCorrectionEventHandler_1.sh  run_SeriesCorrectionEventHandler_1.sh
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;NOTE that kill_SeriesCorrectionEventHandler.sh is gone, if after distributing, the original SCEH still running, you need to manually sudo kill its pid, otherwise, only running run_SeriesCorrectionEventHandler_0.sh ; run_SeriesCorrectionEventHandler_1.sh will end up only having SCEH_1 running but not SCEH_0, which is bad:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[admin@qa434mst1] {/usr/local/tools/src/PACSinstall/bin} pidCheck --all|grep Seri
PID 5858 RUNNING [/usr/local/tools/pid/SeriesCorrectionEventHandler.pid]
PID 5910 RUNNING [/usr/local/tools/pid/SeriesEditorDaemon.pid]
[admin@qa434mst1] {/usr/local/tools/src/PACSinstall/bin} run_SeriesCorrectionEventHandler_0.sh ;run_SeriesCorrectionEventHandler_1.sh 
[admin@qa434mst1] {/usr/local/tools/src/PACSinstall/bin} pidCheck --all|grep SeriPID 5858 RUNNING [/usr/local/tools/pid/SeriesCorrectionEventHandler.pid]
PID 15253 NOT RUNNING [/usr/local/tools/pid/SeriesCorrectionEventHandler_0.pid]
PID 15281 RUNNING [/usr/local/tools/pid/SeriesCorrectionEventHandler_1.pid]
PID 5910 RUNNING [/usr/local/tools/pid/SeriesEditorDaemon.pid]
[admin@qa434mst1] {/usr/local/tools/src/PACSinstall/bin} 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;2. after having the two SCEH processes running, remember to manually enable ipmon for them, by default, they are disabled (even after PACS restart), I am not sure if this is how it should be:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Disabled plugins:
----------------
-e check.process.SeriesCorrectionEventHandler_0 \
-e check.process.SeriesCorrectionEventHandler_1 \

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;3. after manually enabling ipmon for the two processes, kill the process, and manageIpmon --signal, should see the two processes coming back my ipmon&lt;/p&gt;

&lt;p&gt;4. make SCEH_0 not running and SCEH_1 running perform a correction on a study, it will failed because of PCEH failing to signal SCEH, if making SCEH_1 not running, and SCEH_0 running, correction completes fine. This work as expected, since in normal non-rds environment, that SCEH_0 is the one actually enabled and doing the job&lt;/p&gt;

&lt;p&gt;5. have a study with MST2 as owner and autorouted to mst1/3, perform a correction. work as expected: deletion done on mst1/3, correction done on mst2 and re-route the study to mst1/mst3&lt;/p&gt;

&lt;p&gt;6.  have a study with MST2 as owner and autorouted to mst1/3, delete the study locally on mst2, perform the correction, work as expected: deletion done on mst3, correction done on mst1 and study automoved to mst3&lt;/p&gt;

&lt;p&gt;7. have a 3 series study with MST2 as owner and autorouted to mst1/3, make series 2 on mst1 untouchable (sudo chattr +i -R &amp;lt;series 2 cdi folder&amp;gt;), perform correction, result:&lt;/p&gt;

&lt;p&gt;deletion on mst3 done for 3 series, deletion done for series 1/3 on mst1, but series 2 deletion failed on mst1 (checked SCEH_0 log on mst1), make series 2 on mst1 touchable again (sudo chattr -i..), PCEH keeps retrying on this series 2, but SCEH_0 never have series 2 record in the log since its marking the deletion failed for series 2, after about 21 or 20 times retries, PCEH marked the correction as FAILED.&lt;/p&gt;

&lt;p&gt;It is the same behaviour for old SCEH, not desired, but not regression either.&lt;/p&gt;

&lt;p&gt;8. have a 3 series study with MST2 as owner and autorouted to mst1/3, break network connection between mst1 and mst3, perform a correction on the study, result:&lt;/p&gt;

&lt;p&gt;for whatever reason, mst1 attempted to connect to mst3 dms while doing deletion, and failed, after reconnect between mst1 and 3, since as in case 7, SCEH not seem to retry, the correction failed in the end. &lt;/p&gt;

&lt;p&gt;It is the same behaviour for old SCEH, not desired, but not regression either.&lt;/p&gt;

&lt;p&gt;9. have a study with MST2 as owner (The study not meet the autoroute rule condition), use seriesMover to move the study to mst3, perform a correction on the study, result:&lt;/p&gt;

&lt;p&gt;deletion done on mst3, correction done on mst2, SCEH_0 arrange a re-autoroute, but since the study does not meet the autoroute rule condition, study not sent to mst3, so it now only has mst2 as location.&lt;/p&gt;

&lt;p&gt;It is the same behaviour for old SCEH&lt;/p&gt;

&lt;p&gt;regression test on mult servers pacs done. will perform test on rds-like environment later.&lt;/p&gt;</comment>
                            <comment id="480541" author="emma.lao" created="Fri, 25 May 2018 14:04:26 -0400"  >&lt;p&gt;.&lt;/p&gt;</comment>
                            <comment id="480738" author="lorenzo" created="Mon, 28 May 2018 14:45:33 -0400"  >&lt;p&gt;Updated the RPMs and patch to allow the list of orgs to match the order in which they appear in the configuration file.&lt;/p&gt;</comment>
                            <comment id="480852" author="emma.lao" created="Tue, 29 May 2018 13:31:42 -0400"  >&lt;p&gt;Tested on rds testfarm mentioned in this issue where 4-3-4 R38 installed with the attached latest rpms for the following cases:&lt;/p&gt;

&lt;p&gt;evn: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;rdsgtwy1.rds is the central pacs which has SCEH installed&lt;/li&gt;
	&lt;li&gt;rdsrnorocstd1.rdsrnoroc is one satellite with ROC as org, listed as ORGANIZATION_81 in the SCEH config in central pacs&lt;/li&gt;
	&lt;li&gt;rdssbnsbostd1.rdssbnsbo is one satellite with SBO as org, listed as ORGANIZATION_245 in the SCEH config in central pacs&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;pre-conditions:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;all studies sent to rdsrnorocstd1.rdsrnoroc has ROC as its org, and will be autorouted to rdsgtwy1.rds&lt;/li&gt;
	&lt;li&gt;all studies sent to rdssbnsbostd1.rdssbnsbo has SBO as its org, and will be autorouted to rdsgtwy1.rds&lt;/li&gt;
	&lt;li&gt;installed attached rpms on all 3 above servers&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;cases 1. check on both central pacs and satellites server, able to start SCEH_0 and SCEH_1 processes, on central pacs rdsgtwy1.rds, SCEH_0 log suggests it is responsible for the first 150 org as per the SCEH config:
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2018-05-29 10:14:52.022 SCEH rdsgtwy1.rds (TRACE)] SCEH index 0 out of [0..1] will handle 150 organizations out of the 3
00 available (codes [0..150[ or [RDS..NEB])
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;SCEH_1 log suggests it is responsible for the left org as per the SCEH config:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2018-05-29 10:23:50.225 SCEH rdsgtwy1.rds (TRACE)] SCEH index 1 out of [0..1] will handle 150 organizations out of the 300 available (codes [150..300[ or [NHB..KPI])
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
	&lt;li&gt;case 2. test that corrections done on rdsrnorocstd1.rdsrnoroc, their deletions processed by SCEH_0 on rdsgtwy1.rds:
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2018-05-29 11:51:17.801 PCEH rdsrnorocstd1.rdsrnoroc (TRACE)] Checking online AE titles of all locations for series &apos;1.2.276.0.7230010.3.1.3.1510614932.15583.1527612551.3&apos;
[2018-05-29 11:51:17.801 PCEH rdsrnorocstd1.rdsrnoroc (DEBUG)] Getting all online locations for series: 1.2.276.0.7230010.3.1.3.1510614932.15583.1527612551.3
[2018-05-29 11:51:17.812 PCEH rdsrnorocstd1.rdsrnoroc (TRACE)] All online locations for series &apos;1.2.276.0.7230010.3.1.3.1510614932.15583.1527612551.3&apos; exist and are marked up
[2018-05-29 11:51:17.812 PCEH rdsrnorocstd1.rdsrnoroc (TRACE)] All locations for all series for study 1.2.276.0.7230010.3.1.2.1510614932.15583.1527612551.2 are up. Continuing with the correction 82077
[2018-05-29 11:51:17.812 PCEH rdsrnorocstd1.rdsrnoroc (DEBUG)] Getting all online locations for series: 1.2.276.0.7230010.3.1.3.1510614932.15583.1527612551.3
[2018-05-29 11:51:17.825 PCEH rdsrnorocstd1.rdsrnoroc (TRACE)] 2 locations for series 1.2.276.0.7230010.3.1.3.1510614932.15583.1527612551.3. All locations except one need to be deleted
[2018-05-29 11:51:17.832 PCEH rdsrnorocstd1.rdsrnoroc (DEBUG)] AE &apos;RDSRNOROCSTD1&apos; is the series owner for series &apos;1.2.276.0.7230010.3.1.3.1510614932.15583.1527612551.3&apos;
[2018-05-29 11:51:17.846 PCEH rdsrnorocstd1.rdsrnoroc (DEBUG)] AE RDSGTWY1 is a modality
[2018-05-29 11:51:17.852 PCEH rdsrnorocstd1.rdsrnoroc (DEBUG)] Series is available on the owner
[2018-05-29 11:51:17.853 PCEH rdsrnorocstd1.rdsrnoroc (TRACE)] Series &apos;1.2.276.0.7230010.3.1.3.1510614932.15583.1527612551.3&apos; should be corrected on AE &apos;RDSRNOROCSTD1&apos;, will be deleted first from AEs (empty list), and if those deletions succeed then will also be deleted from AEs [0:RDSGTWY1] (see BZ20288)
[2018-05-29 11:51:17.853 PCEH rdsrnorocstd1.rdsrnoroc (TRACE)] Posting deletions on archive cache AEs for series [1.2.276.0.7230010.3.1.3.1510614932.15583.1527612551.3]
[2018-05-29 11:51:17.853 PCEH rdsrnorocstd1.rdsrnoroc (TRACE)] Waiting for series to be deleted from archive cache AEs
[2018-05-29 11:51:17.853 PCEH rdsrnorocstd1.rdsrnoroc (TRACE)] Retrieving next work item for PatientCorrection number 82077 and instance type &apos;SERIES&apos;
[2018-05-29 11:51:17.860 PCEH rdsrnorocstd1.rdsrnoroc (TRACE)] Correction 82077 successfully deleted on AEs (empty set)
[2018-05-29 11:51:17.860 PCEH rdsrnorocstd1.rdsrnoroc (TRACE)] Posting deletions on non archive cache AEs for series [1.2.276.0.7230010.3.1.3.1510614932.15583.1527612551.3]
[2018-05-29 11:51:17.860 PCEH rdsrnorocstd1.rdsrnoroc (TRACE)] Scheduling deletion for seriesInstanceUid &apos;1.2.276.0.7230010.3.1.3.1510614932.15583.1527612551.3&apos; on &apos;RDSGTWY1&apos;
[2018-05-29 11:51:17.883 PCEH rdsrnorocstd1.rdsrnoroc (TRACE)] Attempting to signal SCEH AE [RDSGTWY1] using hostname [rdsgtwy1.rds] and port [9001]


(TESTFARM)[admin@rdsgtwy1 SeriesCorrectionEventHandler]% grep 1.2.276.0.7230010.3.1.3.1510614932.15583.1527612551.3 *
SCEH_0.log:[2018-05-29 11:51:58.495 SCEH rdsgtwy1.rds (TRACE)] Attempting to delete series: 1.2.276.0.7230010.3.1.3.1510614932.15583.1527612551.3 locally.
SCEH_0.log:[2018-05-29 11:51:58.495 SCEH rdsgtwy1.rds (TRACE)] About to invoke /usr/local/tools/delseriesbyUID.pl using: CommandLauncher[ &apos;sh&apos; &apos;-c&apos; &apos;/usr/local/tools/delseriesbyUID.pl --no_backup --dellocal 1.2.276.0.7230010.3.1.3.1510614932.15583.1527612551.3&amp;gt;/dev/null&apos; ]
SCEH_0.log:[2018-05-29 11:51:59.291 SCEH rdsgtwy1.rds (TRACE)] Marking series: 1.2.276.0.7230010.3.1.3.1510614932.15583.1527612551.3 with deletion operation as SUCCEEDED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;while corrections done on rdssbnsbostd1.rdssbnsbo, their deletions process by SCEH_1 on rdsgtwy1.rds:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2018-05-29 11:51:14.862 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Checking online AE titles of all locations for series &apos;1.2.276.0.7230010.3.1.3.1510622356.1342.1527612606.3&apos;
[2018-05-29 11:51:14.862 PCEH rdssbnsbostd1.rdssbnsbo (DEBUG)] Getting all online locations for series: 1.2.276.0.7230010.3.1.3.1510622356.1342.1527612606.3
[2018-05-29 11:51:14.864 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] All online locations for series &apos;1.2.276.0.7230010.3.1.3.1510622356.1342.1527612606.3&apos; exist and are marked up
[2018-05-29 11:51:14.864 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] All locations for all series for study 1.2.276.0.7230010.3.1.2.1510622356.1342.1527612606.2 are up. Continuing with the correction 22925
[2018-05-29 11:51:14.864 PCEH rdssbnsbostd1.rdssbnsbo (DEBUG)] Getting all online locations for series: 1.2.276.0.7230010.3.1.3.1510622356.1342.1527612606.3
[2018-05-29 11:51:14.866 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] 2 locations for series 1.2.276.0.7230010.3.1.3.1510622356.1342.1527612606.3. All locations except one need to be deleted
[2018-05-29 11:51:14.868 PCEH rdssbnsbostd1.rdssbnsbo (DEBUG)] AE &apos;RDSSBNSBOSTD1&apos; is the series owner for series &apos;1.2.276.0.7230010.3.1.3.1510622356.1342.1527612606.3&apos;
[2018-05-29 11:51:14.870 PCEH rdssbnsbostd1.rdssbnsbo (DEBUG)] AE RDSGTWY1 is a modality
[2018-05-29 11:51:14.872 PCEH rdssbnsbostd1.rdssbnsbo (DEBUG)] Series is available on the owner
[2018-05-29 11:51:14.872 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Series &apos;1.2.276.0.7230010.3.1.3.1510622356.1342.1527612606.3&apos; should be corrected on AE &apos;RDSSBNSBOSTD1&apos;, will be deleted first from AEs (empty list), and if those deletions succeed then will also be deleted from AEs [0:RDSGTWY1] (see BZ20288)
[2018-05-29 11:51:14.872 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Posting deletions on archive cache AEs for series [1.2.276.0.7230010.3.1.3.1510622356.1342.1527612606.3]
[2018-05-29 11:51:14.872 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Waiting for series to be deleted from archive cache AEs
[2018-05-29 11:51:14.872 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Retrieving next work item for PatientCorrection number 22925 and instance type &apos;SERIES&apos;
[2018-05-29 11:51:14.874 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Correction 22925 successfully deleted on AEs (empty set)
[2018-05-29 11:51:14.874 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Posting deletions on non archive cache AEs for series [1.2.276.0.7230010.3.1.3.1510622356.1342.1527612606.3]
[2018-05-29 11:51:14.874 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Scheduling deletion for seriesInstanceUid &apos;1.2.276.0.7230010.3.1.3.1510622356.1342.1527612606.3&apos; on &apos;RDSGTWY1&apos;
[2018-05-29 11:51:14.877 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Attempting to signal SCEH AE [RDSGTWY1] using hostname [rdsgtwy1.rds] and port [9001]

(TESTFARM)[admin@rdsgtwy1 SeriesCorrectionEventHandler]% grep 1.2.276.0.7230010.3.1.3.1510622356.1342.1527612606.3 *
SCEH_1.log:[2018-05-29 11:51:39.558 SCEH rdsgtwy1.rds (TRACE)] Attempting to delete series: 1.2.276.0.7230010.3.1.3.1510622356.1342.1527612606.3 locally.
SCEH_1.log:[2018-05-29 11:51:39.558 SCEH rdsgtwy1.rds (TRACE)] About to invoke /usr/local/tools/delseriesbyUID.pl using: CommandLauncher[ &apos;sh&apos; &apos;-c&apos; &apos;/usr/local/tools/delseriesbyUID.pl --no_backup --dellocal 1.2.276.0.7230010.3.1.3.1510622356.1342.1527612606.3&amp;gt;/dev/null&apos; ]
SCEH_1.log:[2018-05-29 11:51:40.771 SCEH rdsgtwy1.rds (TRACE)] Marking series: 1.2.276.0.7230010.3.1.3.1510622356.1342.1527612606.3 with deletion operation as SUCCEEDED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
	&lt;li&gt;case 3. stop SCEH_0 on rdsgtwy1.rds, make sure that correction done on rdssbnsbostd1.rdssbnsbo still works properly, as its deletion is handled by SCEH_1, while correction done on rdsrnorocstd1.rdsrnoroc does not work, but resume working after starting up SCEH_0&lt;/li&gt;
	&lt;li&gt;case 4.  stop SCEH_1 on rdsgtwy1.rds, make sure that correction done on rdsrnorocstd1.rdsrnoroc still works properly, as its deletion is handled by SCEH_0, while correction done on rdssbnsbostd1.rdssbnsbo does not work, but resume working after starting up SCEH_1&lt;/li&gt;
	&lt;li&gt;case 5. correction done on satellite on multi series study work properly&lt;/li&gt;
	&lt;li&gt;case 6. also compare the deletion on rdsgtwy1 before and after upgrading SCEH, before the deletion is always more than 12 or even 15 minutes:
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2018-05-28 11:25:17.772 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Series &apos;1.2.276.0.7230010.3.1.3.1510622356.18007.152752463
7.2&apos; should be corrected on AE &apos;RDSSBNSBOSTD1&apos;, will be deleted first from AEs (empty list), and if those deletions succe
ed then will also be deleted from AEs [0:RDSGTWY1] (see BZ20288)
[2018-05-28 11:25:17.772 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Posting deletions on archive cache AEs for series [1.2.276
.0.7230010.3.1.3.1510622356.18007.1527524637.2]
[2018-05-28 11:25:17.772 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Waiting for series to be deleted from archive cache AEs
[2018-05-28 11:25:17.772 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Retrieving next work item for PatientCorrection number 229
17 and instance type &apos;SERIES&apos;
[2018-05-28 11:25:17.777 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Correction 22917 successfully deleted on AEs (empty set)
[2018-05-28 11:25:17.777 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Posting deletions on non archive cache AEs for series [1.2
.276.0.7230010.3.1.3.1510622356.18007.1527524637.2]
[2018-05-28 11:25:17.777 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Scheduling deletion for seriesInstanceUid &apos;1.2.276.0.72300
10.3.1.3.1510622356.18007.1527524637.2&apos; on &apos;RDSGTWY1&apos;
[2018-05-28 11:25:17.783 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Attempting to signal SCEH AE [RDSGTWY1] using hostname [rd
sgtwy1.rds] and port [9001]
[2018-05-28 11:25:17.783 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Successfully signalled rdsgtwy1.rds on port 9001
[2018-05-28 11:25:17.784 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Waiting for series to be deleted from non archive cache AE
s
[2018-05-28 11:25:17.784 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Retrieving next work item for PatientCorrection number 229
17 and instance type &apos;SERIES&apos;
[2018-05-28 11:25:17.788 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] There are 1 events to be deleted. Following are the pendin
g corrections/deletions
[2018-05-28 11:25:17.788 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Correction number: 22917 on AE: RDSGTWY1 Last operation co
mpleted: [Start of correction]
[2018-05-28 11:25:17.788 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Going to sleep and waiting 5 seconds for AEs [RDSGTWY1]
[2018-05-28 11:25:22.789 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Retrieving next work item for PatientCorrection number 22917 and instance type &apos;SERIES&apos;
[2018-05-28 11:25:22.794 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] There are 1 events to be deleted. Following are the pending corrections/deletions
[2018-05-28 11:25:22.795 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Correction number: 22917 on AE: RDSGTWY1 Last operation completed: [Start of correction]
[2018-05-28 11:25:22.795 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Going to sleep and waiting 5 seconds for AEs [RDSGTWY1]
[2018-05-28 11:25:27.795 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Retrieving next work item for PatientCorrection number 22917 and instance type &apos;SERIES&apos;
[2018-05-28 11:25:27.801 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] There are 1 events to be deleted. Following are the pending corrections/deletions
[2018-05-28 11:25:27.801 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Correction number: 22917 on AE: RDSGTWY1 Last operation completed: [Start of correction]



(TESTFARM)[admin@rdsgtwy1 SeriesCorrectionEventHandler]% grep  1.2.276.0.7230010.3.1.3.1510622356.18007.1527524637.2 *
SCEH.log.20180528_120645.log:[2018-05-28 11:38:52.110 SCEH rdsgtwy1.rds (TRACE)] Attempting to delete series: 1.2.276.0.7230010.3.1.3.1510622356.18007.1527524637.2 locally.
SCEH.log.20180528_120645.log:[2018-05-28 11:38:52.110 SCEH rdsgtwy1.rds (TRACE)] About to invoke /usr/local/tools/delseriesbyUID.pl using: CommandLauncher[ &apos;sh&apos; &apos;-c&apos; &apos;/usr/local/tools/delseriesbyUID.pl --no_backup --dellocal 1.2.276.0.7230010.3.1.3.1510622356.18007.1527524637.2&amp;gt;/dev/null&apos; ]
SCEH.log.20180528_120645.log:[2018-05-28 11:38:54.673 SCEH rdsgtwy1.rds (TRACE)] Marking series: 1.2.276.0.7230010.3.1.3.1510622356.18007.1527524637.2 with deletion operation as SUCCEEDED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;while after upgrading, the deletion is at most 4 or 5 minutes:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2018-05-29 09:50:02.310 PCEH rdssbnsbostd1.rdssbnsbo (DEBUG)] AE RDSGTWY1 is a modality
[2018-05-29 09:50:02.312 PCEH rdssbnsbostd1.rdssbnsbo (DEBUG)] Series is available on the owner
[2018-05-29 09:50:02.313 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Series &apos;1.2.276.0.7230010.3.1.3.1510622356.16078.1527605244.2&apos; should be corrected on AE &apos;RDSSBNSBOSTD1&apos;, will be deleted first from AEs (empty list), and if those deletions succeed then will also be deleted from AEs [0:RDSGTWY1] (see BZ20288)
[2018-05-29 09:50:02.313 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Posting deletions on archive cache AEs for series [1.2.276.0.7230010.3.1.3.1510622356.16078.1527605244.2|1.2.276.0.7230010.3.1.3.1510622356.16015.1527605229.2|1.2.276.0.7230010.3.1.3.1510622356.15878.1527605196.2|1.2.276.0.7230010.3.1.3.1510622356.15760.1527605149.3]
[2018-05-29 09:50:02.313 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Waiting for series to be deleted from archive cache AEs
[2018-05-29 09:50:02.313 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Retrieving next work item for PatientCorrection number 22922 and instance type &apos;SERIES&apos;
[2018-05-29 09:50:02.315 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Correction 22922 successfully deleted on AEs (empty set)
[2018-05-29 09:50:02.315 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Posting deletions on non archive cache AEs for series [1.2.276.0.7230010.3.1.3.1510622356.16078.1527605244.2|1.2.276.0.7230010.3.1.3.1510622356.16015.1527605229.2|1.2.276.0.7230010.3.1.3.1510622356.15878.1527605196.2|1.2.276.0.7230010.3.1.3.1510622356.15760.1527605149.3]
[2018-05-29 09:50:02.315 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Scheduling deletion for seriesInstanceUid &apos;1.2.276.0.7230010.3.1.3.1510622356.16078.1527605244.2&apos; on &apos;RDSGTWY1&apos;
[2018-05-29 09:50:02.333 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Attempting to signal SCEH AE [RDSGTWY1] using hostname [rdsgtwy1.rds] and port [9001]
[2018-05-29 09:50:02.335 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Successfully signalled rdsgtwy1.rds on port 9001
[2018-05-29 09:50:02.335 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Scheduling deletion for seriesInstanceUid &apos;1.2.276.0.7230010.3.1.3.1510622356.16015.1527605229.2&apos; on &apos;RDSGTWY1&apos;
[2018-05-29 09:50:02.338 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Attempting to signal SCEH AE [RDSGTWY1] using hostname [rdsgtwy1.rds] and port [9001]
[2018-05-29 09:50:02.338 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Successfully signalled rdsgtwy1.rds on port 9001
[2018-05-29 09:50:02.338 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Scheduling deletion for seriesInstanceUid &apos;1.2.276.0.7230010.3.1.3.1510622356.15878.1527605196.2&apos; on &apos;RDSGTWY1&apos;
[2018-05-29 09:50:02.341 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Attempting to signal SCEH AE [RDSGTWY1] using hostname [rdsgtwy1.rds] and port [9001]
[2018-05-29 09:50:02.341 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Successfully signalled rdsgtwy1.rds on port 9001
[2018-05-29 09:50:02.341 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Scheduling deletion for seriesInstanceUid &apos;1.2.276.0.7230010.3.1.3.1510622356.15760.1527605149.3&apos; on &apos;RDSGTWY1&apos;
[2018-05-29 09:50:02.344 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Attempting to signal SCEH AE [RDSGTWY1] using hostname [rdsgtwy1.rds] and port [9001]
[2018-05-29 09:50:02.344 PCEH rdssbnsbostd1.rdssbnsbo (TRACE)] Successfully signalled rdsgtwy1.rds on port 9001






(TESTFARM)[admin@rdsgtwy1 SeriesCorrectionEventHandler]% grep 1.2.276.0.7230010.3.1.3.1510622356.15760.1527605149.3 *
SCEH_1.log:[2018-05-29 09:54:31.965 SCEH rdsgtwy1.rds (TRACE)] Attempting to delete series: 1.2.276.0.7230010.3.1.3.1510622356.15760.1527605149.3 locally.
SCEH_1.log:[2018-05-29 09:54:31.965 SCEH rdsgtwy1.rds (TRACE)] About to invoke /usr/local/tools/delseriesbyUID.pl using: CommandLauncher[ &apos;sh&apos; &apos;-c&apos; &apos;/usr/local/tools/delseriesbyUID.pl --no_backup --dellocal 1.2.276.0.7230010.3.1.3.1510622356.15760.1527605149.3&amp;gt;/dev/null&apos; ]
SCEH_1.log:[2018-05-29 09:54:32.869 SCEH rdsgtwy1.rds (TRACE)] Marking series: 1.2.276.0.7230010.3.1.3.1510622356.15760.1527605149.3 with deletion operation as SUCCEEDED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="480853" author="emma.lao" created="Tue, 29 May 2018 13:35:16 -0400"  >&lt;p&gt;Tests have been done on both &quot;normal&quot; and rds-like environment. SCEH works as expected. There are two things to pay attention while deploying the new rpms:&lt;/p&gt;

&lt;p&gt;1. make sure that both SCEH_0 and SCEH_1 are up running, but not SCEH&lt;br/&gt;
2. make sure that SCEH_0 and SCEH_1 Ipmon enabled, by default, they are disabled.&lt;/p&gt;</comment>
                            <comment id="480925" author="lorenzo" created="Tue, 29 May 2018 17:50:25 -0400"  >&lt;p&gt;I have updated the RPMs and patch with an additional feature: org code whitelist.&lt;/p&gt;

&lt;p&gt;SCEH will now look for an optional private configuration key &lt;span class=&quot;error&quot;&gt;&amp;#91;SeriesCorrectionEventHandler:ORG_WHITELIST&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;If the key is absent or empty then all organizations will be handled as usual. This setting is the only one that will work with single org where the org code can be &apos;&apos; (empty string).&lt;/p&gt;

&lt;p&gt;If the key contains a comma separated list of organization codes then SCEH will only handle the codes specified and skip the rest. The codes are trimmed, blanks are dropped, duplicates are ignored.&lt;/p&gt;

&lt;p&gt;If SCEH_0 and SCEH_1 each handle a part of the organization from sections &lt;span class=&quot;error&quot;&gt;&amp;#91;ORGANIZATION_*&amp;#93;&lt;/span&gt;, then the whitelist must contain all the codes to be handled by both processes. There is no separate whitelist for SCEH_0 and SCEH_1.&lt;/p&gt;</comment>
                            <comment id="481017" author="emma.lao" created="Wed, 30 May 2018 11:48:13 -0400"  >&lt;p&gt;Tested on qa434 pacs ((3 servers, mst1 as master, mst2 and 3 as modality )) which is a normal no-rds setup using the attached rpms:&lt;/p&gt;

&lt;p&gt;1. distribute the rpms, running compileControlFiles as instructed after distribution. &lt;br/&gt;
2. sudo kill &amp;lt;SCEH pid&amp;gt;&lt;br/&gt;
3. start SCEH_0 and SCEH_1, make sure they are up running&lt;br/&gt;
4. go check SeriesCorrectionEventHandler.cfg under cdcf, see the new private config key with empty value:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[admin@qa434mst3] {/usr/local/tools/control_files} grep ORG_WHITELIST SeriesCorrectionEventHandler.cfg 
ORG_WHITELIST                                    = 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;5. have a study with MST2 as owner and autorouted to mst1/3, perform a correction. work as expected: deletion done on mst1/3, correction done on mst2 and re-route the study to mst1/mst3&lt;br/&gt;
6. test that if SCEH_0 is down, correction will not work&lt;br/&gt;
7. have a study with MST2 as owner and autorouted to mst1/3&lt;br/&gt;
8. go to mst3, cdcf, make ORG_WHITELIST = IMS, restart both SCEH_0 and 1&lt;br/&gt;
9. make a correction on the study in step 7, check that deletion of the study is not done in mst3, SCEH_0 log has this message:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2018-05-30 11:24:51.773 SCEH qa434mst3.dyn.intelerad (TRACE)] TCP Signal caught: USR1 from 10.90.135.93
[2018-05-30 11:24:51.773 SCEH qa434mst3.dyn.intelerad (TRACE)] Skipping corrections for organization &apos;&apos; since organization whitelist is [IMS] and that code is not a part of it
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;10. go to mst3, cdcf, remove config ORG_WHITELIST, restart both SCEH_0 and 1&lt;br/&gt;
11. check SCHE_0 on mst3 resume working, i.e. deletion on series processed properly.&lt;/p&gt;</comment>
                            <comment id="481043" author="emma.lao" created="Wed, 30 May 2018 13:36:38 -0400"  >&lt;p&gt;Tested on rds testfarm mentioned in this issue where 4-3-4 R38 installed using the attached latest rpms:&lt;/p&gt;

&lt;p&gt;evn:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;rdsgtwy1.rds is the central pacs which has SCEH installed&lt;/li&gt;
	&lt;li&gt;rdsrnorocstd1.rdsrnoroc is one satellite with ROC as org, listed as ORGANIZATION_81 in the SCEH config in central pacs&lt;/li&gt;
	&lt;li&gt;rdssbnsbostd1.rdssbnsbo is one satellite with SBO as org, listed as ORGANIZATION_245 in the SCEH config in central pacs&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;case 1. when ORG_WHITELIST is either removed or has empty value in SeriesCorrectionEventHandler.cfg, correction works as before, i.e. SCEH_0 on rdsgtwy1.rds processes deletion from ROC properly, and SCEH_1 processes deletion from SBO properly, but we will see that both SCEH go to each ORG to check connection and get NoRouteToHostException (because only two ORG configured in this test farm):&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2018-05-30 12:27:31.499 SCEH rdsgtwy1.rds (TRACE)] Checking correction queue for organization &apos;STONE&apos; using MDB on rdsbn
atoastd2.rdstoa
[2018-05-30 12:27:31.499 SCEH rdsgtwy1.rds (TRACE)] Creating connection pool to &apos;DicomMaster&apos; on &apos;rdsbnatoastd2.rdstoa&apos; (
server type &apos;sybase&apos;, login &apos;seriescorrectioneventhandler&apos;)
[2018-05-30 12:27:31.500 SCEH rdsgtwy1.rds (TRACE)] Retrieving next work item for AE: RDSGTWY1
[2018-05-30 12:27:31.504 SCEH rdsgtwy1.rds] 
*************************
ERROR: Error retrieving a correction event from the DicomMaster::SeriesCorrectionList on rdsbnatoastd2.rdstoa. Continuing anyway.
*************************
[2018-05-30 12:27:31.504 SCEH rdsgtwy1.rds] Stack trace:
Databases.DatabaseException: java.sql.SQLException: JZ006: Caught IOException: java.net.NoRouteToHostException: No route to host: connecting to DicomMaster@rdsbnatoastd2.rdstoa
        at Databases.DicomMaster.DicomMasterInterface.getSeriesCorrectionEvent(DicomMasterInterface.java:1227)
        at com.intelerad.sceh.SeriesCorrectionEventHandler.correctForMdbHost(SeriesCorrectionEventHandler.java:2007)
        at com.intelerad.sceh.SeriesCorrectionEventHandler.correctForOrganization(SeriesCorrectionEventHandler.java:2054)
        at com.intelerad.sceh.SeriesCorrectionEventHandler.correctionsLoop(SeriesCorrectionEventHandler.java:2120)
        at com.intelerad.sceh.SeriesCorrectionEventHandler.main(SeriesCorrectionEventHandler.java:2304)
Caused by: java.sql.SQLException: JZ006: Caught IOException: java.net.NoRouteToHostException: No route to host: connecting to DicomMaster@rdsbnatoastd2.rdstoa
        at com.sybase.jdbc3.jdbc.ErrorMessage.raiseError(Unknown Source)
        at com.sybase.jdbc3.jdbc.ErrorMessage.raiseErrorCheckDead(Unknown Source)
        at com.sybase.jdbc3.tds.Tds.a(Unknown Source)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
	&lt;li&gt;case 2. on rdsgtwy1.rds, set ORG_WHITELIST = ROC,ABC,SBO, where ABC is a non-existing org, SCEH_0 on rdsgtwy1.rds processes deletion from ROC properly, and SCEH_1 processes deletion from SBO properly, and both SCEH will not try to check correction in other ORGs:
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2018-05-30 12:18:15.554 SCEH rdsgtwy1.rds (TRACE)] Skipping corrections for organization &apos;OCE&apos; since organization whitelist is [ROC, ABC, SBO] and that code is not a part of it
[2018-05-30 12:18:15.554 SCEH rdsgtwy1.rds (TRACE)] Skipping corrections for organization &apos;IRD&apos; since organization whitelist is [ROC, ABC, SBO] and that code is not a part of it
[2018-05-30 12:18:15.554 SCEH rdsgtwy1.rds (TRACE)] Skipping corrections for organization &apos;GFC&apos; since organization whitelist is [ROC, ABC, SBO] and that code is not a part of it
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;case 3. on rdsgtwy1.rds, set ORG_WHITELIST = ROC,ABC, where ABC is a non-existing org, SCEH_0 on rdsgtwy1.rds processes deletion from ROC properly, but deletion from SBO will not be processed as SBO is not in the ORG_WHITELIST&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="481915" author="mvilleneuve" created="Wed, 6 Jun 2018 10:26:14 -0400"  >&lt;p&gt;Hi &lt;/p&gt;

&lt;p&gt;RDS are very eager on getting this fix. Do we have a timeline to work with? What is the current ETA?&lt;/p&gt;

&lt;p&gt;Thanks for your time&lt;/p&gt;

&lt;p&gt;Martin&lt;/p&gt;</comment>
                            <comment id="481917" author="mfrancisco" created="Wed, 6 Jun 2018 10:35:57 -0400"  >&lt;p&gt;Hello &lt;a href=&quot;https://jira.intelerad.com/secure/ViewProfile.jspa?name=mvilleneuve&quot; class=&quot;user-hover&quot; rel=&quot;mvilleneuve&quot;&gt;Martin Villeneuve&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;I have spoken with RDS and we are waiting for authorization to install it.  We are planning on installing it first on RDSDEPOT13 with only parallelization turned on.  Once we have fine tuned the number of processes to run and are satisfied that it is running well we will implement the whitelisting.  Once this testing phase is done we will install it on the other central PACS servers that are impacted by this issue.&lt;/p&gt;</comment>
                            <comment id="481919" author="tmartyres" created="Wed, 6 Jun 2018 10:50:10 -0400"  >&lt;p&gt;&lt;a href=&quot;https://jira.intelerad.com/secure/ViewProfile.jspa?name=mvilleneuve&quot; class=&quot;user-hover&quot; rel=&quot;mvilleneuve&quot;&gt;Martin Villeneuve&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We are waiting for Max to test the devrpm on one server before we productize this fix as we want to ensure that there are no changes needed and that we have properly solved the client&apos;s issue.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Tara&lt;/p&gt;</comment>
                            <comment id="481922" author="mvilleneuve" created="Wed, 6 Jun 2018 10:54:30 -0400"  >&lt;p&gt;All good, thanks everyone for your help on this, greatly appreciated.&lt;/p&gt;

&lt;p&gt;Martin&lt;/p&gt;</comment>
                            <comment id="482824" author="mfrancisco" created="Wed, 13 Jun 2018 10:01:25 -0400"  >&lt;p&gt;I installed the devrpm on DEPOT13 last night and it worked well.  It has already exhausted the worklist, and there have been no deadlocks in Sybase.  I asked Lorenzo if we could increase the number of processes to 4.  He will cut a new rpm for a version running 4 processes.&lt;/p&gt;</comment>
                            <comment id="482860" author="lorenzo" created="Wed, 13 Jun 2018 12:13:50 -0400"  >&lt;p&gt;I have uploaded the patch and RPMs that implement a 4-process SCEH.&lt;br/&gt;
The RPMs and patch for a 2-process SCEH are still present in case there are issues with this new version.&lt;/p&gt;</comment>
                            <comment id="482931" author="mfrancisco" created="Wed, 13 Jun 2018 15:15:34 -0400"  >&lt;p&gt;I applied the 4 process version to DEPOT14, and it is also working well, with no deadlocks in Sybase.&lt;/p&gt;</comment>
                            <comment id="483136" author="lorenzo" created="Thu, 14 Jun 2018 15:38:42 -0400"  >&lt;p&gt;I have uploaded the patch and RPMs that implement an 8-process SCEH.&lt;br/&gt;
The RPMs and patches for a 2- and 4-process SCEH are still present in case there are issues with this new version.&lt;/p&gt;</comment>
                            <comment id="484121" author="mfrancisco" created="Fri, 22 Jun 2018 14:10:02 -0400"  >&lt;p&gt;I implemented whitelisting on DEPOT13&lt;/p&gt;

&lt;p&gt;I can see it skipping orgs not on the list&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2018-06-22 13:08:36.809 SCEH rdsdepot13.rds.local (TRACE)] Skipping corrections for organization &apos;VDO&apos; since organization whitelist is [ELR, RDS, BLV, CSM, HOP, JIS, OFA, PMI, PQC, PRO, STA, TOA, TOC, WTO, BAP, CLARK, COOK, GAL, HARD, HEND, LEBN, MTWN, MURF, SKY, STONE, CBO, CROSS, LCXRAY, OAK, OAKXRYA, PKSPIN, PWXRAY, REG, REGXRAY, ROB, SEV, WKO] and that code is not a part of it
[2018-06-22 13:08:36.809 SCEH rdsdepot13.rds.local (TRACE)] Skipping corrections for organization &apos;CCS&apos; since organization whitelist is [ELR, RDS, BLV, CSM, HOP, JIS, OFA, PMI, PQC, PRO, STA, TOA, TOC, WTO, BAP, CLARK, COOK, GAL, HARD, HEND, LEBN, MTWN, MURF, SKY, STONE, CBO, CROSS, LCXRAY, OAK, OAKXRYA, PKSPIN, PWXRAY, REG, REGXRAY, ROB, SEV, WKO] and that code is not a part of it
[2018-06-22 13:08:36.809 SCEH rdsdepot13.rds.local (TRACE)] Skipping corrections for organization &apos;SUN&apos; since organization whitelist is [ELR, RDS, BLV, CSM, HOP, JIS, OFA, PMI, PQC, PRO, STA, TOA, TOC, WTO, BAP, CLARK, COOK, GAL, HARD, HEND, LEBN, MTWN, MURF, SKY, STONE, CBO, CROSS, LCXRAY, OAK, OAKXRYA, PKSPIN, PWXRAY, REG, REGXRAY, ROB, SEV, WKO] and that code is not a part of it
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And then for Orgs on the list we see it try to pull a worklist&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2018-06-22 13:08:34.668 SCEH rdsdepot13.rds.local (TRACE)] Checking correction queue for organization &apos;CSM&apos; using MDB on rdschacsmmstd1.rdschacsmm
[2018-06-22 13:08:34.668 SCEH rdsdepot13.rds.local (TRACE)] Creating connection pool to &apos;DicomMaster&apos; on &apos;rdschacsmmstd1.rdschacsmm&apos; (server type &apos;sybase&apos;, login &apos;seriescorrectioneventhandler&apos;)
[2018-06-22 13:08:34.668 SCEH rdsdepot13.rds.local (TRACE)] Retrieving next work item for AE: RDSDEPOT13
[2018-06-22 13:08:34.979 SCEH rdsdepot13.rds.local (TRACE)] Attempting to delete series: 1.2.840.113619.2.369.4.279707905.1529673252.77885 locally.
[2018-06-22 13:08:34.979 SCEH rdsdepot13.rds.local (TRACE)] About to invoke /usr/local/tools/delseriesbyUID.pl using: CommandLauncher[ &apos;sh&apos; &apos;-c&apos; &apos;/usr/local/tools/delseriesbyUID.pl --no_backup --dellocal 1.2.840.113619.2.369.4.279707905.1529673252.77885&amp;gt;/dev/null&apos; ]
[2018-06-22 13:08:36.073 SCEH rdsdepot13.rds.local (TRACE)] Marking series: 1.2.840.113619.2.369.4.279707905.1529673252.77885 with deletion operation as SUCCEEDED
[2018-06-22 13:08:36.153 SCEH rdsdepot13.rds.local (TRACE)] Retrieving next work item for AE: RDSDEPOT13
[2018-06-22 13:08:36.234 SCEH rdsdepot13.rds.local (TRACE)] Nothing found in the database on rdschacsmmstd1.rdschacsmm to work on.  Sleeping for 120 seconds.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So this seems to be working well so far.  Monitoring.&lt;/p&gt;</comment>
                            <comment id="484270" author="mfrancisco" created="Tue, 26 Jun 2018 10:56:30 -0400"  >&lt;p&gt;An issue came up on the weekend where a connection was not going through.  There was a connectivity issue to RDSDB1 that prevented the deletion from happening, but it left the lock active.  What I find odd is that the series shows up in different process logs.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[admin@rdsgtwy2] {/var/log/PACS/SeriesCorrectionEventHandler} find -exec zgrep -l 1.3.6.1.4.1.19179.1.123617721544125240.2.7297.25521 {} \; | xargs -r ls -lt
-rw-rw-r-- 1 admin admin 429632 Jun 26 09:02 ./SCEH_7.log
-rw-rw-r-- 1 admin admin 204098 Jun 26 00:00 ./filed_logs/SCEH_7.log.2.gz
-rw-rw-r-- 1 admin admin 237204 Jun 25 23:30 ./filed_logs/SCEH_5.log.2.gz
-rw-rw-r-- 1 admin admin 196464 Jun 25 21:00 ./filed_logs/SCEH_6.log.2.gz
-rw-rw-r-- 1 admin admin 227194 Jun 25 19:30 ./filed_logs/SCEH_3.log.2.gz
-rw-rw-r-- 1 admin admin 212361 Jun 25 15:30 ./filed_logs/SCEH_7.log.3.gz
-rw-rw-r-- 1 admin admin 234918 Jun 25 14:30 ./filed_logs/SCEH_5.log.3.gz
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Maybe I misunderstood how this works, but this series should only show up in one process log.&lt;/p&gt;</comment>
                            <comment id="484595" author="mfrancisco" created="Wed, 27 Jun 2018 12:21:20 -0400"  >&lt;p&gt;I think I figured it out.  There are multiple Orgs for rdsordblrstd1, but the SeriesCorrectionList table does not store Org information, so when we query rdsordblrstd1&apos;s DicomMaster for corrections it returns everything regardless of Org.  If two Orgs are on the same server but each Org is served by a different SCEH process we can see the same correction show up in more than one process.  This could lead to a race condition if two processes try to delete the same series at the same time.&lt;/p&gt;</comment>
                            <comment id="484984" author="mfrancisco" created="Tue, 3 Jul 2018 09:36:40 -0400"  >&lt;p&gt;Another issue came up when we ran compileControlFiles.  The Org enumerations more than 299 got deleted.  This ended up causing correction problems because the Org enumerations go up to 391.  I added them manually like so&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;for i in {300..391}; do echo &quot;[ORGANIZATION_${i} = (/usr/local/tools/control_files/source/PACS.cfg:ORGANIZATION_${i})]&quot;; done &amp;gt;&amp;gt; SeriesCorrectionEventHandler.cfg
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then ran compileControlFiles again, and the missing Orgs were added back to SCEH&apos;s configuration.&lt;/p&gt;</comment>
                            <comment id="485083" author="lorenzo" created="Tue, 3 Jul 2018 16:39:54 -0400"  >&lt;p&gt;I have uploaded the patch and RPMs that implement an 8-process SCEH that prevents duplicate MDB scanning and redirects 500 organization sections (from 0 to 499).&lt;/p&gt;</comment>
                            <comment id="485172" author="mfrancisco" created="Wed, 4 Jul 2018 11:46:27 -0400"  >&lt;p&gt;I installed the new versions on the servers&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[admin@rdsgtwy2] {/usr/local/Intelerad/etc/kb1190/CHG0040526} for i in {0..7}; do kill_SeriesCorrectionEventHandler_$i.sh; done
Killing 30346
Killing 4786
Killing 24210
Killing 23237
Killing 22994
Killing 23297
Killing 23432
Killing 23115
[admin@rdsgtwy2] {/usr/local/Intelerad/etc/kb1190/CHG0040526} sudo rpm -e SeriesCorrectionEventHandler-4.3.1.P423-ims99.noarch
[admin@rdsgtwy2] {/usr/local/Intelerad/etc/kb1190/CHG0040526} sudo rpm -e SeriesCorrectionEventHandler-Config-4.3.1.P423-ims99
[admin@rdsgtwy2] {/usr/local/Intelerad/etc/kb1190/CHG0040526} sudo rpm -Uvh SeriesCorrectionEventHandler*
Preparing...                ########################################### [100%]
   1:SeriesCorrectionEventHa########################################### [ 50%]
   2:SeriesCorrectionEventHa########################################### [100%]
[admin@rdsgtwy2] {/usr/local/Intelerad/etc/kb1190/CHG0040526} compileControlFiles -m &quot;installed new version of SCEH which adds redirects up to 400 and only visits one Org per server&quot; -a max
wrote 0 file(s), 0 were modified in /usr/local/tools/control_files
[admin@rdsgtwy2] {/usr/local/Intelerad/etc/kb1190/CHG0040526} for i in {0..7}; do run_SeriesCorrectionEventHandler_$i.sh; done
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Checking on DEPOT13 which has whitelisting enabled we see that not only are we skipping the Orgs not on the whitelist&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2018-07-04 10:03:00.065 SCEH rdsdepot13.rds.local (TRACE)] Skipping corrections for organization &apos;GOC&apos; since organization whitelist is [ELR, RDS, BLV, CSM, HOP, JIS, OFA, PMI, PQC, PRO, STA, TOA, TOC, WTO, BAP, CLARK, COOK, GAL, HARD, HEND, LEBN, MTWN, MURF, SKY, STONE, CBO, CROSS, LCXRAY, OAK, OAKXRAY, PKSPIN, PWXRAY, REG, REGXRAY, ROB, SEV, WKO] and that code is not a part of it
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But it is also skipping Orgs if the associated server is already being serviced&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2018-07-04 10:42:06.786 SCEH rdsdepot13.rds.local (TRACE)] Skipping corrections for MDB on rdsbnatoastd1.rdstoa since that MDB has already been processed in the current correction loop or is the responsibility of a different SCEH
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We also see SCEH calculating what MDBs it needs to connect to&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2018-07-04 10:03:00.061 SCEH rdsdepot13.rds.local (TRACE)] Initialized set of processed MDBs for this correction loop to all MDBs handled by SCEH processes with index lower than 1:
[rdsbnatoastd2.rdstoa, rdsmdb1.rds, rdsbnatoastd1.rdstoa, rdsbnapro1std1.rdsbnapro, rdsjaxstaostd2.rdsjaxstao, rdstystocstd2.rdstoc, rdstriwtosstd1.rdstriwtos, rdschacsmmstd1.rdschacsmm, rdstystocstd1.rdstoc, rdsmdb2.rds]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I can also confirm that the Org Enumeration redirects work up to 391 for Org BOS.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[admin@rdsdepot13] {/usr/local/tools/control_files} tail -4 SeriesCorrectionEventHandler.cfg 
[ORGANIZATION_391]
ORGANIZATION_CODE                                = BOS
MDB_HOSTS                                        = rdsaussmmstd1.rdsaussmm, rdsmdb1.rds, rdsmdb2.rds, rdsdb1.rds
PRIMARY_SATELLITE_MDB_HOST                       = rdsaussmmstd1.rdsaussmm
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="486062" author="mfrancisco" created="Thu, 12 Jul 2018 12:16:17 -0400"  >&lt;p&gt;I confirmed with RDS that the newest fix is working well, and they are very happy with the results of this fix.  I would like to extend my compliments to Lorenzo for a job well done.  We can close this ticket.&lt;/p&gt;</comment>
                            <comment id="486340" author="robot-bc-rw" created="Mon, 16 Jul 2018 09:31:46 -0400"  >&lt;p&gt;Released by lorenzo to master at 2018-07-16 09:31:43 (push 68273):&lt;br/&gt;
  PACS-4-3-1 (fix)        (previous build: PACS-4-3-1-P423)&lt;br/&gt;
  PACS-4-3-2 (dummy)      (previous build: PACS-4-3-2-P119)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/278d932b1d27&quot; target=&quot;_blank&quot;&gt;intelepacs:278d932b1d27&lt;/a&gt;  lorenzo     PACS-4-3-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-91982&quot; title=&quot;SeriesCorrectionEventHandler: Fetching of the correction queue needs to be hardened from network failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-91982&quot;&gt;&lt;del&gt;IP-91982&lt;/del&gt;&lt;/a&gt; fix: split SCEH into 8 separate processes for RDS.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/1ae0adbb24b8&quot; target=&quot;_blank&quot;&gt;intelepacs:1ae0adbb24b8&lt;/a&gt;  lorenzo     PACS-4-3-2  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-91982&quot; title=&quot;SeriesCorrectionEventHandler: Fetching of the correction queue needs to be hardened from network failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-91982&quot;&gt;&lt;del&gt;IP-91982&lt;/del&gt;&lt;/a&gt; dummy: dummy merge from PACS-4-3-1&lt;/p&gt;</comment>
                            <comment id="486343" author="lorenzo" created="Mon, 16 Jul 2018 09:40:59 -0400"  >&lt;p&gt;This patch has been tested at intelerad on an RDS test farm as well as on site for a week before being pushed.&lt;/p&gt;</comment>
                            <comment id="486344" author="mvilleneuve" created="Mon, 16 Jul 2018 09:43:10 -0400"  >&lt;p&gt;Hi&lt;/p&gt;

&lt;p&gt;Since this is a fix for 4-3-4, do I need to schedule an FRU?&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Martin&lt;/p&gt;</comment>
                            <comment id="486354" author="lorenzo" created="Mon, 16 Jul 2018 10:26:47 -0400"  >&lt;p&gt;Build&lt;br/&gt;
&lt;a href=&quot;https://forge.intelerad.com/bbot/builders/linux3/builds/191&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://forge.intelerad.com/bbot/builders/linux3/builds/191&lt;/a&gt;&lt;br/&gt;
completed successfully.&lt;/p&gt;</comment>
                            <comment id="486670" author="mvilleneuve" created="Tue, 17 Jul 2018 23:48:48 -0400"  >&lt;p&gt;Hi &lt;br/&gt;
Do I need to do something to get this fix in place at RDS 4-3-4?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;

&lt;p&gt;Martin&lt;/p&gt;</comment>
                            <comment id="486919" author="dvu" created="Thu, 19 Jul 2018 13:41:07 -0400"  >&lt;p&gt;Included in PACS-4-3-4-R38 as update&lt;/p&gt;</comment>
                            <comment id="486936" author="tmartyres" created="Thu, 19 Jul 2018 14:24:53 -0400"  >&lt;p&gt;&lt;a href=&quot;https://jira.intelerad.com/secure/ViewProfile.jspa?name=mvilleneuve&quot; class=&quot;user-hover&quot; rel=&quot;mvilleneuve&quot;&gt;Martin Villeneuve&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The client has a dev RPM in place - however, now that we have the fix released we would urge you to organize an FRU for the client so that the permanent fix is put in place.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Tara&lt;/p&gt;</comment>
                            <comment id="503192" author="robot-bc-rw" created="Thu, 29 Nov 2018 16:55:12 -0500"  >&lt;p&gt;Released by lvu to master at 2018-11-29 16:55:00 (push 70362):&lt;br/&gt;
  PACS-4-14-1 (dummy)      (previous build: PACS-4-14-1-P454)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/f284b39c281f&quot; target=&quot;_blank&quot;&gt;intelepacs:f284b39c281f&lt;/a&gt;  lvu         PACS-4-14-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-91982&quot; title=&quot;SeriesCorrectionEventHandler: Fetching of the correction queue needs to be hardened from network failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-91982&quot;&gt;&lt;del&gt;IP-91982&lt;/del&gt;&lt;/a&gt; dummy,&lt;a href=&quot;https://jira.intelerad.com/browse/BC-4259&quot; title=&quot;Windows build broken since the switch to Python2.7&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BC-4259&quot;&gt;&lt;del&gt;BC-4259&lt;/del&gt;&lt;/a&gt; dummy: dummy merge from PACS-4-12-1&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="44394" name="SeriesCorrectionEventHandler-4.3.1.P423-ims99.noarch.rpm.lorenzo_20180529" size="584949" author="lorenzo" created="Tue, 29 May 2018 17:22:33 -0400"/>
                            <attachment id="44785" name="SeriesCorrectionEventHandler-4.3.1.P423-ims99.noarch.rpm.lorenzo_20180612" size="586090" author="lorenzo" created="Wed, 13 Jun 2018 12:12:02 -0400"/>
                            <attachment id="44843" name="SeriesCorrectionEventHandler-4.3.1.P423-ims99.noarch.rpm.lorenzo_20180614" size="588343" author="lorenzo" created="Thu, 14 Jun 2018 15:37:20 -0400"/>
                            <attachment id="45272" name="SeriesCorrectionEventHandler-4.3.1.P423-ims99.noarch.rpm.lorenzo_20180703" size="590757" author="lorenzo" created="Tue, 3 Jul 2018 16:36:36 -0400"/>
                            <attachment id="44395" name="SeriesCorrectionEventHandler-Config-4.3.1.P423-ims99.noarch.rpm.lorenzo_20180529" size="3173" author="lorenzo" created="Tue, 29 May 2018 17:22:32 -0400"/>
                            <attachment id="44784" name="SeriesCorrectionEventHandler-Config-4.3.1.P423-ims99.noarch.rpm.lorenzo_20180613" size="3174" author="lorenzo" created="Wed, 13 Jun 2018 12:12:02 -0400"/>
                            <attachment id="44842" name="SeriesCorrectionEventHandler-Config-4.3.1.P423-ims99.noarch.rpm.lorenzo_20180614" size="3173" author="lorenzo" created="Thu, 14 Jun 2018 15:37:20 -0400"/>
                            <attachment id="45273" name="SeriesCorrectionEventHandler-Config-4.3.1.P423-ims99.noarch.rpm.lorenzo_20180703" size="3173" author="lorenzo" created="Tue, 3 Jul 2018 16:36:36 -0400"/>
                            <attachment id="44393" name="sceh.patch.lorenzo_20180529" size="54599" author="lorenzo" created="Tue, 29 May 2018 17:22:33 -0400"/>
                            <attachment id="44786" name="sceh_patch.lorenzo_20180613" size="65895" author="lorenzo" created="Wed, 13 Jun 2018 12:12:02 -0400"/>
                            <attachment id="44844" name="sceh_patch.lorenzo_20180614" size="82017" author="lorenzo" created="Thu, 14 Jun 2018 15:37:20 -0400"/>
                            <attachment id="45271" name="sceh_patch.lorenzo_20180703" size="106219" author="lorenzo" created="Tue, 3 Jul 2018 16:36:36 -0400"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12603" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Affected Clients</customfieldname>
                        <customfieldvalues>
                                        <label>RDS</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;h4&gt;&lt;a name=&quot;RPMVersion&quot;&gt;&lt;/a&gt;RPM Version&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;EW%2FISPClient%3A%3Cclientcode%3E&quot;&gt;&lt;/a&gt;EW/ISP - Client : {EW/ISP:xxxx} - &amp;lt;client code&amp;gt;&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;ClinicalImpact&quot;&gt;&lt;/a&gt;Clinical Impact&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce&quot;&gt;&lt;/a&gt;Minimal steps to reproduce&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour&quot;&gt;&lt;/a&gt;Expected behaviour&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F&quot;&gt;&lt;/a&gt;What happened instead?&lt;/h4&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10600" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>IP-88920</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13386"><![CDATA[SeriesCorrectionEventHandler]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzdkpz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11908" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Impact info</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>SCEH now has 8 different run_ and kill_ scripts as well as ipmon plugins. The default run_SeriesCorrectionEventHandler.sh and kill_SeriesCorrectionEventHandler.sh are gone so, depending on how the upgrade is performed, the old SCEH process might require a manual kill.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11001" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>ServiceNow Case #</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>CS0031165</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13402" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>ServiceNow Problem #</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>PRB0041038</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10804"><![CDATA[INTERNAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="1562">Cloud PACS Sprint 17</customfieldvalue>
    <customfieldvalue id="1583">Cloud PACS Sprint 18</customfieldvalue>
    <customfieldvalue id="1605">Cloud PACS Sprint 19</customfieldvalue>
    <customfieldvalue id="1622">Cloud PACS Sprint 20</customfieldvalue>
    <customfieldvalue id="1639">Cloud PACS Sprint 21</customfieldvalue>
    <customfieldvalue id="1660">Cloud PACS Sprint 22</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:float">
                        <customfieldname>Story Points</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-84741] DMS: Update globaldicom schema to increase the statistics bucket size for request_attrs.request_id</title>
                <link>https://jira.intelerad.com/browse/IP-84741</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;h4&gt;&lt;a name=&quot;RPMVersion&quot;&gt;&lt;/a&gt;RPM Version&lt;/h4&gt;
&lt;p&gt;Database-GlobalDicom-4.9.1.P295-ims01.noarch&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;EWClient%3AEW570413VANTP&quot;&gt;&lt;/a&gt;EW - Client : EW570413- VANTP&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce%3A&quot;&gt;&lt;/a&gt;Minimal steps to reproduce:&lt;/h4&gt;

&lt;p&gt;None, this is a performance enhancement&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour&quot;&gt;&lt;/a&gt;Expected behaviour&lt;/h4&gt;
&lt;p&gt;N/A&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F&quot;&gt;&lt;/a&gt;What happened instead?&lt;/h4&gt;
&lt;p&gt;N/A&lt;/p&gt;</description>
            <key id="125074">IP-84741</key>
            <summary>DMS: Update globaldicom schema to increase the statistics bucket size for request_attrs.request_id</summary>
                <type id="10905" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13911&amp;avatarType=issuetype">Enhancement</type>
                                            <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="ebelardo">Emil Belardo</assignee>
                                    <reporter username="nselvadurai">Niel Selvadurai</reporter>
                        <labels>
                            <label>Anjou</label>
                            <label>IM_maint</label>
                            <label>KB1190</label>
                    </labels>
                <created>Fri, 22 Sep 2017 12:05:45 -0400</created>
                <updated>Mon, 25 Mar 2019 14:04:39 -0400</updated>
                            <resolved>Fri, 17 Nov 2017 15:55:00 -0500</resolved>
                                    <version>4-9-1</version>
                                    <fixVersion>4-9-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                    <timeoriginalestimate seconds="0">0 minutes</timeoriginalestimate>
                                    <timespent seconds="504000">3 weeks, 2 days, 4 hours</timespent>
                                <comments>
                            <comment id="450491" author="nselvadurai" created="Fri, 22 Sep 2017 12:08:28 -0400"  >&lt;p&gt;At VANTP, we set the statistics bucket to 1000 with the following SQL:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ALTER TABLE request_attrs ALTER COLUMN request_id SET STATISTICS 1000;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="450893" author="tmartyres" created="Mon, 25 Sep 2017 16:13:45 -0400"  >&lt;p&gt;Hi &lt;a href=&quot;https://jira.intelerad.com/secure/ViewProfile.jspa?name=nselvadurai&quot; class=&quot;user-hover&quot; rel=&quot;nselvadurai&quot;&gt;Niel Selvadurai&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please provide feedback on how things are going post change?&lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Tara&lt;/p&gt;</comment>
                            <comment id="451225" author="nselvadurai" created="Wed, 27 Sep 2017 14:34:00 -0400"  >&lt;p&gt;Hi &lt;a href=&quot;https://jira.intelerad.com/secure/ViewProfile.jspa?name=tmartyres&quot; class=&quot;user-hover&quot; rel=&quot;tmartyres&quot;&gt;Tara Martyres&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So things are a lot better, and I have not heard any further complaints. &lt;/p&gt;

&lt;p&gt;Compared to previous delays in PENDING request age at the 0500 PDT timeslot:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[2017-09-21 04:22:26.188 check_queue_pending_dcdrequests_age vhascrsqltrmdb1.vantp {6627}] max age of PENDING rows in GlobalDicom.requests is 2 minutes
[2017-09-21 04:26:34.254 check_queue_pending_dcdrequests_age vhascrsqltrmdb1.vantp {11606}] max age of PENDING rows in GlobalDicom.requests is 5 minutes
[2017-09-21 04:30:42.744 check_queue_pending_dcdrequests_age vhascrsqltrmdb1.vantp {8062}] max age of PENDING rows in GlobalDicom.requests is 7 minutes
[2017-09-21 04:34:52.189 check_queue_pending_dcdrequests_age vhascrsqltrmdb1.vantp {6573}] max age of PENDING rows in GlobalDicom.requests is 10 minutes
[2017-09-21 04:38:59.983 check_queue_pending_dcdrequests_age vhascrsqltrmdb1.vantp {6317}] max age of PENDING rows in GlobalDicom.requests is 13 minutes
[2017-09-21 04:43:07.413 check_queue_pending_dcdrequests_age vhascrsqltrmdb1.vantp {5441}] max age of PENDING rows in GlobalDicom.requests is 16 minutes
[2017-09-21 04:47:15.425 check_queue_pending_dcdrequests_age vhascrsqltrmdb1.vantp {5584}] max age of PENDING rows in GlobalDicom.requests is 18 minutes
[2017-09-21 04:51:23.263 check_queue_pending_dcdrequests_age vhascrsqltrmdb1.vantp {6210}] max age of PENDING rows in GlobalDicom.requests is 21 minutes
[2017-09-21 04:55:30.638 check_queue_pending_dcdrequests_age vhascrsqltrmdb1.vantp {6817}] max age of PENDING rows in GlobalDicom.requests is 23 minutes
[2017-09-21 04:59:38.594 check_queue_pending_dcdrequests_age vhascrsqltrmdb1.vantp {8910}] max age of PENDING rows in GlobalDicom.requests is 26 minutes
[2017-09-21 05:03:46.147 check_queue_pending_dcdrequests_age vhascrsqltrmdb1.vantp {13621}] max age of PENDING rows in GlobalDicom.requests is 28 minutes
[2017-09-21 05:07:55.457 check_queue_pending_dcdrequests_age vhascrsqltrmdb1.vantp {15604}] max age of PENDING rows in GlobalDicom.requests is 30 minutes
[2017-09-21 05:12:03.769 check_queue_pending_dcdrequests_age vhascrsqltrmdb1.vantp {15476}] max age of PENDING rows in GlobalDicom.requests is 33 minutes
[2017-09-21 05:16:10.906 check_queue_pending_dcdrequests_age vhascrsqltrmdb1.vantp {13026}] max age of PENDING rows in GlobalDicom.requests is 35 minutes
[2017-09-21 05:20:18.708 check_queue_pending_dcdrequests_age vhascrsqltrmdb1.vantp {10119}] max age of PENDING rows in GlobalDicom.requests is 38 minutes
[2017-09-21 05:24:26.266 check_queue_pending_dcdrequests_age vhascrsqltrmdb1.vantp {20621}] max age of PENDING rows in GlobalDicom.requests is 40 minutes
[2017-09-21 05:28:33.296 check_queue_pending_dcdrequests_age vhascrsqltrmdb1.vantp {17181}] max age of PENDING rows in GlobalDicom.requests is 41 minutes
[2017-09-21 05:32:39.938 check_queue_pending_dcdrequests_age vhascrsqltrmdb1.vantp {13244}] max age of PENDING rows in GlobalDicom.requests is 42 minutes
[2017-09-21 05:36:47.042 check_queue_pending_dcdrequests_age vhascrsqltrmdb1.vantp {16943}] max age of PENDING rows in GlobalDicom.requests is 43 minutes
[2017-09-21 05:40:54.293 check_queue_pending_dcdrequests_age vhascrsqltrmdb1.vantp {19066}] max age of PENDING rows in GlobalDicom.requests is 44 minutes
[2017-09-21 05:45:01.855 check_queue_pending_dcdrequests_age vhascrsqltrmdb1.vantp {22106}] max age of PENDING rows in GlobalDicom.requests is 44 minutes
[2017-09-21 05:49:09.341 check_queue_pending_dcdrequests_age vhascrsqltrmdb1.vantp {27281}] max age of PENDING rows in GlobalDicom.requests is 42 minutes
[2017-09-21 05:53:16.647 check_queue_pending_dcdrequests_age vhascrsqltrmdb1.vantp {33976}] max age of PENDING rows in GlobalDicom.requests is 33 minutes
[2017-09-21 05:57:24.381 check_queue_pending_dcdrequests_age vhascrsqltrmdb1.vantp {37628}] max age of PENDING rows in GlobalDicom.requests is 21 minutes
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We&apos;ve reduced dramatically:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[2017-09-24 04:53:00.188 check_queue_pending_dcdrequests_age vhascrsqltrmdb1.vantp {54481}] max age of PENDING rows in GlobalDicom.requests is 2 minutes
[2017-09-26 04:29:42.326 check_queue_pending_dcdrequests_age vhascrsqltrmdb1.vantp {41010}] max age of PENDING rows in GlobalDicom.requests is 1 minutes
[2017-09-26 04:33:50.031 check_queue_pending_dcdrequests_age vhascrsqltrmdb1.vantp {48252}] max age of PENDING rows in GlobalDicom.requests is 1 minutes
[2017-09-26 04:37:57.773 check_queue_pending_dcdrequests_age vhascrsqltrmdb1.vantp {53810}] max age of PENDING rows in GlobalDicom.requests is 1 minutes
[2017-09-26 04:42:04.599 check_queue_pending_dcdrequests_age vhascrsqltrmdb1.vantp {57521}] max age of PENDING rows in GlobalDicom.requests is 1 minutes
[2017-09-26 04:46:11.709 check_queue_pending_dcdrequests_age vhascrsqltrmdb1.vantp {63526}] max age of PENDING rows in GlobalDicom.requests is 1 minutes
[2017-09-27 04:32:28.190 check_queue_pending_dcdrequests_age vhascrsqltrmdb1.vantp {65258}] max age of PENDING rows in GlobalDicom.requests is 1 minutes
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, the above fix was not placed in isolation; Dave requested we do the following at the same time:&lt;/p&gt;

&lt;p&gt;1 - Stagger the runtime of the cronjobs for diskmon cleanup&lt;br/&gt;
2 - Stop localDbBackups (although I&apos;ve only turned off IheAuditingDB as it takes the most time and runs into our timeslot)&lt;/p&gt;

&lt;p&gt;I believe point 1 would have made the biggest difference, but considering there&apos;s little to no delays throughout the entire day, I think it&apos;s very possible that the bigger statistics bucket is contributing significantly as well. The accuracy of the query plan has increased by a level of magnitude in terms of expected rows returned:&lt;/p&gt;

&lt;p&gt;Before the ALTER TABLE:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[2017-09-22 02:02:41]                                                                                     QUERY PLAN                                                                                    
[2017-09-22 02:02:41] ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
[2017-09-22 02:02:41]  Sort  (cost=66983.58..67421.52 rows=175177 width=152) (actual time=19.788..19.799 rows=74 loops=1)
[2017-09-22 02:02:41]    Sort Key: r.request_timestamp_as_epoch, r.request_id
[2017-09-22 02:02:41]    Sort Method: quicksort  Memory: 36kB
[2017-09-22 02:02:41]    Buffers: shared hit=128 read=28
[2017-09-22 02:02:41]    CTE interestingtarget
[2017-09-22 02:02:41]      -&amp;gt;  Limit  (cost=0.30..0.46 rows=1 width=60) (actual time=19.439..19.439 rows=1 loops=1)
[2017-09-22 02:02:41]            Buffers: shared hit=84 read=28
[2017-09-22 02:02:41]            -&amp;gt;  Result  (cost=0.30..0.62 rows=2 width=60) (actual time=19.437..19.437 rows=1 loops=1)
[2017-09-22 02:02:41]                  Buffers: shared hit=84 read=28
[2017-09-22 02:02:41]                  -&amp;gt;  Merge Append  (cost=0.30..0.62 rows=2 width=60) (actual time=19.434..19.434 rows=1 loops=1)
[2017-09-22 02:02:41]                        Sort Key: r.request_timestamp_as_epoch
[2017-09-22 02:02:41]                        Buffers: shared hit=84 read=28
[2017-09-22 02:02:41]                        -&amp;gt;  Limit  (cost=0.00..0.27 rows=1 width=60) (actual time=0.052..0.052 rows=1 loops=1)
[2017-09-22 02:02:41]                              Buffers: shared hit=2 read=3
[2017-09-22 02:02:41]                              -&amp;gt;  Index Scan using request_timestamp_idx on requests r  (cost=0.00..16682.39 rows=60827 width=60) (actual time=0.052..0.052 rows=1 loops=1)
[2017-09-22 02:02:41]             psql:pg_bucketsize_update.sql:25: WARNING:  skipping &lt;span class=&quot;code-quote&quot;&gt;&quot;requests&quot;&lt;/span&gt; --- only table or database owner can vacuum it
psql:pg_bucketsize_update.sql:26: WARNING:  skipping &lt;span class=&quot;code-quote&quot;&gt;&quot;request_attrs&quot;&lt;/span&gt; --- only table or database owner can vacuum it
                       Filter: ((type)::text &amp;lt;&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;MOVE_REQUEST&apos;&lt;/span&gt;::text)
[2017-09-22 02:02:41]                                    Buffers: shared hit=2 read=3
[2017-09-22 02:02:41]                        -&amp;gt;  Sort  (cost=0.29..0.30 rows=1 width=60) (actual time=19.380..19.380 rows=0 loops=1)
[2017-09-22 02:02:41]                              Sort Key: oldestfailed.request_timestamp_as_epoch
[2017-09-22 02:02:41]                              Sort Method: quicksort  Memory: 17kB
[2017-09-22 02:02:41]                              Buffers: shared hit=82 read=25
[2017-09-22 02:02:41]                              -&amp;gt;  Subquery Scan on oldestfailed  (cost=0.00..0.28 rows=1 width=60) (actual time=19.375..19.375 rows=0 loops=1)
[2017-09-22 02:02:41]                                    Buffers: shared hit=82 read=25
[2017-09-22 02:02:41]                                    -&amp;gt;  Limit  (cost=0.00..0.27 rows=1 width=68) (actual time=19.373..19.373 rows=0 loops=1)
[2017-09-22 02:02:41]                                          Buffers: shared hit=82 read=25
[2017-09-22 02:02:41]                                          -&amp;gt;  Index Scan using work_order_idx on requests r  (cost=0.00..16642.41 rows=60821 width=68) (actual time=19.372..19.372 rows=0 loops=1)
[2017-09-22 02:02:41]                                                Index Cond: (work_order_timestamp &amp;lt;= &lt;span class=&quot;code-quote&quot;&gt;&apos;2017-09-20 06:03:29.706-07&apos;&lt;/span&gt;::timestamp with time zone)
[2017-09-22 02:02:41]                                                Filter: ((type)::text &amp;lt;&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;MOVE_REQUEST&apos;&lt;/span&gt;::text)
[2017-09-22 02:02:41]                                                Buffers: shared hit=82 read=25
[2017-09-22 02:02:41]    CTE workrequests
[2017-09-22 02:02:41]      -&amp;gt;  Nested Loop  (cost=0.00..800.48 rows=137 width=112) (actual time=19.588..19.599 rows=7 loops=1)
[2017-09-22 02:02:41]            Buffers: shared hit=93 read=28
[2017-09-22 02:02:41]            -&amp;gt;  CTE Scan on interestingtarget t  (cost=0.00..0.02 rows=1 width=32) (actual time=19.444..19.445 rows=1 loops=1)
[2017-09-22 02:02:41]                  Buffers: shared hit=84 read=28
[2017-09-22 02:02:41]            -&amp;gt;  Index Scan using requests_target_full_idx on requests r  (cost=0.00..799.09 rows=137 width=112) (actual time=0.132..0.139 rows=7 loops=1)
[2017-09-22 02:02:41]                  Index Cond: ((target)::text = (t.target)::text)
[2017-09-22 02:02:41]                  Filter: ((type)::text &amp;lt;&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;MOVE_REQUEST&apos;&lt;/span&gt;::text)
[2017-09-22 02:02:41]                  Buffers: shared hit=9
[2017-09-22 02:02:41]    -&amp;gt;  Nested Loop Left Join  (cost=0.00..24578.08 *rows=175177* width=152) (actual time=19.610..19.715 rows=74 loops=1)
[2017-09-22 02:02:41]          Buffers: shared hit=128 read=28
[2017-09-22 02:02:41]          -&amp;gt;  CTE Scan on workrequests r  (cost=0.00..2.74 rows=137 width=134) (actual time=19.592..19.616 rows=7 loops=1)
[2017-09-22 02:02:41]                Buffers: shared hit=93 read=28
[2017-09-22 02:02:41]          -&amp;gt;  Index Scan using request_attrs_pk on request_attrs c  (cost=0.00..166.59 rows=1279 width=26) (actual time=0.005..0.009 rows=11 loops=7)
[2017-09-22 02:02:41]                Index Cond: (r.request_id = request_id)
[2017-09-22 02:02:41]                Buffers: shared hit=35
[2017-09-22 02:02:41]  Total runtime: 19.935 ms
[2017-09-22 02:02:41] (46 rows)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After the ALTER TABLE:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[2017-09-22 04:33:16]                                                                                          QUERY PLAN                                                                                         
[2017-09-22 04:33:16] --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
[2017-09-22 04:33:16]  Sort  (cost=21166.28..21220.01 rows=21493 width=152) (actual time=81.097..81.127 rows=202 loops=1)
[2017-09-22 04:33:16]    Sort Key: r.request_timestamp_as_epoch, r.request_id
[2017-09-22 04:33:16]    Sort Method: quicksort  Memory: 69kB
[2017-09-22 04:33:16]    Buffers: shared hit=665 read=2982 dirtied=2452 written=1805
[2017-09-22 04:33:16]    CTE interestingtarget
[2017-09-22 04:33:16]      -&amp;gt;  Limit  (cost=8.34..12.49 rows=1 width=60) (actual time=79.667..79.667 rows=1 loops=1)
[2017-09-22 04:33:16]            Buffers: shared hit=545 read=2891 dirtied=2452 written=1734
[2017-09-22 04:33:16]            -&amp;gt;  Result  (cost=8.34..16.65 rows=2 width=60) (actual time=79.666..79.666 rows=1 loops=1)
[2017-09-22 04:33:16]                  Buffers: shared hit=545 read=2891 dirtied=2452 written=1734
[2017-09-22 04:33:16]                  -&amp;gt;  Merge Append  (cost=8.34..16.65 rows=2 width=60) (actual time=79.665..79.665 rows=1 loops=1)
[2017-09-22 04:33:16]                        Sort Key: r.request_timestamp_as_epoch
[2017-09-22 04:33:16]                        Buffers: shared hit=545 read=2891 dirtied=2452 written=1734
[2017-09-22 04:33:16]                        -&amp;gt;  Limit  (cost=0.00..8.27 rows=1 width=60) (actual time=78.332..78.332 rows=1 loops=1)
[2017-09-22 04:33:16]                              Buffers: shared hit=544 read=2732 dirtied=2452 written=1659
[2017-09-22 04:33:16]                              -&amp;gt;  Index Scan using request_timestamp_idx on requests r  (cost=0.00..8.27 rows=1 width=60) (actual time=78.331..78.331 rows=1 loops=1)
[2017-09-22 04:33:16]                                    Filter: ((type)::text &amp;lt;&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;MOVE_REQUEST&apos;&lt;/span&gt;::text)
[2017-09-22 04:33:16]                                    Buffers: shared hit=544 read=2732 dirtied=2452 written=1659
[2017-09-22 04:33:16]                        -&amp;gt;  Sort  (cost=8.33..8.33 rows=1 width=60) (actual time=1.331..1.331 rows=0 loops=1)
[2017-09-22 04:33:16]                              Sort Key: oldestfailed.request_timestamp_as_epoch
[2017-09-22 04:33:16]                              Sort Method: quicksort  Memory: 17kB
[2017-09-22 04:33:16]                              Buffers: shared hit=1 read=159 written=75
[2017-09-22 04:33:16]                              -&amp;gt;  Subquery Scan on oldestfailed  (cost=8.30..8.32 rows=1 width=60) (actual time=1.312..1.312 rows=0 loops=1)
[2017-09-22 04:33:16]                                    Buffers: shared hit=1 read=159 written=75
[2017-09-22 04:33:16]                                    -&amp;gt;  Limit  (cost=8.30..8.31 rows=1 width=68) (actual time=1.311..1.311 rows=0 loops=1)
[2017-09-22 04:33:16]                                          Buffers: shared hit=1 read=159 written=75
[2017-09-22 04:33:16]                                          -&amp;gt;  Sort  (cost=8.30..8.31 rows=1 width=68) (actual time=1.309..1.309 rows=0 loops=1)
[2017-09-22 04:33:16]                                                Sort Key: r.work_order_timestamp
[2017-09-22 04:33:16]                                                Sort Method: quicksort  Memory: 17kB
[2017-09-22 04:33:16]                                                Buffers: shared hit=1 read=159 written=75
[2017-09-22 04:33:16]                                                -&amp;gt;  Index Scan using requests_status_not_done_idx on requests r  (cost=0.00..8.29 rows=1 width=68) (actual time=1.264..1.264 rows=0 loops=1)
[2017-09-22 04:33:16]                                                      Index Cond: ((status)::text = &lt;span class=&quot;code-quote&quot;&gt;&apos;FAILED&apos;&lt;/span&gt;::text)
[2017-09-22 04:33:16]                                                      Filter: (((type)::text &amp;lt;&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;MOVE_REQUEST&apos;&lt;/span&gt;::text) AND (work_order_timestamp &amp;lt;= &lt;span class=&quot;code-quote&quot;&gt;&apos;2017-09-20 06:03:29.706-07&apos;&lt;/span&gt;::timestamp with time zone))
[2017-09-22 04:33:16]                                                      Rows Removed by Filter: 625
[2017-09-22 04:33:16]                                                      Buffers: shared hit=1 read=156 written=74
[2017-09-22 04:33:16]    CTE workrequests
[2017-09-22 04:33:16]      -&amp;gt;  Nested Loop  (cost=0.00..939.73 rows=165 width=112) (actual time=79.787..80.054 rows=35 loops=1)
[2017-09-22 04:33:16]            Buffers: shared hit=549 read=2922 dirtied=2452 written=1758
[2017-09-22 04:33:16]            -&amp;gt;  CTE Scan on interestingtarget t  (cost=0.00..0.02 rows=1 width=32) (actual time=79.669..79.670 rows=1 loops=1)
[2017-09-22 04:33:16]                  Buffers: shared hit=545 read=2891 dirtied=2452 written=1734
[2017-09-22 04:33:16]            -&amp;gt;  Index Scan using requests_target_full_idx on requests r  (cost=0.00..938.06 rows=165 width=112) (actual time=0.110..0.352 rows=35 loops=1)
[2017-09-22 04:33:16]                  Index Cond: ((target)::text = (t.target)::text)
[2017-09-22 04:33:16]                  Filter: ((type)::text &amp;lt;&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;MOVE_REQUEST&apos;&lt;/span&gt;::text)
[2017-09-22 04:33:16]                  Buffers: shared hit=4 read=31 written=24
[2017-09-22 04:33:16]    -&amp;gt;  Nested Loop Left Join  (cost=0.00..17050.46 *rows=21493* width=152) (actual time=79.819..80.890 rows=202 loops=1)
[2017-09-22 04:33:16]          Buffers: shared hit=665 read=2982 dirtied=2452 written=1805
[2017-09-22 04:33:16]          -&amp;gt;  CTE Scan on workrequests r  (cost=0.00..3.30 rows=165 width=134) (actual time=79.789..80.097 rows=35 loops=1)
[2017-09-22 04:33:16]                Buffers: shared hit=549 read=2922 dirtied=2452 written=1758
[2017-09-22 04:33:16]          -&amp;gt;  Index Scan using request_attrs_pk on request_attrs c  (cost=0.00..102.02 rows=130 width=26) (actual time=0.017..0.019 rows=6 loops=35)
[2017-09-22 04:33:16]                Index Cond: (r.request_id = request_id)
[2017-09-22 04:33:16]                Buffers: shared hit=116 read=60 written=47
[2017-09-22 04:33:16]  Total runtime: 81.248 ms
[2017-09-22 04:33:16] (51 rows)
[2017-09-22 04:33:16] 
[2017-09-22 04:33:16] Time: 83.149 ms
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Total runtime is still pretty similar, but I think accuracy with rows returned still means the query planner is closer to finding the perfect execution plan. Actual rows returned is still 200, so we can likely stand a further increase past 1000 at R&amp;amp;D&apos;s discretion.&lt;/p&gt;

&lt;p&gt;and finally, for completion, this is the SQL run that gives us the above explain:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
explain (analyze, buffers) WITH workRequests AS (
            SELECT r.status, r.request_id, owner_pacs_id, owner_server_id, owner_app_id, scoped_seq_num, request_timestamp_as_epoch, r.target, type, requester_app_id, requester_server_id, COALESCE(num_executions                      
,0) as num_executions FROM requests r
              WHERE r.target = &lt;span class=&quot;code-quote&quot;&gt;&apos;1.2.392.200036.9116.2.5.1.48.1215428256.1238987739.73610&apos;&lt;/span&gt;
                AND r.type != &lt;span class=&quot;code-quote&quot;&gt;&apos;MOVE_REQUEST&apos;&lt;/span&gt;
        )
        SELECT r.*, c.attr_id, c.value FROM workRequests r LEFT OUTER JOIN request_attrs c ON r.request_id = c.request_id ORDER BY r.request_timestamp_as_epoch , r.request_id;

explain (analyze,buffers) WITH interestingTarget AS (
          SELECT target FROM (  SELECT * FROM ( SELECT r.target, r.request_timestamp_as_epoch FROM requests r
             WHERE type != &lt;span class=&quot;code-quote&quot;&gt;&apos;MOVE_REQUEST&apos;&lt;/span&gt;
               AND status = &lt;span class=&quot;code-quote&quot;&gt;&apos;PENDING&apos;&lt;/span&gt; ORDER BY request_timestamp_as_epoch LIMIT 1 ) AS oldestPending  UNION ALL
           SELECT * FROM ( SELECT r.target, r.request_timestamp_as_epoch from requests r
             WHERE type != &lt;span class=&quot;code-quote&quot;&gt;&apos;MOVE_REQUEST&apos;&lt;/span&gt;
               AND r.work_order_timestamp &amp;lt;= &lt;span class=&quot;code-quote&quot;&gt;&apos;2017-09-20 06:03:29.706&apos;&lt;/span&gt;
               AND r.status = &lt;span class=&quot;code-quote&quot;&gt;&apos;FAILED&apos;&lt;/span&gt; ORDER BY work_order_timestamp LIMIT 1 ) AS oldestFailed
         ) AS allCandidates ORDER BY request_timestamp_as_epoch LIMIT 1
        ), workRequests AS (
            SELECT r.status, r.request_id, owner_pacs_id, owner_server_id, owner_app_id, scoped_seq_num, request_timestamp_as_epoch, r.target, type, requester_app_id, requester_server_id, COALESCE(num_executions,0) as num_executions FROM requests r, interestingTarget t
              WHERE r.target = t.target
                AND r.type != &lt;span class=&quot;code-quote&quot;&gt;&apos;MOVE_REQUEST&apos;&lt;/span&gt;
        )
        SELECT r.*, c.attr_id, c.value FROM workRequests r LEFT OUTER JOIN request_attrs c ON r.request_id = c.request_id ORDER BY r.request_timestamp_as_epoch , r.request_id;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Apologies for the ugliness of the above; I took it right out of a log file and did not fix the whitespace.&lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Niel&lt;/p&gt;</comment>
                            <comment id="451696" author="tmartyres" created="Mon, 2 Oct 2017 11:45:12 -0400"  >&lt;p&gt;As discussed, please speak to &lt;a href=&quot;https://jira.intelerad.com/secure/ViewProfile.jspa?name=mat&quot; class=&quot;user-hover&quot; rel=&quot;mat&quot;&gt;Mathew Kanner&lt;/a&gt; before working on this issue &lt;a href=&quot;https://jira.intelerad.com/secure/ViewProfile.jspa?name=ebelardo&quot; class=&quot;user-hover&quot; rel=&quot;ebelardo&quot;&gt;Emil Belardo&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="452982" author="ebelardo" created="Thu, 12 Oct 2017 11:18:33 -0400"  >&lt;p&gt;As discussed by Mat and Niel, another round of testing is required to isolate the effect on the query plan of changing the statistics bucket as the initial test coincided with additional changes.&lt;/p&gt;

&lt;p&gt;Specific to the second query plan, there is a concern about the increased I/O compared to the first query plan.&lt;/p&gt;</comment>
                            <comment id="452994" author="nselvadurai" created="Thu, 12 Oct 2017 11:45:15 -0400"  >&lt;p&gt;Conducting the same alter table at IMED&apos;s imedpdnswmdb01 server.&lt;/p&gt;

&lt;p&gt;Under the original statistics bucket size of 100, the explain shows the following query plan:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
                                                                                    QUERY PLAN
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Sort  (cost=105929.11..106900.52 rows=388566 width=152) (actual time=0.043..0.043 rows=0 loops=1)
   Sort Key: r.request_timestamp_as_epoch, r.request_id
   Sort Method: quicksort  Memory: 17kB
   Buffers: shared hit=6
   CTE interestingtarget
     -&amp;gt;  Limit  (cost=10.78..10.79 rows=1 width=44) (actual time=0.031..0.031 rows=0 loops=1)
           Buffers: shared hit=6
           -&amp;gt;  Sort  (cost=10.78..10.79 rows=2 width=44) (actual time=0.030..0.030 rows=0 loops=1)
                 Sort Key: r_1.request_timestamp_as_epoch
                 Sort Method: quicksort  Memory: 17kB
                 Buffers: shared hit=6
                 -&amp;gt;  Append  (cost=8.84..10.77 rows=2 width=44) (actual time=0.024..0.024 rows=0 loops=1)
                       Buffers: shared hit=6
                       -&amp;gt;  Limit  (cost=8.84..8.84 rows=1 width=44) (actual time=0.020..0.020 rows=0 loops=1)
                             Buffers: shared hit=5
                             -&amp;gt;  Sort  (cost=8.84..8.85 rows=5 width=44) (actual time=0.020..0.020 rows=0 loops=1)
                                   Sort Key: r_1.request_timestamp_as_epoch
                                   Sort Method: quicksort  Memory: 17kB
                                   Buffers: shared hit=5
                                   -&amp;gt;  Index Scan using requests_status_not_done_idx on requests r_1  (cost=0.42..8.81 rows=5 width=44) (actual time=0.013..0.013 rows=0 loops=1)
                                         Index Cond: ((status)::text = &lt;span class=&quot;code-quote&quot;&gt;&apos;PENDING&apos;&lt;/span&gt;::text)
                                         Filter: ((type)::text &amp;lt;&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;MOVE_REQUEST&apos;&lt;/span&gt;::text)
                                         Buffers: shared hit=5
                       -&amp;gt;  Subquery Scan on oldestfailed  (cost=0.14..1.92 rows=1 width=44) (actual time=0.004..0.004 rows=0 loops=1)
                             Buffers: shared hit=1
                             -&amp;gt;  Limit  (cost=0.14..1.91 rows=1 width=52) (actual time=0.003..0.003 rows=0 loops=1)
                                   Buffers: shared hit=1
                                   -&amp;gt;  Index Scan using work_order_idx on requests r_2  (cost=0.14..8.98 rows=5 width=52) (actual time=0.002..0.002 rows=0 loops=1)
                                         Index Cond: (work_order_timestamp &amp;lt;= &lt;span class=&quot;code-quote&quot;&gt;&apos;2017-09-20 06:03:29.706+10&apos;&lt;/span&gt;::timestamp with time zone)
                                         Filter: ((type)::text &amp;lt;&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;MOVE_REQUEST&apos;&lt;/span&gt;::text)
                                         Buffers: shared hit=1
   CTE workrequests
     -&amp;gt;  Nested Loop  (cost=0.57..744.74 rows=211 width=99) (actual time=0.032..0.032 rows=0 loops=1)
           Buffers: shared hit=6
           -&amp;gt;  CTE Scan on interestingtarget t  (cost=0.00..0.02 rows=1 width=32) (actual time=0.032..0.032 rows=0 loops=1)
                 Buffers: shared hit=6
           -&amp;gt;  Index Scan using requests_target_full_idx on requests r_3  (cost=0.57..742.61 rows=211 width=99) (never executed)
                 Index Cond: ((target)::text = (t.target)::text)
                 Filter: ((type)::text &amp;lt;&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;MOVE_REQUEST&apos;&lt;/span&gt;::text)
   -&amp;gt;  Nested Loop Left Join  (cost=0.12..39878.01 rows=388566 width=152) (actual time=0.034..0.034 rows=0 loops=1)
         Buffers: shared hit=6
         -&amp;gt;  CTE Scan on workrequests r  (cost=0.00..4.22 rows=211 width=134) (actual time=0.033..0.033 rows=0 loops=1)
               Buffers: shared hit=6
         -&amp;gt;  Append  (cost=0.12..170.28 rows=1870 width=26) (never executed)
               -&amp;gt;  Index Scan using request_attrs_request_id_idx on request_attrs c  (cost=0.12..0.18 rows=1 width=44) (never executed)
                     Index Cond: (r.request_id = request_id)
               -&amp;gt;  Index Scan using request_attrs_pk on request_attrs_partition_123825777 c_1  (cost=0.58..86.67 rows=1442 width=26) (never executed)
                     Index Cond: (r.request_id = request_id)
               -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx on request_attrs_partition_128878332 c_2  (cost=0.44..9.47 rows=59 width=27) (never executed)
                     Index Cond: (r.request_id = request_id)
               -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx1 on request_attrs_partition_132983063 c_3  (cost=0.44..9.24 rows=46 width=27) (never executed)
                     Index Cond: (r.request_id = request_id)
               -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx2 on request_attrs_partition_136944225 c_4  (cost=0.44..9.33 rows=51 width=26) (never executed)
                     Index Cond: (r.request_id = request_id)
               -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx3 on request_attrs_partition_141131309 c_5  (cost=0.44..9.28 rows=48 width=27) (never executed)
                     Index Cond: (r.request_id = request_id)
               -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx4 on request_attrs_partition_145360853 c_6  (cost=0.44..9.23 rows=45 width=27) (never executed)
                     Index Cond: (r.request_id = request_id)
               -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx5 on request_attrs_partition_149512848 c_7  (cost=0.44..9.26 rows=47 width=27) (never executed)
                     Index Cond: (r.request_id = request_id)
               -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx6 on request_attrs_partition_153765189 c_8  (cost=0.44..9.21 rows=44 width=27) (never executed)
                     Index Cond: (r.request_id = request_id)
               -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx7 on request_attrs_partition_157989391 c_9  (cost=0.44..9.26 rows=47 width=27) (never executed)
                     Index Cond: (r.request_id = request_id)
               -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx8 on request_attrs_partition_current c_10  (cost=0.44..9.14 rows=40 width=26) (never executed)
                     Index Cond: (r.request_id = request_id)
 Planning time: 1.118 ms
 Execution time: 0.235 ms
(68 rows)

Time: 2.198 ms
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And after the ALTER and ANALYZE:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
                                                                                    QUERY PLAN
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Sort  (cost=46496.48..46593.29 rows=38724 width=152) (actual time=0.029..0.029 rows=0 loops=1)
   Sort Key: r.request_timestamp_as_epoch, r.request_id
   Sort Method: quicksort  Memory: 17kB
   Buffers: shared hit=6
   CTE interestingtarget
     -&amp;gt;  Limit  (cost=10.78..10.79 rows=1 width=44) (actual time=0.020..0.020 rows=0 loops=1)
           Buffers: shared hit=6
           -&amp;gt;  Sort  (cost=10.78..10.79 rows=2 width=44) (actual time=0.019..0.019 rows=0 loops=1)
                 Sort Key: r_1.request_timestamp_as_epoch
                 Sort Method: quicksort  Memory: 17kB
                 Buffers: shared hit=6
                 -&amp;gt;  Append  (cost=8.84..10.77 rows=2 width=44) (actual time=0.018..0.018 rows=0 loops=1)
                       Buffers: shared hit=6
                       -&amp;gt;  Limit  (cost=8.84..8.84 rows=1 width=44) (actual time=0.014..0.014 rows=0 loops=1)
                             Buffers: shared hit=5
                             -&amp;gt;  Sort  (cost=8.84..8.85 rows=5 width=44) (actual time=0.014..0.014 rows=0 loops=1)
                                   Sort Key: r_1.request_timestamp_as_epoch
                                   Sort Method: quicksort  Memory: 17kB
                                   Buffers: shared hit=5
                                   -&amp;gt;  Index Scan using requests_status_not_done_idx on requests r_1  (cost=0.42..8.81 rows=5 width=44) (actual time=0.011..0.011 rows=0 loops=1)
                                         Index Cond: ((status)::text = &lt;span class=&quot;code-quote&quot;&gt;&apos;PENDING&apos;&lt;/span&gt;::text)
                                         Filter: ((type)::text &amp;lt;&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;MOVE_REQUEST&apos;&lt;/span&gt;::text)
                                         Buffers: shared hit=5
                       -&amp;gt;  Subquery Scan on oldestfailed  (cost=0.14..1.92 rows=1 width=44) (actual time=0.003..0.003 rows=0 loops=1)
                             Buffers: shared hit=1
                             -&amp;gt;  Limit  (cost=0.14..1.91 rows=1 width=52) (actual time=0.003..0.003 rows=0 loops=1)
                                   Buffers: shared hit=1
                                   -&amp;gt;  Index Scan using work_order_idx on requests r_2  (cost=0.14..8.98 rows=5 width=52) (actual time=0.001..0.001 rows=0 loops=1)
                                         Index Cond: (work_order_timestamp &amp;lt;= &lt;span class=&quot;code-quote&quot;&gt;&apos;2017-09-20 06:03:29.706+10&apos;&lt;/span&gt;::timestamp with time zone)
                                         Filter: ((type)::text &amp;lt;&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;MOVE_REQUEST&apos;&lt;/span&gt;::text)
                                         Buffers: shared hit=1
   CTE workrequests
     -&amp;gt;  Nested Loop  (cost=0.57..744.74 rows=211 width=99) (actual time=0.022..0.022 rows=0 loops=1)
           Buffers: shared hit=6
           -&amp;gt;  CTE Scan on interestingtarget t  (cost=0.00..0.02 rows=1 width=32) (actual time=0.022..0.022 rows=0 loops=1)
                 Buffers: shared hit=6
           -&amp;gt;  Index Scan using requests_target_full_idx on requests r_3  (cost=0.57..742.61 rows=211 width=99) (never executed)
                 Index Cond: ((target)::text = (t.target)::text)
                 Filter: ((type)::text &amp;lt;&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;MOVE_REQUEST&apos;&lt;/span&gt;::text)
   -&amp;gt;  Nested Loop Left Join  (cost=0.12..39878.01 rows=38724 width=152) (actual time=0.023..0.023 rows=0 loops=1)
         Buffers: shared hit=6
         -&amp;gt;  CTE Scan on workrequests r  (cost=0.00..4.22 rows=211 width=134) (actual time=0.023..0.023 rows=0 loops=1)
               Buffers: shared hit=6
         -&amp;gt;  Append  (cost=0.12..170.28 rows=1870 width=26) (never executed)
               -&amp;gt;  Index Scan using request_attrs_request_id_idx on request_attrs c  (cost=0.12..0.18 rows=1 width=44) (never executed)
                     Index Cond: (r.request_id = request_id)
               -&amp;gt;  Index Scan using request_attrs_pk on request_attrs_partition_123825777 c_1  (cost=0.58..86.67 rows=1442 width=26) (never executed)
                     Index Cond: (r.request_id = request_id)
               -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx on request_attrs_partition_128878332 c_2  (cost=0.44..9.47 rows=59 width=27) (never executed)
                     Index Cond: (r.request_id = request_id)
               -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx1 on request_attrs_partition_132983063 c_3  (cost=0.44..9.24 rows=46 width=27) (never executed)
                     Index Cond: (r.request_id = request_id)
               -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx2 on request_attrs_partition_136944225 c_4  (cost=0.44..9.33 rows=51 width=26) (never executed)
                     Index Cond: (r.request_id = request_id)
               -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx3 on request_attrs_partition_141131309 c_5  (cost=0.44..9.28 rows=48 width=27) (never executed)
                     Index Cond: (r.request_id = request_id)
               -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx4 on request_attrs_partition_145360853 c_6  (cost=0.44..9.23 rows=45 width=27) (never executed)
                     Index Cond: (r.request_id = request_id)
               -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx5 on request_attrs_partition_149512848 c_7  (cost=0.44..9.26 rows=47 width=27) (never executed)
                     Index Cond: (r.request_id = request_id)
               -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx6 on request_attrs_partition_153765189 c_8  (cost=0.44..9.21 rows=44 width=27) (never executed)
                     Index Cond: (r.request_id = request_id)
               -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx7 on request_attrs_partition_157989391 c_9  (cost=0.44..9.26 rows=47 width=27) (never executed)
                     Index Cond: (r.request_id = request_id)
               -&amp;gt;  Index Scan using request_attrs_partition_current_request_id_idx8 on request_attrs_partition_current c_10  (cost=0.44..9.14 rows=40 width=26) (never executed)
                     Index Cond: (r.request_id = request_id)
 Planning time: 1.755 ms
 Execution time: 0.165 ms
(68 rows)

Time: 2.975 ms
(sa@imedpdnswmdb01) [globaldicom] #
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We can see that unlike at VANTP, there is the shared_buffers do not have as much activity (a low shared buffer hit count with and without the large statistics bucket, and no read, dirtied or written pages).  Actual cost has also decreased from 0.043 to 0.029. Finally, like before, the expected rowcount is closer to reality.&lt;/p&gt;

&lt;p&gt;These are much better statistics all around. It seems to imply the VANTP statistics might be the outlier. I am trying to understand why a select would dirty or write pages, but I am likely not understanding the full picture.&lt;/p&gt;</comment>
                            <comment id="452995" author="nselvadurai" created="Thu, 12 Oct 2017 11:45:52 -0400"  >&lt;p&gt;FYI, more details are included in &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=573696&quot; target=&quot;_blank&quot;&gt;EW573696&lt;/a&gt; for the IMED example.&lt;/p&gt;</comment>
                            <comment id="453009" author="nick.cabatoff" created="Thu, 12 Oct 2017 12:34:00 -0400"  >&lt;p&gt;The only part of the query plan we should expect to be affected by the change to request_attrs stats is the last bit, the &quot;Nested Loop Left Join&quot;.  In the &quot;after&quot; explain, we see it doing more I/O because there were more request rows to join with (35 vs 7).  I&apos;m sure that the bulk of the latency improvements seen are due to staggering the diskmon cronjobs, so that we have a smaller peak volume of requests to process.  That said, I do think the request_attrs stats change should be helpful in some cases, particularly when we&apos;re doing a larger join.  Rather than looking at the request processor queries, I&apos;d suggest looking at the ones done for request synchronization, as the request processor is really only looking for the requests for a single study, but the sync is looking for up to 1000 requests per batch (depending on how backlogged the caller is.)&lt;/p&gt;</comment>
                            <comment id="453010" author="nselvadurai" created="Thu, 12 Oct 2017 12:34:32 -0400"  >&lt;p&gt;I forgot to record it earlier, but it might be useful to keep information on the table stats:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
(sa@imedpdnswmdb01) [globaldicom] # select * from pg_stat_user_tables where relname = &lt;span class=&quot;code-quote&quot;&gt;&apos;request_attrs&apos;&lt;/span&gt; and schemaname = &lt;span class=&quot;code-quote&quot;&gt;&apos;globaldicom&apos;&lt;/span&gt;:G
Expanded display is on.
-[ RECORD 1 ]-------+------------------------------
relid               | 6695374
schemaname          | globaldicom
relname             | request_attrs
seq_scan            | 448
seq_tup_read        | 0
idx_scan            | 39438034100
idx_tup_fetch       | 0
n_tup_ins           | 0
n_tup_upd           | 0
n_tup_del           | 0
n_tup_hot_upd       | 0
n_live_tup          | 0
n_dead_tup          | 0
n_mod_since_analyze | 0
last_vacuum         | 2017-10-13 02:01:18.621281+11
last_autovacuum     | NULL
last_analyze        | 2017-10-13 02:01:18.621681+11
last_autoanalyze    | NULL
vacuum_count        | 445
autovacuum_count    | 0
analyze_count       | 446
autoanalyze_count   | 0

Time: 11.832 ms
Expanded display is off.
(sa@imedpdnswmdb01) [globaldicom] #
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Additionally, the SQL to determine default bucket size is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
SELECT array_length( most_common_vals, 1 )
AS current_stats
FROM pg_stats
WHERE attname = &lt;span class=&quot;code-quote&quot;&gt;&apos;request_id&apos;&lt;/span&gt;
AND tablename = &lt;span class=&quot;code-quote&quot;&gt;&apos;request_attrs&apos;&lt;/span&gt;
AND schemaname = &lt;span class=&quot;code-quote&quot;&gt;&apos;globaldicom&apos;&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;ve wrapped up the AIS info and got interesting results, posting it in my next follow-up.&lt;/p&gt;</comment>
                            <comment id="453014" author="nick.cabatoff" created="Thu, 12 Oct 2017 12:49:27 -0400"  >&lt;p&gt;The problem with checking the size of most_common_vals is that depending on the table/column, there may be fewer unique values than there are statistics buckets.  The right way to do this is &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;SELECT attstattarget FROM pg_attribute WHERE attrelid = &apos;globaldicom.requests&apos;::regclass and attname=&apos;request_id&apos;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It returns -1 if the column has the default statistics value, which I think is 100.&lt;/p&gt;</comment>
                            <comment id="453026" author="nselvadurai" created="Thu, 12 Oct 2017 13:30:55 -0400"  >&lt;p&gt;At aismdb2, the current stats on the table:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
(sa@aismdb2) [globaldicom] # select * from pg_stat_user_tables where schemaname = &lt;span class=&quot;code-quote&quot;&gt;&apos;globaldicom&apos;&lt;/span&gt; and relname = &lt;span class=&quot;code-quote&quot;&gt;&apos;request_attrs&apos;&lt;/span&gt;:G
Expanded display is on.
-[ RECORD 1 ]-----+------------------------------
relid             | 4653146
schemaname        | globaldicom
relname           | request_attrs
seq_scan          | 895
seq_tup_read      | 514474598105
idx_scan          | 6876059331
idx_tup_fetch     | 49365012981
n_tup_ins         | 524820627
n_tup_upd         | 0
n_tup_del         | 0
n_tup_hot_upd     | 0
n_live_tup        | 856630135
n_dead_tup        | 100
last_vacuum       | 2017-10-12 02:01:52.027332-07
last_autovacuum   | 2016-01-15 17:50:04.904885-07
last_analyze      | 2017-10-12 02:01:52.367913-07
last_autoanalyze  | 2015-11-11 11:48:21.729754-07
vacuum_count      | 2067
autovacuum_count  | 2
analyze_count     | 2070
autoanalyze_count | 2

Time: 11.514 ms
Expanded display is off.
(sa@aismdb2) [globaldicom] #
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Before the ALTER:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
                                                                                      QUERY PLAN
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Sort  (cost=98467.70..99114.64 rows=258776 width=152) (actual time=0.274..0.280 rows=64 loops=1)
   Sort Key: r.request_timestamp_as_epoch, r.request_id
   Sort Method: quicksort  Memory: 33kB
   Buffers: shared hit=53 read=5
   CTE interestingtarget
     -&amp;gt;  Limit  (cost=8.63..8.63 rows=1 width=64) (actual time=0.059..0.059 rows=1 loops=1)
           Buffers: shared hit=9 read=2
           -&amp;gt;  Sort  (cost=8.63..8.64 rows=2 width=64) (actual time=0.059..0.059 rows=1 loops=1)
                 Sort Key: r.request_timestamp_as_epoch
                 Sort Method: quicksort  Memory: 17kB
                 Buffers: shared hit=9 read=2
                 -&amp;gt;  Result  (cost=8.51..8.62 rows=2 width=64) (actual time=0.044..0.056 rows=1 loops=1)
                       Buffers: shared hit=9 read=2
                       -&amp;gt;  Append  (cost=8.51..8.62 rows=2 width=64) (actual time=0.043..0.055 rows=1 loops=1)
                             Buffers: shared hit=9 read=2
                             -&amp;gt;  Limit  (cost=8.51..8.51 rows=1 width=64) (actual time=0.043..0.044 rows=1 loops=1)
                                   Buffers: shared hit=7 read=1
                                   -&amp;gt;  Sort  (cost=8.51..8.51 rows=2 width=64) (actual time=0.043..0.043 rows=1 loops=1)
                                         Sort Key: r.request_timestamp_as_epoch
                                         Sort Method: quicksort  Memory: 17kB
                                         Buffers: shared hit=7 read=1
                                         -&amp;gt;  Index Scan using requests_status_not_done_idx on requests r  (cost=0.00..8.50 rows=2 width=64) (actual time=0.025..0.033 rows=1 loops=1)
                                               Index Cond: ((status)::text = &lt;span class=&quot;code-quote&quot;&gt;&apos;PENDING&apos;&lt;/span&gt;::text)
                                               Filter: ((type)::text &amp;lt;&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;MOVE_REQUEST&apos;&lt;/span&gt;::text)
                                               Buffers: shared hit=7 read=1
                             -&amp;gt;  Subquery Scan on oldestfailed  (cost=0.00..0.10 rows=1 width=64) (actual time=0.011..0.011 rows=0 loops=1)
                                   Buffers: shared hit=2 read=1
                                   -&amp;gt;  Limit  (cost=0.00..0.09 rows=1 width=72) (actual time=0.011..0.011 rows=0 loops=1)
                                         Buffers: shared hit=2 read=1
                                         -&amp;gt;  Index Scan using work_order_idx on requests r  (cost=0.00..1244.28 rows=13376 width=72) (actual time=0.010..0.010 rows=0 loops=1)
                                               Index Cond: (work_order_timestamp &amp;lt;= &lt;span class=&quot;code-quote&quot;&gt;&apos;2017-09-20 06:03:29.706-07&apos;&lt;/span&gt;::timestamp with time zone)
                                               Filter: ((type)::text &amp;lt;&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;MOVE_REQUEST&apos;&lt;/span&gt;::text)
                                               Buffers: shared hit=2 read=1
   CTE workrequests
     -&amp;gt;  Nested Loop  (cost=0.00..764.37 rows=173 width=119) (actual time=0.093..0.112 rows=6 loops=1)
           Buffers: shared hit=18 read=4
           -&amp;gt;  CTE Scan on interestingtarget t  (cost=0.00..0.02 rows=1 width=32) (actual time=0.062..0.063 rows=1 loops=1)
                 Buffers: shared hit=9 read=2
           -&amp;gt;  Index Scan using requests_target_full_idx on requests r  (cost=0.00..762.62 rows=173 width=119) (actual time=0.027..0.040 rows=6 loops=1)
                 Index Cond: ((target)::text = (t.target)::text)
                 Filter: ((type)::text &amp;lt;&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;MOVE_REQUEST&apos;&lt;/span&gt;::text)
                 Buffers: shared hit=9 read=2
   -&amp;gt;  Nested Loop Left Join  (cost=0.00..35508.99 rows=258776 width=152) (actual time=0.112..0.188 rows=64 loops=1)
         Buffers: shared hit=50 read=5
         -&amp;gt;  CTE Scan on workrequests r  (cost=0.00..3.46 rows=173 width=134) (actual time=0.096..0.117 rows=6 loops=1)
               Buffers: shared hit=18 read=4
         -&amp;gt;  Index Scan using request_attrs_pk on request_attrs c  (cost=0.00..190.27 rows=1496 width=26) (actual time=0.006..0.009 rows=11 loops=6)
               Index Cond: (r.request_id = request_id)
               Buffers: shared hit=32 read=1
 Total runtime: 0.397 ms
(50 rows)

Time: 3.630 ms
(sa@aismdb2) [globaldicom] #
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;m going to ignore the stats previous to the Nested Loop as per Nick&apos;s follow-up since it would not be directly affected by our statistics change.&lt;/p&gt;

&lt;p&gt;Expected cost is 35508.9 and expected rows is 258776, whereas actual cost is 0.188 and actual rows returned is 64&lt;/p&gt;

&lt;p&gt;After the ALTER:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
                                                                                      QUERY PLAN
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Sort  (cost=23806.18..23869.24 rows=25225 width=152) (actual time=0.634..0.658 rows=231 loops=1)
   Sort Key: r.request_timestamp_as_epoch, r.request_id
   Sort Method: quicksort  Memory: 76kB
   Buffers: shared hit=236 read=1
   CTE interestingtarget
     -&amp;gt;  Limit  (cost=8.63..8.63 rows=1 width=64) (actual time=0.034..0.034 rows=1 loops=1)
           Buffers: shared hit=9
           -&amp;gt;  Sort  (cost=8.63..8.64 rows=2 width=64) (actual time=0.032..0.032 rows=1 loops=1)
                 Sort Key: r.request_timestamp_as_epoch
                 Sort Method: quicksort  Memory: 17kB
                 Buffers: shared hit=9
                 -&amp;gt;  Result  (cost=8.51..8.62 rows=2 width=64) (actual time=0.025..0.031 rows=1 loops=1)
                       Buffers: shared hit=9
                       -&amp;gt;  Append  (cost=8.51..8.62 rows=2 width=64) (actual time=0.025..0.031 rows=1 loops=1)
                             Buffers: shared hit=9
                             -&amp;gt;  Limit  (cost=8.51..8.51 rows=1 width=64) (actual time=0.024..0.024 rows=1 loops=1)
                                   Buffers: shared hit=7
                                   -&amp;gt;  Sort  (cost=8.51..8.51 rows=2 width=64) (actual time=0.023..0.023 rows=1 loops=1)
                                         Sort Key: r.request_timestamp_as_epoch
                                         Sort Method: quicksort  Memory: 17kB
                                         Buffers: shared hit=7
                                         -&amp;gt;  Index Scan using requests_status_not_done_idx on requests r  (cost=0.00..8.50 rows=2 width=64) (actual time=0.012..0.019 rows=1 loops=1)
                                               Index Cond: ((status)::text = &lt;span class=&quot;code-quote&quot;&gt;&apos;PENDING&apos;&lt;/span&gt;::text)
                                               Filter: ((type)::text &amp;lt;&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;MOVE_REQUEST&apos;&lt;/span&gt;::text)
                                               Buffers: shared hit=7
                             -&amp;gt;  Subquery Scan on oldestfailed  (cost=0.00..0.10 rows=1 width=64) (actual time=0.005..0.005 rows=0 loops=1)
                                   Buffers: shared hit=2
                                   -&amp;gt;  Limit  (cost=0.00..0.09 rows=1 width=72) (actual time=0.005..0.005 rows=0 loops=1)
                                         Buffers: shared hit=2
                                         -&amp;gt;  Index Scan using work_order_idx on requests r  (cost=0.00..1244.28 rows=13376 width=72) (actual time=0.005..0.005 rows=0 loops=1)
                                               Index Cond: (work_order_timestamp &amp;lt;= &lt;span class=&quot;code-quote&quot;&gt;&apos;2017-09-20 06:03:29.706-07&apos;&lt;/span&gt;::timestamp with time zone)
                                               Filter: ((type)::text &amp;lt;&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;MOVE_REQUEST&apos;&lt;/span&gt;::text)
                                               Buffers: shared hit=2
   CTE workrequests
     -&amp;gt;  Nested Loop  (cost=0.00..764.38 rows=173 width=119) (actual time=0.053..0.134 rows=38 loops=1)
           Buffers: shared hit=45
           -&amp;gt;  CTE Scan on interestingtarget t  (cost=0.00..0.02 rows=1 width=32) (actual time=0.034..0.034 rows=1 loops=1)
                 Buffers: shared hit=9
           -&amp;gt;  Index Scan using requests_target_full_idx on requests r  (cost=0.00..762.63 rows=173 width=119) (actual time=0.016..0.078 rows=38 loops=1)
                 Index Cond: ((target)::text = (t.target)::text)
                 Filter: ((type)::text &amp;lt;&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;MOVE_REQUEST&apos;&lt;/span&gt;::text)
                 Buffers: shared hit=36
   -&amp;gt;  Nested Loop Left Join  (cost=0.00..19291.89 rows=25225 width=152) (actual time=0.081..0.477 rows=231 loops=1)
         Buffers: shared hit=236 read=1
         -&amp;gt;  CTE Scan on workrequests r  (cost=0.00..3.46 rows=173 width=134) (actual time=0.055..0.168 rows=38 loops=1)
               Buffers: shared hit=45
         -&amp;gt;  Index Scan using request_attrs_pk on request_attrs c  (cost=0.00..110.03 rows=146 width=26) (actual time=0.005..0.006 rows=6 loops=38)
               Index Cond: (r.request_id = request_id)
               Buffers: shared hit=191 read=1
 Total runtime: 0.755 ms
(50 rows)

Time: 2.476 ms
(sa@aismdb2) [globaldicom] #
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note, the expected cost has dropped to about half its previous value to 19291.8 and expected rows is better at 25225. Actual cost has increased to 0.477 but rows returned is also higher at 231.&lt;/p&gt;

&lt;p&gt;Due to the returned rows being higher, I thought I&apos;d do a second explain shortly after (I waited about 30 - 60 seconds):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
                                                                                      QUERY PLAN
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Sort  (cost=23806.20..23869.27 rows=25225 width=152) (actual time=0.030..0.030 rows=0 loops=1)
   Sort Key: r.request_timestamp_as_epoch, r.request_id
   Sort Method: quicksort  Memory: 17kB
   Buffers: shared hit=8
   CTE interestingtarget
     -&amp;gt;  Limit  (cost=8.63..8.63 rows=1 width=64) (actual time=0.026..0.026 rows=0 loops=1)
           Buffers: shared hit=8
           -&amp;gt;  Sort  (cost=8.63..8.64 rows=2 width=64) (actual time=0.025..0.025 rows=0 loops=1)
                 Sort Key: r.request_timestamp_as_epoch
                 Sort Method: quicksort  Memory: 17kB
                 Buffers: shared hit=8
                 -&amp;gt;  Result  (cost=8.51..8.62 rows=2 width=64) (actual time=0.023..0.023 rows=0 loops=1)
                       Buffers: shared hit=8
                       -&amp;gt;  Append  (cost=8.51..8.62 rows=2 width=64) (actual time=0.023..0.023 rows=0 loops=1)
                             Buffers: shared hit=8
                             -&amp;gt;  Limit  (cost=8.51..8.51 rows=1 width=64) (actual time=0.019..0.019 rows=0 loops=1)
                                   Buffers: shared hit=6
                                   -&amp;gt;  Sort  (cost=8.51..8.51 rows=2 width=64) (actual time=0.018..0.018 rows=0 loops=1)
                                         Sort Key: r.request_timestamp_as_epoch
                                         Sort Method: quicksort  Memory: 17kB
                                         Buffers: shared hit=6
                                         -&amp;gt;  Index Scan using requests_status_not_done_idx on requests r  (cost=0.00..8.50 rows=2 width=64) (actual time=0.017..0.017 rows=0 loops=1)
                                               Index Cond: ((status)::text = &lt;span class=&quot;code-quote&quot;&gt;&apos;PENDING&apos;&lt;/span&gt;::text)
                                               Filter: ((type)::text &amp;lt;&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;MOVE_REQUEST&apos;&lt;/span&gt;::text)
                                               Buffers: shared hit=6
                             -&amp;gt;  Subquery Scan on oldestfailed  (cost=0.00..0.10 rows=1 width=64) (actual time=0.004..0.004 rows=0 loops=1)
                                   Buffers: shared hit=2
                                   -&amp;gt;  Limit  (cost=0.00..0.09 rows=1 width=72) (actual time=0.004..0.004 rows=0 loops=1)
                                         Buffers: shared hit=2
                                         -&amp;gt;  Index Scan using work_order_idx on requests r  (cost=0.00..1244.28 rows=13376 width=72) (actual time=0.003..0.003 rows=0 loops=1)
                                               Index Cond: (work_order_timestamp &amp;lt;= &lt;span class=&quot;code-quote&quot;&gt;&apos;2017-09-20 06:03:29.706-07&apos;&lt;/span&gt;::timestamp with time zone)
                                               Filter: ((type)::text &amp;lt;&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;MOVE_REQUEST&apos;&lt;/span&gt;::text)
                                               Buffers: shared hit=2
   CTE workrequests
     -&amp;gt;  Nested Loop  (cost=0.00..764.38 rows=173 width=119) (actual time=0.026..0.026 rows=0 loops=1)
           Buffers: shared hit=8
           -&amp;gt;  CTE Scan on interestingtarget t  (cost=0.00..0.02 rows=1 width=32) (actual time=0.026..0.026 rows=0 loops=1)
                 Buffers: shared hit=8
           -&amp;gt;  Index Scan using requests_target_full_idx on requests r  (cost=0.00..762.63 rows=173 width=119) (never executed)
                 Index Cond: ((target)::text = (t.target)::text)
                 Filter: ((type)::text &amp;lt;&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;MOVE_REQUEST&apos;&lt;/span&gt;::text)
   -&amp;gt;  Nested Loop Left Join  (cost=0.00..19291.92 rows=25225 width=152) (actual time=0.027..0.027 rows=0 loops=1)
         Buffers: shared hit=8
         -&amp;gt;  CTE Scan on workrequests r  (cost=0.00..3.46 rows=173 width=134) (actual time=0.027..0.027 rows=0 loops=1)
               Buffers: shared hit=8
         -&amp;gt;  Index Scan using request_attrs_pk on request_attrs c  (cost=0.00..110.03 rows=146 width=26) (never executed)
               Index Cond: (r.request_id = request_id)
 Total runtime: 0.104 ms
(48 rows)

Time: 1.317 ms
(sa@aismdb2) [globaldicom] #
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Expected rows and count remains the same, and actual values are much lower at 0.027 cost and 0 rows. This is a good example to show that the actual cost being high in the &quot;after&quot; explain in the VANTP run is likely related to the fact that actual returned rows is higher than the &quot;before&quot; explain. The expected cost might be a more accurate statistic to look at since actual cost will vary between runs.&lt;/p&gt;

&lt;p&gt;All details are in &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=573706&quot; target=&quot;_blank&quot;&gt;EW573706&lt;/a&gt; for the AIS run of the test.&lt;/p&gt;</comment>
                            <comment id="453973" author="mark.groves" created="Thu, 19 Oct 2017 11:19:17 -0400"  >&lt;p&gt;Need to talk to Mat about the results that Niel has gathered before we can continue&lt;/p&gt;</comment>
                            <comment id="455275" author="ebelardo" created="Fri, 27 Oct 2017 13:53:08 -0400"  >&lt;h4&gt;&lt;a name=&quot;Descriptionofthesolution%3A&quot;&gt;&lt;/a&gt;Description of the solution:&lt;/h4&gt;

&lt;p&gt;Generic solution implemented that allows multiple configurations to be specified in DicomMasterService.cfg.&lt;/p&gt;

&lt;p&gt;This Set Statistics operation executes as a post-availability task.&lt;/p&gt;

&lt;p&gt;In PACS-4-12-1 and up, statistics are set if necessary when the Table Partition Task (a scheduled task) creates a new child table for the request_attrs master table.&lt;/p&gt;

&lt;p&gt;Rules of setting statistics gathering targets on table columns are as described in the Test Cases section below.&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Testsexecuted%3A&quot;&gt;&lt;/a&gt;Tests executed:&lt;/h4&gt;

&lt;p&gt;The Set Statistics operation is performed as a post-availability task of DicomMasterService. So just restart the service to trigger a test.&lt;/p&gt;

&lt;p&gt;Example of a configuration in DicomMasterService.cfg:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-none&quot;&gt;
[PostgresStatistics.globaldicom]
request_attrs.request_id = 1000
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Test Cases:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;1 IF the current statistics value differs from the desired value:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The desired statistics value must be set on the column&lt;/li&gt;
	&lt;li&gt;Postgres &quot;analyze verbose&quot; must be executed on the table&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;2 IF the current statistics value is the same as the desired value, then nothing should be done (no-op)&lt;/p&gt;

&lt;p&gt;3 For a partitioned table, step 1 and 2 above should be applied to BOTH the master table and ALL its children&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The table partitioning feature is only available from PACS-4-12-1 and up. It is performed by the Table Partition Task, which is a scheduled task. Testing this involves populating the requests and request_attrs table with enough rows to trigger the creation of a new child table.&lt;/li&gt;
	&lt;li&gt;See DMS.log&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;4 When a new table partition is created for request_attrs table AFTER the service is started (by the TablePartitioningTask), the new request_attrs_partition_current table that is created should have its statistics target value set the same was as its master table (read: its request_id column should have statistics set to 1000 also)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The table partitioning feature is only available from PACS-4-12-1 and up. It is performed by the Table Partition Task, which is a scheduled task. Testing this involves populating the requests and request_attrs table with enough rows to trigger the creation of a new child table.&lt;/li&gt;
	&lt;li&gt;See DMS_DicomRequestsProcessor.log&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;5 Multiple lines can be specified in DicomMasterService.cfg&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Each line should be processed by the Set Statistics operation&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;6 Specify -1 as the target value&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Verify that the column is set back to the postgres default&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;7 Remove all lines under the [PostgresStatistics.globaldicom] section and restart DicomMasterService&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Verify that DicomMasterService starts successfully&lt;/li&gt;
	&lt;li&gt;Verify that the Set Statistics Task does nothing&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;8 Remove the entire [PostgresStatistics.globaldicom] section from DicomMasterService.cfg&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Verify that DicomMasterService starts successfully&lt;/li&gt;
	&lt;li&gt;Verify that the Set Statistics Task does nothing&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Sample logs below:&lt;/p&gt;

&lt;p&gt;&lt;b&gt;DMS.log&lt;/b&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-none&quot;&gt;
PostgresStatistics loaded:
globaldicom.requests.request_id ....... -1
globaldicom.request_attrs.request_id .. 500

...

2017-11-09 09:11:02.047 DMS emb4121.dyn.intelerad (TRACE)] Disabling thread monitoring for database callable.
[2017-11-09 09:11:02.047 DMS emb4121.dyn.intelerad (TRACE)] ----- SET STATISTICS STARTING -----
[2017-11-09 09:11:02.047 DMS emb4121.dyn.intelerad (TRACE)] Processing stats target: StatisticsParameters [mSchema=globaldicom, mTable=requests, mColumn=request_id, mStats=-1]
[2017-11-09 09:11:02.049 DMS emb4121.dyn.intelerad (TRACE)] Child tables: []
[2017-11-09 09:11:02.050 DMS emb4121.dyn.intelerad (TRACE)] Processing stats target: StatisticsParameters [mSchema=globaldicom, mTable=requests, mColumn=request_id, mStats=-1]
[2017-11-09 09:11:02.072 DMS emb4121.dyn.intelerad (TRACE)] Not resetting stats target value for requests since current target value equals desired value -1
[2017-11-09 09:11:02.072 DMS emb4121.dyn.intelerad (TRACE)] Processing stats target: StatisticsParameters [mSchema=globaldicom, mTable=request_attrs, mColumn=request_id, mStats=500]
[2017-11-09 09:11:02.073 DMS emb4121.dyn.intelerad (TRACE)] Child tables: [request_attrs_partition_current]
[2017-11-09 09:11:02.073 DMS emb4121.dyn.intelerad (TRACE)] Processing stats target: StatisticsParameters [mSchema=globaldicom, mTable=request_attrs, mColumn=request_id, mStats=500]
[2017-11-09 09:11:02.078 DMS emb4121.dyn.intelerad (TRACE)] Resetting stats target value for request_attrs since current target value -1 differs from desired value 500
[2017-11-09 09:11:02.082 DMS emb4121.dyn.intelerad (DEBUG:SQL:GlobalDicom)] 
SQL messages:
WARNING: Error code: &apos;0&apos;; Message: &apos;analyzing &quot;globaldicom.request_attrs&quot;&apos;; SQLState: &apos;00000&apos;
WARNING: Error code: &apos;0&apos;; Message: &apos;&quot;request_attrs&quot;: scanned 0 of 0 pages, containing 0 live rows and 0 dead rows; 0 rows in sample, 0 estimated total rows&apos;; SQLState: &apos;00000&apos;
WARNING: Error code: &apos;0&apos;; Message: &apos;analyzing &quot;globaldicom.request_attrs&quot; inheritance tree&apos;; SQLState: &apos;00000&apos;
[2017-11-09 09:11:02.082 DMS emb4121.dyn.intelerad (TRACE)] Processing stats target: StatisticsParameters [mSchema=globaldicom, mTable=request_attrs_partition_current, mColumn=request_id, mStats=500]
[2017-11-09 09:11:02.086 DMS emb4121.dyn.intelerad (TRACE)] Not resetting stats target value for request_attrs_partition_current since current target value equals desired value 500
[2017-11-09 09:11:02.086 DMS emb4121.dyn.intelerad (TRACE)] ----- SET STATISTICS COMPLETE -----
[2017-11-09 09:11:02.086 DMS emb4121.dyn.intelerad (TRACE)] Re-enabling thread monitoring for database callable.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;DMS_DicomRequestsProcessor.log&lt;/b&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-none&quot;&gt;
[2017-11-06 17:31:13.164 DicomRequestsProcessor_0 emb4121.dyn.intelerad (TRACE)] ----- PARTITION TABLE STARTING -----
[2017-11-06 17:31:13.165 DicomRequestsProcessor_0 emb4121.dyn.intelerad (TRACE)] Aquiring exclusive lock on tables [request_attrs_partition_current].
[2017-11-06 17:31:13.165 DicomRequestsProcessor_0 emb4121.dyn.intelerad (TRACE)] Aquiring exclusive lock on tables [request_attrs].
[2017-11-06 17:31:13.165 DicomRequestsProcessor_0 emb4121.dyn.intelerad (TRACE)] Aquiring exclusive lock on tables [requests].
[2017-11-06 17:31:13.169 DicomRequestsProcessor_0 emb4121.dyn.intelerad (TRACE)] Adding check constraint [max_request_id] with condition [request_id &amp;lt;= 1000000] for table [request_attrs_partition_current].
[2017-11-06 17:31:13.334 DicomRequestsProcessor_0 emb4121.dyn.intelerad (TRACE)] Renaming table [request_attrs_partition_current] to [request_attrs_partition_1000000].
[2017-11-06 17:31:13.351 DicomRequestsProcessor_0 emb4121.dyn.intelerad (TRACE)] Creating new request_attrs table as [request_attrs_partition_current];
[2017-11-06 17:31:13.395 DicomRequestsProcessor_0 emb4121.dyn.intelerad (TRACE)] Setting statistics on request_attrs_partition_current.request_id to 500.
[2017-11-06 17:31:13.396 DicomRequestsProcessor_0 emb4121.dyn.intelerad (TRACE)] Adding inheritance from parent [request_attrs] to child [request_attrs_partition_current].
[2017-11-06 17:31:13.396 DicomRequestsProcessor_0 emb4121.dyn.intelerad (TRACE)] Adding check constraint [min_request_id] with condition [request_id &amp;gt; 1000000] for table [request_attrs_partition_current].
[2017-11-06 17:31:13.398 DicomRequestsProcessor_0 emb4121.dyn.intelerad (TRACE)] ----- PARTITION TABLE COMPLETED -----
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;h4&gt;&lt;a name=&quot;Unittestsaddedormodified%3A&quot;&gt;&lt;/a&gt;Unit tests added or modified:&lt;/h4&gt;

&lt;p&gt;&lt;tt&gt;com.intelerad.dicommasterservice.setstatistics.TestPostgresSetStatisticsTask&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;com.intelerad.dicommasterservice.setstatistics.TestStatisticsParameter&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;com.intelerad.dicommasterservice.lib.TestTablePartitioning&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="457902" author="afaiyaz" created="Thu, 16 Nov 2017 12:47:20 -0500"  >&lt;p&gt;&lt;b&gt;Verified with RPMs&lt;/b&gt;: DicomMasterService-4.9.1.P308-ims01.noarch, DicomMasterService-4.10.1.P301-ims99.noarch, DicomMasterService-4.11.1.P279-ims99.noarch, DicomMasterService-4.12.1.P462-ims99.noarch&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Verification steps&lt;/b&gt;:&lt;/p&gt;
&lt;h5&gt;&lt;a name=&quot;Test1&quot;&gt;&lt;/a&gt;Test1 &lt;/h5&gt;
&lt;p&gt;&lt;a href=&quot;https://testrail.intelerad.com/testrail//index.php?/cases/view/5465513&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Verify DMS starts normally and the statistics already set are not changed if the configuration is removed&lt;/a&gt;&lt;br/&gt;
&lt;b&gt;Result&lt;/b&gt; : Pass&lt;/p&gt;

&lt;h5&gt;&lt;a name=&quot;Test2&quot;&gt;&lt;/a&gt;Test2 &lt;/h5&gt;
&lt;p&gt;&lt;a href=&quot;https://testrail.intelerad.com/testrail//index.php?/cases/view/5465511&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Verify that the target column is set based on the desired value given in the DicomMasterService.cfg&lt;/a&gt;&lt;br/&gt;
&lt;b&gt;Result&lt;/b&gt; : Pass&lt;/p&gt;

&lt;h5&gt;&lt;a name=&quot;Test3&quot;&gt;&lt;/a&gt;Test3 &lt;/h5&gt;
&lt;p&gt;&lt;a href=&quot;https://testrail.intelerad.com/testrail//index.php?/cases/view/5465512&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Verify that the target column remains unchanged upon restarting DMS&lt;/a&gt;&lt;br/&gt;
&lt;b&gt;Result&lt;/b&gt; : Pass&lt;/p&gt;

&lt;h5&gt;&lt;a name=&quot;Test4&quot;&gt;&lt;/a&gt;Test4 &lt;/h5&gt;
&lt;p&gt;&lt;a href=&quot;https://testrail.intelerad.com/testrail//index.php?/cases/view/5465514&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Verify multiple columns pertaining to multiple schemas can be changed simultaneously &amp;amp; verify changes propagated to child tables as well&lt;/a&gt;&lt;br/&gt;
&lt;b&gt;Result&lt;/b&gt; : Pass&lt;/p&gt;

&lt;h5&gt;&lt;a name=&quot;Test5&quot;&gt;&lt;/a&gt;Test5&lt;/h5&gt;
&lt;p&gt;&lt;a href=&quot;https://testrail.intelerad.com/testrail//index.php?/cases/view/5465515&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Verify statistics are set on the child table created by the TablePartitioningTask&lt;/a&gt;&lt;br/&gt;
&lt;b&gt;Result&lt;/b&gt; : Pass&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Test cases added or modified&lt;/b&gt;: Please see the testrail tests attached with this ticket&lt;/p&gt;

&lt;p&gt;&lt;b&gt;End result:&lt;/b&gt; All tests &lt;font color=&quot;#8eb021&quot;&gt;passed&lt;/font&gt;&lt;/p&gt;</comment>
                            <comment id="457955" author="robot-bc-rw" created="Thu, 16 Nov 2017 15:48:05 -0500"  >&lt;p&gt;Released by ebelardo to master at 2017-11-16 15:48:03 (push 63145):&lt;br/&gt;
  PACS-4-10-1 (dummy)      (previous build: PACS-4-10-1-P301)&lt;br/&gt;
  PACS-4-9-1 (fix)        (previous build: PACS-4-9-1-P308)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/79d2c4a2116d&quot; target=&quot;_blank&quot;&gt;intelepacs:79d2c4a2116d&lt;/a&gt;  ebelardo    PACS-4-9-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-84741&quot; title=&quot;DMS: Update globaldicom schema to increase the statistics bucket size for request_attrs.request_id&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-84741&quot;&gt;&lt;del&gt;IP-84741&lt;/del&gt;&lt;/a&gt; fix: Set stat targets on table columns as post-availability task.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/e249ebe01972&quot; target=&quot;_blank&quot;&gt;intelepacs:e249ebe01972&lt;/a&gt;  ebelardo    PACS-4-10-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-84741&quot; title=&quot;DMS: Update globaldicom schema to increase the statistics bucket size for request_attrs.request_id&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-84741&quot;&gt;&lt;del&gt;IP-84741&lt;/del&gt;&lt;/a&gt; dummy: dummy merge from PACS-4-9-1&lt;/p&gt;</comment>
                            <comment id="457983" author="robot-bc-rw" created="Thu, 16 Nov 2017 18:23:00 -0500"  >&lt;p&gt;Released by ebelardo to master at 2017-11-16 18:22:59 (push 63164):&lt;br/&gt;
  PACS-4-10-1 (fix)        (previous build: PACS-4-10-1-P301)&lt;br/&gt;
  PACS-4-11-1 (dummy)      (previous build: PACS-4-11-1-P279)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/f8b10149eeac&quot; target=&quot;_blank&quot;&gt;intelepacs:f8b10149eeac&lt;/a&gt;  ebelardo    PACS-4-10-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-84741&quot; title=&quot;DMS: Update globaldicom schema to increase the statistics bucket size for request_attrs.request_id&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-84741&quot;&gt;&lt;del&gt;IP-84741&lt;/del&gt;&lt;/a&gt; fix: Set stat targets on table columns as post-availability task.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/10e582295d33&quot; target=&quot;_blank&quot;&gt;intelepacs:10e582295d33&lt;/a&gt;  ebelardo    PACS-4-11-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-84741&quot; title=&quot;DMS: Update globaldicom schema to increase the statistics bucket size for request_attrs.request_id&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-84741&quot;&gt;&lt;del&gt;IP-84741&lt;/del&gt;&lt;/a&gt; dummy: dummy merge from PACS-4-10-1&lt;/p&gt;</comment>
                            <comment id="457985" author="robot-bc-rw" created="Thu, 16 Nov 2017 18:58:00 -0500"  >&lt;p&gt;Released by ebelardo to master at 2017-11-16 18:57:59 (push 63167):&lt;br/&gt;
  PACS-4-11-1 (fix)        (previous build: PACS-4-11-1-P279)&lt;br/&gt;
  PACS-4-12-1 (dummy)      (previous build: PACS-4-12-1-P465)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/4a21d7624a79&quot; target=&quot;_blank&quot;&gt;intelepacs:4a21d7624a79&lt;/a&gt;  ebelardo    PACS-4-11-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-84741&quot; title=&quot;DMS: Update globaldicom schema to increase the statistics bucket size for request_attrs.request_id&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-84741&quot;&gt;&lt;del&gt;IP-84741&lt;/del&gt;&lt;/a&gt; fix: Set stat targets on table columns as post-availability task.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/39ffa149f225&quot; target=&quot;_blank&quot;&gt;intelepacs:39ffa149f225&lt;/a&gt;  ebelardo    PACS-4-12-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-84741&quot; title=&quot;DMS: Update globaldicom schema to increase the statistics bucket size for request_attrs.request_id&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-84741&quot;&gt;&lt;del&gt;IP-84741&lt;/del&gt;&lt;/a&gt; dummy: dummy merge from PACS-4-11-1&lt;/p&gt;</comment>
                            <comment id="458098" author="robot-bc-rw" created="Fri, 17 Nov 2017 12:58:07 -0500"  >&lt;p&gt;Released by ebelardo to master at 2017-11-17 12:58:05 (push 63181):&lt;br/&gt;
  PACS-4-12-1 (fix)        (previous build: PACS-4-12-1-P466)&lt;br/&gt;
  PACS-4-12-1 (fix)        (previous build: PACS-4-12-1-P466)&lt;br/&gt;
  PACS-4-14-1 (dummy)      (previous build: PACS-4-14-1-P279)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/10d73fa46a38&quot; target=&quot;_blank&quot;&gt;intelepacs:10d73fa46a38&lt;/a&gt;  ebelardo    PACS-4-12-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-84741&quot; title=&quot;DMS: Update globaldicom schema to increase the statistics bucket size for request_attrs.request_id&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-84741&quot;&gt;&lt;del&gt;IP-84741&lt;/del&gt;&lt;/a&gt; fix: Set stat targets on table columns as post-availability task.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/f7cfcd7a4019&quot; target=&quot;_blank&quot;&gt;intelepacs:f7cfcd7a4019&lt;/a&gt;  ebelardo    PACS-4-12-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-84741&quot; title=&quot;DMS: Update globaldicom schema to increase the statistics bucket size for request_attrs.request_id&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-84741&quot;&gt;&lt;del&gt;IP-84741&lt;/del&gt;&lt;/a&gt; fix: Set stat targets on table columns as post-availability task.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/d019d3df768a&quot; target=&quot;_blank&quot;&gt;intelepacs:d019d3df768a&lt;/a&gt;  ebelardo    PACS-4-14-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-84741&quot; title=&quot;DMS: Update globaldicom schema to increase the statistics bucket size for request_attrs.request_id&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-84741&quot;&gt;&lt;del&gt;IP-84741&lt;/del&gt;&lt;/a&gt; dummy: dummy merge from PACS-4-12-1&lt;/p&gt;</comment>
                            <comment id="458149" author="robot-bc-rw" created="Fri, 17 Nov 2017 14:21:03 -0500"  >&lt;p&gt;Released by ebelardo to master at 2017-11-17 14:20:57 (push 63191):&lt;br/&gt;
  PACS-4-14-1 (fix)        (previous build: PACS-4-14-1-P279)&lt;br/&gt;
  PACS-4-15-1 (fix)        (previous build: PACS-4-15-1-P130)&lt;br/&gt;
  PACS-4-16-1 (fix)        (previous build: PACS-4-16-1-P22)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-16-2-A15)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/54962d89f98d&quot; target=&quot;_blank&quot;&gt;intelepacs:54962d89f98d&lt;/a&gt;  ebelardo    PACS-4-14-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-84741&quot; title=&quot;DMS: Update globaldicom schema to increase the statistics bucket size for request_attrs.request_id&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-84741&quot;&gt;&lt;del&gt;IP-84741&lt;/del&gt;&lt;/a&gt; fix: Set stat targets on table columns as post-availability task.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/6b16bb36ac78&quot; target=&quot;_blank&quot;&gt;intelepacs:6b16bb36ac78&lt;/a&gt;  ebelardo    PACS-4-15-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-84741&quot; title=&quot;DMS: Update globaldicom schema to increase the statistics bucket size for request_attrs.request_id&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-84741&quot;&gt;&lt;del&gt;IP-84741&lt;/del&gt;&lt;/a&gt; fix: Set stat targets on table columns as post-availability task.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/ab65e6a5826d&quot; target=&quot;_blank&quot;&gt;intelepacs:ab65e6a5826d&lt;/a&gt;  ebelardo    PACS-4-16-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-84741&quot; title=&quot;DMS: Update globaldicom schema to increase the statistics bucket size for request_attrs.request_id&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-84741&quot;&gt;&lt;del&gt;IP-84741&lt;/del&gt;&lt;/a&gt; fix: Set stat targets on table columns as post-availability task.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/a26ae91bfde5&quot; target=&quot;_blank&quot;&gt;intelepacs:a26ae91bfde5&lt;/a&gt;  ebelardo    trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-84741&quot; title=&quot;DMS: Update globaldicom schema to increase the statistics bucket size for request_attrs.request_id&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-84741&quot;&gt;&lt;del&gt;IP-84741&lt;/del&gt;&lt;/a&gt; fix: Set stat targets on table columns as post-availability task.&lt;/p&gt;</comment>
                            <comment id="458189" author="ebelardo" created="Fri, 17 Nov 2017 15:55:52 -0500"  >&lt;p&gt;Tested as documented above.&lt;/p&gt;</comment>
                            <comment id="458309" author="afaiyaz" created="Mon, 20 Nov 2017 11:26:10 -0500"  >&lt;p&gt;As per the &lt;a href=&quot;https://docs.google.com/document/d/1WHDDv3n3OpHkx42vWhAljlnvUUBECuSSLZyMyUahruM/edit#heading=h.v4z96u783e70&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Manual Maintenance workflow&lt;/a&gt;, the Automation Integration tests passed for the build containing this fix. Marking Verified&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://testrail.intelerad.com/testrail/index.php?/plans/view/36689&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Automation Results&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="458356" author="robot-bc-rw" created="Mon, 20 Nov 2017 13:14:35 -0500"  >&lt;p&gt;Released by ebelardo to master at 2017-11-20 13:14:32 (push 63228):&lt;br/&gt;
  PACS-4-15-1 (fix)        (previous build: PACS-4-15-1-P131)&lt;br/&gt;
  PACS-4-16-1 (fix)        (previous build: PACS-4-16-1-P23)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-16-2-A16)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/d4889ea7c585&quot; target=&quot;_blank&quot;&gt;intelepacs:d4889ea7c585&lt;/a&gt;  ebelardo    PACS-4-15-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-84741&quot; title=&quot;DMS: Update globaldicom schema to increase the statistics bucket size for request_attrs.request_id&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-84741&quot;&gt;&lt;del&gt;IP-84741&lt;/del&gt;&lt;/a&gt; fix: Invoke populateImageTriggerServiceKeys() method in DMS ControlData.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/5d53c77d2f85&quot; target=&quot;_blank&quot;&gt;intelepacs:5d53c77d2f85&lt;/a&gt;  ebelardo    PACS-4-16-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-84741&quot; title=&quot;DMS: Update globaldicom schema to increase the statistics bucket size for request_attrs.request_id&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-84741&quot;&gt;&lt;del&gt;IP-84741&lt;/del&gt;&lt;/a&gt; fix: Invoke populateImageTriggerServiceKeys() method in DMS ControlData.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/a624cbafcdb7&quot; target=&quot;_blank&quot;&gt;intelepacs:a624cbafcdb7&lt;/a&gt;  ebelardo    trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-84741&quot; title=&quot;DMS: Update globaldicom schema to increase the statistics bucket size for request_attrs.request_id&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-84741&quot;&gt;&lt;del&gt;IP-84741&lt;/del&gt;&lt;/a&gt; fix: Invoke populateImageTriggerServiceKeys() method in DMS ControlData.&lt;/p&gt;</comment>
                            <comment id="459234" author="dvu" created="Fri, 24 Nov 2017 13:19:21 -0500"  >&lt;p&gt;Included in PACS-4-11-1-R58 (atlas 1.7.P65)&lt;/p&gt;</comment>
                            <comment id="460225" author="dvu" created="Thu, 30 Nov 2017 11:10:00 -0500"  >&lt;p&gt;Included in PACS-4-12-1-R46 (atlas 1.8.P92)&lt;/p&gt;</comment>
                            <comment id="460265" author="dvu" created="Thu, 30 Nov 2017 11:38:51 -0500"  >&lt;p&gt; Included in PACS-4-15-1-R9 (atlas 1.13.P8)&lt;/p&gt;</comment>
                            <comment id="460406" author="dvu" created="Thu, 30 Nov 2017 14:00:38 -0500"  >&lt;p&gt;Included in PACS-4-14-1-R25 (atlas 1.10.P23)&lt;/p&gt;</comment>
                            <comment id="460889" author="dvu" created="Tue, 5 Dec 2017 15:50:38 -0500"  >&lt;p&gt;Included in PACS-4-10-1-R61 (atlas 1.6.P88)&lt;/p&gt;</comment>
                            <comment id="466674" author="dvu" created="Wed, 31 Jan 2018 12:50:57 -0500"  >&lt;p&gt;Included in PACS-4-9-1-R34 (atlas 1.5.86 )&lt;/p&gt;</comment>
                            <comment id="495438" author="rami.bechara" created="Fri, 21 Sep 2018 17:09:43 -0400"  >&lt;p&gt;Included in PACS-4-17-1-R1 (atlas 1.15.P23)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10300">
                    <name>Feature Link</name>
                                                                <inwardlinks description="is part of feature">
                                        <issuelink>
            <issuekey id="35696">IP-12369</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="128108">IP-86686</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="39623" name="DicomMasterService-4.10.1.P301-ims99.noarch.rpm" size="2135545" author="ebelardo" created="Tue, 14 Nov 2017 05:55:01 -0500"/>
                            <attachment id="39624" name="DicomMasterService-4.11.1.P279-ims99.noarch.rpm" size="2148955" author="ebelardo" created="Tue, 14 Nov 2017 06:16:09 -0500"/>
                            <attachment id="39617" name="DicomMasterService-4.12.1.P462-ims99.noarch.rpm" size="2333583" author="ebelardo" created="Mon, 13 Nov 2017 17:33:15 -0500"/>
                            <attachment id="39622" name="DicomMasterService-4.9.1.P308-ims99.noarch.rpm" size="2148741" author="ebelardo" created="Tue, 14 Nov 2017 05:52:52 -0500"/>
                            <attachment id="39618" name="ip84741-DMSSetStatistics-4121-Filelist.diff" size="1172" author="ebelardo" created="Mon, 13 Nov 2017 17:33:30 -0500"/>
                            <attachment id="39619" name="ip84741-DMSSetStatistics-4121.diff" size="76564" author="ebelardo" created="Mon, 13 Nov 2017 17:33:30 -0500"/>
                            <attachment id="39761" name="ip84741-DMSSetStatistics-4141.diff" size="77281" author="ebelardo" created="Fri, 17 Nov 2017 10:50:19 -0500"/>
                            <attachment id="39764" name="ip84741-DMSSetStatistics-4161.diff" size="77252" author="ebelardo" created="Fri, 17 Nov 2017 11:47:44 -0500"/>
                            <attachment id="39625" name="ip84741-DMSSetStatistics-491.diff" size="39038" author="ebelardo" created="Tue, 14 Nov 2017 06:18:44 -0500"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12603" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Affected Clients</customfieldname>
                        <customfieldvalues>
                                        <label>vantp</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;h4&gt;&lt;a name=&quot;RPMVersion&quot;&gt;&lt;/a&gt;RPM Version&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;EWClient%3AEWxxxx%3Cclientcode%3E&quot;&gt;&lt;/a&gt;EW - Client : EWxxxx - &amp;lt;client code&amp;gt;&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Minimalstepstoreproduce&quot;&gt;&lt;/a&gt;Minimal steps to reproduce&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Expectedbehaviour&quot;&gt;&lt;/a&gt;Expected behaviour&lt;/h4&gt;

&lt;h4&gt;&lt;a name=&quot;Whathappenedinstead%3F&quot;&gt;&lt;/a&gt;What happened instead?&lt;/h4&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12114" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Manual Deployment Step Required</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12044"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13135"><![CDATA[DicomMasterService]]></customfieldvalue>
    <customfieldvalue key="13304"><![CDATA[PACSConfigurator]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzdhlr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11908" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Impact info</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue># pacsCore.cfg&lt;br/&gt;
[PostgresStatistics.globaldicom]&lt;br/&gt;
# PostgresStatistics sections direct the Set Statistics Task used by DicomMasterService to set&lt;br/&gt;
# statistics gathering target values on table columns for a specific database schema. This is an&lt;br/&gt;
# optional section.&lt;br/&gt;
#&lt;br/&gt;
# One section is defined per schema in the following format:&lt;br/&gt;
# &lt;br/&gt;
# [PostgresStatistics.&amp;lt;SCHEMA_NAME&amp;gt;]&lt;br/&gt;
# &amp;lt;TABLE_NAME&amp;gt;.&amp;lt;COLUMN_NAME&amp;gt; = &amp;lt;INTEGER_VALUE&amp;gt;&lt;br/&gt;
#&lt;br/&gt;
# Additional lines of configuration may be added as necessary. They may also be removed, but this&lt;br/&gt;
# will not reset or change the value already set.&lt;br/&gt;
#&lt;br/&gt;
# Use -1 to set a column to the postgres default statistics gathering target (normally 100). Note&lt;br/&gt;
# that this is the postgres default and not any default explicitly set in the schema files.&lt;br/&gt;
#&lt;br/&gt;
# To restore a value to its application default value, follow the steps below to avoid introducing&lt;br/&gt;
# a regression:&lt;br/&gt;
# 1 Look in schema file for the statistics value set there.&lt;br/&gt;
# 2 Add a new PostgresStatistics line in the section to reset the value to it.&lt;br/&gt;
# 3 Restart DicomMasterService.&lt;br/&gt;
# 4 The following sample SQL statement can be used to confirm the current statistics value of a column:&lt;br/&gt;
#     SELECT attstattarget FROM pg_attribute WHERE attrelid = &amp;#39;request_attrs&amp;#39;::regclass AND attname = &amp;#39;request_id&amp;#39;;&lt;br/&gt;
# 5 The line can then be removed (or not).&lt;br/&gt;
#&lt;br/&gt;
request_attrs.request_id = 1000&lt;br/&gt;
</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_13409" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Release Project</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[IP-12369]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11001" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>ServiceNow Case #</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>570413</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10804"><![CDATA[INTERNAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="1293">Sprint 78</customfieldvalue>
    <customfieldvalue id="1308">Sprint 79</customfieldvalue>
    <customfieldvalue id="1325">Sprint 80</customfieldvalue>
    <customfieldvalue id="1327">Sprint 81</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[IP-81231] Create activity diagram</title>
                <link>https://jira.intelerad.com/browse/IP-81231</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;Add Dicom Request Merge Activity Diagram&lt;/p&gt;</description>
            <key id="120122">IP-81231</key>
            <summary>Create activity diagram</summary>
                <type id="5" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13916&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="119973">IP-81111</parent>
                                    <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="glaza">George Laza</assignee>
                                    <reporter username="glaza">George Laza</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Jun 2017 10:29:01 -0400</created>
                <updated>Mon, 25 Mar 2019 14:04:59 -0400</updated>
                            <resolved>Fri, 9 Jun 2017 10:34:00 -0400</resolved>
                                    <version>Next Branch (Trunk)</version>
                                    <fixVersion>Next Branch (Trunk)</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="429692" author="robot-bc-rw" created="Fri, 9 Jun 2017 10:31:16 -0400"  >&lt;p&gt;Released by glaza to master at 2017-06-09 10:31:14 (push 59334):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-15-2-A15)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/7275b18ce7f8&quot; target=&quot;_blank&quot;&gt;intelepacs:7275b18ce7f8&lt;/a&gt;  glaza       trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-81231&quot; title=&quot;Create activity diagram&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-81231&quot;&gt;&lt;del&gt;IP-81231&lt;/del&gt;&lt;/a&gt; fix: Add Dicom Request Merge Activity Diagram&lt;/p&gt;</comment>
                            <comment id="429693" author="glaza" created="Fri, 9 Jun 2017 10:34:15 -0400"  >&lt;p&gt;Committed the activity diagram for the Implementation guide.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10300">
                    <name>Feature Link</name>
                                                                <inwardlinks description="is part of feature">
                                        <issuelink>
            <issuekey id="115327">IP-77420</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;RPM Version               : &lt;br/&gt;
EW - Client               : &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=xxxx&quot; target=&quot;_blank&quot;&gt;EWxxxx&lt;/a&gt;  - &amp;lt;client code&amp;gt;&lt;br/&gt;
Minimal steps to reproduce: &lt;br/&gt;
Expected behaviour        : &lt;br/&gt;
What happened instead?    : &lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13000"><![CDATA[NO_RPMS]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzvs5r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13409" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Release Project</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[IP-77420]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="1112">Sprint 3</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[IP-80584] The PacsMerger application only starts to do its work after the merge date (commit task)</title>
                <link>https://jira.intelerad.com/browse/IP-80584</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description></description>
            <key id="119294">IP-80584</key>
            <summary>The PacsMerger application only starts to do its work after the merge date (commit task)</summary>
                <type id="5" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13916&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="118729">IP-80133</parent>
                                    <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="padumas">Pierre-Alain Dumas</assignee>
                                    <reporter username="padumas">Pierre-Alain Dumas</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 May 2017 09:15:13 -0400</created>
                <updated>Mon, 25 Mar 2019 14:05:01 -0400</updated>
                            <resolved>Fri, 26 May 2017 09:47:00 -0400</resolved>
                                    <version>4-15-1</version>
                                    <fixVersion>4-15-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="14400">4 hours</timeoriginalestimate>
                            <timeestimate seconds="0">0 minutes</timeestimate>
                            <timespent seconds="18000">5 hours</timespent>
                                <comments>
                            <comment id="427758" author="robot-bc-rw" created="Fri, 26 May 2017 09:46:14 -0400"  >&lt;p&gt;Released by padumas to master at 2017-05-26 09:46:11 (push 58879):&lt;br/&gt;
  PACS-4-15-1 (fix)        (previous build: PACS-4-15-1-P3)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-15-2-A4)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/17ccc7619123&quot; target=&quot;_blank&quot;&gt;intelepacs:17ccc7619123&lt;/a&gt;  padumas     PACS-4-15-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-80584&quot; title=&quot;The PacsMerger application only starts to do its work after the merge date (commit task)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-80584&quot;&gt;&lt;del&gt;IP-80584&lt;/del&gt;&lt;/a&gt; fix: PacsMerger only does work after the merge date&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/d69dde8a31be&quot; target=&quot;_blank&quot;&gt;intelepacs:d69dde8a31be&lt;/a&gt;  padumas     trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-80584&quot; title=&quot;The PacsMerger application only starts to do its work after the merge date (commit task)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-80584&quot;&gt;&lt;del&gt;IP-80584&lt;/del&gt;&lt;/a&gt; fix: PacsMerger only does work after the merge date&lt;/p&gt;</comment>
                            <comment id="427759" author="padumas" created="Fri, 26 May 2017 09:47:54 -0400"  >&lt;p&gt;PacsMerger only does work after the merge date&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Add a check at the application initialization. If the current date&lt;br/&gt;
  is before the configured merged date, the application will sleep&lt;br/&gt;
  until the merge date.&lt;/li&gt;
	&lt;li&gt;Fixed the thread monitoring by adding refreshes, stopping/starting&lt;br/&gt;
  monitoring when appropriate.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;RPM Version               : &lt;br/&gt;
EW - Client               : &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=xxxx&quot; target=&quot;_blank&quot;&gt;EWxxxx&lt;/a&gt;  - &amp;lt;client code&amp;gt;&lt;br/&gt;
Minimal steps to reproduce: &lt;br/&gt;
Expected behaviour        : &lt;br/&gt;
What happened instead?    : &lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13951"><![CDATA[PacsMerger]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzvl93:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="1112">Sprint 3</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[IP-80366] PacsMerger will verify that the source PACS&apos;s version is less than the targets.</title>
                <link>https://jira.intelerad.com/browse/IP-80366</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description></description>
            <key id="119004">IP-80366</key>
            <summary>PacsMerger will verify that the source PACS&apos;s version is less than the targets.</summary>
                <type id="5" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13916&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="117997">IP-79538</parent>
                                    <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="padumas">Pierre-Alain Dumas</assignee>
                                    <reporter username="padumas">Pierre-Alain Dumas</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 May 2017 14:49:31 -0400</created>
                <updated>Mon, 25 Mar 2019 14:05:03 -0400</updated>
                            <resolved>Wed, 24 May 2017 14:31:00 -0400</resolved>
                                    <version>Next Branch (Trunk)</version>
                                    <fixVersion>4-15-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="21600">6 hours</timeoriginalestimate>
                            <timeestimate seconds="0">0 minutes</timeestimate>
                            <timespent seconds="64800">2 days, 2 hours</timespent>
                                <comments>
                            <comment id="427561" author="robot-bc-rw" created="Wed, 24 May 2017 13:33:28 -0400"  >&lt;p&gt;Released by padumas to master at 2017-05-24 13:33:26 (push 58816):&lt;br/&gt;
  PACS-4-15-1 (fix)        (previous build: PACS-4-15-1-P1)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-15-2-A1)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/b9f469bce248&quot; target=&quot;_blank&quot;&gt;intelepacs:b9f469bce248&lt;/a&gt;  padumas     PACS-4-15-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-80366&quot; title=&quot;PacsMerger will verify that the source PACS&amp;#39;s version is less than the targets.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-80366&quot;&gt;&lt;del&gt;IP-80366&lt;/del&gt;&lt;/a&gt; fix: PacsMerger compares DMS versions before starting&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/e5e97b462dfd&quot; target=&quot;_blank&quot;&gt;intelepacs:e5e97b462dfd&lt;/a&gt;  padumas     trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-80366&quot; title=&quot;PacsMerger will verify that the source PACS&amp;#39;s version is less than the targets.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-80366&quot;&gt;&lt;del&gt;IP-80366&lt;/del&gt;&lt;/a&gt; fix: PacsMerger compares DMS versions before starting&lt;/p&gt;</comment>
                            <comment id="427573" author="padumas" created="Wed, 24 May 2017 14:31:58 -0400"  >&lt;p&gt;PacsMerger compares DMS versions before starting.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Add new API method getVersion to DicomMasterRequestApi. It returns&lt;br/&gt;
  the PACS version (as reported by getVersion --history) under which&lt;br/&gt;
  the DMS is running.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;When the PacsMerger is initialized and before it starts doing any&lt;br/&gt;
  work, it calls the new getVersion method on both the source and&lt;br/&gt;
  destination PACS. If the destination version is newer or equal to&lt;br/&gt;
  the source version, the PacsMerger application is allowed to&lt;br/&gt;
  continue.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Add a new &apos;showVersions&apos; option to managePacsMerger that will&lt;br/&gt;
  display the source and destination verions, as reported by the new&lt;br/&gt;
  API in DMS.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;RPM Version               : &lt;br/&gt;
EW - Client               : &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=xxxx&quot; target=&quot;_blank&quot;&gt;EWxxxx&lt;/a&gt;  - &amp;lt;client code&amp;gt;&lt;br/&gt;
Minimal steps to reproduce: &lt;br/&gt;
Expected behaviour        : &lt;br/&gt;
What happened instead?    : &lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13135"><![CDATA[DicomMasterService]]></customfieldvalue>
    <customfieldvalue key="13951"><![CDATA[PacsMerger]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzvk0f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="1102">Sprint 2</customfieldvalue>
    <customfieldvalue id="1112">Sprint 3</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[IP-79983] PacsMerger + DMS: Enhance refresh study to return an outcome (for optimization)</title>
                <link>https://jira.intelerad.com/browse/IP-79983</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;Enhance  the refreshStudy method  of DicomMasterRequestApi3 to return an outcome  indicating whether  the study it was asked to refresh existed or not. This will allow us to do an optimization where we will skip the verification in  that  case if the study did not exist. Since this will usually be the common scenario (most studies are not shared between source and destination PACS) then this will likely greatly reduce the number of calls to DMS the PacsMerger application will have to  do.&lt;/p&gt;</description>
            <key id="118547">IP-79983</key>
            <summary>PacsMerger + DMS: Enhance refresh study to return an outcome (for optimization)</summary>
                <type id="5" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13916&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="117057">IP-78714</parent>
                                    <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="padumas">Pierre-Alain Dumas</assignee>
                                    <reporter username="padumas">Pierre-Alain Dumas</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 May 2017 08:53:54 -0400</created>
                <updated>Mon, 25 Mar 2019 14:05:05 -0400</updated>
                            <resolved>Mon, 15 May 2017 14:10:00 -0400</resolved>
                                    <version>Next Branch (Trunk)</version>
                                    <fixVersion>Next Branch (Trunk)</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="28800">1 day</timeoriginalestimate>
                            <timeestimate seconds="0">0 minutes</timeestimate>
                            <timespent seconds="59400">2 days, 30 minutes</timespent>
                                <comments>
                            <comment id="426325" author="robot-bc-rw" created="Mon, 15 May 2017 14:00:48 -0400"  >&lt;p&gt;Released by padumas to master at 2017-05-15 14:00:46 (push 58558):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-14-4-A146)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/93192c4c5fab&quot; target=&quot;_blank&quot;&gt;intelepacs:93192c4c5fab&lt;/a&gt;  padumas     trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-79983&quot; title=&quot;PacsMerger + DMS: Enhance refresh study to return an outcome (for optimization)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-79983&quot;&gt;&lt;del&gt;IP-79983&lt;/del&gt;&lt;/a&gt; fix: Don&apos;t verify a study if nothing was refreshed&lt;/p&gt;</comment>
                            <comment id="426326" author="padumas" created="Mon, 15 May 2017 14:10:35 -0400"  >&lt;p&gt;Don&apos;t verify a study if nothing was refreshed&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Modified the return value of DicomMasterRequestApi.refreshStudy to&lt;br/&gt;
  return a RefreshStudyOutcome.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The RefreshStudyOutcome indicates whether the study was refreshed or&lt;br/&gt;
  not.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;When a study is refreshed in the PacsMerger application, if the&lt;br/&gt;
  study was not refreshed, then it is directly marked as completed (most&lt;br/&gt;
  likely scenario, the study was not shared between the source and&lt;br/&gt;
  destination PACS and thus the study did not exist when we tried to&lt;br/&gt;
  refresh it).&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="426360" author="robot-bc-rw" created="Mon, 15 May 2017 16:09:10 -0400"  >&lt;p&gt;Released by padumas to master at 2017-05-15 16:09:08 (push 58569):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-14-4-A146)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/bd92958552a4&quot; target=&quot;_blank&quot;&gt;intelepacs:bd92958552a4&lt;/a&gt;  padumas     trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-79983&quot; title=&quot;PacsMerger + DMS: Enhance refresh study to return an outcome (for optimization)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-79983&quot;&gt;&lt;del&gt;IP-79983&lt;/del&gt;&lt;/a&gt; fix: Disable stdout output for some tests.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;RPM Version               : &lt;br/&gt;
EW - Client               : &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=xxxx&quot; target=&quot;_blank&quot;&gt;EWxxxx&lt;/a&gt;  - &amp;lt;client code&amp;gt;&lt;br/&gt;
Minimal steps to reproduce: &lt;br/&gt;
Expected behaviour        : &lt;br/&gt;
What happened instead?    : &lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13135"><![CDATA[DicomMasterService]]></customfieldvalue>
    <customfieldvalue key="13951"><![CDATA[PacsMerger]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzvief:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="1095">Sprint 1</customfieldvalue>
    <customfieldvalue id="1102">Sprint 2</customfieldvalue>
    <customfieldvalue id="1112">Sprint 3</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[IP-79167] PacsMerger: Keep state of source and destination workers</title>
                <link>https://jira.intelerad.com/browse/IP-79167</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;Keep a state indicating whether the download of the study instance uids with global deletions from the source and the target has completed.&lt;/p&gt;

&lt;p&gt;If interrupted while downloading, the PacsMergerDispatcher will reschedule the workers. Each worker, when rescheduled, will first drop any data from previous attempts and download again.&lt;/p&gt;</description>
            <key id="117586">IP-79167</key>
            <summary>PacsMerger: Keep state of source and destination workers</summary>
                <type id="5" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13916&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="117055">IP-78712</parent>
                                    <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="padumas">Pierre-Alain Dumas</assignee>
                                    <reporter username="padumas">Pierre-Alain Dumas</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 Apr 2017 11:43:54 -0400</created>
                <updated>Mon, 25 Mar 2019 14:05:13 -0400</updated>
                            <resolved>Mon, 1 May 2017 14:50:00 -0400</resolved>
                                    <version>Next Branch (Trunk)</version>
                                    <fixVersion>Next Branch (Trunk)</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="57600">2 days</timeoriginalestimate>
                            <timeestimate seconds="0">0 minutes</timeestimate>
                            <timespent seconds="122400">4 days, 2 hours</timespent>
                                <comments>
                            <comment id="424390" author="robot-bc-rw" created="Mon, 1 May 2017 14:45:06 -0400"  >&lt;p&gt;Released by padumas to master at 2017-05-01 14:45:04 (push 58060):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-14-4-A131)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/3253e4a03b83&quot; target=&quot;_blank&quot;&gt;intelepacs:3253e4a03b83&lt;/a&gt;  padumas     trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-78883&quot; title=&quot;PacsMerger: Create worker to get source and destination global deletions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-78883&quot;&gt;&lt;del&gt;IP-78883&lt;/del&gt;&lt;/a&gt; fix,&lt;a href=&quot;https://jira.intelerad.com/browse/IP-79167&quot; title=&quot;PacsMerger: Keep state of source and destination workers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-79167&quot;&gt;&lt;del&gt;IP-79167&lt;/del&gt;&lt;/a&gt; fix: Download source and destination deleted studies in local table&lt;/p&gt;</comment>
                            <comment id="424392" author="padumas" created="Mon, 1 May 2017 14:50:17 -0400"  >&lt;p&gt;Download source and destination deleted studies in local table&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Modify the PacsMergerDispatcher to become a simple state machine&lt;br/&gt;
  that goes through the steps, as defined by an enum.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Add steps to download the source and destination studies that have&lt;br/&gt;
  global deletions requests&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Implement database queries to support the state machine and to store&lt;br/&gt;
  the source and destination studies.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;RPM Version               : &lt;br/&gt;
EW - Client               : &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=xxxx&quot; target=&quot;_blank&quot;&gt;EWxxxx&lt;/a&gt;  - &amp;lt;client code&amp;gt;&lt;br/&gt;
Minimal steps to reproduce: &lt;br/&gt;
Expected behaviour        : &lt;br/&gt;
What happened instead?    : &lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13951"><![CDATA[PacsMerger]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzvdyf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="1095">Sprint 1</customfieldvalue>
    <customfieldvalue id="1102">Sprint 2</customfieldvalue>
    <customfieldvalue id="1112">Sprint 3</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[IP-78892] Backport to 4-12-1</title>
                <link>https://jira.intelerad.com/browse/IP-78892</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description></description>
            <key id="117255">IP-78892</key>
            <summary>Backport to 4-12-1</summary>
                <type id="5" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13916&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="117080">IP-78735</parent>
                                    <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="padumas">Pierre-Alain Dumas</assignee>
                                    <reporter username="glaza">George Laza</reporter>
                        <labels>
                            <label>regression_bug</label>
                    </labels>
                <created>Mon, 17 Apr 2017 15:05:39 -0400</created>
                <updated>Mon, 25 Mar 2019 14:05:15 -0400</updated>
                            <resolved>Mon, 5 Jun 2017 16:10:00 -0400</resolved>
                                    <version>4-12-1</version>
                                    <fixVersion>4-12-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                    <timeoriginalestimate seconds="86400">3 days</timeoriginalestimate>
                            <timeestimate seconds="0">0 minutes</timeestimate>
                            <timespent seconds="172800">1 week, 1 day</timespent>
                                <comments>
                            <comment id="428652" author="glaza" created="Thu, 1 Jun 2017 17:17:47 -0400"  >&lt;p&gt;I have attached the &lt;a href=&quot;https://jira.intelerad.com/secure/attachment/35894/4-14-1-backport.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;4-14-1 backport patch&lt;/a&gt; file to this issue.&lt;/p&gt;</comment>
                            <comment id="428962" author="robot-bc-rw" created="Mon, 5 Jun 2017 14:52:26 -0400"  >&lt;p&gt;Released by padumas to master at 2017-06-05 14:52:24 (push 59173):&lt;br/&gt;
  PACS-4-12-1 (fix)        (previous build: PACS-4-12-1-P341)&lt;br/&gt;
  PACS-4-13-1 (dummy)      (previous build: PACS-4-13-1-P158)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/f85aefb7468d&quot; target=&quot;_blank&quot;&gt;intelepacs:f85aefb7468d&lt;/a&gt;  padumas     PACS-4-12-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-78892&quot; title=&quot;Backport to 4-12-1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-78892&quot;&gt;&lt;del&gt;IP-78892&lt;/del&gt;&lt;/a&gt; fix: Backport PacsMerger to PACS-4-12-1.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/2413142a8057&quot; target=&quot;_blank&quot;&gt;intelepacs:2413142a8057&lt;/a&gt;  padumas     PACS-4-13-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-78892&quot; title=&quot;Backport to 4-12-1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-78892&quot;&gt;&lt;del&gt;IP-78892&lt;/del&gt;&lt;/a&gt; dummy: dummy merge from PACS-4-12-1&lt;/p&gt;</comment>
                            <comment id="428965" author="robot-bc-rw" created="Mon, 5 Jun 2017 15:05:54 -0400"  >&lt;p&gt;Released by padumas to master at 2017-06-05 15:05:52 (push 59175):&lt;br/&gt;
  PACS-4-13-1 (fix)        (previous build: PACS-4-13-1-P158)&lt;br/&gt;
  PACS-4-14-1 (dummy)      (previous build: PACS-4-14-1-P143)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/9accc4289654&quot; target=&quot;_blank&quot;&gt;intelepacs:9accc4289654&lt;/a&gt;  padumas     PACS-4-13-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-78892&quot; title=&quot;Backport to 4-12-1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-78892&quot;&gt;&lt;del&gt;IP-78892&lt;/del&gt;&lt;/a&gt; fix: Backport PacsMerger to PACS-4-12-1 and up.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/d989b00f9032&quot; target=&quot;_blank&quot;&gt;intelepacs:d989b00f9032&lt;/a&gt;  padumas     PACS-4-14-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-78892&quot; title=&quot;Backport to 4-12-1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-78892&quot;&gt;&lt;del&gt;IP-78892&lt;/del&gt;&lt;/a&gt; dummy: dummy merge from PACS-4-13-1&lt;/p&gt;</comment>
                            <comment id="428978" author="robot-bc-rw" created="Mon, 5 Jun 2017 15:55:52 -0400"  >&lt;p&gt;Released by padumas to master at 2017-06-05 15:55:50 (push 59181):&lt;br/&gt;
  PACS-4-14-1 (fix)        (previous build: PACS-4-14-1-P143)&lt;br/&gt;
  PACS-4-15-1 (dummy)      (previous build: PACS-4-15-1-P14)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/02e671e79b47&quot; target=&quot;_blank&quot;&gt;intelepacs:02e671e79b47&lt;/a&gt;  padumas     PACS-4-14-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-78892&quot; title=&quot;Backport to 4-12-1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-78892&quot;&gt;&lt;del&gt;IP-78892&lt;/del&gt;&lt;/a&gt; fix: Backport PacsMerger to PACS-4-12-1 and up.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/94f1e19edd65&quot; target=&quot;_blank&quot;&gt;intelepacs:94f1e19edd65&lt;/a&gt;  padumas     PACS-4-15-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-78892&quot; title=&quot;Backport to 4-12-1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-78892&quot;&gt;&lt;del&gt;IP-78892&lt;/del&gt;&lt;/a&gt; dummy: dummy merge from PACS-4-14-1&lt;/p&gt;</comment>
                            <comment id="428983" author="padumas" created="Mon, 5 Jun 2017 16:02:41 -0400"  >&lt;p&gt;This is blocked because of &lt;a href=&quot;https://jira.intelerad.com/browse/IP-80480&quot; title=&quot;LDS appears to leak Postgres connections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-80480&quot;&gt;&lt;del&gt;IP-80480&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="428988" author="padumas" created="Mon, 5 Jun 2017 16:10:43 -0400"  >&lt;p&gt;Description of the solution:&lt;/p&gt;

&lt;p&gt;Backported all changesets listed in &lt;a href=&quot;https://jira.intelerad.com/browse/IP-78735&quot; title=&quot;Dicom Request Merge - Backport to PACS-4-12-1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-78735&quot;&gt;IP-78735&lt;/a&gt;. Then merged all the way to PACS-4-15-1.&lt;/p&gt;

&lt;p&gt;Tests executed:&lt;/p&gt;

&lt;p&gt;On each branch, ran the unit tests.  &lt;/p&gt;

&lt;p&gt;Unit tests added or modified: &lt;/p&gt;

&lt;p&gt;Same tests as in the original commits.&lt;/p&gt;</comment>
                            <comment id="429500" author="padumas" created="Thu, 8 Jun 2017 14:19:27 -0400"  >&lt;p&gt;Introduced regression bug &lt;a href=&quot;https://jira.intelerad.com/browse/IP-81194&quot; title=&quot;PACS.cfg.in: duplicate section ConflictingStudyDetectionPolicy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-81194&quot;&gt;&lt;del&gt;IP-81194&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="429603" author="dvu" created="Thu, 8 Jun 2017 16:18:57 -0400"  >&lt;p&gt;Included in PACS-4-12-1-R35 (atlas 1.8.P87)&lt;/p&gt;</comment>
                            <comment id="430644" author="dvu" created="Fri, 16 Jun 2017 15:53:20 -0400"  >&lt;p&gt;Included in PACS-4-14-1-R12 (atlas 1.10.P17)&lt;/p&gt;</comment>
                            <comment id="430803" author="padumas" created="Mon, 19 Jun 2017 14:37:18 -0400"  >&lt;p&gt;Introduced regression bug &lt;a href=&quot;https://jira.intelerad.com/browse/IP-81601&quot; title=&quot;DbIntermediariesLib: remove depency of the common fileset on the appinit fileset&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-81601&quot;&gt;&lt;del&gt;IP-81601&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="432346" author="dvu" created="Wed, 5 Jul 2017 16:22:19 -0400"  >&lt;p&gt;Included in PACS-4-13-1-R19 (atlas 1.9.P32)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="35894" name="4-14-1-backport.patch" size="747927" author="glaza" created="Thu, 1 Jun 2017 17:16:51 -0400"/>
                            <attachment id="35839" name="DicomMasterService-4.12.1.P337-ims99.noarch.rpm" size="2325311" author="padumas" created="Wed, 31 May 2017 15:08:06 -0400"/>
                            <attachment id="35838" name="LocalDicomService-4.12.1.P337-ims99.i386.rpm" size="6991604" author="padumas" created="Wed, 31 May 2017 15:08:06 -0400"/>
                            <attachment id="35837" name="PacsMerger-4.12.1.P337-ims99.noarch.rpm" size="831035" author="padumas" created="Wed, 31 May 2017 15:08:06 -0400"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;RPM Version               : &lt;br/&gt;
EW - Client               : &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=xxxx&quot; target=&quot;_blank&quot;&gt;EWxxxx&lt;/a&gt;  - &amp;lt;client code&amp;gt;&lt;br/&gt;
Minimal steps to reproduce: &lt;br/&gt;
Expected behaviour        : &lt;br/&gt;
What happened instead?    : &lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13135"><![CDATA[DicomMasterService]]></customfieldvalue>
    <customfieldvalue key="13268"><![CDATA[LocalDicomService]]></customfieldvalue>
    <customfieldvalue key="13951"><![CDATA[PacsMerger]]></customfieldvalue>
    <customfieldvalue key="13420"><![CDATA[SystemCatalog]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzvch3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="1102">Sprint 2</customfieldvalue>
    <customfieldvalue id="1112">Sprint 3</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13804" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Stop Deploy?</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14408"><![CDATA[Yes]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>


<item>
            <title>[IP-78885] PacsMerger: Invoke DMS and request a summary correction</title>
                <link>https://jira.intelerad.com/browse/IP-78885</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;Create a thread that will request a summary correction for each study on the owner DMS.&lt;/p&gt;</description>
            <key id="117247">IP-78885</key>
            <summary>PacsMerger: Invoke DMS and request a summary correction</summary>
                <type id="5" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13916&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="117059">IP-78716</parent>
                                    <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="padumas">Pierre-Alain Dumas</assignee>
                                    <reporter username="glaza">George Laza</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Apr 2017 14:54:43 -0400</created>
                <updated>Mon, 25 Mar 2019 14:05:15 -0400</updated>
                            <resolved>Thu, 18 May 2017 13:29:00 -0400</resolved>
                                    <version>Next Branch (Trunk)</version>
                                    <fixVersion>Next Branch (Trunk)</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="28800">1 day</timeoriginalestimate>
                            <timeestimate seconds="0">0 minutes</timeestimate>
                            <timespent seconds="71100">2 days, 3 hours, 45 minutes</timespent>
                                <comments>
                            <comment id="427079" author="padumas" created="Thu, 18 May 2017 13:29:54 -0400"  >&lt;p&gt;Implemented the setStudyOwnership option of managePacsMerge.&lt;/p&gt;</comment>
                            <comment id="427103" author="robot-bc-rw" created="Thu, 18 May 2017 14:18:54 -0400"  >&lt;p&gt;Released by padumas to master at 2017-05-18 14:18:52 (push 58696):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-14-4-A152)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/5e71df61a4f3&quot; target=&quot;_blank&quot;&gt;intelepacs:5e71df61a4f3&lt;/a&gt;  padumas     trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-78885&quot; title=&quot;PacsMerger: Invoke DMS and request a summary correction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-78885&quot;&gt;&lt;del&gt;IP-78885&lt;/del&gt;&lt;/a&gt; fix: Implement the setStudyOwnership option&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;RPM Version               : &lt;br/&gt;
EW - Client               : &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=xxxx&quot; target=&quot;_blank&quot;&gt;EWxxxx&lt;/a&gt;  - &amp;lt;client code&amp;gt;&lt;br/&gt;
Minimal steps to reproduce: &lt;br/&gt;
Expected behaviour        : &lt;br/&gt;
What happened instead?    : &lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13135"><![CDATA[DicomMasterService]]></customfieldvalue>
    <customfieldvalue key="13951"><![CDATA[PacsMerger]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzvcfb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="1102">Sprint 2</customfieldvalue>
    <customfieldvalue id="1112">Sprint 3</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[IP-78883] PacsMerger: Create worker to get source and destination global deletions</title>
                <link>https://jira.intelerad.com/browse/IP-78883</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;Invoke new hessian method and store study information in local postgres tables for each PACS.&lt;/p&gt;</description>
            <key id="117245">IP-78883</key>
            <summary>PacsMerger: Create worker to get source and destination global deletions</summary>
                <type id="5" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13916&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="117055">IP-78712</parent>
                                    <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="padumas">Pierre-Alain Dumas</assignee>
                                    <reporter username="glaza">George Laza</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Apr 2017 14:47:37 -0400</created>
                <updated>Mon, 25 Mar 2019 14:05:15 -0400</updated>
                            <resolved>Mon, 1 May 2017 14:49:00 -0400</resolved>
                                    <version>Next Branch (Trunk)</version>
                                    <fixVersion>Next Branch (Trunk)</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="28800">1 day</timeoriginalestimate>
                            <timeestimate seconds="0">0 minutes</timeestimate>
                            <timespent seconds="30600">1 day, 30 minutes</timespent>
                                <comments>
                            <comment id="424389" author="robot-bc-rw" created="Mon, 1 May 2017 14:45:06 -0400"  >&lt;p&gt;Released by padumas to master at 2017-05-01 14:45:04 (push 58060):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-14-4-A131)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/3253e4a03b83&quot; target=&quot;_blank&quot;&gt;intelepacs:3253e4a03b83&lt;/a&gt;  padumas     trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-78883&quot; title=&quot;PacsMerger: Create worker to get source and destination global deletions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-78883&quot;&gt;&lt;del&gt;IP-78883&lt;/del&gt;&lt;/a&gt; fix,&lt;a href=&quot;https://jira.intelerad.com/browse/IP-79167&quot; title=&quot;PacsMerger: Keep state of source and destination workers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-79167&quot;&gt;&lt;del&gt;IP-79167&lt;/del&gt;&lt;/a&gt; fix: Download source and destination deleted studies in local table&lt;/p&gt;</comment>
                            <comment id="424391" author="padumas" created="Mon, 1 May 2017 14:49:54 -0400"  >&lt;p&gt;Download source and destination deleted studies in local table&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Modify the PacsMergerDispatcher to become a simple state machine&lt;br/&gt;
  that goes through the steps, as defined by an enum.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Add steps to download the source and destination studies that have&lt;br/&gt;
  global deletions requests&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Implement database queries to support the state machine and to store&lt;br/&gt;
  the source and destination studies.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;RPM Version               : &lt;br/&gt;
EW - Client               : &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=xxxx&quot; target=&quot;_blank&quot;&gt;EWxxxx&lt;/a&gt;  - &amp;lt;client code&amp;gt;&lt;br/&gt;
Minimal steps to reproduce: &lt;br/&gt;
Expected behaviour        : &lt;br/&gt;
What happened instead?    : &lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13951"><![CDATA[PacsMerger]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzvcev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="1095">Sprint 1</customfieldvalue>
    <customfieldvalue id="1102">Sprint 2</customfieldvalue>
    <customfieldvalue id="1112">Sprint 3</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[IP-78882] PacsMerger: Refresh studies</title>
                <link>https://jira.intelerad.com/browse/IP-78882</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;Invoke DMS to refresh a deleted study.&lt;/p&gt;</description>
            <key id="117244">IP-78882</key>
            <summary>PacsMerger: Refresh studies</summary>
                <type id="5" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13916&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="117057">IP-78714</parent>
                                    <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="padumas">Pierre-Alain Dumas</assignee>
                                    <reporter username="glaza">George Laza</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Apr 2017 14:45:30 -0400</created>
                <updated>Mon, 25 Mar 2019 14:05:15 -0400</updated>
                            <resolved>Wed, 3 May 2017 13:30:00 -0400</resolved>
                                    <version>Next Branch (Trunk)</version>
                                    <fixVersion>Next Branch (Trunk)</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="28800">1 day</timeoriginalestimate>
                            <timeestimate seconds="0">0 minutes</timeestimate>
                            <timespent seconds="39600">1 day, 3 hours</timespent>
                                <comments>
                            <comment id="424739" author="robot-bc-rw" created="Wed, 3 May 2017 13:28:25 -0400"  >&lt;p&gt;Released by padumas to master at 2017-05-03 13:28:23 (push 58147):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-14-4-A133)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/b07ce2cd2407&quot; target=&quot;_blank&quot;&gt;intelepacs:b07ce2cd2407&lt;/a&gt;  padumas     trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-78882&quot; title=&quot;PacsMerger: Refresh studies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-78882&quot;&gt;&lt;del&gt;IP-78882&lt;/del&gt;&lt;/a&gt; fix: Implement the refresh studies steps by calling DMS&lt;/p&gt;</comment>
                            <comment id="424740" author="padumas" created="Wed, 3 May 2017 13:30:20 -0400"  >&lt;p&gt;Implement the refresh studies steps by calling DMS&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Implement both the refresh source and destination studies by calling&lt;br/&gt;
  the refreshStudy API method of DMS.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Modify transaction handling by taking advantage of the&lt;br/&gt;
  TransactionWrapper class. Also stop doing rollbacks from DB callable&lt;br/&gt;
  as this is already done by the DefaultDatabaseQueue.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;RPM Version               : &lt;br/&gt;
EW - Client               : &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=xxxx&quot; target=&quot;_blank&quot;&gt;EWxxxx&lt;/a&gt;  - &amp;lt;client code&amp;gt;&lt;br/&gt;
Minimal steps to reproduce: &lt;br/&gt;
Expected behaviour        : &lt;br/&gt;
What happened instead?    : &lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13135"><![CDATA[DicomMasterService]]></customfieldvalue>
    <customfieldvalue key="13951"><![CDATA[PacsMerger]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzvcen:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="1095">Sprint 1</customfieldvalue>
    <customfieldvalue id="1102">Sprint 2</customfieldvalue>
    <customfieldvalue id="1112">Sprint 3</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[IP-78811] Some columns in globaldicom.study_conflict should be NOT NULL</title>
                <link>https://jira.intelerad.com/browse/IP-78811</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;When creating or updating the &lt;tt&gt;globaldicom&lt;/tt&gt; schema the columns &lt;tt&gt;study_uid_second&lt;/tt&gt; and &lt;tt&gt;dicom_metadata_second&lt;/tt&gt; are declared to allows NULLs.  When inserting new rows the code always ensures they have values, so they should be declared NOT NULL.  (Changing this would also simplify the construction of &lt;tt&gt;StudyConflict&lt;/tt&gt; instances from query results.)&lt;/p&gt;

&lt;p&gt;The affected files are:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Databases/Databases/GlobalDicom/Schema/GlobalDicom-schema.sql
Databases/Databases/GlobalDicom/Schema/GlobalDicom-upgrade-005.sql
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
            <key id="117160">IP-78811</key>
            <summary>Some columns in globaldicom.study_conflict should be NOT NULL</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                            <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="ldegruchy">Luke de Gruchy</assignee>
                                    <reporter username="bheelan">Bill Heelan</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Apr 2017 10:30:43 -0400</created>
                <updated>Fri, 26 Apr 2019 14:07:41 -0400</updated>
                            <resolved>Thu, 13 Apr 2017 16:24:00 -0400</resolved>
                                    <version>4-9-1</version>
                                    <fixVersion>4-9-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                    <timeoriginalestimate seconds="7200">2 hours</timeoriginalestimate>
                                    <timespent seconds="7200">2 hours</timespent>
                                            <aggregatetimeoriginalestimate seconds="14400">4 hours</aggregatetimeoriginalestimate>
                                                    <aggregatetimespent seconds="7200">2 hours</aggregatetimespent>
                                    <comments>
                            <comment id="422284" author="luke.degruchy" created="Thu, 13 Apr 2017 16:24:03 -0400"  >&lt;p&gt;Set both columns to NOT NULL in both the create and update scripts.&lt;/p&gt;</comment>
                            <comment id="423870" author="robot-bc-rw" created="Thu, 27 Apr 2017 12:16:16 -0400"  >&lt;p&gt;Released by bdasilva to master at 2017-04-27 12:16:21 (push 57950):&lt;br/&gt;
  PACS-4-9-1 (fix)        (previous build: PACS-4-9-1-P290)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/4cd26d46826f&quot; target=&quot;_blank&quot;&gt;intelepacs:4cd26d46826f&lt;/a&gt;  ldegruchy   PACS-4-9-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-78811&quot; title=&quot;Some columns in globaldicom.study_conflict should be NOT NULL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-78811&quot;&gt;&lt;del&gt;IP-78811&lt;/del&gt;&lt;/a&gt; fix: Set columns to not null.&lt;/p&gt;</comment>
                            <comment id="425492" author="dle" created="Tue, 9 May 2017 11:07:48 -0400"  >&lt;p&gt;Closing this task, as I had already verified this one&lt;/p&gt;</comment>
                            <comment id="426823" author="dvu" created="Wed, 17 May 2017 14:06:21 -0400"  >&lt;p&gt;     Included in PACS-4-9-1-R30 (atlas 1.5.86 )&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10300">
                    <name>Feature Link</name>
                                                                <inwardlinks description="is part of feature">
                                        <issuelink>
            <issuekey id="35696">IP-12369</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                            <subtask id="117161">IP-78812</subtask>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;RPM Version               : &lt;br/&gt;
EW - Client               : &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=xxxx&quot; target=&quot;_blank&quot;&gt;EWxxxx&lt;/a&gt;  - &amp;lt;client code&amp;gt;&lt;br/&gt;
Minimal steps to reproduce: &lt;br/&gt;
Expected behaviour        : &lt;br/&gt;
What happened instead?    : &lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10600" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>IP-72387</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13074"><![CDATA[Database-GlobalDicom]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzvbvj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13409" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Release Project</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[IP-12369]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10804"><![CDATA[INTERNAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:float">
                        <customfieldname>Story Points</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.5</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-77965] PacsMerger: Create Application Framework</title>
                <link>https://jira.intelerad.com/browse/IP-77965</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;Create the following:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;project&lt;/li&gt;
	&lt;li&gt;scons&lt;/li&gt;
	&lt;li&gt;run/kill scripts&lt;/li&gt;
	&lt;li&gt;ipmon plugin&lt;/li&gt;
	&lt;li&gt;main application&lt;/li&gt;
	&lt;li&gt;command-line application&lt;/li&gt;
	&lt;li&gt;hessian service&lt;/li&gt;
	&lt;li&gt;guice injection module&lt;/li&gt;
&lt;/ol&gt;
</description>
            <key id="116143">IP-77965</key>
            <summary>PacsMerger: Create Application Framework</summary>
                <type id="5" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13916&amp;avatarType=issuetype">Sub-task</type>
                            <parent id="115338">IP-77431</parent>
                                    <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="glaza">George Laza</assignee>
                                    <reporter username="glaza">George Laza</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Mar 2017 12:17:48 -0400</created>
                <updated>Mon, 25 Mar 2019 14:05:22 -0400</updated>
                            <resolved>Tue, 11 Apr 2017 13:28:00 -0400</resolved>
                                    <version>4-12-1</version>
                                    <fixVersion>Next Branch (Trunk)</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="421055" author="robot-bc-rw" created="Wed, 5 Apr 2017 11:58:05 -0400"  >&lt;p&gt;Released by glaza to master at 2017-04-05 11:58:02 (push 57201):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-14-4-A107)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/de4072985f4c&quot; target=&quot;_blank&quot;&gt;intelepacs:de4072985f4c&lt;/a&gt;  glaza       trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-77965&quot; title=&quot;PacsMerger: Create Application Framework&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-77965&quot;&gt;&lt;del&gt;IP-77965&lt;/del&gt;&lt;/a&gt; fix: Add PacsMerger Application Framework&lt;/p&gt;</comment>
                            <comment id="421841" author="glaza" created="Tue, 11 Apr 2017 13:28:12 -0400"  >&lt;p&gt;The application framework was committed to trunk.&lt;/p&gt;</comment>
                            <comment id="429364" author="robot-bc-rw" created="Wed, 7 Jun 2017 16:01:20 -0400"  >&lt;p&gt;Released by glaza to master at 2017-06-07 16:01:16 (push 59267):&lt;br/&gt;
  PACS-4-12-1 (fix)        (previous build: PACS-4-12-1-P345)&lt;br/&gt;
  PACS-4-13-1 (fix)        (previous build: PACS-4-13-1-P159)&lt;br/&gt;
  PACS-4-14-1 (fix)        (previous build: PACS-4-14-1-P146)&lt;br/&gt;
  PACS-4-15-1 (fix)        (previous build: PACS-4-15-1-P14)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-15-2-A13)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/00eb3ad549fe&quot; target=&quot;_blank&quot;&gt;intelepacs:00eb3ad549fe&lt;/a&gt;  glaza       PACS-4-12-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-77965&quot; title=&quot;PacsMerger: Create Application Framework&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-77965&quot;&gt;&lt;del&gt;IP-77965&lt;/del&gt;&lt;/a&gt; fix: Change Prometheus port to 20080. See &lt;a href=&quot;https://jira.intelerad.com/browse/IP-93521&quot; title=&quot;Fail the build if multiple applications use the same Prometheus port&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-93521&quot;&gt;BC-2648&lt;/a&gt; for more details.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/c72f5aac48be&quot; target=&quot;_blank&quot;&gt;intelepacs:c72f5aac48be&lt;/a&gt;  glaza       PACS-4-13-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-77965&quot; title=&quot;PacsMerger: Create Application Framework&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-77965&quot;&gt;&lt;del&gt;IP-77965&lt;/del&gt;&lt;/a&gt; fix: Change Prometheus port to 20080. See &lt;a href=&quot;https://jira.intelerad.com/browse/IP-93521&quot; title=&quot;Fail the build if multiple applications use the same Prometheus port&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-93521&quot;&gt;BC-2648&lt;/a&gt; for more details.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/2e721b6a302a&quot; target=&quot;_blank&quot;&gt;intelepacs:2e721b6a302a&lt;/a&gt;  glaza       PACS-4-14-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-77965&quot; title=&quot;PacsMerger: Create Application Framework&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-77965&quot;&gt;&lt;del&gt;IP-77965&lt;/del&gt;&lt;/a&gt; fix: Change Prometheus port to 20080. See &lt;a href=&quot;https://jira.intelerad.com/browse/IP-93521&quot; title=&quot;Fail the build if multiple applications use the same Prometheus port&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-93521&quot;&gt;BC-2648&lt;/a&gt; for more details.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/1f12f369198e&quot; target=&quot;_blank&quot;&gt;intelepacs:1f12f369198e&lt;/a&gt;  glaza       PACS-4-15-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-77965&quot; title=&quot;PacsMerger: Create Application Framework&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-77965&quot;&gt;&lt;del&gt;IP-77965&lt;/del&gt;&lt;/a&gt; fix: Change Prometheus port to 20080. See &lt;a href=&quot;https://jira.intelerad.com/browse/IP-93521&quot; title=&quot;Fail the build if multiple applications use the same Prometheus port&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-93521&quot;&gt;BC-2648&lt;/a&gt; for more details.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/834feb783050&quot; target=&quot;_blank&quot;&gt;intelepacs:834feb783050&lt;/a&gt;  glaza       trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-77965&quot; title=&quot;PacsMerger: Create Application Framework&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-77965&quot;&gt;&lt;del&gt;IP-77965&lt;/del&gt;&lt;/a&gt; fix: Change Prometheus port to 20080. See &lt;a href=&quot;https://jira.intelerad.com/browse/IP-93521&quot; title=&quot;Fail the build if multiple applications use the same Prometheus port&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-93521&quot;&gt;BC-2648&lt;/a&gt; for more details.&lt;/p&gt;</comment>
                            <comment id="430669" author="dvu" created="Fri, 16 Jun 2017 15:53:22 -0400"  >&lt;p&gt;Included in PACS-4-14-1-R12 (atlas 1.10.P17)&lt;/p&gt;</comment>
                            <comment id="431615" author="dvu" created="Tue, 27 Jun 2017 14:53:10 -0400"  >&lt;p&gt;Included in PACS-4-12-1-R36 (atlas 1.8.P88)&lt;/p&gt;</comment>
                            <comment id="432333" author="dvu" created="Wed, 5 Jul 2017 16:22:17 -0400"  >&lt;p&gt;Included in PACS-4-13-1-R19 (atlas 1.9.P32)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;RPM Version               : &lt;br/&gt;
EW - Client               : &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=xxxx&quot; target=&quot;_blank&quot;&gt;EWxxxx&lt;/a&gt;  - &amp;lt;client code&amp;gt;&lt;br/&gt;
Minimal steps to reproduce: &lt;br/&gt;
Expected behaviour        : &lt;br/&gt;
What happened instead?    : &lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13951"><![CDATA[PacsMerger]]></customfieldvalue>
    <customfieldvalue key="13420"><![CDATA[SystemCatalog]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzv7ov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="1071">Sprint 0</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[IP-77336] Upgrade of localdicom DB fails due to not null constraint</title>
                <link>https://jira.intelerad.com/browse/IP-77336</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;RPM Version               : Database-LocalDicom-4.9.1.P286-ims99.noarch&lt;br/&gt;
EW - Client               : n/a&lt;br/&gt;
Minimal steps to reproduce: &lt;tt&gt;dbConfigurator --upgrade --sapassword admpass /usr/local/tools/DatabaseSchemas/Postgres/Schema-LocalDicom.cfg&lt;/tt&gt;&lt;br/&gt;
Expected behaviour        : Database is upgraded.&lt;br/&gt;
What happened instead?    : The upgrade fails.&lt;/p&gt;

&lt;p&gt;This was found while trying to upgrade the &lt;tt&gt;loaldicom&lt;/tt&gt; database on &lt;tt&gt;vadevvisnmod1.intelerad.com&lt;/tt&gt; in the VA development test farm.&lt;/p&gt;

&lt;p&gt;The output is:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[admin@vadevvisnmod1] {/var/log/PACS/image_server} dbConfigurator --upgrade --sapassword admpass /usr/local/tools/DatabaseSchemas/Postgres/Schema-LocalDicom.cfg
startup VER $Id$
running in upgrade mode
Creating database handle to server &apos;VADEVVISNMOD1&apos; for user sa
Handle identifies as &apos;dbi:Sybase:server=&apos;VADEVVISNMOD1&apos;;user=&apos;sa&apos;;spid=39&apos;
Creating database handle to server &apos;VADEVVISNMOD1&apos; for user sa
Handle identifies as &apos;dbi:Sybase:server=&apos;VADEVVISNMOD1&apos;;user=&apos;sa&apos;;spid=40&apos;
Will upgrade for these files &apos;/usr/local/tools/DatabaseSchemas/Postgres/Schema-LocalDicom.cfg&apos;
Validating plpgsql exists in the local Postgres engine
Running initialization script for Postgres public functions.
Postgres public function initialization finished
 Postgres schema exists.  Current schema is at version 010, target version 011
Upgrade is required for postgres schema LocalDicom
Postgres upgrade for schema LocalDicom version 11 from file /usr/local/tools/DatabaseSchemas/Postgres/LocalDicom-upgrade-011.sql
DBD::Pg::db do failed: ERROR:  column &quot;acc_num&quot; contains null values at /usr/local/tools/PerlPackages/IMS/SchemaTools/DBH.pm line 178.
[admin@vadevvisnmod1] {/var/log/PACS/image_server} rpm -q Database-LocalDicom
Database-LocalDicom-4.9.1.P286-ims99.noarch
[admin@vadevvisnmod1] {/var/log/PACS/image_server} 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The upgrade script is:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;SET search_path TO localdicom;

ALTER TABLE incoming_files ADD acc_num varchar NOT NULL; 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Presumably the problem is that there are existing rows in &lt;tt&gt;localdicom.incoming_files&lt;/tt&gt;, but there is no default value for the new &lt;tt&gt;acc_num&lt;/tt&gt; column.  The existing rows are given null values, but this violates the constraint.&lt;/p&gt;

&lt;p&gt;Possible fix: Set a default of &quot;&quot;.&lt;/p&gt;</description>
            <key id="115254">IP-77336</key>
            <summary>Upgrade of localdicom DB fails due to not null constraint</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                            <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="ldegruchy">Luke de Gruchy</assignee>
                                    <reporter username="bheelan">Bill Heelan</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Mar 2017 18:38:45 -0400</created>
                <updated>Fri, 26 Apr 2019 14:07:41 -0400</updated>
                            <resolved>Thu, 13 Apr 2017 00:54:00 -0400</resolved>
                                    <version>4-9-1</version>
                                    <fixVersion>4-9-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                    <timeoriginalestimate seconds="7200">2 hours</timeoriginalestimate>
                                    <timespent seconds="19800">5 hours, 30 minutes</timespent>
                                            <aggregatetimeoriginalestimate seconds="7200">2 hours</aggregatetimeoriginalestimate>
                                                    <aggregatetimespent seconds="19800">5 hours, 30 minutes</aggregatetimespent>
                                    <comments>
                            <comment id="422187" author="luke.degruchy" created="Thu, 13 Apr 2017 12:54:42 -0400"  >&lt;p&gt;Change the alter column to add a default value of &apos;&apos; so that existing incoming_files rows are converted without error.&lt;br/&gt;
Then issue another alter column to remove the default value so newly created rows cannot have null values.&lt;/p&gt;</comment>
                            <comment id="422829" author="luke.degruchy" created="Thu, 20 Apr 2017 09:53:32 -0400"  >&lt;p&gt;Checkin done on devel-vantp:&lt;/p&gt;

&lt;p&gt;changeset:   185347:369b32d0821b&lt;br/&gt;
branch:      PACS-4-9-1&lt;br/&gt;
user:        Luke de Gruchy &amp;lt;ldegruchy@intelerad.com&amp;gt;&lt;br/&gt;
date:        2017-04-13 12:48:23 -0400&lt;br/&gt;
summary:     &lt;a href=&quot;https://jira.intelerad.com/browse/IP-77336&quot; title=&quot;Upgrade of localdicom DB fails due to not null constraint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-77336&quot;&gt;&lt;del&gt;IP-77336&lt;/del&gt;&lt;/a&gt; fix: Fix column constraint.&lt;/p&gt;</comment>
                            <comment id="422830" author="luke.degruchy" created="Thu, 20 Apr 2017 09:57:57 -0400"  >&lt;p&gt;Also, filed &lt;a href=&quot;https://jira.intelerad.com/browse/IP-77336&quot; title=&quot;Upgrade of localdicom DB fails due to not null constraint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-77336&quot;&gt;&lt;del&gt;IP-77336&lt;/del&gt;&lt;/a&gt; in case the blank accnum columns for old rows ever become a problem in production. &lt;/p&gt;</comment>
                            <comment id="422846" author="dle" created="Thu, 20 Apr 2017 10:57:45 -0400"  >&lt;p&gt;Verified with RPMs:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Database-LocalDicom-4.9.1.P289-ims99.noarch&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Verification steps:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;After deploying the RPM, stopped &lt;tt&gt;LocalDicomService&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;Ensured that the schema was at &lt;tt&gt;version 10&lt;/tt&gt;:
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;(sa@[local]) [localdicom] # alter table incoming_files drop column if exists acc_num; comment on schema localdicom is &apos;version 10&apos;;
ALTER TABLE
Time: 1.891 ms
COMMENT
Time: 0.743 ms
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Schema of &lt;tt&gt;localdicom&lt;/tt&gt; is:
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;(sa@[local]) [localdicom] # \d incoming_files
                                        Table &quot;localdicom.incoming_files&quot;
          Column           |           Type           |                        Modifiers                         
---------------------------+--------------------------+----------------------------------------------------------
 incoming_files_id         | bigint                   | not null default nextval(&apos;incoming_files_seq&apos;::regclass)
 study_uid                 | character varying        | not null
 series_uid                | character varying        | not null
 sop_uid                   | character varying        | not null
 patient_id                | character varying        | not null
 image_path                | character varying        | 
 sender_ae_title           | character varying        | not null
 receiver_ae_title         | character varying        | not null
 status                    | character varying        | not null
 j2c_file_created          | boolean                  | not null
 association_time_as_epoch | bigint                   | not null
 timestamp_inserted        | timestamp with time zone | not null default now()
 timestamp_updated         | timestamp with time zone | not null default now()
 last_failure              | character varying        | 
 state_change_failures     | integer                  | not null default 0
 retry_after               | timestamp with time zone | 
 is_reintroduction         | boolean                  | not null default false
 restore_dest_ae_title     | character varying        | 
 should_convert_to_j2c     | boolean                  | 
Indexes:
    &quot;incoming_files_pk&quot; UNIQUE, btree (incoming_files_id)
    &quot;incoming_files_seruid_idx&quot; btree (series_uid)
    &quot;incoming_files_sopuid_idx&quot; btree (sop_uid)
    &quot;incoming_files_stuuid_idx&quot; btree (study_uid)
    &quot;incoming_files_timeidx&quot; btree (timestamp_inserted)
    &quot;retry_after_not_failed&quot; btree (retry_after) WHERE status::text &amp;lt;&amp;gt; &apos;FAILED&apos;::text
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Sent images in, so that it would stay in &lt;tt&gt;localdicom.incoming_files&lt;/tt&gt;, 78 of them to be exact&lt;/li&gt;
	&lt;li&gt;Ran a database upgrade for localdicom on qa491&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;dbConfigurator&lt;/tt&gt; did not crash&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;End result: Verification complete&lt;/p&gt;</comment>
                            <comment id="423868" author="robot-bc-rw" created="Thu, 27 Apr 2017 12:16:16 -0400"  >&lt;p&gt;Released by bdasilva to master at 2017-04-27 12:16:21 (push 57950):&lt;br/&gt;
  PACS-4-9-1 (fix)        (previous build: PACS-4-9-1-P290)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/369b32d0821b&quot; target=&quot;_blank&quot;&gt;intelepacs:369b32d0821b&lt;/a&gt;  ldegruchy   PACS-4-9-1  &lt;a href=&quot;https://jira.intelerad.com/browse/IP-77336&quot; title=&quot;Upgrade of localdicom DB fails due to not null constraint&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-77336&quot;&gt;&lt;del&gt;IP-77336&lt;/del&gt;&lt;/a&gt; fix: Fix column constraint.&lt;/p&gt;</comment>
                            <comment id="426866" author="dvu" created="Wed, 17 May 2017 14:06:23 -0400"  >&lt;p&gt;     Included in PACS-4-9-1-R30 (atlas 1.5.86 )&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10300">
                    <name>Feature Link</name>
                                                                <inwardlinks description="is part of feature">
                                        <issuelink>
            <issuekey id="35696">IP-12369</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="117186">IP-78834</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="111821">IP-74881</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                            <subtask id="115255">IP-77337</subtask>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12702" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Description (template)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;p&gt;RPM Version               : &lt;br/&gt;
EW - Client               : &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=xxxx&quot; target=&quot;_blank&quot;&gt;EWxxxx&lt;/a&gt;  - &amp;lt;client code&amp;gt;&lt;br/&gt;
Minimal steps to reproduce: &lt;br/&gt;
Expected behaviour        : &lt;br/&gt;
What happened instead?    : &lt;/p&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10600" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>IP-72387</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12305" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>HW OK</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12438"><![CDATA[-]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12306" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>Hardware Issues</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12439"><![CDATA[-]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13080"><![CDATA[Database-LocalDicom]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzeqvb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13409" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Release Project</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[IP-12369]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10804"><![CDATA[INTERNAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10007" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="1003">Sprint 30</customfieldvalue>
    <customfieldvalue id="1029">Sprint 31</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:float">
                        <customfieldname>Story Points</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.5</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-68774] LDS: has delay pulling the validation requests from global dicom and it is adding in AutoRoute SOPs with dest call internal</title>
                <link>https://jira.intelerad.com/browse/IP-68774</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;RPM Version               : LocalDicomService-4.11.1.P127-ims01&lt;/p&gt;

&lt;p&gt;EW - Client               : &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=465668&quot; target=&quot;_blank&quot;&gt;EW465668&lt;/a&gt;  - HMR&lt;/p&gt;

&lt;p&gt;Minimal steps to reproduce: &lt;/p&gt;

&lt;p&gt;This is very hard to reproduce and we have to have the perfect scenario to be able to have this on a server.&lt;/p&gt;

&lt;p&gt;1. Have re-routing in case of correction disabled in LDS&lt;br/&gt;
2. Send images to the DIR server&lt;br/&gt;
3. In IFW we can see that LDS thinks that this study is not validated and it is adding the images in AR as internal:&lt;/p&gt;

&lt;p&gt;===========================================&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-03-07 05:15:42.396 LDS_10 hmrdir1.hmr.qc.ca (PROFILE)&amp;#93;&lt;/span&gt; --&amp;gt; Start: 1.2.840.113564.10129225100.2016030705144156476 (timer POSTRECEPTION)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-03-07 05:15:42.396 LDS_10 hmrdir1.hmr.qc.ca (TRACE)&amp;#93;&lt;/span&gt; Study validation is pending&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-03-07 05:15:42.396 LDS_10 hmrdir1.hmr.qc.ca (TRACE)&amp;#93;&lt;/span&gt; Destination class is &lt;span class=&quot;error&quot;&gt;&amp;#91;INTERNAL&amp;#93;&lt;/span&gt; since pending validation is &lt;span class=&quot;error&quot;&gt;&amp;#91;true&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-03-07 05:15:42.396 LDS_10 hmrdir1.hmr.qc.ca (TRACE)&amp;#93;&lt;/span&gt; Queueing UMDB update task&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-03-07 05:15:42.398 LDS_10 hmrdir1.hmr.qc.ca (TRACE)&amp;#93;&lt;/span&gt; Scheduled deferred activity with id=&lt;span class=&quot;error&quot;&gt;&amp;#91;283478501&amp;#93;&lt;/span&gt;: DeferredActivityData{Type=UmdbUpdate, Data={SeriesInstanceUid=1.2.840.113564.10129225100.2016030705144156476, AeTitle=HMRDIR1, StudyInstanceUid=2.16.124.113611.1.140.1.1.1989013, PatientId=574946}}&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-03-07 05:15:42.398 LDS_10 hmrdir1.hmr.qc.ca (TRACE)&amp;#93;&lt;/span&gt; File arrived in streamable format, no J2c conversion needed&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-03-07 05:15:42.398 LDS_10 hmrdir1.hmr.qc.ca (TRACE)&amp;#93;&lt;/span&gt; Queueing Pending C-MOVE task&lt;br/&gt;
===========================================&lt;/p&gt;

&lt;p&gt;Meanwhile in the request synchronizer we can see that 500 ms before IFW processed these requests, synchronizer was pulling the requests but the request for the SOP being processed by LDS was not pulled:&lt;/p&gt;

&lt;p&gt;===========================================&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-03-07 05:15:41.866 RS_0 hmrdir1.hmr.qc.ca (PROFILE)&amp;#93;&lt;/span&gt; --&amp;gt; Start: InsertRequest (timer InsertRequest)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-03-07 05:15:41.869 RS_0 hmrdir1.hmr.qc.ca (PROFILE)&amp;#93;&lt;/span&gt; &amp;lt;-- Elapsed: 0.003 sec: InsertRequest (timer InsertRequest)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-03-07 05:15:41.869 RS_0 hmrdir1.hmr.qc.ca (TRACE)&amp;#93;&lt;/span&gt; Pending modifications marker file created successfully for study 2.16.124.113611.1.140.1.1.1828051 at location &lt;span class=&quot;error&quot;&gt;&amp;#91;/var/spool/Intelerad/LdsPendingCorrectionsMarker/v0/N5/2.16.124.113611.1.140.1.1.1828051&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-03-07 05:15:41.869 RS_0 hmrdir1.hmr.qc.ca (TRACE)&amp;#93;&lt;/span&gt; Fetching next task in &lt;span class=&quot;error&quot;&gt;&amp;#91;1000&amp;#93;&lt;/span&gt; ms.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-03-07 05:15:42.871 RS_0 hmrdir1.hmr.qc.ca (TRACE)&amp;#93;&lt;/span&gt; asking DMS for my requests newer than 11-16-1-3&lt;br/&gt;
===========================================&lt;/p&gt;

&lt;p&gt;By checking the database we can see that in globaldicom we have added the validation request at 05:15:36 but we have pulled this request to the DIR server at 05:15:42 (6 seconds after):&lt;/p&gt;

&lt;p&gt;===========================================&lt;br/&gt;
(cmdline@hmrdir1) &lt;span class=&quot;error&quot;&gt;&amp;#91;localdicom&amp;#93;&lt;/span&gt; &amp;gt; \x&lt;br/&gt;
Expanded display is on.&lt;br/&gt;
(cmdline@hmrdir1) &lt;span class=&quot;error&quot;&gt;&amp;#91;localdicom&amp;#93;&lt;/span&gt; &amp;gt; select * from requests where request_id = &apos;14121913&apos;;&lt;br/&gt;
&lt;del&gt;[ RECORD 1 ]&lt;/del&gt;------------&lt;del&gt;+&lt;/del&gt;---------------------------------&lt;br/&gt;
request_id                 | 14121913&lt;br/&gt;
owner_pacs_id              | 11&lt;br/&gt;
owner_server_id            | 14&lt;br/&gt;
owner_app_id               | 1&lt;br/&gt;
scoped_seq_num             | 252594&lt;br/&gt;
request_timestamp_as_epoch | 1457345736859&lt;br/&gt;
target                     | 2.16.124.113611.1.140.1.1.1989013&lt;br/&gt;
type                       | STUDY_CORRECTION&lt;br/&gt;
status                     | DONE&lt;br/&gt;
timestamp_inserted         | 2016-03-07 05:15:42.88308-05&lt;br/&gt;
num_executions             | 1&lt;br/&gt;
work_order_timestamp       | 2016-03-07 05:15:36.859-05&lt;br/&gt;
last_failure               | NULL&lt;/p&gt;

&lt;p&gt;Time: 2.197 ms&lt;br/&gt;
(cmdline@hmrdir1) &lt;span class=&quot;error&quot;&gt;&amp;#91;localdicom&amp;#93;&lt;/span&gt; &amp;gt; &lt;br/&gt;
===========================================&lt;/p&gt;


&lt;p&gt;Expected behaviour        : &lt;/p&gt;

&lt;p&gt;LDS should pull the validation requests from globaldicom and considers the study as validated when he is processing them.&lt;/p&gt;

&lt;p&gt;What happened instead?    : &lt;/p&gt;

&lt;p&gt;LDS thinks that the study is not validated yet and it is adding the sop in I2BR with dest_class internal.&lt;/p&gt;

&lt;p&gt;We had cases when we had series with only 1 image, LDS added these in I2BR with dest_class internal and RAI Instance consumer deleted these from I2BR without adding them to the RAI DB. These images will be routed ONLY when diskmon tried to delete them. &lt;/p&gt;

&lt;p&gt;The other situation we have nboticed is that LDS starts to process series with 300 images, the first 20 images will be added to I2BR with dest_class internal, request synchronizer syncs its requests, and the rest of the series will be added to I2BR with dest_class= B (both). RAI instance consumer will delete the first 20 images from I2BR but it will add the ones with dest_class both to RAI database. In this case, RAI series consumer will notice that the image count in RAI DB and DicomImage is not the same and it will not route the images to the repository.&lt;/p&gt;</description>
            <key id="101028">IP-68774</key>
            <summary>LDS: has delay pulling the validation requests from global dicom and it is adding in AutoRoute SOPs with dest call internal</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="glaza">George Laza</assignee>
                                    <reporter username="lmujka">Laszlo Mujka</reporter>
                        <labels>
                            <label>KB1190</label>
                            <label>jira_imported</label>
                            <label>support</label>
                    </labels>
                <created>Tue, 8 Mar 2016 10:24:25 -0500</created>
                <updated>Fri, 26 Apr 2019 14:07:05 -0400</updated>
                            <resolved>Thu, 26 May 2016 14:54:00 -0400</resolved>
                                    <version>4-11-1</version>
                                    <fixVersion>4-6-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="374020" author="nick.cabatoff" created="Tue, 8 Mar 2016 10:56:03 -0500"  >&lt;p&gt;Probably LDS should always insert into Image2BRouted with dest class E when a validation correction is marked done, regardless of whether or not routing after corrections are enabled.  The intent of that option is to prevent spamming a destination with repeated C-STOREs when HL7-driven corrections occur; but when a validation correction is marked done, that implies that the images were never routed externally in the first place.&lt;/p&gt;</comment>
                            <comment id="374021" author="glaza" created="Tue, 8 Mar 2016 16:48:11 -0500"  >&lt;p&gt;Confirming this bug.&lt;/p&gt;</comment>
                            <comment id="374022" author="glaza" created="Wed, 23 Mar 2016 09:36:46 -0400"  >&lt;p&gt;After a discussion with L&#225;szl&#243;, another idea would be to simply delay deferred activities that insert AutoRoute events. This solution has the risk to create a backlog of deferred activities if many studies don&apos;t have their validation correction yet.&lt;/p&gt;</comment>
                            <comment id="374023" author="glaza" created="Thu, 24 Mar 2016 11:07:41 -0400"  >&lt;p&gt;AutoRoute does handle duplicate SOP entries.&lt;br/&gt;
When resend on corrections is enabled, LDS requeues all the SOPs when any correction gets applied.&lt;br/&gt;
This case would be to do this on validation corrections, even if resend on corrections is disabled.&lt;/p&gt;</comment>
                            <comment id="374024" author="build" created="Wed, 27 Apr 2016 14:59:14 -0400"  >&lt;p&gt;Released by glaza to master at 2016-04-27 14:59:11 (push 47347):&lt;br/&gt;
  PACS-4-10-1 (fix)        (previous build: PACS-4-10-1-P229)&lt;br/&gt;
  PACS-4-11-1 (fix)        (previous build: PACS-4-11-1-P178)&lt;br/&gt;
  PACS-4-12-1 (fix)        (previous build: PACS-4-12-1-P116)&lt;br/&gt;
  PACS-4-13-1 (fix)        (previous build: PACS-4-13-1-P30)&lt;br/&gt;
  PACS-4-8-1 (fix)        (previous build: PACS-4-8-1-P232)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-13-2-A4)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/8d3963aab4ae&quot; target=&quot;_blank&quot;&gt;intelepacs:8d3963aab4ae&lt;/a&gt;  glaza       PACS-4-8-1  55956 fix: Always AutoRoute a series after applying a validation&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/5718dbb9657c&quot; target=&quot;_blank&quot;&gt;intelepacs:5718dbb9657c&lt;/a&gt;  glaza       PACS-4-10-1  55956 fix: Always AutoRoute a series after applying a validation&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/4a770185d187&quot; target=&quot;_blank&quot;&gt;intelepacs:4a770185d187&lt;/a&gt;  glaza       PACS-4-11-1  55956 fix: Always AutoRoute a series after applying a validation&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/ab2606eafa53&quot; target=&quot;_blank&quot;&gt;intelepacs:ab2606eafa53&lt;/a&gt;  glaza       PACS-4-12-1  55956 fix: Always AutoRoute a series after applying a validation&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/df6c11684964&quot; target=&quot;_blank&quot;&gt;intelepacs:df6c11684964&lt;/a&gt;  glaza       PACS-4-13-1  55956 fix: Always AutoRoute a series after applying a validation&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/88ca242dc171&quot; target=&quot;_blank&quot;&gt;intelepacs:88ca242dc171&lt;/a&gt;  glaza       trunk       55956 fix: Always AutoRoute a series after applying a validation&lt;/p&gt;</comment>
                            <comment id="374025" author="glaza" created="Wed, 27 Apr 2016 15:29:52 -0400"  >&lt;p&gt;Description of the solution:&lt;/p&gt;

&lt;p&gt;    After the introduction of the enableAutoRoutingAfterCorrections config key,&lt;br/&gt;
    we stopped AutoRouting the series that had a correction applied to them.&lt;/p&gt;

&lt;p&gt;    There are 4 types of AutoRoute destination classes: &lt;br/&gt;
        INTERNAL                I  Route only to internal PACS hosts.&lt;br/&gt;
        EXTERNAL                E  Route only to external AE Titles.&lt;br/&gt;
        INTERNAL_EXTERNAL       B  Both INTERNAL and EXTERNAL routing.&lt;br/&gt;
        EXTERNAL_AFTER_CORRECT  C  Similar to EXTERNAL, but after a correction has been made.&lt;/p&gt;

&lt;p&gt;    When enableAutoRoutingAfterCorrections was introduced, we suppressed EXTERNAL_AFTER_CORRECT.&lt;br/&gt;
    The problem was that when the correction was a validation correction, &quot;EXTERNAL&quot; routing was never issued&lt;br/&gt;
    (the incoming file processor probably issued an INTERNAL routing instead of INTERNAL_EXTERNAL).&lt;/p&gt;

&lt;p&gt;    This means that we were missing the EXTERNAL routing that is required once a study is validated.&lt;/p&gt;

&lt;p&gt;    In this change, I changed the logic of enableAutoRoutingAfterCorrections to only prevent the routing if we are not applying a validation correction.&lt;/p&gt;

&lt;p&gt;Tests executed:&lt;/p&gt;

&lt;p&gt;    0) Set LDS:enableAutoRoutingAfterCorrections to false&lt;br/&gt;
    1) Ensure that the HL7 order exists.&lt;br/&gt;
    2) Create an AutoRoute rule to sent this study to the RAI.&lt;br/&gt;
    3) Chenge the patID to something else (to force a manual validation)&lt;br/&gt;
    4) Send the study to a mod server (not to the RAI directly)&lt;br/&gt;
    5) Ensure that the study is stuck in manual validation.&lt;br/&gt;
    6) Ensure that the study get routed to the RAI server properly.&lt;br/&gt;
    7) On the RAI host, in LocalDicomService_IFW_*.log, LDS should report that it is creating an AutoRoute deferred activity with destination class INTERNAL. The RAI application should ignore these.&lt;br/&gt;
    8) Manually validate the study.&lt;br/&gt;
    9) On the RAI host, in LocalDicomService_DICOMMODIFICATION.log, will show that the validation correction was applied and the an AutoRoute deferred activity was created with destination class EXTERNAL.&lt;br/&gt;
    10) Send another image or series for this study.&lt;br/&gt;
    11) Ensure that the RAI application enqueued all of the SOPs for this study.&lt;br/&gt;
    12) Correct the study, there should be no more AutoRoute deferred activities created in LocalDicomService_DICOMMODIFICATION.log&lt;br/&gt;
    13) The RAI application should never receive a doAutoRoute row with destination class &quot;C&quot;.&lt;/p&gt;

&lt;p&gt;Unit tests added or modified:&lt;/p&gt;

&lt;p&gt;    TestAutoRoute.java&lt;br/&gt;
    TestDicomCorrectorFacadeIntegrated.java&lt;/p&gt;</comment>
                            <comment id="374026" author="knassiri" created="Mon, 16 May 2016 09:35:46 -0400"  >&lt;p&gt;to repro on qa4111mst1:&lt;/p&gt;

&lt;p&gt;installed version:&lt;br/&gt;
LocalDicomService-4.11.1.P174-ims01.i386&lt;/p&gt;

&lt;p&gt;0- disable AutoRouting:&lt;/p&gt;

&lt;p&gt;1- create an order:&lt;br/&gt;
A=LOEX1;orderCreator --patientId $A --accessionNumber $A --status CM --generate --modality CR&lt;/p&gt;

&lt;p&gt;2- send an image:&lt;br/&gt;
modifyAndSend -a TESTAE -c QA4111MST1 -i localhost -p 5000 -v -C LOEX1 -g 1 -n 1 -r -f LOEX -y 5008&lt;/p&gt;

&lt;p&gt;3- perform a manual study validation on IB&lt;/p&gt;

&lt;p&gt;4- acquire StuInsUID:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;admin@qa4111mst1&amp;#93;&lt;/span&gt; &lt;/p&gt;
{1image}
&lt;p&gt; listLocsforStudy.pl -p LOEX119461&lt;/p&gt;

&lt;p&gt;StuInsUID: 1.2.276.0.7230010.3.1.2.1510616194.24687.1463402689.511221&lt;br/&gt;
StuDat: 20160516  StuTim: 08:44:49 ( 31489 ssm )&lt;br/&gt;
InsertDate: 20160516  InsertTime: 08:44:53 ( 31493.9609375 ssm )&lt;br/&gt;
PatNam: &lt;span class=&quot;error&quot;&gt;&amp;#91;LOEX119461^LOEX&amp;#93;&lt;/span&gt;  PatID: &lt;span class=&quot;error&quot;&gt;&amp;#91;LOEX119461&amp;#93;&lt;/span&gt;  AccNum: &lt;span class=&quot;error&quot;&gt;&amp;#91;LOEX1V&amp;#93;&lt;/span&gt;  ImsPostFix: []&lt;br/&gt;
RPId: &lt;span class=&quot;error&quot;&gt;&amp;#91;LOEX119461&amp;#93;&lt;/span&gt;  Owner: &lt;span class=&quot;error&quot;&gt;&amp;#91;QA4111MST1&amp;#93;&lt;/span&gt;  Modality: &lt;span class=&quot;error&quot;&gt;&amp;#91;DR&amp;#93;&lt;/span&gt;  Organization: &lt;span class=&quot;error&quot;&gt;&amp;#91;IMS&amp;#93;&lt;/span&gt;&lt;br/&gt;
StuDes: &lt;span class=&quot;error&quot;&gt;&amp;#91;DR&amp;#93;&lt;/span&gt;  GroupName: &lt;span class=&quot;error&quot;&gt;&amp;#91;LOEX119461^LOEX&amp;#93;&lt;/span&gt;&lt;br/&gt;
   SerInsUID: 1.2.276.0.7230010.3.1.3.1510616194.24688.1463402689.555874&lt;br/&gt;
   Owner: QA4111MST1  Mod: DR  SerNum: 2  NumSerRelIma: 1  isUpdated: F&lt;br/&gt;
   InsertDate: 20160516  InsertTime: 08:44:53 ( 31493 ssm )  SPSId: LOEX119461&lt;br/&gt;
   SeriesDate: 20160516  SeriesTime: 08:44:49  Source AE: TESTAE&lt;br/&gt;
     Location: QA4111MST1  Num: 1  Ingest Failures: 0&lt;br/&gt;
       SeriesPath: /usr/local/PACS/images/20160516/1.2.276.0.7230010.3.1.2.1510616194.24687.1463402689.511221/1.2.276.0.7230010.3.1.3.1510616194.24688.1463402689.555874&lt;br/&gt;
     Location: QA4111RAI1  Num: 1  Ingest Failures: 0&lt;br/&gt;
       SeriesPath: /usr/local/PACS/images/20160516/1.2.276.0.7230010.3.1.2.1510616194.24687.1463402689.511221/1.2.276.0.7230010.3.1.3.1510616194.24688.1463402689.555874&lt;/p&gt;

&lt;p&gt;5- IFW logs after study validation:&lt;br/&gt;
LocalDicomService_IFW_9.log:&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-03-30 09:08:33.843 LDS_9 qa4111rai1.intelerad.com (TRACE)&amp;#93;&lt;/span&gt; Destination class is &lt;span class=&quot;error&quot;&gt;&amp;#91;INTERNAL&amp;#93;&lt;/span&gt; since pending validation is &lt;span class=&quot;error&quot;&gt;&amp;#91;true&amp;#93;&lt;/span&gt;&lt;br/&gt;
LocalDicomService_IFW_9.log:&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-03-30 09:08:33.846 LDS_9 qa4111rai1.intelerad.com (TRACE)&amp;#93;&lt;/span&gt; Scheduled deferred activity with id=&lt;span class=&quot;error&quot;&gt;&amp;#91;3364&amp;#93;&lt;/span&gt;: DeferredActivityData{Type=AutoRoute, Data={DoArchival=false, DestinationClass=INTERNAL, SeriesInstanceUid=1.2.276.0.7230010.3.1.3.1510616194.26059.1459343292.641210, SopInstanceUid=1.2.276.0.7230010.3.1.4.1510616194.26080.1459343292.925482}}&lt;br/&gt;
LocalDicomService_IFW_9.log:&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-13 08:36:02.767 LDS_9 qa4111rai1.intelerad.com (TRACE)&amp;#93;&lt;/span&gt; incoming file&apos;s calling AE &lt;span class=&quot;error&quot;&gt;&amp;#91;QA4111MST1&amp;#93;&lt;/span&gt; is an internal PACS server, not generating initial corrections&lt;br/&gt;
LocalDicomService_IFW_9.log:&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-13 08:36:02.769 LDS_9 qa4111rai1.intelerad.com (TRACE)&amp;#93;&lt;/span&gt; Not initiating validation because callingAe=&lt;span class=&quot;error&quot;&gt;&amp;#91;QA4111MST1&amp;#93;&lt;/span&gt; is an internal PACS server with VALIDATION_MODE != DEFERRED&lt;br/&gt;
LocalDicomService_IFW_9.log:&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-13 08:36:02.842 LDS_9 qa4111rai1.intelerad.com (TRACE)&amp;#93;&lt;/span&gt; Destination class is &lt;span class=&quot;error&quot;&gt;&amp;#91;INTERNAL&amp;#93;&lt;/span&gt; since pending validation is &lt;span class=&quot;error&quot;&gt;&amp;#91;true&amp;#93;&lt;/span&gt;&lt;br/&gt;
LocalDicomService_IFW_9.log:&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-13 08:36:02.849 LDS_9 qa4111rai1.intelerad.com (TRACE)&amp;#93;&lt;/span&gt; Scheduled deferred activity with id=&lt;span class=&quot;error&quot;&gt;&amp;#91;3833&amp;#93;&lt;/span&gt;: DeferredActivityData{Type=AutoRoute, Data={DoArchival=false, DestinationClass=INTERNAL, SeriesInstanceUid=1.2.276.0.7230010.3.1.3.1510616194.14391.1463142944.47312, SopInstanceUid=1.2.276.0.7230010.3.1.4.1510616194.14391.1463142944.47314}}&lt;/p&gt;

&lt;p&gt;6- LDS assumes the study is not validated&lt;/p&gt;

&lt;p&gt;(cmdline@qa4111rai1) &lt;span class=&quot;error&quot;&gt;&amp;#91;localdicom&amp;#93;&lt;/span&gt; &amp;gt; \x&lt;br/&gt;
Expanded display is on.&lt;br/&gt;
(cmdline@qa4111rai1) &lt;span class=&quot;error&quot;&gt;&amp;#91;localdicom&amp;#93;&lt;/span&gt; &amp;gt; select * from requests where request_id = &apos;4534&apos;;                &lt;br/&gt;
&lt;del&gt;[ RECORD 1 ]&lt;/del&gt;------------&lt;del&gt;+&lt;/del&gt;----------------------------------------------------------&lt;br/&gt;
request_id                 | 4534&lt;br/&gt;
owner_pacs_id              | 1&lt;br/&gt;
owner_server_id            | 252&lt;br/&gt;
owner_app_id               | 1&lt;br/&gt;
scoped_seq_num             | 2310&lt;br/&gt;
request_timestamp_as_epoch | 1463402761044&lt;br/&gt;
target                     | 1.2.276.0.7230010.3.1.2.1510616194.24687.1463402689.511221&lt;br/&gt;
type                       | STUDY_CORRECTION&lt;br/&gt;
status                     | DONE&lt;br/&gt;
timestamp_inserted         | 2016-05-16 08:46:12.119322-04&lt;br/&gt;
num_executions             | 1&lt;br/&gt;
work_order_timestamp       | 2016-05-16 08:46:01.044-04&lt;br/&gt;
last_failure               | NULL&lt;/p&gt;</comment>
                            <comment id="374027" author="knassiri" created="Mon, 16 May 2016 10:56:21 -0400"  >&lt;p&gt;Verified with RPMs:&lt;br/&gt;
LocalDicomService-4.11.1.P186-ims01.i386&lt;/p&gt;

&lt;p&gt;Verification steps:&lt;br/&gt;
**********************&lt;br/&gt;
1- disable enableAutoRoutingAfterCorrections:&lt;br/&gt;
cdcf; cd source;&lt;/p&gt;

&lt;p&gt;enableAutoRoutingAfterCorrections = false&lt;/p&gt;

&lt;p&gt;2- create a HL7 order:&lt;br/&gt;
A=FRODO1; orderCreator --patientId $A --accessionNumber $A --status CM --generate --modality CR;&lt;br/&gt;
----------------------&lt;br/&gt;
creating order : &lt;br/&gt;
MSH|^~\&amp;amp;|IMS::HL7|Intelerad|||20160516095308||ORM^O01|20160516095308.05354||2.2|&lt;br/&gt;
PID|||FRODO1||Pickett^Brittany||19990310|F|&lt;br/&gt;
PV1|||DEFAULTLOCATION|||||^Rios^Ima|||||||||||FRODO1|&lt;br/&gt;
ORC||FRODO1|FRODO1||CM||||||||||||IMS|&lt;br/&gt;
OBR||FRODO1|FRODO1|DEFAULTROOM^SHOULDER^DEFAULT CODE|RO|201605160953|||||||||^^^DEFAULT BODY PART|DEFAULT^PROVIDER||FRODO1|FRODO1|FRODO1||||CR|||||||^TEST ORDER|testradid^DEFAULT^RAD||||||||||||SHOULDER|&lt;br/&gt;
Sending to localhost:5005&lt;br/&gt;
Sending the order to localhost took 0.0553 seconds.&lt;/p&gt;

&lt;p&gt;3- Autoroute rule exists between mst4-11-1 and rai4-11-1&lt;/p&gt;

&lt;p&gt;4- send the study:&lt;br/&gt;
modifyAndSend -a TESTAE -c QA4111MST1 -i localhost -p 5000 -v -C FRODO1 -g 1 -n 1 -r -f FRODO -y 5008&lt;/p&gt;

&lt;p&gt;5- check IB to make sure study is stuck in manual validation&lt;/p&gt;

&lt;p&gt;6- on rai4-11-1 host checking the logs for AutoRoute deferred activity:&lt;br/&gt;
--------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-16 10:11:57.132 LDS_6 qa4111rai1.intelerad.com (TRACE)&amp;#93;&lt;/span&gt; Destination class is &lt;span class=&quot;error&quot;&gt;&amp;#91;INTERNAL&amp;#93;&lt;/span&gt; since pending validation is &lt;span class=&quot;error&quot;&gt;&amp;#91;true&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-16 10:11:57.132 LDS_6 qa4111rai1.intelerad.com (TRACE)&amp;#93;&lt;/span&gt; Queueing UMDB update task&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-16 10:11:57.135 LDS_6 qa4111rai1.intelerad.com (TRACE)&amp;#93;&lt;/span&gt; Scheduled deferred activity with id=&lt;span class=&quot;error&quot;&gt;&amp;#91;3976&amp;#93;&lt;/span&gt;: DeferredActivityData{Type=UmdbUpdate, Data={SeriesInstanceUid=1.2.276.0.7230010.3.1.3.1510616194.18831.1463407904.635690, AeTitle=QA4111RAI1, StudyInstanceUid=1.2.276.0.7230010.3.1.2.1510616194.18830.1463407904.589462, PatientId=FRODO11348}}&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-16 10:11:57.135 LDS_6 qa4111rai1.intelerad.com (TRACE)&amp;#93;&lt;/span&gt; File arrived in streamable format, no J2c conversion needed&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-16 10:11:57.135 LDS_6 qa4111rai1.intelerad.com (TRACE)&amp;#93;&lt;/span&gt; Queueing Pending C-MOVE task&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-16 10:11:57.136 LDS_6 qa4111rai1.intelerad.com (TRACE)&amp;#93;&lt;/span&gt; Scheduled deferred activity with id=&lt;span class=&quot;error&quot;&gt;&amp;#91;3977&amp;#93;&lt;/span&gt;: DeferredActivityData{Type=PendingCMove, Data={SeriesInstanceUid=1.2.276.0.7230010.3.1.3.1510616194.18831.1463407904.635690, SopInstanceUid=1.2.276.0.7230010.3.1.4.1510616194.18945.1463407904.872822}}&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-16 10:11:57.137 LDS_6 qa4111rai1.intelerad.com (TRACE)&amp;#93;&lt;/span&gt; Scheduled deferred activity with id=&lt;span class=&quot;error&quot;&gt;&amp;#91;3978&amp;#93;&lt;/span&gt;: DeferredActivityData{Type=AutoRoute, Data={DoArchival=false, DestinationClass=INTERNAL, SeriesInstanceUid=1.2.276.0.7230010.3.1.3.1510616194.18831.1463407904.635690, SopInstanceUid=1.2.276.0.7230010.3.1.4.1510616194.18945.1463407904.872822}}&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-16 10:11:57.137 LDS_6 qa4111rai1.intelerad.com (TRACE)&amp;#93;&lt;/span&gt; Elapsed for ifileid=&lt;span class=&quot;error&quot;&gt;&amp;#91;1447&amp;#93;&lt;/span&gt;: 249 ms&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-16 10:11:57.138 LDS_6 qa4111rai1.intelerad.com (PROFILE)&amp;#93;&lt;/span&gt; &amp;lt;-- Elapsed: 0.007 sec: 1.2.276.0.7230010.3.1.3.1510616194.18831.1463407904.635690 (timer POSTRECEPTION)&lt;/p&gt;


&lt;p&gt;7- on IB validate the study:&lt;br/&gt;
listLocsforStudy.pl -a FRODO1V&lt;/p&gt;

&lt;p&gt;StuInsUID: 1.2.276.0.7230010.3.1.2.1510616194.18830.1463407904.589462&lt;br/&gt;
StuDat: 20160516  StuTim: 10:11:44 ( 36704 ssm )&lt;br/&gt;
InsertDate: 20160516  InsertTime: 10:11:48 ( 36708.9609375 ssm )&lt;br/&gt;
PatNam: &lt;span class=&quot;error&quot;&gt;&amp;#91;FRODO11348^FRODO&amp;#93;&lt;/span&gt;  PatID: &lt;span class=&quot;error&quot;&gt;&amp;#91;FRODO11348&amp;#93;&lt;/span&gt;  AccNum: &lt;span class=&quot;error&quot;&gt;&amp;#91;FRODO1V&amp;#93;&lt;/span&gt;  ImsPostFix: []&lt;br/&gt;
RPId: &lt;span class=&quot;error&quot;&gt;&amp;#91;FRODO11348&amp;#93;&lt;/span&gt;  Owner: &lt;span class=&quot;error&quot;&gt;&amp;#91;QA4111MST1&amp;#93;&lt;/span&gt;  Modality: &lt;span class=&quot;error&quot;&gt;&amp;#91;DR&amp;#93;&lt;/span&gt;  Organization: &lt;span class=&quot;error&quot;&gt;&amp;#91;IMS&amp;#93;&lt;/span&gt;&lt;br/&gt;
StuDes: &lt;span class=&quot;error&quot;&gt;&amp;#91;DR&amp;#93;&lt;/span&gt;  GroupName: &lt;span class=&quot;error&quot;&gt;&amp;#91;FRODO11348^FRODO&amp;#93;&lt;/span&gt;&lt;br/&gt;
   SerInsUID: 1.2.276.0.7230010.3.1.3.1510616194.18831.1463407904.635690&lt;br/&gt;
   Owner: QA4111MST1  Mod: DR  SerNum: 2  NumSerRelIma: 1  isUpdated: F&lt;br/&gt;
   InsertDate: 20160516  InsertTime: 10:11:48 ( 36708 ssm )  SPSId: FRODO11348&lt;br/&gt;
   SeriesDate: 20160516  SeriesTime: 10:11:44  Source AE: TESTAE&lt;br/&gt;
     Location: QA4111MST1  Num: 1  Ingest Failures: 0&lt;br/&gt;
     Location: QA4111RAI1  Num: 1  Ingest Failures: 0&lt;/p&gt;


&lt;p&gt;8- on the RAI host check that the deferred activity was created with destination class EXTERNAL:&lt;br/&gt;
less LocalDicomService_DICOMMODIFICATION.log | grep EXTERNAL&lt;br/&gt;
----------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-16 10:22:53.517 DM_0 qa4111rai1.intelerad.com (TRACE)&amp;#93;&lt;/span&gt; Scheduled deferred activity with id=&lt;span class=&quot;error&quot;&gt;&amp;#91;3981&amp;#93;&lt;/span&gt;: DeferredActivityData{Type=AutoRoute, Data={DoArchival=true, DestinationClass=EXTERNAL, SeriesInstanceUid=1.2.276.0.7230010.3.1.3.1510616194.18831.1463407904.635690, SopInstanceUid=1.2.276.0.7230010.3.1.4.1510616194.18945.1463407904.872822}}&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-16 10:22:53.517 DM_0 qa4111rai1.intelerad.com (TRACE)&amp;#93;&lt;/span&gt; Scheduled 1 event with destination class EXTERNAL&lt;/p&gt;

&lt;p&gt;9- send another image to this study:&lt;br/&gt;
dcmodify -gin AB13.dcm;&lt;br/&gt;
send_image -a TESTAE -c QA4111MST1 qa4111mst1 5000 AB13.dcm;&lt;br/&gt;
listLocsforStudy.pl -a FRODO1V&lt;br/&gt;
-------------------------------------&lt;br/&gt;
StuInsUID: 1.2.276.0.7230010.3.1.2.1510616194.18830.1463407904.589462&lt;br/&gt;
StuDat: 20160516  StuTim: 10:11:44 ( 36704 ssm )&lt;br/&gt;
InsertDate: 20160516  InsertTime: 10:11:48 ( 36708.9609375 ssm )&lt;br/&gt;
PatNam: &lt;span class=&quot;error&quot;&gt;&amp;#91;FRODO11348^FRODO&amp;#93;&lt;/span&gt;  PatID: &lt;span class=&quot;error&quot;&gt;&amp;#91;FRODO11348&amp;#93;&lt;/span&gt;  AccNum: &lt;span class=&quot;error&quot;&gt;&amp;#91;FRODO1V&amp;#93;&lt;/span&gt;  ImsPostFix: []&lt;br/&gt;
RPId: &lt;span class=&quot;error&quot;&gt;&amp;#91;FRODO11348&amp;#93;&lt;/span&gt;  Owner: &lt;span class=&quot;error&quot;&gt;&amp;#91;QA4111MST1&amp;#93;&lt;/span&gt;  Modality: &lt;span class=&quot;error&quot;&gt;&amp;#91;DR&amp;#93;&lt;/span&gt;  Organization: &lt;span class=&quot;error&quot;&gt;&amp;#91;IMS&amp;#93;&lt;/span&gt;&lt;br/&gt;
StuDes: &lt;span class=&quot;error&quot;&gt;&amp;#91;DR&amp;#93;&lt;/span&gt;  GroupName: &lt;span class=&quot;error&quot;&gt;&amp;#91;FRODO11348^FRODO&amp;#93;&lt;/span&gt;&lt;br/&gt;
   SerInsUID: 1.2.276.0.7230010.3.1.3.1510616194.18831.1463407904.635690&lt;br/&gt;
   Owner: QA4111MST1  Mod: DR  SerNum: 2  NumSerRelIma: 2  isUpdated: F&lt;br/&gt;
   InsertDate: 20160516  InsertTime: 10:11:48 ( 36708 ssm )  SPSId: FRODO11348&lt;br/&gt;
   SeriesDate: 20160516  SeriesTime: 10:11:44  Source AE: TESTAE&lt;br/&gt;
     Location: QA4111MST1  Num: 2  Ingest Failures: 0&lt;br/&gt;
     Location: QA4111RAI1  Num: 2  Ingest Failures: 0&lt;/p&gt;

&lt;p&gt;10- logs say this about the new SOP:&lt;br/&gt;
-------------------------------------LocalDicomService_IFW_6.log:&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-16 10:11:57.137 LDS_6 qa4111rai1.intelerad.com (TRACE)&amp;#93;&lt;/span&gt; Scheduled deferred activity with id=&lt;span class=&quot;error&quot;&gt;&amp;#91;3978&amp;#93;&lt;/span&gt;: DeferredActivityData{Type=AutoRoute, Data={DoArchival=false, DestinationClass=INTERNAL, SeriesInstanceUid=1.2.276.0.7230010.3.1.3.1510616194.18831.1463407904.635690, SopInstanceUid=1.2.276.0.7230010.3.1.4.1510616194.18945.1463407904.872822}}&lt;br/&gt;
LocalDicomService_IFW_6.log:&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-16 10:11:57.138 LDS_6 qa4111rai1.intelerad.com (PROFILE)&amp;#93;&lt;/span&gt; &amp;lt;-- Elapsed: 0.007 sec: 1.2.276.0.7230010.3.1.3.1510616194.18831.1463407904.635690 (timer POSTRECEPTION)&lt;br/&gt;
LocalDicomService_IFW_6.log:&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-16 10:11:57.139 LDS_6 qa4111rai1.intelerad.com (PROFILE)&amp;#93;&lt;/span&gt; --&amp;gt; Start: 1.2.276.0.7230010.3.1.3.1510616194.18831.1463407904.635690 (timer CLEANUP)&lt;br/&gt;
LocalDicomService_IFW_6.log:&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-16 10:11:57.142 LDS_6 qa4111rai1.intelerad.com (PROFILE)&amp;#93;&lt;/span&gt; &amp;lt;-- Elapsed: 0.003 sec: 1.2.276.0.7230010.3.1.3.1510616194.18831.1463407904.635690 (timer CLEANUP)&lt;br/&gt;
LocalDicomService_LocalDicomSeriesRequestsServiceProtocol1.2_localhost.localdomain.log:&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-05-16 10:31:57.884 RE_80 qa4111rai1.intelerad.com (TRACE)&amp;#93;&lt;/span&gt; Client &lt;span class=&quot;error&quot;&gt;&amp;#91;autoroute&amp;#93;&lt;/span&gt; requested latest series path for series &lt;span class=&quot;error&quot;&gt;&amp;#91;1.2.276.0.7230010.3.1.3.1510616194.18831.1463407904.635690&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;11- correction is made and sent and there are no AutoRoute deferred activitis in LocalDicomService_DICOMMODIFICATION.log&lt;/p&gt;


&lt;p&gt;End result: &lt;br/&gt;
verified&lt;/p&gt;</comment>
                            <comment id="374028" author="dvu" created="Tue, 24 May 2016 17:44:34 -0400"  >&lt;p&gt; Included in PACS-4-8-1-R53 (atlas 1.4.95 )&lt;/p&gt;</comment>
                            <comment id="374029" author="dvu" created="Wed, 25 May 2016 09:12:59 -0400"  >&lt;p&gt; Included in PACS-4-10-1-R43 (atlas 1.6.P79 )&lt;/p&gt;</comment>
                            <comment id="374030" author="dvu" created="Wed, 25 May 2016 10:30:05 -0400"  >&lt;p&gt;Included in PACS-4-12-1-R12 (atlas 1.8.P49)&lt;/p&gt;</comment>
                            <comment id="374031" author="dvu" created="Wed, 25 May 2016 13:09:48 -0400"  >&lt;p&gt;Included in PACS-4-11-1-R34 (atlas 1.7.P51)&lt;/p&gt;</comment>
                            <comment id="374032" author="dvu" created="Thu, 26 May 2016 14:54:28 -0400"  >&lt;p&gt;  Included in PACS-4-13-1-R2 (atlas 1.9.P7 )&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12603" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Affected Clients</customfieldname>
                        <customfieldvalues>
                                        <label>HMR</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>55956</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12602" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>R&amp;D Assessment (BFIF)</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13523"><![CDATA[Requirement changed]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13268"><![CDATA[LocalDicomService]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzt8kf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_11001" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>ServiceNow Case #</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>465668</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10801"><![CDATA[CRITICAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-67953] Localdicom: Schema file is missing is_discarded column on 4-5-1/4-6-1</title>
                <link>https://jira.intelerad.com/browse/IP-67953</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;RPM Version               : Database-LocalDicom-4.5.1.P294-ims01.noarch.rpm&lt;br/&gt;
EW - Client               : N/A&lt;/p&gt;

&lt;p&gt;Minimal steps to reproduce: &lt;br/&gt;
1) Install a new PACS-4-5-1/4-6-1 server &lt;br/&gt;
2) You will notice that dbConfigurator does not add the is_discarded column to the incoming_files table within localdicom schema it created and LDS after starting it up will add it at the end of the list, breaking the ordering of the columns.&lt;/p&gt;

&lt;p&gt;Expected behaviour        : dbConfigurator should have added the is_discarded between conflict_study_uid and has_alerted_ingestion columns.&lt;/p&gt;

&lt;p&gt;What happened instead?    : It didn&apos;t add the column.&lt;/p&gt;

&lt;p&gt;This bug isn&apos;t a horrible thing as LDS adds the column properly but the ordering will be inconsistent. This issue only happened with the LDS &lt;br/&gt;
mitigation fixes, which we don&apos;t do any new installs technically either so &lt;br/&gt;
dbConfigurator&apos;s version of the incoming_files would only be used for &lt;br/&gt;
servers that are being reinstalled/evergreened or new servers installed added&lt;br/&gt;
to an existing PACS.&lt;/p&gt;</description>
            <key id="100207">IP-67953</key>
            <summary>Localdicom: Schema file is missing is_discarded column on 4-5-1/4-6-1</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="sclark">Steven Clark</assignee>
                                    <reporter username="sclark">Steven Clark</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Nov 2015 14:25:35 -0500</created>
                <updated>Fri, 26 Apr 2019 14:06:54 -0400</updated>
                            <resolved>Wed, 9 Dec 2015 09:37:00 -0500</resolved>
                                    <version>4-5-1</version>
                                    <fixVersion>4-5-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="369196" author="build" created="Wed, 18 Nov 2015 14:31:11 -0500"  >&lt;p&gt;Released by sclark to master at 2015-11-18 14:31:09 (push 42822):&lt;br/&gt;
  PACS-4-5-1 (fix)        (previous build: PACS-4-5-1-P294)&lt;br/&gt;
  PACS-4-6-1 (fix)        (previous build: PACS-4-6-1-P294)&lt;br/&gt;
  PACS-4-8-1 (dummy)      (previous build: PACS-4-8-1-P205)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/6e27123d5f35&quot; target=&quot;_blank&quot;&gt;intelepacs:6e27123d5f35&lt;/a&gt;  sclark      PACS-4-5-1  54641 fix: LocalDicom Schema: Add missing is_discarded to creation schema&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/0fd91a4030b4&quot; target=&quot;_blank&quot;&gt;intelepacs:0fd91a4030b4&lt;/a&gt;  sclark      PACS-4-6-1  54641 fix: LocalDicom Schema: Add missing is_discarded to creation schema&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/2095c6796259&quot; target=&quot;_blank&quot;&gt;intelepacs:2095c6796259&lt;/a&gt;  sclark      PACS-4-8-1  54641 dummy: dummy merge from PACS-4-6-1&lt;/p&gt;</comment>
                            <comment id="369197" author="sclark" created="Wed, 18 Nov 2015 14:37:44 -0500"  >&lt;p&gt;Description of the solution: Added is_discarded column to schema file.&lt;/p&gt;

&lt;p&gt;Tests executed: Ran unit tests and tested schema creation on sclark451-2.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;admin@sclark451-2&amp;#93;&lt;/span&gt; {~} psql-intelerad -D public -Usa&lt;/p&gt;

&lt;p&gt;(sa@&lt;span class=&quot;error&quot;&gt;&amp;#91;local&amp;#93;&lt;/span&gt;) &lt;span class=&quot;error&quot;&gt;&amp;#91;public&amp;#93;&lt;/span&gt; # alter schema localdicom rename to localdicom_old;&lt;br/&gt;
ALTER SCHEMA&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;admin@sclark451-2&amp;#93;&lt;/span&gt; &lt;/p&gt;
{/usr/local/tools/DatabaseSchemas/Postgres}
&lt;p&gt; dbConfigurator --sapassword XXXXXX --upgrade Schema-LocalDicom.cfg &lt;br/&gt;
startup VER $Id$&lt;br/&gt;
running in upgrade mode&lt;br/&gt;
Validating plpgsql exists in the local Postgres engine&lt;br/&gt;
Creating/replacing IMS Postgres system function public.spx_CreateRole&lt;br/&gt;
Creating/replacing IMS Postgres system function public.spx_set_executor_statistics&lt;br/&gt;
Creating/replacing IMS Postgres system function public.spx_create_application_function&lt;br/&gt;
Creating/replacing IMS Postgres system function public.spx_drop_application_function&lt;br/&gt;
Creating/replacing IMS Postgres system function public.spx_grant_permissions_to_schema&lt;br/&gt;
Creating database handle to server &apos;SCLARK451-2&apos; for user sa&lt;br/&gt;
Handle identifies as &apos;dbi:Sybase:server=&apos;SCLARK451-2&apos;;user=&apos;sa&apos;;spid=64&apos;&lt;br/&gt;
Creating database handle to server &apos;SCLARK451-2&apos; for user sa&lt;br/&gt;
Handle identifies as &apos;dbi:Sybase:server=&apos;SCLARK451-2&apos;;user=&apos;sa&apos;;spid=90&apos;&lt;br/&gt;
Will upgrade for these files &apos;Schema-LocalDicom.cfg&apos;&lt;br/&gt;
Looking for schema creation file /usr/local/Intelerad/upgrade/usr/local/tools/DatabaseSchemas/Postgres/LocalDicom-schema.sql&lt;br/&gt;
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index &quot;study_uid_pk&quot; for table &quot;studies&quot;&lt;br/&gt;
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index &quot;request_merge_id_pk&quot; for table &quot;request_merge_status&quot;&lt;br/&gt;
File based schema created.&lt;br/&gt;
Validating database users&lt;br/&gt;
dbConfigurator finished.&lt;/p&gt;

&lt;p&gt;(sa@&lt;span class=&quot;error&quot;&gt;&amp;#91;local&amp;#93;&lt;/span&gt;) &lt;span class=&quot;error&quot;&gt;&amp;#91;public&amp;#93;&lt;/span&gt; # \d localdicom.incoming_files&lt;br/&gt;
                                             Table &quot;localdicom.incoming_files&quot;&lt;br/&gt;
          Column           |           Type           |                              Modifiers                              &lt;br/&gt;
--------------------------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;------------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;--------------------------------------------------------------------&lt;br/&gt;
 incoming_files_id         | bigint                   | not null default nextval(&apos;localdicom.incoming_files_seq&apos;::regclass)&lt;br/&gt;
 study_uid                 | character varying        | not null&lt;br/&gt;
 series_uid                | character varying        | not null&lt;br/&gt;
 sop_uid                   | character varying        | not null&lt;br/&gt;
 patient_id                | character varying        | not null&lt;br/&gt;
 image_path                | character varying        | &lt;br/&gt;
 sender_ae_title           | character varying        | not null&lt;br/&gt;
 receiver_ae_title         | character varying        | not null&lt;br/&gt;
 status                    | character varying        | not null&lt;br/&gt;
 j2c_file_created          | boolean                  | not null&lt;br/&gt;
 association_time_as_epoch | bigint                   | not null&lt;br/&gt;
 timestamp_inserted        | timestamp with time zone | not null default now()&lt;br/&gt;
 timestamp_updated         | timestamp with time zone | not null default now()&lt;br/&gt;
 last_failure              | character varying        | &lt;br/&gt;
 state_change_failures     | integer                  | not null default 0&lt;br/&gt;
 retry_after               | timestamp with time zone | &lt;br/&gt;
 is_reintroduction         | boolean                  | not null default false&lt;br/&gt;
 restore_dest_ae_title     | character varying        | &lt;br/&gt;
 should_convert_to_j2c     | boolean                  | &lt;br/&gt;
 conflict_study_uid        | character varying        | &lt;br/&gt;
 is_discarded              | boolean                  | &lt;br/&gt;
 has_alerted_ingestion     | boolean                  | &lt;br/&gt;
Indexes:&lt;/p&gt;


&lt;p&gt;Unit tests added or modified:&lt;/p&gt;</comment>
                            <comment id="369198" author="dvu" created="Mon, 23 Nov 2015 17:05:00 -0500"  >&lt;p&gt;Reproduced with RPMs: Database-LocalDicom-4.6.1.P281-ims01.noarch&lt;br/&gt;
Verified with RPMs: Database-LocalDicom-4.6.1.P295-ims01.noarch.rpm&lt;/p&gt;

&lt;p&gt;Verification steps: &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;
			&lt;ul&gt;
				&lt;li&gt;
				&lt;ul&gt;
					&lt;li&gt;
					&lt;ul&gt;
						&lt;li&gt;
						&lt;ul&gt;
							&lt;li&gt;
							&lt;ul&gt;
								&lt;li&gt;
								&lt;ul&gt;
									&lt;li&gt;
									&lt;ul&gt;
										&lt;li&gt;Before applying the fix.&lt;/li&gt;
									&lt;/ul&gt;
									&lt;/li&gt;
								&lt;/ul&gt;
								&lt;/li&gt;
							&lt;/ul&gt;
							&lt;/li&gt;
						&lt;/ul&gt;
						&lt;/li&gt;
					&lt;/ul&gt;
					&lt;/li&gt;
				&lt;/ul&gt;
				&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;admin@qauto461&amp;#93;&lt;/span&gt; {~} sybshow localdicom incoming_files&lt;br/&gt;
Column                            type                features&lt;br/&gt;
------                            ----                --------&lt;br/&gt;
incoming_files_id                 bigint              DEFAULT nextval(&apos;incoming_files_seq&apos;::regclass)&lt;br/&gt;
study_uid                         varchar            &lt;br/&gt;
series_uid                        varchar            &lt;br/&gt;
sop_uid                           varchar            &lt;br/&gt;
patient_id                        varchar            &lt;br/&gt;
image_path                        varchar             NULL&lt;br/&gt;
sender_ae_title                   varchar            &lt;br/&gt;
receiver_ae_title                 varchar            &lt;br/&gt;
status                            varchar            &lt;br/&gt;
j2c_file_created                  boolean            &lt;br/&gt;
association_time_as_epoch         bigint             &lt;br/&gt;
timestamp_inserted                timestamp with time zone  DEFAULT now()&lt;br/&gt;
timestamp_updated                 timestamp with time zone  DEFAULT now()&lt;br/&gt;
last_failure                      varchar             NULL&lt;br/&gt;
state_change_failures             int                 DEFAULT 0&lt;br/&gt;
retry_after                       timestamp with time zone  NULL&lt;br/&gt;
is_reintroduction                 boolean             DEFAULT false&lt;br/&gt;
restore_dest_ae_title             varchar             NULL&lt;/p&gt;

&lt;p&gt;Indexes:&lt;br/&gt;
incoming_files_seruid_idx                             series_uid &lt;br/&gt;
incoming_files_sopuid_idx                             sop_uid &lt;br/&gt;
incoming_files_timeidx                                timestamp_inserted &lt;br/&gt;
incoming_files_pk                 unique              incoming_files_id &lt;br/&gt;
incoming_files_stuuid_idx                             study_uid &lt;/p&gt;



&lt;p&gt;1. Install the above RPM&lt;br/&gt;
2. &lt;span class=&quot;error&quot;&gt;&amp;#91;admin@qauto461&amp;#93;&lt;/span&gt; &lt;/p&gt;
{bin}
&lt;p&gt; psql-intelerad -D public -Usa&lt;br/&gt;
Password for user sa: &lt;br/&gt;
SET&lt;br/&gt;
Null display is &quot;NULL&quot;.&lt;br/&gt;
Pager is always used.&lt;br/&gt;
Timing is on.&lt;br/&gt;
psql (8.4.22)&lt;br/&gt;
Type &quot;help&quot; for help.&lt;/p&gt;

&lt;p&gt;3. (sa@&lt;span class=&quot;error&quot;&gt;&amp;#91;local&amp;#93;&lt;/span&gt;) &lt;span class=&quot;error&quot;&gt;&amp;#91;public&amp;#93;&lt;/span&gt; # alter schema localdicom rename to localdicom_old;&lt;br/&gt;
ALTER SCHEMA&lt;br/&gt;
Time: 0.949 ms&lt;/p&gt;

&lt;p&gt;4. dbConfigurator --upgrade /usr/local/tools/DatabaseSchemas/Postgres/Schema-LocalDicom.cfg --sapassword&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;admin@qauto461&amp;#93;&lt;/span&gt; &lt;/p&gt;
{Postgres} dbConfigurator --upgrade /usr/local/tools/DatabaseSchemas/Postgres/Schema-LocalDicom.cfg --sapassword admpass&lt;br/&gt;
startup VER $Id$&lt;br/&gt;
running in upgrade mode&lt;br/&gt;
Validating plpgsql exists in the local Postgres engine&lt;br/&gt;
Creating/replacing IMS Postgres system function public.spx_CreateRole&lt;br/&gt;
Creating/replacing IMS Postgres system function public.spx_set_executor_statistics&lt;br/&gt;
Creating/replacing IMS Postgres system function public.spx_create_application_function&lt;br/&gt;
Creating/replacing IMS Postgres system function public.spx_drop_application_function&lt;br/&gt;
Creating/replacing IMS Postgres system function public.spx_grant_permissions_to_schema&lt;br/&gt;
Creating database handle to server &apos;QAUTO461&apos; for user sa&lt;br/&gt;
Handle identifies as &apos;dbi:Sybase:server=&apos;QAUTO461&apos;;user=&apos;sa&apos;;spid=85&apos;&lt;br/&gt;
Creating database handle to server &apos;QAUTO461&apos; for user sa&lt;br/&gt;
Handle identifies as &apos;dbi:Sybase:server=&apos;QAUTO461&apos;;user=&apos;sa&apos;;spid=86&apos;&lt;br/&gt;
Will upgrade for these files &apos;/usr/local/tools/DatabaseSchemas/Postgres/Schema-LocalDicom.cfg&apos;&lt;br/&gt;
Looking for schema creation file /usr/local/tools/DatabaseSchemas/Postgres/LocalDicom-schema.sql&lt;br/&gt;
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index &quot;study_uid_pk&quot; for table &quot;studies&quot;&lt;br/&gt;
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index &quot;request_merge_id_pk&quot; for table &quot;request_merge_status&quot;&lt;br/&gt;
File based schema created.&lt;br/&gt;
Validating database users&lt;br/&gt;
dbConfigurator finished.&lt;br/&gt;
&lt;br/&gt;
5. Verify is_discarded column is added.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;admin@qauto461&amp;#93;&lt;/span&gt; {Postgres}
&lt;p&gt; psql-intelerad -D public -Usa&lt;br/&gt;
Password for user sa: &lt;br/&gt;
SET&lt;br/&gt;
Null display is &quot;NULL&quot;.&lt;br/&gt;
Pager is always used.&lt;br/&gt;
Timing is on.&lt;br/&gt;
psql (8.4.22)&lt;br/&gt;
Type &quot;help&quot; for help.&lt;/p&gt;

&lt;p&gt;(sa@&lt;span class=&quot;error&quot;&gt;&amp;#91;local&amp;#93;&lt;/span&gt;) &lt;span class=&quot;error&quot;&gt;&amp;#91;public&amp;#93;&lt;/span&gt; # \d localdicom.incoming_files&lt;/p&gt;

&lt;p&gt;                                            Table &quot;localdicom.incoming_files&quot;&lt;br/&gt;
          Column           |           Type           |                              Modifiers                              &lt;br/&gt;
--------------------------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;------------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;--------------------------------------------------------------------&lt;br/&gt;
 incoming_files_id         | bigint                   | not null default nextval(&apos;localdicom.incoming_files_seq&apos;::regclass)&lt;br/&gt;
 study_uid                 | character varying        | not null&lt;br/&gt;
 series_uid                | character varying        | not null&lt;br/&gt;
 sop_uid                   | character varying        | not null&lt;br/&gt;
 patient_id                | character varying        | not null&lt;br/&gt;
 image_path                | character varying        | &lt;br/&gt;
 sender_ae_title           | character varying        | not null&lt;br/&gt;
 receiver_ae_title         | character varying        | not null&lt;br/&gt;
 status                    | character varying        | not null&lt;br/&gt;
 j2c_file_created          | boolean                  | not null&lt;br/&gt;
 association_time_as_epoch | bigint                   | not null&lt;br/&gt;
 timestamp_inserted        | timestamp with time zone | not null default now()&lt;br/&gt;
 timestamp_updated         | timestamp with time zone | not null default now()&lt;br/&gt;
 last_failure              | character varying        | &lt;br/&gt;
 state_change_failures     | integer                  | not null default 0&lt;br/&gt;
 retry_after               | timestamp with time zone | &lt;br/&gt;
 is_reintroduction         | boolean                  | not null default false&lt;br/&gt;
 restore_dest_ae_title     | character varying        | &lt;br/&gt;
 should_convert_to_j2c     | boolean                  | &lt;br/&gt;
 conflict_study_uid        | character varying        | &lt;br/&gt;
 is_discarded              | boolean                  | &lt;br/&gt;
 has_alerted_ingestion     | boolean                  | &lt;br/&gt;
Indexes:&lt;br/&gt;
    &quot;incoming_files_pk&quot; UNIQUE, btree (incoming_files_id)&lt;br/&gt;
    &quot;incoming_files_has_alerted_ingestion_idx&quot; btree (timestamp_inserted) WHERE (has_alerted_ingestion IS NULL OR has_alerted_i&lt;br/&gt;
    &quot;incoming_files_seruid_idx&quot; btree (series_uid)&lt;br/&gt;
    &quot;incoming_files_sopuid_idx&quot; btree (sop_uid)&lt;br/&gt;
    &quot;incoming_files_stuuid_idx&quot; btree (study_uid)&lt;br/&gt;
    &quot;incoming_files_timeidx&quot; btree (timestamp_inserted)&lt;br/&gt;
    &quot;retry_after_not_failed&quot; btree (retry_after) WHERE status::text &amp;lt;&amp;gt; &apos;FAILED&apos;::text&lt;/p&gt;


&lt;p&gt;6. sybshow localdicom incoming_files&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;admin@qauto461&amp;#93;&lt;/span&gt; &lt;/p&gt;
{Postgres}
&lt;p&gt; sybshow localdicom incoming_files&lt;br/&gt;
Column                            type                features&lt;br/&gt;
------                            ----                --------&lt;br/&gt;
incoming_files_id                 bigint              DEFAULT nextval(&apos;incoming_files_seq&apos;::regclass)&lt;br/&gt;
study_uid                         varchar            &lt;br/&gt;
series_uid                        varchar            &lt;br/&gt;
sop_uid                           varchar            &lt;br/&gt;
patient_id                        varchar            &lt;br/&gt;
image_path                        varchar             NULL&lt;br/&gt;
sender_ae_title                   varchar            &lt;br/&gt;
receiver_ae_title                 varchar            &lt;br/&gt;
status                            varchar            &lt;br/&gt;
j2c_file_created                  boolean            &lt;br/&gt;
association_time_as_epoch         bigint             &lt;br/&gt;
timestamp_inserted                timestamp with time zone  DEFAULT now()&lt;br/&gt;
timestamp_updated                 timestamp with time zone  DEFAULT now()&lt;br/&gt;
last_failure                      varchar             NULL&lt;br/&gt;
state_change_failures             int                 DEFAULT 0&lt;br/&gt;
retry_after                       timestamp with time zone  NULL&lt;br/&gt;
is_reintroduction                 boolean             DEFAULT false&lt;br/&gt;
restore_dest_ae_title             varchar             NULL&lt;br/&gt;
should_convert_to_j2c             boolean             NULL&lt;br/&gt;
conflict_study_uid                varchar             NULL&lt;br/&gt;
is_discarded                      boolean             NULL&lt;br/&gt;
has_alerted_ingestion             boolean             NULL&lt;/p&gt;

&lt;p&gt;Indexes:&lt;br/&gt;
incoming_files_seruid_idx                             series_uid &lt;br/&gt;
incoming_files_sopuid_idx                             sop_uid &lt;br/&gt;
incoming_files_timeidx                                timestamp_inserted &lt;br/&gt;
incoming_files_pk                 unique              incoming_files_id &lt;br/&gt;
incoming_files_has_alerted_ingestion_idx                     timestamp_inserted  WHERE (((has_alerted_ingestion IS NULL) OR (has_alerted_ingestion IS FALSE)) AND ((status) &amp;lt;&amp;gt; ANY (ARRAY&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;POSTRECEPTION&amp;#39;, &amp;#39;CLEANUP&amp;#39;&amp;#93;&lt;/span&gt;)))&lt;br/&gt;
incoming_files_stuuid_idx                             study_uid &lt;br/&gt;
retry_after_not_failed                                retry_after  WHERE ((status) &amp;lt;&amp;gt; &apos;FAILED&apos;)&lt;/p&gt;

&lt;p&gt;Triggers:&lt;br/&gt;
None&lt;/p&gt;


&lt;p&gt;Test cases added or modified: TR&lt;br/&gt;
Screenshot(s) added for GUI changes: &lt;br/&gt;
End result:  is_discarded column is now added. therefore it is marked as verified.&lt;/p&gt;</comment>
                            <comment id="369199" author="dvu" created="Wed, 9 Dec 2015 09:28:44 -0500"  >&lt;p&gt;Included in PACS-4-5-1-R75 (atlas 1.1.90 )&lt;/p&gt;</comment>
                            <comment id="369200" author="dvu" created="Wed, 9 Dec 2015 09:37:17 -0500"  >&lt;p&gt;Included in PACS-4-6-1-R84 (atlas 1.2.82)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>54641</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13080"><![CDATA[Database-LocalDicom]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzt3on:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10803"><![CDATA[MINOR]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-67948] Localdicom: Schema file is missing conflict_study_uid column</title>
                <link>https://jira.intelerad.com/browse/IP-67948</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;RPM Version               : Database-LocalDicom-4.8.1.P204-ims01.noarch.rpm&lt;br/&gt;
EW - Client               : N/A&lt;br/&gt;
Minimal steps to reproduce: &lt;br/&gt;
1) Install a new PACS-4-8-1 server &lt;br/&gt;
2) You will notice that dbConfigurator does not add the conflict_study_uid column to the localdicom schema it created and LDS after starting it up will add it at the end of the list, breaking the ordering of the columns.&lt;/p&gt;

&lt;p&gt;Expected behaviour        : dbConfigurator should have added the conflict_study_uid between should_convert_to_j2c and is_discarded columns.&lt;/p&gt;

&lt;p&gt;What happened instead?    : It didn&apos;t add the column.&lt;/p&gt;

&lt;p&gt;This bug isn&apos;t a horrible thing as LDS adds the column properly but the ordering will be inconsistent. This issue only happened with the LDS &lt;br/&gt;
mitigation fixes, which we don&apos;t do any new installs technically either so &lt;br/&gt;
dbConfigurator&apos;s version of the incoming_files would only be used for &lt;br/&gt;
servers that are being reinstalled/evergreened or new servers installed added&lt;br/&gt;
to an existing PACS.&lt;/p&gt;

&lt;p&gt;This will also fix a unit test failure occurring with the commits from &lt;a href=&quot;https://jira.intelerad.com/browse/IP-67711&quot; title=&quot;UMDB: Sometimes double counting sops as ingested and failed leading to false positives in patient safety mitigation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-67711&quot;&gt;&lt;del&gt;IP-67711&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
            <key id="100202">IP-67948</key>
            <summary>Localdicom: Schema file is missing conflict_study_uid column</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="sclark">Steven Clark</assignee>
                                    <reporter username="sclark">Steven Clark</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Nov 2015 11:36:44 -0500</created>
                <updated>Fri, 26 Apr 2019 14:06:54 -0400</updated>
                            <resolved>Wed, 9 Dec 2015 09:47:00 -0500</resolved>
                                    <version>4-8-1</version>
                                    <fixVersion>4-8-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="369143" author="build" created="Wed, 18 Nov 2015 11:47:09 -0500"  >&lt;p&gt;Released by sclark to master at 2015-11-18 11:47:08 (push 42807):&lt;br/&gt;
  PACS-4-10-1 (dummy)      (previous build: PACS-4-10-1-P181)&lt;br/&gt;
  PACS-4-8-1 (fix)        (previous build: PACS-4-8-1-P204)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/957f1c9b9a4f&quot; target=&quot;_blank&quot;&gt;intelepacs:957f1c9b9a4f&lt;/a&gt;  sclark      PACS-4-8-1  54634 fix: LocalDicom Schema: Add missing conflict_study_uid to creation schema&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/d68ce109ce13&quot; target=&quot;_blank&quot;&gt;intelepacs:d68ce109ce13&lt;/a&gt;  sclark      PACS-4-10-1  54634 dummy: dummy merge from PACS-4-8-1&lt;/p&gt;</comment>
                            <comment id="369144" author="sclark" created="Wed, 18 Nov 2015 11:55:31 -0500"  >&lt;p&gt;Description of the solution: Add missing conflict_study_uid column to the &lt;br/&gt;
schema file that creates the schema from scratch.&lt;/p&gt;

&lt;p&gt;Tests executed: None.&lt;/p&gt;

&lt;p&gt;Unit tests added or modified: Verified that PostgreSQL integration test now&lt;br/&gt;
works and column is created properly.&lt;/p&gt;</comment>
                            <comment id="369145" author="dvu" created="Tue, 24 Nov 2015 11:30:59 -0500"  >&lt;p&gt;Reproduced with RPMs: Database-LocalDicom-4.8.1.P158-ims01.noarch&lt;br/&gt;
Verified with RPMs: Database-LocalDicom-4.8.1.P205-ims01.noarch&lt;br/&gt;
Verification steps: &lt;/p&gt;

&lt;p&gt;1.Reproduce the problem. Verify that  conflict_study_uid column is not yet created&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;admin@qauto481&amp;#93;&lt;/span&gt; {~} sybshow localdicom incoming_files&lt;br/&gt;
Column                            type                features&lt;br/&gt;
------                            ----                --------&lt;br/&gt;
incoming_files_id                 bigint              DEFAULT nextval(&apos;incoming_files_seq&apos;::regclass)&lt;br/&gt;
study_uid                         varchar            &lt;br/&gt;
series_uid                        varchar            &lt;br/&gt;
sop_uid                           varchar            &lt;br/&gt;
patient_id                        varchar            &lt;br/&gt;
image_path                        varchar             NULL&lt;br/&gt;
sender_ae_title                   varchar            &lt;br/&gt;
receiver_ae_title                 varchar            &lt;br/&gt;
status                            varchar            &lt;br/&gt;
j2c_file_created                  boolean            &lt;br/&gt;
association_time_as_epoch         bigint             &lt;br/&gt;
timestamp_inserted                timestamp with time zone  DEFAULT now()&lt;br/&gt;
timestamp_updated                 timestamp with time zone  DEFAULT now()&lt;br/&gt;
last_failure                      varchar             NULL&lt;br/&gt;
state_change_failures             int                 DEFAULT 0&lt;br/&gt;
retry_after                       timestamp with time zone  NULL&lt;br/&gt;
is_reintroduction                 boolean             DEFAULT false&lt;br/&gt;
restore_dest_ae_title             varchar             NULL&lt;br/&gt;
should_convert_to_j2c             boolean             NULL&lt;/p&gt;

&lt;p&gt;Indexes:&lt;br/&gt;
incoming_files_seruid_idx                             series_uid &lt;br/&gt;
incoming_files_sopuid_idx                             sop_uid &lt;br/&gt;
incoming_files_timeidx                                timestamp_inserted &lt;br/&gt;
incoming_files_pk                 unique              incoming_files_id &lt;br/&gt;
incoming_files_stuuid_idx                             study_uid &lt;br/&gt;
retry_after_not_failed                                retry_after  WHERE ((status) &amp;lt;&amp;gt; &apos;FAILED&apos;)&lt;/p&gt;

&lt;p&gt;2. Install the Database-LocalDicom-4.8.1.P205-ims01.noarch.rpm&lt;br/&gt;
3. &lt;span class=&quot;error&quot;&gt;&amp;#91;admin@qauto481&amp;#93;&lt;/span&gt; &lt;/p&gt;
{bin} psql-intelerad -D public -Usa&lt;br/&gt;
Password for user sa: &lt;br/&gt;
SET&lt;br/&gt;
Null display is &quot;NULL&quot;.&lt;br/&gt;
Pager is always used.&lt;br/&gt;
Timing is on.&lt;br/&gt;
psql (9.2.10)&lt;br/&gt;
Type &quot;help&quot; for help.&lt;br/&gt;
&lt;br/&gt;
(sa@&lt;span class=&quot;error&quot;&gt;&amp;#91;local&amp;#93;&lt;/span&gt;) &lt;span class=&quot;error&quot;&gt;&amp;#91;public&amp;#93;&lt;/span&gt; # alter schema localdicom rename to localdicom_old;&lt;br/&gt;
ALTER SCHEMA&lt;br/&gt;
Time: 11.264 ms&lt;br/&gt;
&lt;br/&gt;
4. Run the dbconfigurator&lt;br/&gt;
&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;admin@qauto481&amp;#93;&lt;/span&gt; {bin}
&lt;p&gt; dbConfigurator --upgrade /usr/local/tools/DatabaseSchemas/Postgres/Schema-LocalDicom.cfg --sapassword admpass&lt;br/&gt;
startup VER $Id$&lt;br/&gt;
running in upgrade mode&lt;br/&gt;
Validating plpgsql exists in the local Postgres engine&lt;br/&gt;
Creating/replacing IMS Postgres system function public.spx_CreateRole&lt;br/&gt;
Creating/replacing IMS Postgres system function public.spx_set_executor_statistics&lt;br/&gt;
Creating/replacing IMS Postgres system function public.spx_create_application_function&lt;br/&gt;
Creating/replacing IMS Postgres system function public.spx_drop_application_function&lt;br/&gt;
Creating/replacing IMS Postgres system function public.spx_grant_permissions_to_schema&lt;br/&gt;
Creating database handle to server &apos;QAUTO481&apos; for user sa&lt;br/&gt;
Handle identifies as &apos;dbi:Sybase:server=&apos;QAUTO481&apos;;user=&apos;sa&apos;;spid=1&apos;&lt;br/&gt;
Creating database handle to server &apos;QAUTO481&apos; for user sa&lt;br/&gt;
Handle identifies as &apos;dbi:Sybase:server=&apos;QAUTO481&apos;;user=&apos;sa&apos;;spid=8&apos;&lt;br/&gt;
Will upgrade for these files &apos;/usr/local/tools/DatabaseSchemas/Postgres/Schema-LocalDicom.cfg&apos;&lt;br/&gt;
Looking for schema creation file /usr/local/tools/DatabaseSchemas/Postgres/LocalDicom-schema.sql&lt;br/&gt;
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index &quot;study_uid_pk&quot; for table &quot;studies&quot;&lt;br/&gt;
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index &quot;request_merge_id_pk&quot; for table &quot;request_merge_status&quot;&lt;br/&gt;
File based schema created.&lt;br/&gt;
Validating database users&lt;br/&gt;
dbConfigurator finished.&lt;/p&gt;


&lt;p&gt;5. Verify that dbConfigurator should have added the conflict_study_uid between should_convert_to_j2c and is_discarded columns&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;admin@qauto481&amp;#93;&lt;/span&gt; &lt;/p&gt;
{bin} psql-intelerad -D public -Usa&lt;br/&gt;
Password for user sa: &lt;br/&gt;
SET&lt;br/&gt;
Null display is &quot;NULL&quot;.&lt;br/&gt;
Pager is always used.&lt;br/&gt;
Timing is on.&lt;br/&gt;
psql (9.2.10)&lt;br/&gt;
Type &quot;help&quot; for help.&lt;br/&gt;
&lt;br/&gt;
(sa@&lt;span class=&quot;error&quot;&gt;&amp;#91;local&amp;#93;&lt;/span&gt;) &lt;span class=&quot;error&quot;&gt;&amp;#91;public&amp;#93;&lt;/span&gt; # \d localdicom.incoming_files&lt;br/&gt;
                                             Table &quot;localdicom.incoming_files&quot;&lt;br/&gt;
          Column           |           Type           |                              Modifiers                          &lt;br/&gt;
--------------------------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;------------------------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;----------------------------------------------------------------&lt;br/&gt;
 incoming_files_id         | bigint                   | not null default nextval(&apos;localdicom.incoming_files_seq&apos;::regcla&lt;br/&gt;
 study_uid                 | character varying        | not null&lt;br/&gt;
 series_uid                | character varying        | not null&lt;br/&gt;
 sop_uid                   | character varying        | not null&lt;br/&gt;
 patient_id                | character varying        | not null&lt;br/&gt;
 image_path                | character varying        | &lt;br/&gt;
 sender_ae_title           | character varying        | not null&lt;br/&gt;
 receiver_ae_title         | character varying        | not null&lt;br/&gt;
 status                    | character varying        | not null&lt;br/&gt;
 j2c_file_created          | boolean                  | not null&lt;br/&gt;
 association_time_as_epoch | bigint                   | not null&lt;br/&gt;
 timestamp_inserted        | timestamp with time zone | not null default now()&lt;br/&gt;
 timestamp_updated         | timestamp with time zone | not null default now()&lt;br/&gt;
 last_failure              | character varying        | &lt;br/&gt;
 state_change_failures     | integer                  | not null default 0&lt;br/&gt;
 retry_after               | timestamp with time zone | &lt;br/&gt;
 is_reintroduction         | boolean                  | not null default false&lt;br/&gt;
 restore_dest_ae_title     | character varying        | &lt;br/&gt;
 should_convert_to_j2c     | boolean                  | &lt;br/&gt;
 conflict_study_uid        | character varying        | &lt;br/&gt;
 is_discarded              | boolean                  | &lt;br/&gt;
 has_alerted_ingestion     | boolean                  | &lt;br/&gt;
Indexes:&lt;br/&gt;
    &quot;incoming_files_pk&quot; UNIQUE, btree (incoming_files_id)&lt;br/&gt;
    &quot;incoming_files_has_alerted_ingestion_idx&quot; btree (timestamp_inserted) WHERE (has_alerted_ingestion IS NULL OR has_al&lt;br/&gt;
    &quot;incoming_files_seruid_idx&quot; btree (series_uid)&lt;br/&gt;
(sa@&lt;span class=&quot;error&quot;&gt;&amp;#91;local&amp;#93;&lt;/span&gt;) &lt;span class=&quot;error&quot;&gt;&amp;#91;public&amp;#93;&lt;/span&gt; # \q&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;admin@qauto481&amp;#93;&lt;/span&gt; {bin}
&lt;p&gt; sybshow localdicom incoming_files&lt;br/&gt;
Column                            type                features&lt;br/&gt;
------                            ----                --------&lt;br/&gt;
incoming_files_id                 bigint              DEFAULT nextval(&apos;incoming_files_seq&apos;::regclass)&lt;br/&gt;
study_uid                         varchar            &lt;br/&gt;
series_uid                        varchar            &lt;br/&gt;
sop_uid                           varchar            &lt;br/&gt;
patient_id                        varchar            &lt;br/&gt;
image_path                        varchar             NULL&lt;br/&gt;
sender_ae_title                   varchar            &lt;br/&gt;
receiver_ae_title                 varchar            &lt;br/&gt;
status                            varchar            &lt;br/&gt;
j2c_file_created                  boolean            &lt;br/&gt;
association_time_as_epoch         bigint             &lt;br/&gt;
timestamp_inserted                timestamp with time zone  DEFAULT now()&lt;br/&gt;
timestamp_updated                 timestamp with time zone  DEFAULT now()&lt;br/&gt;
last_failure                      varchar             NULL&lt;br/&gt;
state_change_failures             int                 DEFAULT 0&lt;br/&gt;
retry_after                       timestamp with time zone  NULL&lt;br/&gt;
is_reintroduction                 boolean             DEFAULT false&lt;br/&gt;
restore_dest_ae_title             varchar             NULL&lt;br/&gt;
should_convert_to_j2c             boolean             NULL&lt;br/&gt;
conflict_study_uid                varchar             NULL&lt;br/&gt;
is_discarded                      boolean             NULL&lt;br/&gt;
has_alerted_ingestion             boolean             NULL&lt;/p&gt;

&lt;p&gt;...&lt;/p&gt;




&lt;p&gt;Test cases added or modified: TR&lt;br/&gt;
Screenshot(s) added for GUI changes: &lt;br/&gt;
End result: conflict_study_uid column is now added between should_convert_to_j2c and is_discarded columns. Therefore it is marked as verified&lt;/p&gt;</comment>
                            <comment id="369146" author="dvu" created="Wed, 9 Dec 2015 09:47:20 -0500"  >&lt;p&gt;Included in PACS-4-8-1-R44 (atlas 1.4.93 )&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Blocks</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="99965">IP-67711</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>54634</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13080"><![CDATA[Database-LocalDicom]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzt3nr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10802"><![CDATA[MAJOR]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-67369] dbConfigurator fail during quickRename</title>
                <link>https://jira.intelerad.com/browse/IP-67369</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;RPM Version               : &lt;br/&gt;
EW - Client               : EWxxxx  - &amp;lt;client code&amp;gt;&lt;br/&gt;
Minimal steps to reproduce: quickRename from 4-10-1 template&lt;br/&gt;
Expected behaviour        : &lt;br/&gt;
What happened instead?    : Got the following error in /var/log/template-tools/dbConfigurator.log:&lt;br/&gt;
...&lt;br/&gt;
NOTICE:  Granting user intelebrowser,worklistservice,workflowqualityservice,replicateworkflowquality,cmdline,deployment,jasperreportservicereader access to sequence workflowquality.peer_review_worklist_seq&lt;br/&gt;
Dicom-schema.sql&lt;br/&gt;
ERROR: Failed to validate Schema, DBD::Pg::db do failed: ERROR:  column &quot;has_alerted_ingestion&quot; does not exist&lt;br/&gt;
LINE 200: ...idx on incoming_files (timestamp_inserted) where (has_alerte...&lt;br/&gt;
                                                               ^ at /usr/local/tools/PerlPackages/IMS/SchemaTools/DBH.pm line 178.&lt;/p&gt;

&lt;p&gt;ERROR (cont&apos;d): moving on the next in list (if not last)&lt;br/&gt;
Starting to create for database PacsGlobals from file &apos;/usr/local/tools/DatabaseSchemas/Postgres/Schema-PacsGlobals.cfg&apos;&lt;br/&gt;
Looking for schema creation file /usr/local/tools/DatabaseSchemas/Postgres/PacsGlobals-schema.sql&lt;br/&gt;
File based schema created.&lt;br/&gt;
...&lt;/p&gt;</description>
            <key id="99623">IP-67369</key>
            <summary>dbConfigurator fail during quickRename</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="hahsan">Hannan Ahsan</assignee>
                                    <reporter username="aharnois">Alain Harnois</reporter>
                        <labels>
                            <label>regression_fix</label>
                    </labels>
                <created>Tue, 22 Sep 2015 10:10:44 -0400</created>
                <updated>Fri, 26 Apr 2019 14:06:45 -0400</updated>
                            <resolved>Tue, 20 Oct 2015 14:08:00 -0400</resolved>
                                    <version>4-10-1</version>
                                    <fixVersion>4-8-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="365361" author="build" created="Tue, 22 Sep 2015 10:41:33 -0400"  >&lt;p&gt;Released by hahsan to master at 2015-09-22 10:41:30 (push 41251):&lt;br/&gt;
  PACS-4-10-1 (fix)        (previous build: PACS-4-10-1-P157)&lt;br/&gt;
  PACS-4-11-1 (fix)        (previous build: PACS-4-11-1-P86)&lt;br/&gt;
  PACS-4-12-1 (dummy)      (previous build: PACS-4-12-1-P25)&lt;br/&gt;
  PACS-4-8-1 (fix)        (previous build: PACS-4-8-1-P189)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/7c1548530296&quot; target=&quot;_blank&quot;&gt;intelepacs:7c1548530296&lt;/a&gt;  hahsan      PACS-4-8-1  53709 fix: add missing column in incoming_files.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/33cd60f41c0a&quot; target=&quot;_blank&quot;&gt;intelepacs:33cd60f41c0a&lt;/a&gt;  hahsan      PACS-4-10-1  53709 fix: add missing column in incoming_files.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/38de31f4263d&quot; target=&quot;_blank&quot;&gt;intelepacs:38de31f4263d&lt;/a&gt;  hahsan      PACS-4-11-1  53709 fix: add missing column in incoming_files.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/44181f2ef421&quot; target=&quot;_blank&quot;&gt;intelepacs:44181f2ef421&lt;/a&gt;  hahsan      PACS-4-12-1  53709 dummy: dummy merge from PACS-4-11-1&lt;/p&gt;</comment>
                            <comment id="365362" author="hannan.ahsan" created="Tue, 22 Sep 2015 10:44:46 -0400"  >&lt;p&gt;Description of the solution: DbConfigurator was failing as incoming_files table in LocalDicom schema was missing has_alerted_ingestion column. This column was introduced in LDS mitigation feature. Schema file was not correctly patched when merging this feature. &lt;br/&gt;
The column was missing in PACS-4-8-1, PACS-4-10-1, and PACS-4-11-1 branches. I added the column in the schema file. &lt;/p&gt;

&lt;p&gt;Tests executed: none&lt;/p&gt;

&lt;p&gt;Unit tests added or modified: none&lt;/p&gt;</comment>
                            <comment id="365363" author="rami.bechara" created="Tue, 22 Sep 2015 11:19:16 -0400"  >&lt;p&gt;Introduced by LDS mitigation feature&lt;/p&gt;</comment>
                            <comment id="365364" author="dvu" created="Wed, 23 Sep 2015 14:08:41 -0400"  >
&lt;p&gt;Verified with RPMs: Version 4-8-1-P190&lt;/p&gt;

&lt;p&gt;1. Make sure you have the clean VM template.&lt;br/&gt;
2. Run the following command ( this quickrename will update the PACS with current production build and running the dbConfigurator as well)&lt;/p&gt;

&lt;p&gt;  sudo /opt/intelerad/bin/quickRename --firstboot --install-packages --force&lt;/p&gt;



&lt;p&gt;3. Verify that has_alerted_ingestion column had been added successfully in the LocalDicon incoming_files table. &lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;admin@duketest481&amp;#93;&lt;/span&gt; &lt;/p&gt;
{template-tools}
&lt;p&gt; sybshow localdicom incoming_files&lt;br/&gt;
Column                            type                features&lt;br/&gt;
------                            ----                --------&lt;br/&gt;
incoming_files_id                 bigint              DEFAULT nextval(&apos;incoming_files_seq&apos;::regclass)&lt;br/&gt;
study_uid                         varchar            &lt;br/&gt;
series_uid                        varchar            &lt;br/&gt;
sop_uid                           varchar            &lt;br/&gt;
patient_id                        varchar            &lt;br/&gt;
image_path                        varchar             NULL&lt;br/&gt;
sender_ae_title                   varchar            &lt;br/&gt;
receiver_ae_title                 varchar            &lt;br/&gt;
status                            varchar            &lt;br/&gt;
j2c_file_created                  boolean            &lt;br/&gt;
association_time_as_epoch         bigint             &lt;br/&gt;
timestamp_inserted                timestamp with time zone  DEFAULT now()&lt;br/&gt;
timestamp_updated                 timestamp with time zone  DEFAULT now()&lt;br/&gt;
last_failure                      varchar             NULL&lt;br/&gt;
state_change_failures             int                 DEFAULT 0&lt;br/&gt;
retry_after                       timestamp with time zone  NULL&lt;br/&gt;
is_reintroduction                 boolean             DEFAULT false&lt;br/&gt;
restore_dest_ae_title             varchar             NULL&lt;br/&gt;
should_convert_to_j2c             boolean             NULL&lt;br/&gt;
conflict_study_uid                varchar             NULL&lt;br/&gt;
is_discarded                      boolean             NULL&lt;br/&gt;
has_alerted_ingestion             boolean             NULL&lt;/p&gt;

&lt;p&gt;Indexes:&lt;br/&gt;
incoming_files_seruid_idx                             series_uid &lt;br/&gt;
incoming_files_sopuid_idx                             sop_uid &lt;br/&gt;
incoming_files_timeidx                                timestamp_inserted &lt;br/&gt;
incoming_files_pk                 unique              incoming_files_id &lt;br/&gt;
incoming_files_has_alerted_ingestion_idx                     timestamp_inserted  WHERE (((has_alerted_ingestion IS FALSE) OR (has_alerted_ingestion IS NULL)) AND ((status) &amp;lt;&amp;gt; ANY (ARRAY&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;POSTRECEPTION&amp;#39;, &amp;#39;CLEANUP&amp;#39;&amp;#93;&lt;/span&gt;)))&lt;br/&gt;
incoming_files_stuuid_idx                             study_uid &lt;br/&gt;
retry_after_not_failed                                retry_after  WHERE ((status) &amp;lt;&amp;gt; &apos;FAILED&apos;)&lt;/p&gt;

&lt;p&gt;Triggers:&lt;br/&gt;
None&lt;/p&gt;


&lt;p&gt;End result: Marked as verified. I also have tested with 4-11-1 with success.&lt;/p&gt;</comment>
                            <comment id="365365" author="dvu" created="Fri, 25 Sep 2015 09:30:26 -0400"  >&lt;p&gt;Included in PACS-4-8-1-R40 (atlas 1.4.88 )&lt;/p&gt;</comment>
                            <comment id="365366" author="dvu" created="Thu, 1 Oct 2015 09:51:24 -0400"  >&lt;p&gt;Included in PACS-4-11-1-R20 (atlas 1.7.P28)&lt;/p&gt;</comment>
                            <comment id="365367" author="dvu" created="Tue, 20 Oct 2015 14:08:54 -0400"  >&lt;p&gt;Included in PACS-4-10-1-R30 (atlas 1.6.P61 )&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>53709</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13080"><![CDATA[Database-LocalDicom]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzt07z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_13801" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Reported By Tester?</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14404"><![CDATA[Yes]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10801"><![CDATA[CRITICAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-65655] Corrections DB: unit tests fail when run under Java 8</title>
                <link>https://jira.intelerad.com/browse/IP-65655</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;Trying to run tests under Java 8 we get this:&lt;/p&gt;

&lt;p&gt;There was 1 failure:&lt;br/&gt;
1) testAddNewCorrection(com.intelerad.db.corrections.lib.TestCorrections)&lt;br/&gt;
junit.framework.ComparisonFailure: expected:&amp;lt;...RT INTO correction (&lt;span class=&quot;error&quot;&gt;&amp;#91;targettype, status, targetvalue, sequence, owner, inserter, timestampid) VALUES (&amp;#39;E&amp;#39;, &amp;#39;Y&amp;#39;, &amp;#39;1.2.3.4.5.6.7.8.9.0&amp;#39;, 1, 3, &amp;#39;C&amp;#39;, &amp;#39;2009-06-07 00:00:00.000&amp;#93;&lt;/span&gt;&apos;)&amp;gt; but was:&amp;lt;...RT INTO correction (&lt;span class=&quot;error&quot;&gt;&amp;#91;owner, sequence, timestampid, targettype, targetvalue, inserter, status) VALUES (3, 1, &amp;#39;2009-06-07 00:00:00.000&amp;#39;, &amp;#39;E&amp;#39;, &amp;#39;1.2.3.4.5.6.7.8.9.0&amp;#39;, &amp;#39;C&amp;#39;, &amp;#39;Y&amp;#93;&lt;/span&gt;&apos;)&amp;gt;&lt;br/&gt;
        at junit.framework.Assert.assertEquals(Assert.java:85)&lt;br/&gt;
        at junit.framework.Assert.assertEquals(Assert.java:91)&lt;br/&gt;
        at com.intelerad.db.corrections.lib.TestCorrections$MockWrapper.assertCalls(TestCorrections.java:187)&lt;br/&gt;
        at com.intelerad.db.corrections.lib.TestCorrections$MockWrapper.access$400(TestCorrections.java:23)&lt;br/&gt;
        at com.intelerad.db.corrections.lib.TestCorrections.testAddNewCorrection(TestCorrections.java:244)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:483)&lt;br/&gt;
        at junit.framework.TestCase.runTest(TestCase.java:168)&lt;br/&gt;
        at junit.framework.TestCase.runBare(TestCase.java:134)&lt;br/&gt;
        at junit.framework.TestResult$1.protect(TestResult.java:110)&lt;br/&gt;
        at junit.framework.TestResult.runProtected(TestResult.java:128)&lt;br/&gt;
        at junit.framework.TestResult.run(TestResult.java:113)&lt;br/&gt;
        at junit.framework.TestCase.run(TestCase.java:124)&lt;br/&gt;
        at junit.framework.TestSuite.runTest(TestSuite.java:243)&lt;br/&gt;
        at junit.framework.TestSuite.run(TestSuite.java:238)&lt;br/&gt;
        at junit.framework.TestSuite.runTest(TestSuite.java:243)&lt;br/&gt;
        at junit.framework.TestSuite.run(TestSuite.java:238)&lt;br/&gt;
        at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83)&lt;br/&gt;
        at org.junit.runners.Suite.runChild(Suite.java:128)&lt;br/&gt;
        at org.junit.runners.Suite.runChild(Suite.java:24)&lt;br/&gt;
        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)&lt;br/&gt;
        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)&lt;br/&gt;
        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)&lt;br/&gt;
        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)&lt;br/&gt;
        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)&lt;br/&gt;
        at org.junit.runners.ParentRunner.run(ParentRunner.java:300)&lt;br/&gt;
        at org.junit.runner.JUnitCore.run(JUnitCore.java:157)&lt;br/&gt;
        at org.junit.runner.JUnitCore.run(JUnitCore.java:136)&lt;br/&gt;
        at com.intelerad.junit4.InteleradJunitCore.main(InteleradJunitCore.java:71)&lt;/p&gt;</description>
            <key id="97909">IP-65655</key>
            <summary>Corrections DB: unit tests fail when run under Java 8</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="sperinsky">Serge Perinsky</assignee>
                                    <reporter username="sperinsky">Serge Perinsky</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Feb 2015 18:19:36 -0500</created>
                <updated>Mon, 25 Mar 2019 14:07:38 -0400</updated>
                            <resolved>Thu, 26 Feb 2015 15:23:00 -0500</resolved>
                                                    <fixVersion>Next Branch (Trunk)</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="354678" author="sperinsky" created="Wed, 25 Feb 2015 11:33:25 -0500"  >&lt;p&gt;a&lt;/p&gt;</comment>
                            <comment id="354679" author="sperinsky" created="Thu, 26 Feb 2015 11:44:11 -0500"  >&lt;p&gt;changeset:   161005:8bc2fc49b875&lt;br/&gt;
user:        Serge Perinsky &amp;lt;sperinsky@intelerad.com&amp;gt;&lt;br/&gt;
date:        2015-02-26 11:41:42 -0500&lt;br/&gt;
summary:     51117 fix: Remove obsolete CorrectionsDB code plus unused parts of PatientCorrectionsLibrary.&lt;/p&gt;</comment>
                            <comment id="354680" author="sperinsky" created="Thu, 26 Feb 2015 11:48:22 -0500"  >&lt;p&gt;Description of the solution: The code that started to fail in Java 8 was actually unused for quite some time. Nick and I decided it was a good time to get rid of this dead code. Thus the test failure went away with it.&lt;/p&gt;

&lt;p&gt;Tests executed: code compiles, remaining tests still pass.&lt;/p&gt;

&lt;p&gt;Unit tests added or modified: none&lt;/p&gt;</comment>
                            <comment id="354681" author="sperinsky" created="Thu, 26 Feb 2015 15:23:40 -0500"  >&lt;p&gt;changeset:   161007:66fd1ed6b46b&lt;br/&gt;
user:        Serge Perinsky &amp;lt;sperinsky@intelerad.com&amp;gt;&lt;br/&gt;
date:        2015-02-26 15:22:41 -0500&lt;br/&gt;
description:&lt;br/&gt;
51117 fix: Remove unused code from PATIENT_CORRECTION_LIBRARY.filelist.&lt;/p&gt;</comment>
                            <comment id="354682" author="build" created="Wed, 18 Mar 2015 08:36:15 -0400"  >&lt;p&gt;Released by mbaum to master at 2015-03-18 08:36:14 (push 36807):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-11-2-A20)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-11-2-A20)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/8bc2fc49b875&quot; target=&quot;_blank&quot;&gt;intelepacs:8bc2fc49b875&lt;/a&gt;  sperinsky   trunk       51117 fix: Remove obsolete CorrectionsDB code plus unused parts of PatientCorrectionsLibrary.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/66fd1ed6b46b&quot; target=&quot;_blank&quot;&gt;intelepacs:66fd1ed6b46b&lt;/a&gt;  sperinsky   trunk       51117 fix: Remove unused code from PATIENT_CORRECTION_LIBRARY.filelist.&lt;/p&gt;</comment>
                            <comment id="354683" author="build" created="Wed, 26 Aug 2015 15:41:18 -0400"  >&lt;p&gt;Released by mbaum to master at 2015-03-18 08:36:14 (push 36807):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-11-2-A20)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-11-2-A20)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/8bc2fc49b875&quot; target=&quot;_blank&quot;&gt;intelepacs:8bc2fc49b875&lt;/a&gt;  sperinsky   trunk       51117 fix: Remove obsolete CorrectionsDB code plus unused parts of PatientCorrectionsLibrary.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/66fd1ed6b46b&quot; target=&quot;_blank&quot;&gt;intelepacs:66fd1ed6b46b&lt;/a&gt;  sperinsky   trunk       51117 fix: Remove unused code from PATIENT_CORRECTION_LIBRARY.filelist.&lt;/p&gt;</comment>
                            <comment id="446534" author="jmacri" created="Wed, 23 Aug 2017 11:09:45 -0400"  >&lt;p&gt;This defect has been verified by the developer at the time of code change plus the execution of development testing. In addition, automated and/or manual integration testing done by QA also verifies that this issue has been resolved.&lt;/p&gt;

&lt;p&gt;In certain cases the deployment team during test farm creation will be the group responsible for verification during routine deployment testing.&lt;/p&gt;

&lt;p&gt;Marking CLOSED. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Blocks</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="97832">IP-65578</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>51117</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13000"><![CDATA[NO_RPMS]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzsps7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-64575] PctMdbUpdater.cfg : source control file needs more than 100 ORGANIZATION_ sections for RDS</title>
                <link>https://jira.intelerad.com/browse/IP-64575</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;RPM Version               : PctMdbUpdater-4.3.1.P334-ims01&lt;br/&gt;
EW - Client               : &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=376643&quot; target=&quot;_blank&quot;&gt;EW376643&lt;/a&gt; - RDS&lt;br/&gt;
Minimal steps to reproduce: Increase the number of organisation (codes, sections) beyond 100 in configuration.&lt;/p&gt;

&lt;p&gt;Expected behaviour        : software continues to work&lt;br/&gt;
What happened instead?    : compileControlFiles fails&lt;/p&gt;

&lt;p&gt;TOA was recently migrated back into RDS as a satellite PACS, this triggered an increase in the number of organisations beyond the current supported maximum of 100.&lt;/p&gt;</description>
            <key id="96829">IP-64575</key>
            <summary>PctMdbUpdater.cfg : source control file needs more than 100 ORGANIZATION_ sections for RDS</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://jira.intelerad.com/images/icons/priorities/major.svg">Medium</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="dfredouille">Daniel Fredouille</assignee>
                                    <reporter username="marcst">Marc St-Laurent</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 Oct 2014 16:49:12 -0400</created>
                <updated>Mon, 25 Mar 2019 14:07:49 -0400</updated>
                            <resolved>Wed, 3 Dec 2014 10:42:00 -0500</resolved>
                                    <version>4-3-1</version>
                                    <fixVersion>4-3-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="347589" author="sghatpande" created="Thu, 23 Oct 2014 09:33:03 -0400"  >&lt;p&gt;Merging from QIM to PIL. Escalation accepted by R&amp;amp;D.&lt;/p&gt;</comment>
                            <comment id="347590" author="dfredouille" created="Fri, 24 Oct 2014 11:28:32 -0400"  >&lt;p&gt;Please refer to &lt;a href=&quot;https://jira.intelerad.com/browse/IP-100724&quot; title=&quot;BZ49414, BZ49415, BZ49416 (RDS config changes)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-100724&quot;&gt;&lt;del&gt;MAINT-2199&lt;/del&gt;&lt;/a&gt; since 49414, 49415 and 49416 will be tackled together on this same JIRA issue.&lt;/p&gt;</comment>
                            <comment id="347591" author="build" created="Mon, 27 Oct 2014 16:26:03 -0400"  >&lt;p&gt;Released by dfredouille to master at 2014-10-27 16:25:56 (push 33065):&lt;br/&gt;
  PACS-4-10-1 (fix)        (previous build: PACS-4-10-1-P51)&lt;br/&gt;
  PACS-4-3-1 (fix)        (previous build: PACS-4-3-1-P405)&lt;br/&gt;
  PACS-4-3-2 (fix)        (previous build: PACS-4-3-2-P111)&lt;br/&gt;
  PACS-4-3-4 (fix)        (previous build: PACS-4-3-4-P169)&lt;br/&gt;
  PACS-4-5-1 (fix)        (previous build: PACS-4-5-1-P264)&lt;br/&gt;
  PACS-4-6-1 (fix)        (previous build: PACS-4-6-1-P237)&lt;br/&gt;
  PACS-4-7-1 (fix)        (previous build: PACS-4-7-1-P201)&lt;br/&gt;
  PACS-4-8-1 (fix)        (previous build: PACS-4-8-1-P126)&lt;br/&gt;
  PACS-4-9-1 (fix)        (previous build: PACS-4-9-1-P136)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-10-2-A8)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/21ad9168f50e&quot; target=&quot;_blank&quot;&gt;intelepacs:21ad9168f50e&lt;/a&gt;  dfredouille  PACS-4-3-1  49414 fix,49415 fix,49416 fix: add additional ORGANIZATION_X entries to cfg files.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/9956558109fa&quot; target=&quot;_blank&quot;&gt;intelepacs:9956558109fa&lt;/a&gt;  dfredouille  PACS-4-3-2  49414 fix,49415 fix,49416 fix: add additional ORGANIZATION_X entries to cfg files.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/47be75cee558&quot; target=&quot;_blank&quot;&gt;intelepacs:47be75cee558&lt;/a&gt;  dfredouille  PACS-4-3-4  49414 fix,49415 fix,49416 fix: add additional ORGANIZATION_X entries to cfg files.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/50330c3d3f3e&quot; target=&quot;_blank&quot;&gt;intelepacs:50330c3d3f3e&lt;/a&gt;  dfredouille  PACS-4-5-1  49414 fix,49415 fix,49416 fix: add additional ORGANIZATION_X entries to cfg files.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/49a51e679e55&quot; target=&quot;_blank&quot;&gt;intelepacs:49a51e679e55&lt;/a&gt;  dfredouille  PACS-4-6-1  49414 fix,49415 fix,49416 fix: add additional ORGANIZATION_X entries to cfg files.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/892fe0cdc98c&quot; target=&quot;_blank&quot;&gt;intelepacs:892fe0cdc98c&lt;/a&gt;  dfredouille  PACS-4-7-1  49414 fix,49415 fix,49416 fix: add additional ORGANIZATION_X entries to cfg files.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/1b7910c7cbc4&quot; target=&quot;_blank&quot;&gt;intelepacs:1b7910c7cbc4&lt;/a&gt;  dfredouille  PACS-4-8-1  49414 fix,49415 fix,49416 fix: add additional ORGANIZATION_X entries to cfg files.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/1ac683b34020&quot; target=&quot;_blank&quot;&gt;intelepacs:1ac683b34020&lt;/a&gt;  dfredouille  PACS-4-9-1  49414 fix,49415 fix,49416 fix: add additional ORGANIZATION_X entries to cfg files.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/44f3752eb0b5&quot; target=&quot;_blank&quot;&gt;intelepacs:44f3752eb0b5&lt;/a&gt;  dfredouille  PACS-4-10-1  49414 fix,49415 fix,49416 fix: add additional ORGANIZATION_X entries to cfg files.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/f51f796fa528&quot; target=&quot;_blank&quot;&gt;intelepacs:f51f796fa528&lt;/a&gt;  dfredouille  trunk       49414 fix,49415 fix,49416 fix: add additional ORGANIZATION_X entries to cfg files.&lt;/p&gt;</comment>
                            <comment id="347592" author="dfredouille" created="Mon, 27 Oct 2014 16:34:03 -0400"  >&lt;p&gt;Description of the solution:&lt;/p&gt;

&lt;p&gt;Add 200 org entries in the source config file.&lt;/p&gt;

&lt;p&gt;Tests executed:&lt;/p&gt;

&lt;p&gt;Checked that executing compileControlFiles and distribute puts more than 100 entries in the file if pacsCore contains more than a 100.&lt;/p&gt;

&lt;p&gt;Unit tests added or modified:&lt;/p&gt;

&lt;p&gt;None&lt;/p&gt;</comment>
                            <comment id="347593" author="lucie" created="Mon, 10 Nov 2014 18:08:02 -0500"  >&lt;p&gt;SeriesCorrectionEventHandler.cfg also loads that config.&lt;/p&gt;</comment>
                            <comment id="347594" author="lucie" created="Mon, 10 Nov 2014 18:13:08 -0500"  >&lt;p&gt;I found that 2 other config files are not tracked for this fix. I&apos;ve re-opened this slip for SCEH cfg and opened &lt;a href=&quot;https://jira.intelerad.com/browse/IP-64904&quot; title=&quot;AccountingNode.cfg: source control file needs more than 100 ORGANIZATION_ sections for RDS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-64904&quot;&gt;&lt;del&gt;IP-64904&lt;/del&gt;&lt;/a&gt; for AccountingNode.&lt;/p&gt;</comment>
                            <comment id="347595" author="build" created="Tue, 11 Nov 2014 15:28:14 -0500"  >&lt;p&gt;Released by dfredouille to master at 2014-11-11 15:28:07 (push 33477):&lt;br/&gt;
  PACS-4-10-1 (fix)        (previous build: PACS-4-10-1-P62)&lt;br/&gt;
  PACS-4-10-2 (fix)        (previous build: PACS-4-10-2-P1)&lt;br/&gt;
  PACS-4-3-1 (fix)        (previous build: PACS-4-3-1-P406)&lt;br/&gt;
  PACS-4-3-2 (fix)        (previous build: PACS-4-3-2-P112)&lt;br/&gt;
  PACS-4-3-4 (fix)        (previous build: PACS-4-3-4-P170)&lt;br/&gt;
  PACS-4-5-1 (fix)        (previous build: PACS-4-5-1-P266)&lt;br/&gt;
  PACS-4-6-1 (fix)        (previous build: PACS-4-6-1-P241)&lt;br/&gt;
  PACS-4-7-1 (fix)        (previous build: PACS-4-7-1-P203)&lt;br/&gt;
  PACS-4-8-1 (fix)        (previous build: PACS-4-8-1-P129)&lt;br/&gt;
  PACS-4-9-1 (fix)        (previous build: PACS-4-9-1-P147)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-10-3-A1)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/f7d68c9f8b14&quot; target=&quot;_blank&quot;&gt;intelepacs:f7d68c9f8b14&lt;/a&gt;  dfredouille  PACS-4-3-1  49416 fix,49914 fix: adding handling of more organization entries in config files&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/41029e84e4c3&quot; target=&quot;_blank&quot;&gt;intelepacs:41029e84e4c3&lt;/a&gt;  dfredouille  PACS-4-3-2  49416 fix,49914 fix: adding handling of more organization entries in config files&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/556fad531703&quot; target=&quot;_blank&quot;&gt;intelepacs:556fad531703&lt;/a&gt;  dfredouille  PACS-4-3-4  49416 fix,49914 fix: adding handling of more organization entries in config files&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/b719bc987675&quot; target=&quot;_blank&quot;&gt;intelepacs:b719bc987675&lt;/a&gt;  dfredouille  PACS-4-5-1  49416 fix,49914 fix: adding handling of more organization entries in config files&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/655aa134353d&quot; target=&quot;_blank&quot;&gt;intelepacs:655aa134353d&lt;/a&gt;  dfredouille  PACS-4-6-1  49416 fix,49914 fix: adding handling of more organization entries in config files&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/e8c1b1449713&quot; target=&quot;_blank&quot;&gt;intelepacs:e8c1b1449713&lt;/a&gt;  dfredouille  PACS-4-7-1  49416 fix,49914 fix: adding handling of more organization entries in config files&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/cca203904d5d&quot; target=&quot;_blank&quot;&gt;intelepacs:cca203904d5d&lt;/a&gt;  dfredouille  PACS-4-8-1  49416 fix,49914 fix: adding handling of more organization entries in config files&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/66b0d368ac46&quot; target=&quot;_blank&quot;&gt;intelepacs:66b0d368ac46&lt;/a&gt;  dfredouille  PACS-4-9-1  49416 fix,49914 fix: adding handling of more organization entries in config files&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/a22b59047592&quot; target=&quot;_blank&quot;&gt;intelepacs:a22b59047592&lt;/a&gt;  dfredouille  PACS-4-10-1  49416 fix,49914 fix: adding handling of more organization entries in config files&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/b500bbf7602e&quot; target=&quot;_blank&quot;&gt;intelepacs:b500bbf7602e&lt;/a&gt;  dfredouille  PACS-4-10-2  49416 fix,49914 fix: adding handling of more organization entries in config files&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/2289d79951ad&quot; target=&quot;_blank&quot;&gt;intelepacs:2289d79951ad&lt;/a&gt;  dfredouille  trunk       49416 fix,49914 fix: adding handling of more organization entries in config files&lt;/p&gt;</comment>
                            <comment id="347596" author="dfredouille" created="Tue, 11 Nov 2014 15:32:31 -0500"  >&lt;p&gt;Description of the solution:&lt;/p&gt;

&lt;p&gt;Added same organization list in the SCEH.cfg file. &lt;/p&gt;

&lt;p&gt;Tests executed:&lt;/p&gt;

&lt;p&gt;Did the same test as in comment #4 on a 431 VM.&lt;/p&gt;

&lt;p&gt;Unit tests added or modified:&lt;/p&gt;

&lt;p&gt;none&lt;/p&gt;</comment>
                            <comment id="347597" author="lucie" created="Wed, 12 Nov 2014 18:03:36 -0500"  >&lt;p&gt;Reproduced with RPMs: PctMdbUpdater-4.3.1.P334-ims01.noarch.rpm SeriesCorrectionEventHandler-4.3.1.P359-ims01.noarch.rpm&lt;br/&gt;
Verified with RPMs: PctMdbUpdater-4.3.1.P407-ims01.noarch.rpm SeriesCorrectionEventHandler-4.3.1.P407-ims01.noarch.rpm&lt;br/&gt;
Verification steps: add 120 orgs with satellites, verify that they are added to the cfg files and sceh sees them.&lt;br/&gt;
Test cases added or modified: TR&lt;br/&gt;
Screenshot(s) added for GUI changes: &lt;br/&gt;
End result: verified&lt;/p&gt;</comment>
                            <comment id="347598" author="lucie" created="Wed, 19 Nov 2014 13:11:19 -0500"  >&lt;p&gt;Included in PACS-4-3-4-R33&lt;/p&gt;</comment>
                            <comment id="347599" author="lucie" created="Wed, 3 Dec 2014 10:42:49 -0500"  >&lt;p&gt;Included in PACS-4-3-1-R48&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12603" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Affected Clients</customfieldname>
                        <customfieldvalues>
                                        <label>RDS</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>49416</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13316"><![CDATA[PctMdbUpdater]]></customfieldvalue>
    <customfieldvalue key="13386"><![CDATA[SeriesCorrectionEventHandler]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzsj87:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10802"><![CDATA[MAJOR]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-63842] LDS: LocalDicom, GlobalDicom should partition tables that have more than 10 million rows</title>
                <link>https://jira.intelerad.com/browse/IP-63842</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;Postgres does not handle extremely large tables very well, it causes problems with vacuuming and other normal maintenance operations.  Tables of that size should be partitioned.&lt;/p&gt;</description>
            <key id="96096">IP-63842</key>
            <summary>LDS: LocalDicom, GlobalDicom should partition tables that have more than 10 million rows</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://jira.intelerad.com/images/icons/priorities/critical.svg">High</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="glaza">George Laza</assignee>
                                    <reporter username="mat">Mathew Kanner</reporter>
                        <labels>
                            <label>BigBug</label>
                    </labels>
                <created>Tue, 5 Aug 2014 10:25:37 -0400</created>
                <updated>Mon, 25 Mar 2019 14:07:58 -0400</updated>
                            <resolved>Fri, 13 Nov 2015 09:32:00 -0500</resolved>
                                    <version>4-6-1</version>
                                    <fixVersion>4-12-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="342897" author="lfoster" created="Tue, 11 Nov 2014 13:06:49 -0500"  >&lt;p&gt;Triaged for impact on 4-11-1 user documentation. Doc flag set to -.&lt;/p&gt;</comment>
                            <comment id="342898" author="mat" created="Fri, 30 Jan 2015 15:17:07 -0500"  >&lt;p&gt;There are two parts to this problem.  How to automatically partition tables at some threshold, arbitrarily defined as 10m here.  And how to address existing tables that should be partitioned but have not.&lt;br/&gt;
This BZ should address only the on-going partitions, autonomic re balancing can happen elsewhere, in the future, if ever.&lt;br/&gt;
So, in general, this BZ should implement some sort of policy that tables passing a certain condition (time, size, etc) needs to create a new partition, all insert activity goes to this partition.  This can be done via intelligent inserts or PostgreSQL rules to redirect them.&lt;/p&gt;</comment>
                            <comment id="342899" author="kagha" created="Mon, 9 Feb 2015 16:03:46 -0500"  >&lt;p&gt;AIS has more than 40 million rows in global DICOM/requests table and will benefit from this bug fix.&lt;/p&gt;</comment>
                            <comment id="342900" author="glaza" created="Thu, 7 May 2015 15:21:31 -0400"  >&lt;p&gt;The following document details our plan to address table partitioning:&lt;/p&gt;

&lt;p&gt;     &lt;a href=&quot;https://docs.google.com/document/d/110gNKSLaEV7BWIr57sboPOzODGzIaY0aiB-kmRF2JVs&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://docs.google.com/document/d/110gNKSLaEV7BWIr57sboPOzODGzIaY0aiB-kmRF2JVs&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="342901" author="build" created="Wed, 15 Jul 2015 15:14:39 -0400"  >&lt;p&gt;Released by glaza to master at 2015-07-15 15:14:38 (push 39596):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-11-2-A105)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/a92d907cbbc1&quot; target=&quot;_blank&quot;&gt;intelepacs:a92d907cbbc1&lt;/a&gt;  glaza       trunk       48400 fix: Add table partitioning support for request_attrs table&lt;/p&gt;</comment>
                            <comment id="342902" author="glaza" created="Fri, 17 Jul 2015 10:54:30 -0400"  >&lt;p&gt;Table Partitioning Implementation Guide:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://docs.google.com/document/d/1Qw9UTy26EgDMaUAt7QwFzmH1dDL8Syu2QbgVpsMKd3M&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://docs.google.com/document/d/1Qw9UTy26EgDMaUAt7QwFzmH1dDL8Syu2QbgVpsMKd3M&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="342903" author="build" created="Fri, 17 Jul 2015 12:00:00 -0400"  >&lt;p&gt;Released by glaza to master at 2015-07-17 11:59:59 (push 39653):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-11-2-A107)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/019baad4ce82&quot; target=&quot;_blank&quot;&gt;intelepacs:019baad4ce82&lt;/a&gt;  glaza       trunk       48400 fix: Move table partitioning config keys to LDS&apos; section whitout the AeTitle&lt;/p&gt;</comment>
                            <comment id="342904" author="build" created="Mon, 20 Jul 2015 11:58:38 -0400"  >&lt;p&gt;Released by glaza to master at 2015-07-20 11:58:37 (push 39678):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-11-2-A107)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/55adf62964fe&quot; target=&quot;_blank&quot;&gt;intelepacs:55adf62964fe&lt;/a&gt;  glaza       trunk       48400 fix: Remove public config keys and add trigger validation&lt;/p&gt;</comment>
                            <comment id="342905" author="glaza" created="Mon, 20 Jul 2015 12:02:08 -0400"  >&lt;p&gt;Description of the solution:&lt;/p&gt;

&lt;p&gt;    Partitioned request_attrs for both LDS and DMS.&lt;/p&gt;

&lt;p&gt;Tests executed:&lt;/p&gt;

&lt;p&gt;    Please see test plan in the Table Partitioning Implementation Guide:&lt;br/&gt;
    &lt;a href=&quot;https://docs.google.com/document/d/1Qw9UTy26EgDMaUAt7QwFzmH1dDL8Syu2QbgVpsMKd3M/edit#heading=h.pr4a2cvgj4rb&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://docs.google.com/document/d/1Qw9UTy26EgDMaUAt7QwFzmH1dDL8Syu2QbgVpsMKd3M/edit#heading=h.pr4a2cvgj4rb&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Unit tests added or modified:&lt;/p&gt;

&lt;p&gt;    Added com.intelerad.dicommasterservice.lib.TestTablePartitioning&lt;/p&gt;</comment>
                            <comment id="342906" author="rami.bechara" created="Mon, 3 Aug 2015 17:04:49 -0400"  >&lt;p&gt;I&apos;m reopening because there is configuration that needs to be documented in the Release Impact info box.&lt;/p&gt;</comment>
                            <comment id="342907" author="fzaryouh" created="Mon, 3 Aug 2015 18:17:15 -0400"  >
&lt;ul&gt;
	&lt;li&gt;Load testing&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;send multiple corrections in parallel and ensure they are all processed.&lt;br/&gt;
  	&lt;span class=&quot;error&quot;&gt;&amp;#91;admin@qa4112std1&amp;#93;&lt;/span&gt; {~/fouad/parallel/src} seq 1 1000 | ./parallel  -j+0 --eta /tmp/cor {}&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;		==================================================================&lt;br/&gt;
		cat /tmp/cor &lt;br/&gt;
		#!/bin/sh&lt;/p&gt;

&lt;p&gt;		STUINS=$(shuf -n1 /tmp/stuins)&lt;br/&gt;
		eval requestCorrection &lt;del&gt;u fouad -s $STUINS --StuDes STUDYDES&lt;/del&gt;$1&lt;br/&gt;
		==================================================================&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Perform a full vacuum. Took less than 5s for 235514&lt;br/&gt;
(cmdline@&lt;span class=&quot;error&quot;&gt;&amp;#91;local&amp;#93;&lt;/span&gt;) &lt;span class=&quot;error&quot;&gt;&amp;#91;localdicom&amp;#93;&lt;/span&gt; &amp;gt; select count&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.intelerad.com/images/icons/emoticons/star_yellow.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; from request_attrs;&lt;br/&gt;
 count  &lt;br/&gt;
--------&lt;br/&gt;
 235514&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Workflow&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Requests spreaded on multiple tables for 1 study.&lt;br/&gt;
		1. send study X&lt;br/&gt;
		2. invoke multiple requestCorrection (make sure the requests are on multiple tables)&lt;br/&gt;
		3. Ensure the corrections are applied&lt;br/&gt;
			3.1 transfer to internal PACS&lt;br/&gt;
			3.2 transfer to external PACS&lt;/li&gt;
	&lt;li&gt;Out of order scenario.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Schema&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;all partitioned tables should have the same indexes&lt;/li&gt;
	&lt;li&gt;all partitioned tables should have the same triggers&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Configuration&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;ensure the number of row is respected for partitioning.&lt;/li&gt;
	&lt;li&gt;ensure LDS &amp;amp; DMS produce logs when the feature is enable.&lt;/li&gt;
	&lt;li&gt;ensure LDS &amp;amp; DMS produce logs when it create a partition.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Backups&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;ensure the backup process is working.&lt;/li&gt;
	&lt;li&gt;Restore LDS and DMS from backups.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="342908" author="glaza" created="Mon, 17 Aug 2015 12:03:08 -0400"  >&lt;p&gt;Removed PACSConfigurator RPM as we have made all config options private.&lt;/p&gt;</comment>
                            <comment id="342909" author="glaza" created="Fri, 21 Aug 2015 16:08:47 -0400"  >&lt;p&gt;In this change, 3 new private keys were added.&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;enableTablePartitioning          (protected)&lt;/li&gt;
	&lt;li&gt;maxPartitionSize                 (protected)&lt;/li&gt;
	&lt;li&gt;tablePartitioningFrequencyInDays (private)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;In this context, &quot;protected&quot; means that the config key does reference pacsCore, but with a default value. The intention is not to have this key known and thus never modified by teams other than R&amp;amp;D. It is kept as referencing pacsCore to allow developers to easily configure this key without KB1190s on every server.&lt;/p&gt;</comment>
                            <comment id="342910" author="fzaryouh" created="Thu, 27 Aug 2015 13:20:13 -0400"  >&lt;p&gt;After discussing the configuration key with George we agreed to not document it in the release impact.&lt;/p&gt;</comment>
                            <comment id="342911" author="rami.bechara" created="Fri, 13 Nov 2015 09:32:48 -0500"  >&lt;p&gt;Included in PACS-4-12-1-R1 (Atlas 1.8.P31)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="142714">IP-95020</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12603" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Affected Clients</customfieldname>
                        <customfieldvalues>
                                        <label>AIS</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12110" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Documentation</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12035"><![CDATA[Approved]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48400</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13074"><![CDATA[Database-GlobalDicom]]></customfieldvalue>
    <customfieldvalue key="13080"><![CDATA[Database-LocalDicom]]></customfieldvalue>
    <customfieldvalue key="13135"><![CDATA[DicomMasterService]]></customfieldvalue>
    <customfieldvalue key="13268"><![CDATA[LocalDicomService]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzsepz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10802"><![CDATA[MAJOR]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-59661] LocalDicom and GlobalDicom: SQL migration to add CorrectionSubType for INITIAL correction is broken and can add duplicate CorrectionSubTypes</title>
                <link>https://jira.intelerad.com/browse/IP-59661</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;RPM Version               : LocalDicomService-4.6.1.P73-ims01&lt;br/&gt;
EW - Client               :&lt;br/&gt;
Minimal steps to reproduce: load a study in IV, create a key image and upload it to pacs.&lt;br/&gt;
Expected behaviour        : key images are stored.&lt;br/&gt;
What happened instead?    : some key images cannot be stored on pacs. This happened with CT and MR studies with the trunk version of IV (PACS-4-6-2-A21). This could be reproduced also with the IV-4-6-1-P74&lt;br/&gt;
This has been found when testing Image Fusion PR upload. &lt;/p&gt;

&lt;p&gt;LDS stack traces when a PR is uploaded:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-06-04 11:57:32.938 LDS_6 qa461mst1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Locked study &lt;span class=&quot;error&quot;&gt;&amp;#91;1.2.276.0.7230010.3.1.2.1560983810.8557.1368801349.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-06-04 11:57:32.938 LDS_6 qa461mst1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Looking for undo data for corrections that failed mid processing&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-06-04 11:57:33.004 LDS_6 qa461mst1.dyn.intelerad&amp;#93;&lt;/span&gt; &lt;br/&gt;
*************************&lt;br/&gt;
ERROR: Error processing incoming files for study &lt;span class=&quot;error&quot;&gt;&amp;#91;1.2.276.0.7230010.3.1.2.1560983810.8557.1368801349.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
*************************&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-06-04 11:57:33.005 LDS_6 qa461mst1.dyn.intelerad&amp;#93;&lt;/span&gt; Stack trace:&lt;br/&gt;
com.intelerad.localdicomservice.modifications.UnbuildableModificationException: Failed to build DicomModification from DB with request_id=&lt;span class=&quot;error&quot;&gt;&amp;#91;16177&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.intelerad.localdicomservice.databasequeues.LocalDicom2DataModel$3.convert(LocalDicom2DataModel.java:242)&lt;br/&gt;
        at com.intelerad.localdicomservice.databasequeues.LocalDicom2DataModel$3.convert(LocalDicom2DataModel.java:221)&lt;br/&gt;
        at com.intelerad.db.lib.JdbcWrapper.convertResultSet(JdbcWrapper.java:291)&lt;br/&gt;
        at com.intelerad.db.lib.JdbcWrapper.performQuery(JdbcWrapper.java:208)&lt;br/&gt;
        at com.intelerad.db.lib.JdbcWrapper.getFirstRow(JdbcWrapper.java:132)&lt;br/&gt;
        at com.intelerad.localdicomservice.common.DbConnectionDecorator.getFirstRow(DbConnectionDecorator.java:64)&lt;br/&gt;
        at com.intelerad.localdicomservice.databasequeues.LocalDicomDatabaseStandardSql.getModificationsOrderByRequestDatetime(LocalDicomDatabaseStandardSql.java:319)&lt;br/&gt;
        at com.intelerad.localdicomservice.databasequeues.LocalDicomPostgres.getModificationsOrderByRequestDatetime(LocalDicomPostgres.java:33)&lt;br/&gt;
        at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.doSeries(IncomingFileWorker.java:284)&lt;br/&gt;
        at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.callDoSeriesGroupBySeries(IncomingFileWorker.java:218)&lt;br/&gt;
        at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.callWithStudyLocked(IncomingFileWorker.java:206)&lt;br/&gt;
        at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.call(IncomingFileWorker.java:132)&lt;br/&gt;
        at com.intelerad.localdicomservice.incomingfiles.IncomingFileWorker.call(IncomingFileWorker.java:55)&lt;br/&gt;
        at com.intelerad.localdicomservice.databasequeues.LDSDatabaseQueue$CallableWrapper.performCall(LDSDatabaseQueue.java:92)&lt;br/&gt;
        at com.intelerad.localdicomservice.databasequeues.LDSDatabaseQueue$CallableWrapper.monitoredCall(LDSDatabaseQueue.java:79)&lt;br/&gt;
        at com.intelerad.localdicomservice.databasequeues.LDSDatabaseQueue$CallableWrapper.call(LDSDatabaseQueue.java:59)&lt;br/&gt;
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)&lt;br/&gt;
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)&lt;br/&gt;
        at com.intelerad.tools.lib.concurrent.DefaultComparableFuture.run(DefaultComparableFuture.java:89)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;br/&gt;
        at com.intelerad.db.lib.CleanupThreadFactory$1.run(CleanupThreadFactory.java:38)&lt;br/&gt;
        at com.intelerad.tools.lib.scheduling.LoggingThreadFactory.runCommand(LoggingThreadFactory.java:134)&lt;br/&gt;
        at com.intelerad.tools.lib.scheduling.LoggingThreadFactory.access$000(LoggingThreadFactory.java:19)&lt;br/&gt;
        at com.intelerad.tools.lib.scheduling.LoggingThreadFactory$2.run(LoggingThreadFactory.java:98)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:662)&lt;br/&gt;
Caused by: java.lang.IllegalArgumentException: You cannot modify more than once the same attribute in one modification for attrId &lt;span class=&quot;error&quot;&gt;&amp;#91;7&amp;#93;&lt;/span&gt;, val [null&lt;br/&gt;
        at com.intelerad.localdicomservice.model.DicomModificationBuilder.builderWithAttribute(DicomModificationBuilder.java:163)&lt;br/&gt;
        at com.intelerad.localdicomservice.model.DicomModificationBuilder.withAttribute(DicomModificationBuilder.java:150)&lt;br/&gt;
        at com.intelerad.localdicomservice.databasequeues.LocalDicom2DataModel$3.buildRequest(LocalDicom2DataModel.java:301)&lt;br/&gt;
        at com.intelerad.localdicomservice.databasequeues.LocalDicom2DataModel$3.convert(LocalDicom2DataModel.java:234)&lt;br/&gt;
        ... 25 more&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-06-04 11:57:33.005 LDS_6 qa461mst1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; releasing lock [java.util.concurrent.locks.ReentrantLock@b81faf&lt;span class=&quot;error&quot;&gt;&amp;#91;Locked by thread com.intelerad.localdicomservice.databasequeues.IncomingFilesWorkerQueue_6&amp;#93;&lt;/span&gt;] for study &lt;span class=&quot;error&quot;&gt;&amp;#91;1.2.276.0.7230010.3.1.2.1560983810.8557.1368801349.1&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-06-04 11:57:33.005 LDS_6 qa461mst1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Removing study &lt;span class=&quot;error&quot;&gt;&amp;#91;1.2.276.0.7230010.3.1.2.1560983810.8557.1368801349.1&amp;#93;&lt;/span&gt; from list of studies queued&lt;/p&gt;</description>
            <key id="91915">IP-59661</key>
            <summary>LocalDicom and GlobalDicom: SQL migration to add CorrectionSubType for INITIAL correction is broken and can add duplicate CorrectionSubTypes</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                            <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="asiner">Abigail Siner</assignee>
                                    <reporter username="lucie">Lucie Forget</reporter>
                        <labels>
                            <label>DCD</label>
                    </labels>
                <created>Tue, 4 Jun 2013 12:18:09 -0400</created>
                <updated>Fri, 26 Apr 2019 14:05:17 -0400</updated>
                            <resolved>Wed, 21 Aug 2013 14:15:00 -0400</resolved>
                                    <version>4-5-1</version>
                                    <fixVersion>4-5-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="312714" author="jan" created="Mon, 10 Jun 2013 16:15:59 -0400"  >&lt;p&gt;This rang a bell. Something very similar happened at CAMIS in &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=296424&quot; target=&quot;_blank&quot;&gt;EW296424&lt;/a&gt;.&lt;br/&gt;
However, it had absolutely nothing to do with PRs. It has to do with the a migration done during 451.dcd timeframe which tacks on the CorrectionSubType=INITIAL to all STUDY_CORRECTION which populated the SeriesOwner tag.&lt;/p&gt;

&lt;p&gt;This migration is done as part of a dbConfigurator upgrade script (010.sql in 461). It was noticed during the work in &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=296424&quot; target=&quot;_blank&quot;&gt;EW296424&lt;/a&gt; that this could happen when dbConfigurator ran the upgrade twice (through some fashion or form).&lt;/p&gt;

&lt;p&gt;Is it possible QA that this really has nothing to do with PRs?&lt;br/&gt;
I looked in you database :&lt;/p&gt;

&lt;p&gt;select request_id, attr_id, count(attr_id) from request_attrs group by request_id, attr_id having count(attr_id) &amp;gt; 1;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&lt;br/&gt;
(2986 rows)&lt;/p&gt;

&lt;p&gt;I would suggest doing the cleanup that was done at CAMIS on QA461MST1 (and any other servers in the same PACS) and then testing by sending PRs to see&lt;br/&gt;
if the issue can be reproduced.&lt;/p&gt;

&lt;p&gt;Optimistically changing the description and the component of this bug. If I am wrong, we can change it back.&lt;br/&gt;
Removing regression_fix.&lt;/p&gt;

&lt;p&gt;&amp;#8211;&lt;/p&gt;

&lt;p&gt;The affected file would be on 451 :&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;jan@jan Schema&amp;#93;&lt;/span&gt;$ cat LocalDicom-upgrade-010.sql&lt;br/&gt;
SET search_path = localdicom;&lt;/p&gt;

&lt;p&gt;insert into request_attrs( request_id, attr_id, value )&lt;br/&gt;
select req.request_id, 7, &apos;INITIAL&apos;&lt;br/&gt;
    from requests req &lt;br/&gt;
    where req.type = &apos;STUDY_CORRECTION&apos; and req.owner_app_id = 1&lt;br/&gt;
    and exists ( &lt;br/&gt;
                select * from request_attrs attr&lt;br/&gt;
                where req.request_id = attr.request_id&lt;br/&gt;
                and attr.attr_id = 1057030149 &lt;br/&gt;
               );&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;jan@jan Schema&amp;#93;&lt;/span&gt;$ &lt;/p&gt;

&lt;p&gt;&amp;#8211;&lt;/p&gt;

&lt;p&gt;It should probably be doing something like the migration for the VALIDATION correction subtype :&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;jan@jan Schema&amp;#93;&lt;/span&gt;$ cat LocalDicom-upgrade-009.sql&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&lt;br/&gt;
insert into request_attrs ( request_id, attr_id, value )&lt;br/&gt;
select req.request_id, 7, &apos;VALIDATION&apos;&lt;br/&gt;
    from requests req&lt;br/&gt;
    where req.type = &apos;STUDY_CORRECTION&apos; and req.owner_app_id = 1&lt;br/&gt;
    and not exists (&lt;br/&gt;
                     select * from request_attrs attr&lt;br/&gt;
                     where req.request_id = attr.request_id&lt;br/&gt;
                     and attr.attr_id IN ( 7, 1057030149 ) );&lt;/p&gt;</comment>
                            <comment id="312715" author="jan" created="Mon, 10 Jun 2013 16:17:21 -0400"  >&lt;p&gt;The fix procedure referenced above *&lt;b&gt;TO BE USED BY QA ONLY AND NOT SUPPORT&lt;/b&gt;*&lt;/p&gt;

&lt;p&gt;begin;&lt;br/&gt;
delete from request_attrs where attr_id = 7 and value = &apos;INITIAL&apos;; &lt;br/&gt;
insert into request_attrs( request_id, attr_id, value )&lt;br/&gt;
select req.request_id, 7, &apos;INITIAL&apos;&lt;br/&gt;
    from requests req &lt;br/&gt;
    where req.type = &apos;STUDY_CORRECTION&apos; and req.owner_app_id = 1&lt;br/&gt;
    and exists ( &lt;br/&gt;
                select * from request_attrs attr&lt;br/&gt;
                where req.request_id = attr.request_id&lt;br/&gt;
                and attr.attr_id = 1057030149 &lt;br/&gt;
               );&lt;br/&gt;
commit;&lt;/p&gt;</comment>
                            <comment id="312716" author="jan" created="Mon, 10 Jun 2013 16:35:15 -0400"  >&lt;p&gt;Note that the same bug exists in the globaldicom upgrade script. That fact is hinted upon in &lt;a href=&quot;https://jira.intelerad.com/browse/IP-58375&quot; title=&quot;request_attrs allow duplicate rows which causes validation to fail&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-58375&quot;&gt;&lt;del&gt;IP-58375&lt;/del&gt;&lt;/a&gt;, but I can&apos;t find the original bug.&lt;/p&gt;

&lt;p&gt;Repurposing this one to fix both databases.&lt;/p&gt;</comment>
                            <comment id="312717" author="jan" created="Wed, 12 Jun 2013 17:08:45 -0400"  >&lt;p&gt;Added CAMIS, and also SIRA in &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=303890&quot; target=&quot;_blank&quot;&gt;EW303890&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="312718" author="mak" created="Thu, 13 Jun 2013 22:45:52 -0400"  >&lt;p&gt;Happened at ALR - &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=304140&quot; target=&quot;_blank&quot;&gt;EW304140&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="312719" author="build" created="Fri, 21 Jun 2013 14:02:18 -0400"  >&lt;p&gt;Released by asiner to master at 2013-06-21 14:02:15 (push 22544):&lt;br/&gt;
  PACS-4-5-1 (fix)        (previous build: PACS-4-5-1-P195)&lt;br/&gt;
  PACS-4-6-1 (fix)        (previous build: PACS-4-6-1-P85)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-6-2-A37)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/e3f936f9fdee&quot; target=&quot;_blank&quot;&gt;intelepacs:e3f936f9fdee&lt;/a&gt;  asiner      PACS-4-5-1  42249 fix: 42249: LocalDicom and GlobalDicom: SQL migration can add duplicate CorrectionSubType&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/43f23ba9e947&quot; target=&quot;_blank&quot;&gt;intelepacs:43f23ba9e947&lt;/a&gt;  asiner      PACS-4-6-1  42249 fix: 42249: LocalDicom and GlobalDicom: SQL migration can add duplicate CorrectionSubType&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/7384f577d2e8&quot; target=&quot;_blank&quot;&gt;intelepacs:7384f577d2e8&lt;/a&gt;  asiner      trunk       42249 fix: 42249: LocalDicom and GlobalDicom: SQL migration can add duplicate CorrectionSubType&lt;/p&gt;</comment>
                            <comment id="312720" author="abigail.siner" created="Fri, 21 Jun 2013 14:57:16 -0400"  >&lt;p&gt;Description of the solution:  Modified LocalDicom-upgrade-010.sql and GlobalDicom-upgrade-004.sql upgrade scripts so that they will not add a row to request_attr table if there is already a row with the same request_id and attr_id.&lt;/p&gt;

&lt;p&gt;Tests executed:  &lt;br/&gt;
It is difficult to reproduce this problem with dbConfigurator since it will not run an upgrade script if the schema version is up-to-date (this problem of duplicate lines in request_attr is probably due to someone killing dbConfigurator after it has upgraded the schema, but before it has updated the version).  So I tested by running the SQL directly in psql-intelerad.&lt;/p&gt;

&lt;p&gt;Use this command to check for duplicate rows in request_attrs:&lt;br/&gt;
  select request_id, attr_id, count(attr_id) from request_attrs group by request_id, attr_id having count(attr_id) &amp;gt; 1;&lt;/p&gt;

&lt;p&gt;1.  Test LocalDicom-upgrade-010.sql on localdicom:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ensure that there are no dup. rows in request_attrs:&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Run the old version of LocalDicom-upgrade-010.sql in psql-intelerad:&lt;br/&gt;
SET search_path = localdicom;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;insert into request_attrs( request_id, attr_id, value )&lt;br/&gt;
select req.request_id, 7, &apos;INITIAL&apos;                              &amp;#8211; 7: CorrectionSubtype&lt;br/&gt;
    from requests req &lt;br/&gt;
    where req.type = &apos;STUDY_CORRECTION&apos; and req.owner_app_id = 1  &amp;#8211; 1:  LDS&lt;br/&gt;
    and exists ( &lt;br/&gt;
                select * from request_attrs attr&lt;br/&gt;
                where req.request_id = attr.request_id&lt;br/&gt;
                and attr.attr_id = 1057030149        &amp;#8211; ie, 0x3F010005 (SeriesOwner  3F01,0005), added by first correction&lt;br/&gt;
               );&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;It should have produced duplicate rows.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Delete the rows:&lt;br/&gt;
   delete from request_attrs where attr_id = 7;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Run the new version of the command:&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;insert into request_attrs( request_id, attr_id, value )&lt;br/&gt;
select req.request_id, 7, &apos;INITIAL&apos;&lt;br/&gt;
    from requests req&lt;br/&gt;
    where req.type = &apos;STUDY_CORRECTION&apos; and req.owner_app_id = 1&lt;br/&gt;
    and exists (&lt;br/&gt;
                select * from request_attrs attr&lt;br/&gt;
                where req.request_id = attr.request_id&lt;br/&gt;
                and attr.attr_id = 1057030149 )&lt;br/&gt;
   and not exists (&lt;br/&gt;
                select * from request_attrs attr2 &lt;br/&gt;
                where req.request_id = attr2.request_id&lt;br/&gt;
                and attr2.attr_id = 7 );&lt;/p&gt;

&lt;p&gt;It should have added 1 row of attrib_id per request_id:&lt;/p&gt;

&lt;p&gt;select request_id, attr_id, count(attr_id) from request_attrs where attr_id = 7 group by request_id, attr_id having count(attr_id) = 1;&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Rerun the new version of the new command. It should NOT have added duplicate rows:&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;select request_id, attr_id, count(attr_id) from request_attrs group by request_id, attr_id having count(attr_id) &amp;gt; 1;&lt;/p&gt;

&lt;p&gt; request_id | attr_id | count &lt;br/&gt;
-----------&lt;del&gt;&lt;ins&gt;&lt;/del&gt;-------&lt;del&gt;&lt;/ins&gt;&lt;/del&gt;------&lt;br/&gt;
(0 rows)&lt;/p&gt;


&lt;p&gt;2.  Test GlobalDicom-upgrade-004.sql on globaldicom:&lt;/p&gt;

&lt;p&gt;Repeat the same test as above on on globaldicom.&lt;/p&gt;

&lt;p&gt;Unit tests added or modified:  None&lt;/p&gt;</comment>
                            <comment id="312721" author="abigail.siner" created="Fri, 21 Jun 2013 15:01:45 -0400"  >&lt;p&gt;There is concern that these scripts will add time to upgrade time.  I analyzed the localdicom script using a table with ~ 315,000 rows.  The modified script took about 2 seconds longer (74678.117 ms vs. 72825 ms for the original script).&lt;/p&gt;

&lt;p&gt;If QA has the resources, it would be good to test on a much larger DB.&lt;/p&gt;</comment>
                            <comment id="312722" author="lucie" created="Fri, 5 Jul 2013 17:26:14 -0400"  >&lt;p&gt;Reproduced with RPMs: &lt;br/&gt;
Verified with RPMs: Database-GlobalDicom-4.5.1.P197-ims01.noarch.rpm  Database-LocalDicom-4.5.1.P197-ims01.noarch.rpm&lt;br/&gt;
Verification steps: &lt;br/&gt;
restored 441 localdicom and globaldicom&lt;br/&gt;
ran dbconfigurator to upgrade the schema&lt;br/&gt;
check I didnt have duplicate and that INITIAL rows were there&lt;br/&gt;
changed the db version number &lt;br/&gt;
re-ran dbConfigurator&lt;br/&gt;
verified no duplicates were inserted and the row count is the same in request_attrs.&lt;br/&gt;
Test cases added or modified: TR&lt;br/&gt;
Screenshot(s) added for GUI changes: &lt;br/&gt;
End result: verified.&lt;/p&gt;</comment>
                            <comment id="312723" author="lucie" created="Wed, 10 Jul 2013 19:18:46 -0400"  >&lt;p&gt;Included in  in PACS-4-6-1-R9&lt;/p&gt;</comment>
                            <comment id="312724" author="lucie" created="Wed, 10 Jul 2013 19:20:19 -0400"  >&lt;p&gt;Included in PACS-4-5-1-R24&lt;/p&gt;</comment>
                            <comment id="312725" author="rami.bechara" created="Wed, 21 Aug 2013 14:15:20 -0400"  >&lt;p&gt;Included in PACS-4-7-1-R1&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10002">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="90629">IP-58375</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12603" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Affected Clients</customfieldname>
                        <customfieldvalues>
                                        <label>ALR</label>
            <label>CAMIS</label>
            <label>SIRA</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13806" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Availability Impact</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14410"><![CDATA[BlocksGA]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[3.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42249</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13074"><![CDATA[Database-GlobalDicom]]></customfieldvalue>
    <customfieldvalue key="13080"><![CDATA[Database-LocalDicom]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzrpbb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_13801" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Reported By Tester?</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14404"><![CDATA[Yes]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_11001" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>ServiceNow Case #</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>EW296424, EW303890, EW304140</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10801"><![CDATA[CRITICAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-59646] ValidationDB migration fails on patient id with french characters</title>
                <link>https://jira.intelerad.com/browse/IP-59646</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;RPM Version               : PACS-4-6-1-R6&lt;br/&gt;
EW - Client               : &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=301464&quot; target=&quot;_blank&quot;&gt;EW301464&lt;/a&gt; clientCode: VMR&lt;br/&gt;
Minimal steps to reproduce: process the FPU&lt;br/&gt;
Expected behaviour        : VdalitionDB should be migrated smoothly&lt;br/&gt;
What happened instead?    : Migration Failure&lt;/p&gt;

&lt;p&gt;Log output &lt;br/&gt;
----------&lt;br/&gt;
[2013-06-02 11:35:48.371 migrateValidationDb vmrmod1.centresvm &lt;/p&gt;
{5209}] Failed on row 1.2.840.114202.4.1202429242.453736970.1724557962.2500259368,OK,&#65533;,,M,0,MVIDCSEND,20130208087,20130208087,20130208087,2013-06-02 11:35:46.220,2013-02-08 16:53:39.753,2013-02-11 10:18:27.386,111&lt;br/&gt;
[2013-06-02 11:35:48.374 migrateValidationDb vmrmod1.centresvm {5209}
&lt;p&gt;] An error occurred while executing: DBD::Pg::st execute failed: ERROR:  invalid byte sequence for encoding &quot;UTF8&quot;: 0xc0&lt;br/&gt;
HINT:  This error can also happen if the byte sequence does not match the encoding expected by the server, which is controlled by &quot;client_encoding&quot;. &lt;span class=&quot;error&quot;&gt;&amp;#91;for Statement &amp;quot;INSERT INTO validation_status (study_uid,status,initial_pat_id,session_id,inserter,mpps_received,calling_ae,filler_order_number,placer_order_number,visit_number,timestamp_inserted,timestamp_updated) VALUES (?,?,?,?,?,?,?,?,?,?,?,?)&amp;quot;&amp;#93;&lt;/span&gt;&lt;br/&gt;
----------&lt;/p&gt;</description>
            <key id="91900">IP-59646</key>
            <summary>ValidationDB migration fails on patient id with french characters</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://jira.intelerad.com/images/icons/priorities/critical.svg">High</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="sclark">Steven Clark</assignee>
                                    <reporter username="jhie">Jackson Hie</reporter>
                        <labels>
                    </labels>
                <created>Sun, 2 Jun 2013 11:36:43 -0400</created>
                <updated>Mon, 25 Mar 2019 14:08:52 -0400</updated>
                            <resolved>Wed, 21 Aug 2013 14:12:00 -0400</resolved>
                                    <version>4-5-1</version>
                                    <fixVersion>4-5-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="312596" author="build" created="Mon, 3 Jun 2013 10:23:56 -0400"  >&lt;p&gt;Released by sclark to master at 2013-06-03 10:23:52 (push 22032):&lt;br/&gt;
  PACS-4-5-1 (fix)        (previous build: PACS-4-5-1-P185)&lt;br/&gt;
  PACS-4-6-1 (fix)        (previous build: PACS-4-6-1-P74)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-6-2-A21)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/3c5c1f0217d5&quot; target=&quot;_blank&quot;&gt;intelepacs:3c5c1f0217d5&lt;/a&gt;  sclark      PACS-4-5-1  42221 fix: LDS: Set validationDB migration script to use latin1 character encoding&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/ad7e17a558c1&quot; target=&quot;_blank&quot;&gt;intelepacs:ad7e17a558c1&lt;/a&gt;  sclark      PACS-4-6-1  42221 fix: LDS: Set validationDB migration script to use latin1 character encoding&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/3ebe9f7d4742&quot; target=&quot;_blank&quot;&gt;intelepacs:3ebe9f7d4742&lt;/a&gt;  sclark      trunk       42221 fix: LDS: Set validationDB migration script to use latin1 character encoding&lt;/p&gt;</comment>
                            <comment id="312597" author="sclark" created="Mon, 3 Jun 2013 10:30:54 -0400"  >&lt;p&gt;Description of the solution: Modify the migration script to set the&lt;br/&gt;
connection&apos;s character encoding to latin1(ISO-8859-1) to Postgres. &lt;/p&gt;

&lt;p&gt;Tests executed: Tested within vmware a sample script, and also it&lt;br/&gt;
was run at VMR.&lt;/p&gt;

&lt;p&gt;Unit tests added or modified: None&lt;/p&gt;

&lt;p&gt;To reproduce: You will need to setup an entry within Sybase&apos;s ValidationDB&lt;br/&gt;
that contains a patient id that contains a &#192; character. Then launch the LDS&lt;br/&gt;
validationdb migration.&lt;/p&gt;</comment>
                            <comment id="312598" author="youcef.kelanemer" created="Wed, 5 Jun 2013 10:46:49 -0400"  >&lt;p&gt;This defect has been verified by the developer at the time of code change plus the execution of development testing. In addition, integration testing done by QA also verifies that this issue has been resolved.&lt;/p&gt;

&lt;p&gt;In certain cases the deployment team during test farm creation will be the group responsible for verification during routine deployment testing.&lt;/p&gt;

&lt;p&gt;Marking CLOSED.&lt;/p&gt;</comment>
                            <comment id="312599" author="rami.bechara" created="Thu, 6 Jun 2013 22:30:56 -0400"  >&lt;p&gt;Included in PACS-4-5-1-R20&lt;/p&gt;</comment>
                            <comment id="312600" author="rami.bechara" created="Wed, 12 Jun 2013 17:16:05 -0400"  >&lt;p&gt;Included in PACS-4-6-1-R7&lt;/p&gt;</comment>
                            <comment id="312601" author="rami.bechara" created="Wed, 21 Aug 2013 14:12:33 -0400"  >&lt;p&gt;Included in PACS-4-7-1-R1&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12603" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Affected Clients</customfieldname>
                        <customfieldvalues>
                                        <label>VMR</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13806" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Availability Impact</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14410"><![CDATA[BlocksGA]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42221</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13268"><![CDATA[LocalDicomService]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzrp7z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_11001" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>ServiceNow Case #</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>301464</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10801"><![CDATA[CRITICAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-59362] LDS: New table added during 451.dcd work not included in schema file (does not get installed on a new site)</title>
                <link>https://jira.intelerad.com/browse/IP-59362</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;RPM Version               : Database-LocalDicom-4.5.1.P173-ims01.noarch&lt;br/&gt;
EW - Client               : EWxxxx  - &amp;lt;client code&amp;gt;&lt;br/&gt;
Minimal steps to reproduce: &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Get a new 451 template from /net/vmconvertor&lt;/li&gt;
	&lt;li&gt;Follow all the instructions available in wiki:DeveloperFaq/Testing#VMWareTemplates&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Expected behaviour        : Everything should work perfectly with no manual work to be done except what is listed in the included wiki page&lt;/p&gt;

&lt;p&gt;What happened instead?    : The unvalidate study migration will fail in lds since the required table(s) are not present.&lt;/p&gt;

&lt;p&gt;The workaround is to manually run the following 2 commands, which should fix the installed schema in postgres :&lt;/p&gt;

&lt;p&gt;psql-intelerad -Usa -d localdicom -f  LocalDicom-upgrade-009.sql&lt;br/&gt;
psql-intelerad -Usa -d localdicom -f  LocalDicom-upgrade-010.sql&lt;/p&gt;

&lt;p&gt;Note that is NOT a practical workaround.&lt;/p&gt;

&lt;p&gt;&amp;#8211;&lt;/p&gt;

&lt;p&gt;Also note that even though I ran into this creating a new PACS from the template, from what I understand, this will affect :&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;new client install with 451&lt;/li&gt;
	&lt;li&gt;FPU from 4-3-1 or less&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Note that 4-6-1 does not seem to be affected : the required tables are found in the schema file.&lt;/p&gt;</description>
            <key id="91616">IP-59362</key>
            <summary>LDS: New table added during 451.dcd work not included in schema file (does not get installed on a new site)</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                            <priority id="12" iconUrl="https://jira.intelerad.com/images/icons/priorities/ims-unprioritized_decision-64.png">unprioritized</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="sclark">Steven Clark</assignee>
                                    <reporter username="jan">Jan Lavoie</reporter>
                        <labels>
                            <label>DCD</label>
                    </labels>
                <created>Tue, 7 May 2013 15:02:31 -0400</created>
                <updated>Fri, 26 Apr 2019 14:05:17 -0400</updated>
                            <resolved>Wed, 21 Aug 2013 14:14:00 -0400</resolved>
                                    <version>4-5-1</version>
                                    <fixVersion>4-5-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="310403" author="fabio.padilha" created="Tue, 7 May 2013 15:13:29 -0400"  >&lt;p&gt;in FPU we run all upgrade files, so this shouldn&apos;t happen&lt;/p&gt;</comment>
                            <comment id="310404" author="build" created="Wed, 8 May 2013 16:55:43 -0400"  >&lt;p&gt;Released by sclark to master at 2013-05-08 16:55:40 (push 21482):&lt;br/&gt;
  PACS-4-5-1 (fix)        (previous build: PACS-4-5-1-P173)&lt;br/&gt;
  PACS-4-6-1 (dummy)      (previous build: PACS-4-6-1-P64)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/0ccd7ebcee18&quot; target=&quot;_blank&quot;&gt;intelepacs:0ccd7ebcee18&lt;/a&gt;  sclark      PACS-4-5-1  41809 fix: LocalDicom: Add missing table validation_migration_status to initial schema creation&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/543f7954025a&quot; target=&quot;_blank&quot;&gt;intelepacs:543f7954025a&lt;/a&gt;  sclark      PACS-4-6-1  41809 dummy: dummy merge from PACS-4-5-1&lt;/p&gt;</comment>
                            <comment id="310405" author="build" created="Wed, 8 May 2013 16:59:20 -0400"  >&lt;p&gt;Released by sclark to master at 2013-05-08 16:59:17 (push 21483):&lt;br/&gt;
  PACS-4-6-1 (fix)        (previous build: PACS-4-6-1-P64)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-6-2-A8)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/b6738fe9a416&quot; target=&quot;_blank&quot;&gt;intelepacs:b6738fe9a416&lt;/a&gt;  sclark      PACS-4-6-1  41809 fix: LocalDicom: Remove syntax error within LocalDicom-upgrade-001.sql&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/bd27c5be00fd&quot; target=&quot;_blank&quot;&gt;intelepacs:bd27c5be00fd&lt;/a&gt;  sclark      trunk       41809 fix: LocalDicom: Remove syntax error within LocalDicom-upgrade-001.sql&lt;/p&gt;</comment>
                            <comment id="310406" author="sclark" created="Wed, 8 May 2013 17:04:54 -0400"  >&lt;p&gt;Description of the solution: Added missing table validation_migration_status&lt;br/&gt;
to the main schema file. &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Also fixed an extra comma within the LocalDicom-upgrade-001.sql file (which&lt;br/&gt;
  has not production impact, it was solely for my testing)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Tests executed: &lt;br/&gt;
Ran the following on sclark451a&lt;br/&gt;
1) psql-intelerad -h 127.0.0.1 -Usa -c &quot;drop schema localdicom cascade&quot;&lt;br/&gt;
2) dbConfigurator --sapassword admpass --upgrade /usr/local/tools/DatabaseSchemas/Postgres/Schema-LocalDicom.cfg&lt;br/&gt;
3) /usr/local/Intelerad/3rd_Party/postgres/bin/pg_dump --schema-only --schema localdicom --username cmdline postgres &amp;gt; /tmp/localdicom-create.sql&lt;/p&gt;

&lt;p&gt;4) psql-intelerad -h 127.0.0.1 -Usa -c &quot;drop schema localdicom cascade&quot;&lt;br/&gt;
5) psql-intelerad -h 127.0.0.1 -Usa -f /usr/local/tools/DatabaseSchemas/Postgres/LocalDicom-upgrade-001.sql&lt;br/&gt;
6) dbConfigurator --sapassword admpass --upgrade /usr/local/tools/DatabaseSchemas/Postgres/Schema-LocalDicom.cfg&lt;br/&gt;
7) /usr/local/Intelerad/3rd_Party/postgres/bin/pg_dump --schema-only --schema localdicom --username cmdline postgres &amp;gt; /tmp/localdicom-upgrade.sql&lt;br/&gt;
8) vimdiff /tmp/localdicom-create.sql /tmp/localdicom-upgrade.sql&lt;/p&gt;

&lt;p&gt;While there are differences in terms of indexes for the deferred activities I&lt;br/&gt;
believe they are benign in nature.&lt;/p&gt;

&lt;p&gt;Unit tests added or modified: None&lt;/p&gt;

&lt;p&gt;QA Note: The missing table was only on 4-5-1, 4-6-1 was correct. Separate&lt;br/&gt;
changeset on 4-6-1+ was the fix for the training comma within the&lt;br/&gt;
LocalDicom-upgrade-001.sql file which has no use within production.&lt;/p&gt;</comment>
                            <comment id="310407" author="youcef.kelanemer" created="Thu, 9 May 2013 16:47:16 -0400"  >&lt;p&gt;&lt;a href=&quot;https://jira.intelerad.com/browse/IP-59362&quot; title=&quot;LDS: New table added during 451.dcd work not included in schema file (does not get installed on a new site)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-59362&quot;&gt;&lt;del&gt;IP-59362&lt;/del&gt;&lt;/a&gt; - LDS: New table added during 451.dcd work not included in schema file (does not get installed on a new site) (edit)&lt;br/&gt;
Reproduced with RPMs: &lt;br/&gt;
Database-LocalDicom-4.5.1.P162-ims01.noarch&lt;br/&gt;
Verified with RPMs: &lt;br/&gt;
Database-LocalDicom-4.5.1.P174-ims01.noarch&lt;/p&gt;

&lt;p&gt;Verification steps: &lt;/p&gt;

&lt;p&gt;I. Reproduced the fact that the old rpms when create, localdicom schema will be missing a table:&lt;/p&gt;

&lt;p&gt;1. Remove the schema:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;admin@youcef451&amp;#93;&lt;/span&gt; &lt;/p&gt;
{bin} psql-intelerad -h 127.0.0.1 -Usa -c &quot;drop schema localdicom cascade&quot;&lt;br/&gt;
&lt;br/&gt;
2. Recreate the schema:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;admin@youcef451&amp;#93;&lt;/span&gt; {bin}
&lt;p&gt; dbConfigurator --sapassword admpass --upgrade /usr/local/tools/DatabaseSchemas/Postgres/Schema-LocalDicom.cfg&lt;/p&gt;

&lt;p&gt;3. You will see that localdicom is missing table validation_migration_status&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;admin@youcef451&amp;#93;&lt;/span&gt; &lt;/p&gt;
{bin} dbshow localdicom validation_migration_status&lt;br/&gt;
Column                            type                features&lt;br/&gt;
------                            ----                --------&lt;br/&gt;
&lt;br/&gt;
Indexes:&lt;br/&gt;
None&lt;br/&gt;
&lt;br/&gt;
Triggers:&lt;br/&gt;
None&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
II. Verified that the fix does create the table :&lt;br/&gt;
&lt;br/&gt;
Redo I (1. and 2. and 3.)&lt;br/&gt;
this time the result is diferent&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;admin@youcef451&amp;#93;&lt;/span&gt; {bin}
&lt;p&gt; dbshow localdicom validation_migration_status&lt;br/&gt;
Column                            type                features&lt;br/&gt;
------                            ----                --------&lt;br/&gt;
hostname                          varchar            &lt;br/&gt;
is_done                           boolean             DEFAULT false&lt;/p&gt;

&lt;p&gt;Indexes:&lt;br/&gt;
validation_migration_status_pk    unique              hostname &lt;/p&gt;

&lt;p&gt;Triggers:&lt;br/&gt;
None&lt;/p&gt;


&lt;p&gt;III. Validated that with the fix, create or update will produce the same output (to a non effective difference)&lt;/p&gt;

&lt;p&gt;Once you did II. &lt;br/&gt;
1. Save the schema in a temporary file:&lt;br/&gt;
/usr/local/Intelerad/3rd_Party/postgres/bin/pg_dump --schema-only --schema localdicom --username cmdline postgres &amp;gt; /tmp/localdicom-create-ycf-new.sql&lt;/p&gt;

&lt;p&gt;2. Remove the schema&lt;br/&gt;
psql-intelerad -h 127.0.0.1 -Usa -c &quot;drop schema localdicom cascade&quot;&lt;/p&gt;

&lt;p&gt;3.  create a first schema &quot;outdated&quot;&lt;br/&gt;
admin@youcef451] &lt;/p&gt;
{bin}
&lt;p&gt; psql-intelerad -h 127.0.0.1 -Usa -f /usr/local/tools/DatabaseSchemas/Postgres/LocalDicom-upgrade-001.sql&lt;/p&gt;

&lt;p&gt;4. Upgrade it;&lt;br/&gt;
dbConfigurator --sapassword admpass --upgrade /usr/local/tools/DatabaseSchemas/Postgres/Schema-LocalDicom.cfg&lt;/p&gt;

&lt;p&gt;5. Save the schema in a temporary file:&lt;br/&gt;
 /usr/local/Intelerad/3rd_Party/postgres/bin/pg_dump --schema-only --schema localdicom --username cmdline postgres &amp;gt; /tmp/localdicom-upgrade-ycf-new.sql&lt;/p&gt;

&lt;p&gt;6. compare the two files /tmp/localdicom-upgrade-ycf-new.sql and /tmp/localdicom-create-ycf-new.sql&lt;/p&gt;

&lt;p&gt;You see a difference :&lt;br/&gt;
&amp;lt; CREATE INDEX dai_deferred_activity_autoroute_queue ON deferred_activity USING btree (status, priority, timestamp_last_update, activity_id) WHERE (((type)::text = &apos;AutoRoute&apos;::text) AND ((status)::text &amp;lt;&amp;gt; ALL (ARRAY&lt;span class=&quot;error&quot;&gt;&amp;#91;(&amp;#39;Completed&amp;#39;::character varying)::text, (&amp;#39;Failed&amp;#39;::character varying)::text&amp;#93;&lt;/span&gt;)));&lt;br/&gt;
&amp;#8212;&lt;br/&gt;
&amp;gt; CREATE INDEX dai_deferred_activity_autoroute_queue ON deferred_activity USING btree (status, priority, timestamp_last_update, activity_id) WHERE (((type)::text = &apos;AutoRoute&apos;::text) AND ((status)::text &amp;lt;&amp;gt; ALL ((ARRAY&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;Completed&amp;#39;::character varying, &amp;#39;Failed&amp;#39;::character varying&amp;#93;&lt;/span&gt;)::text[])));&lt;br/&gt;
412c412&lt;br/&gt;
&amp;lt; CREATE INDEX dai_deferred_activity_j2cconversion_queue ON deferred_activity USING btree (status, priority, timestamp_last_update, activity_id) WHERE (((type)::text = &apos;J2CConversion&apos;::text) AND ((status)::text &amp;lt;&amp;gt; ALL (ARRAY&lt;span class=&quot;error&quot;&gt;&amp;#91;(&amp;#39;Completed&amp;#39;::character varying)::text, (&amp;#39;Failed&amp;#39;::character varying)::text&amp;#93;&lt;/span&gt;)));&lt;br/&gt;
&amp;#8212;&lt;br/&gt;
&amp;gt; CREATE INDEX dai_deferred_activity_j2cconversion_queue ON deferred_activity USING btree (status, priority, timestamp_last_update, activity_id) WHERE (((type)::text = &apos;J2CConversion&apos;::text) AND ((status)::text &amp;lt;&amp;gt; ALL ((ARRAY&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;Completed&amp;#39;::character varying, &amp;#39;Failed&amp;#39;::character varying&amp;#93;&lt;/span&gt;)::text[])));&lt;br/&gt;
419c419&lt;br/&gt;
&amp;lt; CREATE INDEX dai_deferred_activity_pendingcmove_queue ON deferred_activity USING btree (status, priority, timestamp_last_update, activity_id) WHERE (((type)::text = &apos;PendingCMove&apos;::text) AND ((status)::text &amp;lt;&amp;gt; ALL (ARRAY&lt;span class=&quot;error&quot;&gt;&amp;#91;(&amp;#39;Completed&amp;#39;::character varying)::text, (&amp;#39;Failed&amp;#39;::character varying)::text&amp;#93;&lt;/span&gt;)));&lt;br/&gt;
&amp;#8212;&lt;/p&gt;

&lt;p&gt;According to Steve and his coment, this difference is not a problem.&lt;/p&gt;


&lt;p&gt;Test cases added or modified: Not needed&lt;br/&gt;
End result: Success&lt;/p&gt;</comment>
                            <comment id="310408" author="rami.bechara" created="Wed, 22 May 2013 19:53:21 -0400"  >&lt;p&gt;Included in PACS-4-5-1-R18&lt;/p&gt;</comment>
                            <comment id="310409" author="rami.bechara" created="Thu, 23 May 2013 15:04:04 -0400"  >&lt;p&gt;Included in PACS-4-6-1-R5&lt;/p&gt;</comment>
                            <comment id="310410" author="rami.bechara" created="Wed, 21 Aug 2013 14:14:13 -0400"  >&lt;p&gt;Included in PACS-4-7-1-R1&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Blocks</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="91489">IP-59235</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                    <customfield id="customfield_13806" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Availability Impact</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14410"><![CDATA[BlocksGA]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12110" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Documentation</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12035"><![CDATA[Approved]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>41809</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13080"><![CDATA[Database-LocalDicom]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzrnh3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12102" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Release Notes</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12017"><![CDATA[Approved]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10801"><![CDATA[CRITICAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-58708] localdicom, globaldicom: renumber upgrade scripts</title>
                <link>https://jira.intelerad.com/browse/IP-58708</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;At the moment the 4-6-1 versions of GlobalDicom and LocalDicom cannot be upgraded to from a 4-4-1 or 4-5-1 version.&lt;/p&gt;

&lt;p&gt;For globaldicom, we need to renumber upgrade script 002 to 003 and 003 to 004.&lt;/p&gt;

&lt;p&gt;For localdicom, we need to renumber 008 to 009 and 009 to 010.&lt;/p&gt;

&lt;p&gt;The gaps produced can be filled with no-op SQL scripts, since DMS and LDS will themselves apply the changes contained by those upgrade scripts on earlier branches.&lt;/p&gt;

&lt;p&gt;This is a consequence of &lt;a href=&quot;https://jira.intelerad.com/browse/IP-57545&quot; title=&quot;DMS:  IPmon needs to monitor state of globaldicom requests queue and report excessive number or age of unprocessed requests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-57545&quot;&gt;&lt;del&gt;IP-57545&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://jira.intelerad.com/browse/IP-58471&quot; title=&quot;dbConfigurator: postgres schema upgrades are broken by design&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-58471&quot;&gt;&lt;del&gt;IP-58471&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
            <key id="90962">IP-58708</key>
            <summary>localdicom, globaldicom: renumber upgrade scripts</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="hahsan">Hannan Ahsan</assignee>
                                    <reporter username="ncabatoff">Nick Cabatoff</reporter>
                        <labels>
                            <label>DCD</label>
                    </labels>
                <created>Fri, 8 Mar 2013 17:46:19 -0500</created>
                <updated>Fri, 26 Apr 2019 14:05:18 -0400</updated>
                            <resolved>Wed, 21 Aug 2013 14:16:00 -0400</resolved>
                                    <version>4-6-1</version>
                                    <fixVersion>4-6-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="305938" author="robert.hanna" created="Tue, 19 Mar 2013 16:42:27 -0400"  >&lt;p&gt;Removing BlocksPLA as the first 4-6-1 PLA client (RABR) is not upgrading from a 4-4-1 or 4-5-1 version.&lt;/p&gt;</comment>
                            <comment id="305939" author="build" created="Wed, 20 Mar 2013 11:50:58 -0400"  >&lt;p&gt;Released by hahsan to master at 2013-03-20 11:50:56 (push 20546):&lt;br/&gt;
  PACS-4-6-1 (fix)        (previous build: PACS-4-6-1-P40)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-6-2-A1)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/c2800e770509&quot; target=&quot;_blank&quot;&gt;intelepacs:c2800e770509&lt;/a&gt;  hahsan      PACS-4-6-1  40800 fix: renumber/sync localdicom and globaldicom schema files.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/3fe1b73fa932&quot; target=&quot;_blank&quot;&gt;intelepacs:3fe1b73fa932&lt;/a&gt;  hahsan      trunk       40800 fix: renumber/sync localdicom and globaldicom schema files.&lt;/p&gt;</comment>
                            <comment id="305940" author="hannan.ahsan" created="Wed, 20 Mar 2013 11:52:39 -0400"  >&lt;p&gt;Description of the solution:Renumber localdicom and globaldicom schema files to sync with previous branches.&lt;/p&gt;

&lt;p&gt;Tests executed: Installed 451 rpms and ran dbConfigurator to verify that schemas were properly updated. &lt;/p&gt;

&lt;p&gt;Unit tests added or modified: none&lt;/p&gt;</comment>
                            <comment id="305941" author="rami.bechara" created="Wed, 27 Mar 2013 13:19:55 -0400"  >&lt;p&gt;Included in PACS-4-6-1-R1&lt;/p&gt;</comment>
                            <comment id="305942" author="youcef.kelanemer" created="Mon, 8 Apr 2013 16:37:47 -0400"  >&lt;p&gt;Reproduced with RPMs: &lt;br/&gt;
Database-LocalDicom-4.5.1.P143-ims01.noarch&lt;br/&gt;
Database-GlobalDicom-4.5.1.P143-ims01.noarch&lt;br/&gt;
Verified with RPMs: &lt;br/&gt;
Database-LocalDicom-4.6.1.P41-ims01&lt;br/&gt;
Database-GlobalDicom-4.6.1.P41-ims01&lt;br/&gt;
Verification steps: &lt;/p&gt;

&lt;p&gt;The idea of the verification is that prior to the fix, there was a mismatch in the sql scripts. 4.6.1 scripts were using the same number which was already used in 4.5.1.&lt;/p&gt;

&lt;p&gt;We did the verification on qa451 in two steps: Upgrade to P40 and then to P41.&lt;/p&gt;

&lt;p&gt;1. Get the P40 rpms and run distribute and save the sql scripts in a tmp folder:&lt;/p&gt;

&lt;p&gt;cp /net/buildrepo/srv/build/repo/PACS-4-6-1-P40/intelepacs/Database-LocalDicom-4.6.1.P40-ims01.noarch.rpm .&lt;br/&gt;
cp /net/buildrepo/srv/build/repo/PACS-4-6-1-P40/intelepacs/Database-GlobalDicom-4.6.1.P40-ims01.noarch.rpm .&lt;br/&gt;
./distribute -s all -a youcef -r&lt;br/&gt;
dbConfigurator --sapassword admpass --upgrade Schema-LocalDicom.cfg &lt;/p&gt;

&lt;p&gt; 1940  2013-04-08 16:13:55 cdt&lt;br/&gt;
 1941  2013-04-08 16:13:59 cd DatabaseSchemas/Postgres/&lt;br/&gt;
 1944  2013-04-08 16:14:27 cp LocalDicom-* ~/youcef/P40Postgres/.&lt;br/&gt;
 1945  2013-04-08 16:14:37 cp GlobalDicom-* ~/youcef/P40Postgres/.&lt;/p&gt;

&lt;p&gt;2. Redo the same for P41 version and save in ~/youcef/P41Postgres/.&lt;/p&gt;

&lt;p&gt;3. Running a diff will show how the P40 scripts are using number 2 to add new code which will not execute because the DB is already at level 2.&lt;/p&gt;




&lt;p&gt;Test cases added or modified: TR&lt;br/&gt;
End result: SUCCESS&lt;/p&gt;</comment>
                            <comment id="305943" author="rami.bechara" created="Wed, 21 Aug 2013 14:16:55 -0400"  >&lt;p&gt;Included in PACS-4-7-1-R1&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                    <customfield id="customfield_13806" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Availability Impact</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14410"><![CDATA[BlocksGA]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40800</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13074"><![CDATA[Database-GlobalDicom]]></customfieldvalue>
    <customfieldvalue key="13080"><![CDATA[Database-LocalDicom]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzrjg7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10804"><![CDATA[INTERNAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-58469] image_server: is querying localdicom.incoming_files table by sop and this table doesn&apos;t have an index for that column (441 backport)</title>
                <link>https://jira.intelerad.com/browse/IP-58469</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;The issue &lt;a href=&quot;https://jira.intelerad.com/browse/IP-57919&quot; title=&quot;image_server: is querying localdicom.incoming_files table by sop and this table doesn&amp;#39;t have an index for that column&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-57919&quot;&gt;&lt;del&gt;IP-57919&lt;/del&gt;&lt;/a&gt; fixed is equally applicable to 4-4-1.  Given that dbConfigurator doesn&apos;t cope well with differing upgrades on different branches, I&apos;m backporting this bug to work around those issues.&lt;/p&gt;</description>
            <key id="90723">IP-58469</key>
            <summary>image_server: is querying localdicom.incoming_files table by sop and this table doesn&apos;t have an index for that column (441 backport)</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="ncabatoff">Nick Cabatoff</assignee>
                                    <reporter username="ncabatoff">Nick Cabatoff</reporter>
                        <labels>
                            <label>DCD</label>
                    </labels>
                <created>Fri, 22 Feb 2013 14:49:35 -0500</created>
                <updated>Mon, 25 Mar 2019 14:09:07 -0400</updated>
                            <resolved>Thu, 14 Mar 2013 15:14:00 -0400</resolved>
                                    <version>4-4-1</version>
                                    <fixVersion>4-4-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="304375" author="build" created="Fri, 22 Feb 2013 15:05:26 -0500"  >&lt;p&gt;Released by ncabatoff to master at 2013-02-22 15:05:24 (push 20095):&lt;br/&gt;
  PACS-4-4-1 (fix)        (previous build: PACS-4-4-1-P151)&lt;br/&gt;
  PACS-4-5-1 (dummy)      (previous build: PACS-4-5-1-P134)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/7f08ce468b80&quot; target=&quot;_blank&quot;&gt;intelepacs:7f08ce468b80&lt;/a&gt;  ncabatoff   PACS-4-4-1  40473 fix: create index on incoming_files( sop_uid ).&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/c75bf3c5ccbd&quot; target=&quot;_blank&quot;&gt;intelepacs:c75bf3c5ccbd&lt;/a&gt;  ncabatoff   PACS-4-5-1  39970 dummy,38746 dummy,40473 dummy: dummy merge from PACS-4-4-1&lt;/p&gt;</comment>
                            <comment id="304376" author="nick.cabatoff" created="Fri, 22 Feb 2013 15:06:08 -0500"  >&lt;p&gt;Description of the solution: Backport of &lt;a href=&quot;https://jira.intelerad.com/browse/IP-57919&quot; title=&quot;image_server: is querying localdicom.incoming_files table by sop and this table doesn&amp;#39;t have an index for that column&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-57919&quot;&gt;&lt;del&gt;IP-57919&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Tests executed: None.&lt;/p&gt;

&lt;p&gt;Unit tests added or modified: None.&lt;/p&gt;</comment>
                            <comment id="304377" author="rami.bechara" created="Fri, 1 Mar 2013 10:17:35 -0500"  >&lt;p&gt;Straightforward backport.&lt;br/&gt;
QA Bypassing.&lt;/p&gt;

&lt;p&gt;This defect has been verified by the developer at the time of code change plus the execution of development testing. In addition, integration testing done by QA also verifies that this issue has been resolved.&lt;/p&gt;

&lt;p&gt;In certain cases the deployment team during test farm creation will be the group responsible for verification during routine deployment testing.&lt;/p&gt;

&lt;p&gt;Marking CLOSED.&lt;/p&gt;</comment>
                            <comment id="304378" author="rami.bechara" created="Fri, 8 Mar 2013 16:31:56 -0500"  >&lt;p&gt;Included in PACS-4-5-1-R11&lt;/p&gt;</comment>
                            <comment id="304379" author="lucie" created="Thu, 14 Mar 2013 15:14:17 -0400"  >&lt;p&gt;Included in PACS-4-4-1-R14&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40473</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13080"><![CDATA[Database-LocalDicom]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzrhz3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10802"><![CDATA[MAJOR]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-58083] SCEH: is not updating IMSPOSTFIX in ValidationDB/StudyLevel after a correction (pre-4-4-1)</title>
                <link>https://jira.intelerad.com/browse/IP-58083</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;RPM Version               : SeriesCorrectionEventHandler-4.3.1.P193-ims01&lt;/p&gt;

&lt;p&gt;EW                        : &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=278940&quot; target=&quot;_blank&quot;&gt;EW278940&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Minimal steps to reproduce: &lt;/p&gt;

&lt;p&gt;   1. Set up an AE title with postfix and automatic validation&lt;br/&gt;
   2. Send a study to the PACS, after the study passed through validation run a correction, the correction will remove the imspostfix value from  DicomMaster/StudyLevel, DicomImage/StudyLevel and the dicom files and will update the SeriesHeader.ish accordingly.&lt;br/&gt;
   3. After the correction is done send another series for the same study.&lt;/p&gt;

&lt;p&gt;Expected behaviour        : &lt;/p&gt;

&lt;p&gt;   The new images should not have the IMSPOSTFIX tag in the dcm file.&lt;/p&gt;

&lt;p&gt;What happened instead?    : &lt;/p&gt;

&lt;p&gt;   The new images have the IMSPOSTFIX tag in the dicom files, SeriesHeader.ish is updated with the postfixed accession number. &lt;/p&gt;

&lt;p&gt;Investigation summary:&lt;/p&gt;

&lt;p&gt;   When the last series is received image server is looking in ValidationDB and it is using the data from ValidationDB to validate the new images.&lt;/p&gt;

&lt;p&gt;   Because we have the postfix tag in ValidationDB/StudyLevel this will be added to the dicom files and to SeriesHeader.ish.&lt;/p&gt;

&lt;p&gt;   In IV the thumbnails/images with the postfixed accession number will not be viewable at all, basically the radiologist does not know that the study has missing thumbnails/images, this might cause the dictating radiologist to put the wrong diagnostic for the patient due to missing thumbnails/images.&lt;/p&gt;

&lt;p&gt;  Also when a correction is done using IB or manual validation IMSPOSTFIX is not specified, that is the reason why it is removed from DicomMaster/StudyLevel and DicomImage/StudyLevel but it is not removed from ValidationDB/StudyLevel from the owner.&lt;/p&gt;

&lt;p&gt;Note:&lt;/p&gt;

&lt;p&gt;   Setting this as critical because the radiologist can put wrong diagnostic due to missing images.&lt;/p&gt;

&lt;p&gt;   Adding support keyword because the client is calling support when the thumbnails/images are missing&lt;/p&gt;</description>
            <key id="90337">IP-58083</key>
            <summary>SCEH: is not updating IMSPOSTFIX in ValidationDB/StudyLevel after a correction (pre-4-4-1)</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://jira.intelerad.com/images/icons/priorities/critical.svg">High</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="qhabib">Qaiser Habib</assignee>
                                    <reporter username="lmujka">Laszlo Mujka</reporter>
                        <labels>
                            <label>support</label>
                    </labels>
                <created>Mon, 14 Jan 2013 17:44:53 -0500</created>
                <updated>Mon, 25 Mar 2019 14:09:12 -0400</updated>
                            <resolved>Mon, 16 Jun 2014 13:05:00 -0400</resolved>
                                    <version>4-3-1</version>
                                    <fixVersion>4-3-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="301433" author="nick.cabatoff" created="Tue, 15 Jan 2013 10:18:16 -0500"  >&lt;p&gt;The code to update ValidationDB..StudyLevel.ImsPostFix is obviously missing , it&apos;s just a matter of adding it and testing.&lt;/p&gt;</comment>
                            <comment id="301434" author="build" created="Thu, 17 Jan 2013 16:17:21 -0500"  >&lt;p&gt;Released by qhabib to master at 2013-01-17 16:17:16 (push 19297):&lt;br/&gt;
  PACS-4-3-1 (fix)        (previous build: PACS-4-3-1-P355)&lt;br/&gt;
  PACS-4-3-2 (fix)        (previous build: PACS-4-3-2-P87)&lt;br/&gt;
  PACS-4-3-4 (fix)        (previous build: PACS-4-3-4-P138)&lt;br/&gt;
  PACS-4-4-1 (fix)        (previous build: PACS-4-4-1-P142)&lt;br/&gt;
  PACS-4-5-1 (fix)        (previous build: PACS-4-5-1-P105)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-5-3-A9)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/ad58ac7df6f5&quot; target=&quot;_blank&quot;&gt;intelepacs:ad58ac7df6f5&lt;/a&gt;  qhabib      PACS-4-3-1  39847 fix: Add code for updating ImsPostFix in ValidationDb during PatientCorrection&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/a27e74a64d4c&quot; target=&quot;_blank&quot;&gt;intelepacs:a27e74a64d4c&lt;/a&gt;  qhabib      PACS-4-3-2  39847 fix: Add code for updating ImsPostFix in ValidationDb during PatientCorrection&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/7221e6276721&quot; target=&quot;_blank&quot;&gt;intelepacs:7221e6276721&lt;/a&gt;  qhabib      PACS-4-3-4  39847 fix: Add code for updating ImsPostFix in ValidationDb during PatientCorrection&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/7ecaf50c3513&quot; target=&quot;_blank&quot;&gt;intelepacs:7ecaf50c3513&lt;/a&gt;  qhabib      PACS-4-4-1  39847 fix: Add code for updating ImsPostFix in ValidationDb during PatientCorrection&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/2c568b3a3c3f&quot; target=&quot;_blank&quot;&gt;intelepacs:2c568b3a3c3f&lt;/a&gt;  qhabib      PACS-4-5-1  39847 fix: Add code for updating ImsPostFix in ValidationDb during PatientCorrection&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/ac725ca9915e&quot; target=&quot;_blank&quot;&gt;intelepacs:ac725ca9915e&lt;/a&gt;  qhabib      trunk       39847 fix: Add code for updating ImsPostFix in ValidationDb during PatientCorrection&lt;/p&gt;</comment>
                            <comment id="301435" author="qaiser.habib" created="Thu, 17 Jan 2013 16:41:44 -0500"  >&lt;p&gt;Description of the solution: Added code for updating ImsPostFix as well.&lt;/p&gt;

&lt;p&gt;Tests executed: As described in comment 1.&lt;/p&gt;

&lt;p&gt;1. Send a study to a PACS.&lt;/p&gt;

&lt;p&gt;2. Use correctPatientInfo to set ImsPostFix to a certain value (note that AccNum has to be changed to AccNum+ImsPostFix ).&lt;/p&gt;

&lt;p&gt;3. Dbdump ValidationDb/StudyLevel and observe that the ImsPostFix isn&apos;t udpated.&lt;/p&gt;

&lt;p&gt;4. Install fixed RPM of SCEH.&lt;/p&gt;

&lt;p&gt;6. Repeat the same process, ValidationDb will now be updated.&lt;/p&gt;





&lt;p&gt;Unit tests added or modified: testValidationDbChanges&lt;/p&gt;</comment>
                            <comment id="301436" author="emma.lao" created="Wed, 30 Jan 2013 14:19:14 -0500"  >&lt;p&gt;tested on SeriesCorrectionEventHandler-4.3.1.P357-ims01, following the original steps to make a correction to remove imspostfix value, the ValidationDB/StudyLevel imspostfix field not get removed, so the following series still had the imspostfix in dcm/.ish file.&lt;/p&gt;

&lt;p&gt;discussed with Qaiser, reopen this slip&lt;/p&gt;</comment>
                            <comment id="301437" author="build" created="Wed, 30 Jan 2013 17:23:08 -0500"  >&lt;p&gt;Released by qhabib to master at 2013-01-30 17:23:04 (push 19494):&lt;br/&gt;
  PACS-4-3-1 (fix)        (previous build: PACS-4-3-1-P357)&lt;br/&gt;
  PACS-4-3-2 (fix)        (previous build: PACS-4-3-2-P88)&lt;br/&gt;
  PACS-4-3-4 (fix)        (previous build: PACS-4-3-4-P140)&lt;br/&gt;
  PACS-4-4-1 (dummy)      (previous build: PACS-4-4-1-P145)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/00e1c36cc01e&quot; target=&quot;_blank&quot;&gt;intelepacs:00e1c36cc01e&lt;/a&gt;  qhabib      PACS-4-3-1  39847 fix: Fix for empty ImsPostFix&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/a53acf2ec38a&quot; target=&quot;_blank&quot;&gt;intelepacs:a53acf2ec38a&lt;/a&gt;  qhabib      PACS-4-3-2  39847 fix: Fix for empty ImsPostFix&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/71a1551a5da9&quot; target=&quot;_blank&quot;&gt;intelepacs:71a1551a5da9&lt;/a&gt;  qhabib      PACS-4-3-4  39847 fix: Fix for empty ImsPostFix&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/c6dee655f4f6&quot; target=&quot;_blank&quot;&gt;intelepacs:c6dee655f4f6&lt;/a&gt;  qhabib      PACS-4-4-1  39847 dummy: dummy merge from PACS-4-3-4&lt;/p&gt;</comment>
                            <comment id="301438" author="build" created="Thu, 31 Jan 2013 10:18:55 -0500"  >&lt;p&gt;Released by jan to master at 2013-01-31 10:18:51 (push 19507):&lt;br/&gt;
  trunk      (dummy)      (previous build: PACS-4-5-3-A16)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/7e463ac3f90d&quot; target=&quot;_blank&quot;&gt;intelepacs:7e463ac3f90d&lt;/a&gt;  jan         trunk       39847 dummy,40051 dummy: dummy merge from PACS-4-5-1&lt;/p&gt;</comment>
                            <comment id="301439" author="build" created="Thu, 31 Jan 2013 13:55:19 -0500"  >&lt;p&gt;Released by qhabib to master at 2013-01-31 13:55:16 (push 19514):&lt;br/&gt;
  PACS-4-4-1 (fix)        (previous build: PACS-4-4-1-P146)&lt;br/&gt;
  PACS-4-5-1 (fix)        (previous build: PACS-4-5-1-P114)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-5-3-A16)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/e4a13d698647&quot; target=&quot;_blank&quot;&gt;intelepacs:e4a13d698647&lt;/a&gt;  qhabib      PACS-4-4-1  39847 fix: Remove unneeded files from 441 and up&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/d77de8479dcd&quot; target=&quot;_blank&quot;&gt;intelepacs:d77de8479dcd&lt;/a&gt;  qhabib      PACS-4-5-1  39847 fix: Remove unneeded files from 441 and up&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/1b5ca65fe6ef&quot; target=&quot;_blank&quot;&gt;intelepacs:1b5ca65fe6ef&lt;/a&gt;  qhabib      trunk       39847 fix: Remove unneeded files from 441 and up&lt;/p&gt;</comment>
                            <comment id="301440" author="qaiser.habib" created="Thu, 31 Jan 2013 14:15:33 -0500"  >&lt;p&gt;Description of the solution: If AccNum is provided, ImsPostFix will always be updated. If it&apos;s not specified then ValidationDb will have an empty postfix. This ensures we can make ImsPostFix blank.&lt;/p&gt;

&lt;p&gt;Tests executed: Comment#1&lt;/p&gt;

&lt;p&gt;Unit tests added or modified: none&lt;/p&gt;</comment>
                            <comment id="301441" author="emma.lao" created="Fri, 1 Feb 2013 13:19:58 -0500"  >&lt;p&gt;tested with SeriesCorrectionEventHandler-4.3.1.P358-ims01 on qa431mdb1, seems that:&lt;br/&gt;
&amp;#8211; when issuing correction request from command line, either stripping off or adding imspostfix, the DicomImage/StudyLevel was updated along with other places&lt;/p&gt;

&lt;p&gt;but&lt;/p&gt;

&lt;p&gt;&amp;#8211; when performing manual validation from IB for a study sent by postfix enabled AE against an order without postfix, all other places had the impostfix stripped off, but DicomImage/StudyLevel not got modified&lt;/p&gt;

&lt;p&gt;spoke and showed the issue to Qaiser, he will investigate it&lt;/p&gt;

&lt;p&gt;I am leaving the bz as it is for now.&lt;/p&gt;</comment>
                            <comment id="301442" author="emma.lao" created="Mon, 4 Feb 2013 11:51:41 -0500"  >&lt;p&gt;correction: the DicomImage/StudyLevel in comment 9 was a typo, should be ValidationDB/StudyLevel&lt;/p&gt;

&lt;p&gt;Discussed with Qaiser, for the &quot;issue&quot; mentioned in comment 9, it is normal that SLM (StudyLevelMonitor) and ValidationServlet(VS) do not use SCEH to talk to ValidationDB (&lt;a href=&quot;https://jira.intelerad.com/browse/IP-37235&quot; title=&quot;SCEH should also update ValidationDB:StudyLevel if there is a need for it (images burned with the &amp;quot;wrong&amp;quot; accession number)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-37235&quot;&gt;&lt;del&gt;IP-37235&lt;/del&gt;&lt;/a&gt;). Also spoke to Laszlo, he was ok with that. I also did some correction on all fields in &quot;Correcting Study&quot; page from IB, the ValidationDB/StudyLevel updated. &lt;/p&gt;

&lt;p&gt;Reproduced with RPMs: SeriesCorrectionEventHandler-4.3.1.P357-ims01&lt;br/&gt;
Verified with RPMs: SeriesCorrectionEventHandler-4.3.1.P358-ims01&lt;br/&gt;
Verification steps: &lt;br/&gt;
1. repro the issue&lt;br/&gt;
2. upgrade rpm&lt;br/&gt;
3. send a series using an AOG AE title with postfix&lt;br/&gt;
4. check that DicomImage/StudyLevel, DicomMaster/StudyLevel, ValidationDB/StudyLevel, dicom files, the SeriesHeader.ish all have the imspostfix value&lt;br/&gt;
5. make a correction to remove the imspostfix value, check that all places mentioned in step 4 not having the imspostfix value&lt;br/&gt;
6. send another series for the same study&lt;br/&gt;
7. check that the second series&apos;s dicom files, the SeriesHeader.ish not having imspostfix value&lt;br/&gt;
8. verify that the correction to add imspostfix could update ValidationDB/StudyLevel&lt;br/&gt;
9. verify that when correcting all fields in &quot;Correcting Study&quot; page from IB, related fields in ValidationDB/StudyLevel are updated.&lt;/p&gt;

&lt;p&gt;Test cases added or modified: TR&lt;/p&gt;

&lt;p&gt;End result: pass&lt;/p&gt;

&lt;p&gt;Marking this as VERIFIED&lt;/p&gt;</comment>
                            <comment id="301443" author="emma.lao" created="Tue, 5 Feb 2013 10:35:14 -0500"  >&lt;p&gt;checked the &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=278940&quot; target=&quot;_blank&quot;&gt;EW278940&lt;/a&gt;, from the log and patient correction request, it seemed that the customer site got manual validation for the study, looking at the correction request:&lt;/p&gt;

&lt;p&gt;1 CorrectionNumber .................&lt;span class=&quot;error&quot;&gt;&amp;#91;287853&amp;#93;&lt;/span&gt;&lt;br/&gt;
 2 Requester ........................&lt;span class=&quot;error&quot;&gt;&amp;#91;VS&amp;#93;&lt;/span&gt;&lt;br/&gt;
 3 RequesterData ....................&lt;span class=&quot;error&quot;&gt;&amp;#91;dgalindo&amp;#93;&lt;/span&gt;&lt;br/&gt;
 4 StudyInstanceUID .................&lt;span class=&quot;error&quot;&gt;&amp;#91;1.2.840.114202.4.3573868979.843700315.1198963027.4064969567&amp;#93;&lt;/span&gt;&lt;br/&gt;
 5 CorrectionDescription ............[&amp;lt;PATIENTCORRECTION&amp;gt;&lt;br/&gt;
    &amp;lt;VERSION&amp;gt;2&amp;lt;/VERSION&amp;gt;&lt;br/&gt;
    &amp;lt;ACCESSIONNUMBER&amp;gt;HSP87711HSP&amp;lt;/ACCESSIONNUMBER&amp;gt;&lt;br/&gt;
    &amp;lt;IMSPOSTFIX&amp;gt;&amp;lt;/IMSPOSTFIX&amp;gt;&lt;br/&gt;
    &amp;lt;REQUESTED_PROCEDURE_ID&amp;gt;1&amp;lt;/REQUESTED_PROCEDURE_ID&amp;gt;&lt;br/&gt;
    &amp;lt;SCHEDULED_PROCEDURE_STEP_ID&amp;gt;1&amp;lt;/SCHEDULED_PROCEDURE_STEP_ID&amp;gt;&lt;br/&gt;
    &amp;lt;PATIENTID&amp;gt;HI237981HSP&amp;lt;/PATIENTID&amp;gt;&lt;br/&gt;
    &amp;lt;PATIENTNAME&amp;gt;MALEZIJA^JOSEPH&amp;lt;/PATIENTNAME&amp;gt;&lt;br/&gt;
    &amp;lt;PATIENTSEX&amp;gt;M&amp;lt;/PATIENTSEX&amp;gt;&lt;br/&gt;
    &amp;lt;PATIENTBIRTHDATE&amp;gt;19490426&amp;lt;/PATIENTBIRTHDATE&amp;gt;&lt;br/&gt;
    &amp;lt;PATIENTAGE&amp;gt;063Y&amp;lt;/PATIENTAGE&amp;gt;&lt;br/&gt;
    &amp;lt;REFERRINGPHYSICIANSNAME&amp;gt;Kummer^Jennifer&amp;lt;/REFERRINGPHYSICIANSNAME&amp;gt;&lt;br/&gt;
    &amp;lt;REFERRINGPHYSICIANSID&amp;gt;10366&amp;lt;/REFERRINGPHYSICIANSID&amp;gt;&lt;br/&gt;
    &amp;lt;STUDYDATE&amp;gt;20121206&amp;lt;/STUDYDATE&amp;gt;&lt;br/&gt;
    &amp;lt;STUDYDESCRIPTION&amp;gt;MR Right Forearm (MRI EXT UPPER W/O CO)&amp;lt;/STUDYDESCRIPTION&amp;gt;&lt;br/&gt;
    &amp;lt;FORCEFIX&amp;gt;true&amp;lt;/FORCEFIX&amp;gt;&lt;br/&gt;
    &amp;lt;MAKENEWSTUDYINSTANCEUID&amp;gt;false&amp;lt;/MAKENEWSTUDYINSTANCEUID&amp;gt;&lt;br/&gt;
&amp;lt;/PATIENTCORRECTION&amp;gt;&lt;br/&gt;
]&lt;br/&gt;
 6 DateTimeRequested ................&lt;span class=&quot;error&quot;&gt;&amp;#91;Dec  6 2012  8:55AM&amp;#93;&lt;/span&gt;&lt;br/&gt;
 7 Priority .........................&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt;&lt;br/&gt;
 8 FailedAttempts ...................&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&lt;br/&gt;
 9 Status ...........................&lt;span class=&quot;error&quot;&gt;&amp;#91;DONE&amp;#93;&lt;/span&gt;&lt;/p&gt;


&lt;p&gt;The checkin here only fixed the correction issue on patient correction after validation, while from &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=278940&quot; target=&quot;_blank&quot;&gt;EW278940&lt;/a&gt;, the patient correction in customer site was from VS, which is not fixed yet. Discussed with Rami/Robert/Laszlo, open &lt;a href=&quot;https://jira.intelerad.com/browse/IP-58224&quot; title=&quot;ValidationServlet: fails to update ValidationDB..StudyLevel.ImsPostFIx during manual validation if postfix is empty&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-58224&quot;&gt;&lt;del&gt;IP-58224&lt;/del&gt;&lt;/a&gt; to deal with the issue where ValidationDB/StudyLevel ImsPostFix not modified for correction from VS.&lt;/p&gt;</comment>
                            <comment id="301444" author="rami.bechara" created="Wed, 6 Feb 2013 17:28:04 -0500"  >&lt;p&gt;Included in PACS-4-3-1-R27&lt;/p&gt;</comment>
                            <comment id="301445" author="rami.bechara" created="Wed, 13 Feb 2013 16:44:44 -0500"  >&lt;p&gt;Included in PACS-4-3-4-R14&lt;/p&gt;</comment>
                            <comment id="301446" author="adron.nguyen" created="Fri, 24 Jan 2014 16:40:53 -0500"  >&lt;p&gt;Automated through InteleTest under &lt;a href=&quot;http://testrail.intelerad.com/testrail/index.php?/cases/view/220081&quot; target=&quot;_blank&quot;&gt;TRC:220081&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12603" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Affected Clients</customfieldname>
                        <customfieldvalues>
                                        <label>CAIMA</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39847</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13386"><![CDATA[SeriesCorrectionEventHandler]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzrfm7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_11001" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>ServiceNow Case #</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>278940</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10801"><![CDATA[CRITICAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12116" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Test Case Status</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12048"><![CDATA[Added]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>


<item>
            <title>[IP-57578] LocalDicom: provide upgrade script to the PACS-4-4-1.dcd schema</title>
                <link>https://jira.intelerad.com/browse/IP-57578</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;In 4-4-1.dcd, we added the PG user &apos;dltd&apos;, granted it access to incoming_files, and also replaced the column &apos;is_duplicate&apos; while adding the column &apos;restore_dest_ae_title&apos;.  Mistakes were made and somehow the upgrade script to implement these schema changes was committed only on 4-5-1.  Now that 4-4-1.dcd has been merged into 4-4-1, we need to ensure that it is possible to upgrade existing LocalDicom instances to match what image_server/DLTd/LDS now expect.&lt;/p&gt;

&lt;p&gt;I&apos;m tweaking what we did in 4-5-1 in two small ways: one, I&apos;m adding the creation/grants for user &apos;dltd&apos; to the upgrade script.  Two, I&apos;m putting the new column at the end of the table, which is the same way it will appear on sites that have the old 4-4-1 schema once they run the upgrade script.  It shouldn&apos;t matter either way, but I thought it might be mildly confusing for support users to get different dbshow output for the same schema on different sites, and some simple scripts might break if they hardcode column order expectations.&lt;/p&gt;</description>
            <key id="89832">IP-57578</key>
            <summary>LocalDicom: provide upgrade script to the PACS-4-4-1.dcd schema</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="ncabatoff">Nick Cabatoff</assignee>
                                    <reporter username="ncabatoff">Nick Cabatoff</reporter>
                        <labels>
                            <label>DCD</label>
                    </labels>
                <created>Tue, 13 Nov 2012 13:11:53 -0500</created>
                <updated>Fri, 26 Apr 2019 14:05:09 -0400</updated>
                            <resolved>Wed, 27 Mar 2013 13:19:00 -0400</resolved>
                                    <version>4-4-1</version>
                                    <fixVersion>4-4-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="298087" author="build" created="Tue, 13 Nov 2012 13:23:20 -0500"  >&lt;p&gt;Released by ncabatoff to master at 2012-11-13 13:23:15 (push 18011):&lt;br/&gt;
  PACS-4-4-1 (fix)        (previous build: PACS-4-4-1-P121)&lt;br/&gt;
  PACS-4-5-1 (fix)        (previous build: PACS-4-5-1-P39)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-5-2-A2)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/9768547be23b&quot; target=&quot;_blank&quot;&gt;intelepacs:9768547be23b&lt;/a&gt;  ncabatoff   PACS-4-4-1  39012 fix: Add script to upgrade localdicom.incoming_files for use by DLTd, based on the 4-4-1.dcd work.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/56c14208408d&quot; target=&quot;_blank&quot;&gt;intelepacs:56c14208408d&lt;/a&gt;  ncabatoff   PACS-4-5-1  39012 fix: Add script to upgrade localdicom.incoming_files for use by DLTd, based on the 4-4-1.dcd work.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/8e5f0a245ef2&quot; target=&quot;_blank&quot;&gt;intelepacs:8e5f0a245ef2&lt;/a&gt;  ncabatoff   trunk       39012 fix: Add script to upgrade localdicom.incoming_files for use by DLTd, based on the 4-4-1.dcd work.&lt;/p&gt;</comment>
                            <comment id="298088" author="nick.cabatoff" created="Tue, 13 Nov 2012 13:24:45 -0500"  >&lt;p&gt;Description of the solution: As per the bug description.&lt;/p&gt;

&lt;p&gt;Tests executed: Dropped and re-installed localdicom using the latest existing 4-4-1 RPM.  Build a new RPM including the new upgrade script, and verified that dbConfigurator --upgrade made the correct changes to localdicom.incoming_files and set up grants for user dltd.&lt;/p&gt;

&lt;p&gt;Unit tests added or modified: None&lt;/p&gt;</comment>
                            <comment id="298089" author="ericc" created="Mon, 19 Nov 2012 12:00:53 -0500"  >&lt;p&gt;Verified with RPMs:&lt;br/&gt;
 LocalDicomService-4.4.1.P123-ims01&lt;/p&gt;

&lt;p&gt;Verification steps:&lt;br/&gt;
 1. upgrade rpm&lt;br/&gt;
 2. run dbconfigurator&lt;br/&gt;
 3. verify that the database is populated correctly&lt;/p&gt;

&lt;p&gt;End result: &lt;br/&gt;
 DBConfigurator script runs smoothly.&lt;br/&gt;
 Column &quot;restore_dest_ae_title&quot; is now present.&lt;br/&gt;
 Marking as verified&lt;/p&gt;</comment>
                            <comment id="298090" author="rami.bechara" created="Thu, 22 Nov 2012 17:17:34 -0500"  >&lt;p&gt;Included in PACS-4-4-1-R7&lt;/p&gt;</comment>
                            <comment id="298091" author="rami.bechara" created="Mon, 24 Dec 2012 10:24:03 -0500"  >&lt;p&gt;Included in PACS-4-5-1-R1&lt;/p&gt;</comment>
                            <comment id="298092" author="rami.bechara" created="Wed, 27 Mar 2013 13:19:44 -0400"  >&lt;p&gt;Included in PACS-4-6-1-R1&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39012</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13080"><![CDATA[Database-LocalDicom]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzrcjb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-57106] LocalDicom: enhance deferred activity indexes</title>
                <link>https://jira.intelerad.com/browse/IP-57106</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;RPM Version               : Database-LocalDicom-4.4.1.P90-ims01&lt;/p&gt;

&lt;p&gt;I observed slowness in the queries used to find the next deferred activity to&lt;br/&gt;
process, and on inspecting the query plan Steve suggested prepending the status&lt;br/&gt;
column to all the deferred-activity-type-specific indexes.  This provided a&lt;br/&gt;
drastic speed improvement to the &apos;get next activity&apos; queries.&lt;/p&gt;</description>
            <key id="89360">IP-57106</key>
            <summary>LocalDicom: enhance deferred activity indexes</summary>
                <type id="10905" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13911&amp;avatarType=issuetype">Enhancement</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="ncabatoff">Nick Cabatoff</assignee>
                                    <reporter username="ncabatoff">Nick Cabatoff</reporter>
                        <labels>
                            <label>DCD</label>
                    </labels>
                <created>Wed, 3 Oct 2012 10:20:43 -0400</created>
                <updated>Mon, 25 Mar 2019 14:09:26 -0400</updated>
                            <resolved>Mon, 24 Dec 2012 10:20:00 -0500</resolved>
                                    <version>4-4-1</version>
                                    <fixVersion>4-4-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="295100" author="nick.cabatoff" created="Wed, 3 Oct 2012 10:52:54 -0400"  >&lt;p&gt;For reference, here&apos;s an example query plan with the current indexes for the following SQL&lt;/p&gt;

&lt;p&gt;SELECT * FROM deferred_activity WHERE status = &apos;New&apos; AND type = &apos;J2CConversion&apos; AND timestamp_last_update &amp;lt;= localtimestamp ORDER BY priority,timestamp_last_update,activity_id LIMIT 1&lt;/p&gt;

&lt;p&gt;Limit  (cost=3797.45..3797.46 rows=1 width=45)&lt;br/&gt;
  -&amp;gt;  Sort  (cost=3797.45..3797.46 rows=1 width=45)&lt;br/&gt;
        Sort Key: priority, timestamp_last_update, activity_id&lt;br/&gt;
        -&amp;gt;  Bitmap Heap Scan on deferred_activity  (cost=949.14..3797.44 rows=1 width=45)&lt;br/&gt;
              Recheck Cond: ((timestamp_last_update &amp;lt;= (&apos;now&apos;::text)::timestamp without time zone) AND ((type)::text = &apos;UmdbUpdate&apos;::text) AND ((status)::text &amp;lt;&amp;gt; ALL (&apos;&lt;/p&gt;
{Completed,Failed}
&lt;p&gt;&apos;::text[])))&lt;br/&gt;
              Filter: ((status)::text = &apos;Defer&apos;::text)&lt;br/&gt;
              -&amp;gt;  Bitmap Index Scan on dai_deferred_activity_umdbupdate_queue  (cost=0.00..949.14 rows=36369 width=0)&lt;br/&gt;
                    Index Cond: (timestamp_last_update &amp;lt;= (&apos;now&apos;::text)::timestamp without time zone)&lt;/p&gt;


&lt;p&gt;With the status column prepended to the indexes:&lt;/p&gt;

&lt;p&gt; Limit  (cost=0.01..0.44 rows=1 width=48) (actual time=0.430..0.430 rows=1 loops=1)&lt;br/&gt;
   -&amp;gt;  Index Scan using dai_deferred_activity_j2cconversion_queue on deferred_activity  (cost=0.01..2082.15 rows=4828 width=48) (actual time=0.427..0.427 rows=1 loops=1)&lt;br/&gt;
         Index Cond: (((status)::text = &apos;New&apos;::text) AND (timestamp_last_update &amp;lt;= (&apos;now&apos;::text)::timestamp without time zone))&lt;/p&gt;</comment>
                            <comment id="295101" author="build" created="Wed, 3 Oct 2012 15:15:59 -0400"  >&lt;p&gt;Released by ncabatoff to master at 2012-10-03 15:15:57 (push 17012):&lt;br/&gt;
  PACS-4-4-1 (fix)        (previous build: PACS-4-4-1-P100)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-4-2-A11)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/b651ff8ed049&quot; target=&quot;_blank&quot;&gt;intelepacs:b651ff8ed049&lt;/a&gt;  ncabatoff   PACS-4-4-1  38323 fix: add status column to type-specific deferred activity indexes.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/6f1a3b7fafd6&quot; target=&quot;_blank&quot;&gt;intelepacs:6f1a3b7fafd6&lt;/a&gt;  ncabatoff   trunk       38323 fix: add status column to type-specific deferred activity indexes.&lt;/p&gt;</comment>
                            <comment id="295102" author="nick.cabatoff" created="Wed, 3 Oct 2012 15:19:40 -0400"  >&lt;p&gt;Description of the solution: Prepend column &apos;status&apos; to the list of columns in each type-specific index.&lt;/p&gt;

&lt;p&gt;Tests executed: Verified improved query plan and performance with psql using explain analyze, and also on qaloadmdb1 looking at overall performance of deferred activities.&lt;/p&gt;

&lt;p&gt;Unit tests added or modified: None&lt;/p&gt;</comment>
                            <comment id="295103" author="ericc" created="Tue, 9 Oct 2012 15:36:32 -0400"  >&lt;p&gt;Discussed with Nick, this ca easily be qabypassed, tested by Nick.&lt;/p&gt;

&lt;p&gt;This defect has been verified by the developer at the time of code change plus the execution of development testing. In addition, integration testing done by QA also verifies that this issue has been resolved.&lt;/p&gt;

&lt;p&gt;In certain cases the deployment team during test farm creation will be the group responsible for verification during routine deployment testing.&lt;/p&gt;

&lt;p&gt;Marking CLOSED.&lt;/p&gt;

&lt;p&gt;No testcase needed&lt;/p&gt;</comment>
                            <comment id="295104" author="rami.bechara" created="Wed, 10 Oct 2012 18:02:37 -0400"  >&lt;p&gt;Included in PACS-4-4-1-R3&lt;/p&gt;</comment>
                            <comment id="295105" author="rami.bechara" created="Mon, 24 Dec 2012 10:20:24 -0500"  >&lt;p&gt;Included in PACS-4-5-1-R1&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38323</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13080"><![CDATA[Database-LocalDicom]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzr9mn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10804"><![CDATA[INTERNAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-56438] LDS pushes the same request id twice.</title>
                <link>https://jira.intelerad.com/browse/IP-56438</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;RPM Version               : LocalDicomService-4.4.1.P46-ims01&lt;br/&gt;
EW                        : EW&lt;br/&gt;
Minimal steps to reproduce: &lt;br/&gt;
The steps to reproduce are unknown at the moment.&lt;/p&gt;

&lt;p&gt;LocalDicomService_REQUESTSYNCHRONIZER.log.40.gz&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-19 20:46:09.551 RS_0 qa441mod2.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Attempting to build DicomModification with id : 1-6-1-1267&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-19 20:46:09.552 RS_0 qa441mod2.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; sending 1 requests to DMS&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-19 20:46:09.552 RS_0 qa441mod2.dyn.intelerad (PROFILE)&amp;#93;&lt;/span&gt; --&amp;gt; Start: Invoking &apos;storeLdsRequests&apos; from API &apos;com.intelerad.dicommasterservice.protocol.dicommasterrequ&lt;br/&gt;
est.DicomMasterRequestApi1&apos;... (timer ProfilingInvocationHandler_1342745169552)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-19 20:46:09.576 RS_0 qa441mod2.dyn.intelerad (PROFILE)&amp;#93;&lt;/span&gt; &amp;lt;-- Elapsed: 0.024 sec: Successfully invoked &apos;storeLdsRequests&apos; from API &apos;com.intelerad.dicommasterservice&lt;br/&gt;
.protocol.dicommasterrequest.DicomMasterRequestApi1&apos;. Result is null. (timer ProfilingInvocationHandler_1342745169552)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-19 20:46:09.579 RS_0 qa441mod2.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; asking DMS for requests newer than: 1-1-1-4, 1-6-1-1267, 1-5-1-544, 1-1-2-2&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-19 20:46:09.579 RS_0 qa441mod2.dyn.intelerad (PROFILE)&amp;#93;&lt;/span&gt; --&amp;gt; Start: Invoking &apos;getNewerRequests&apos; from API &apos;com.intelerad.dicommasterservice.protocol.dicommasterrequ&lt;br/&gt;
est.DicomMasterRequestApi1&apos;... (timer ProfilingInvocationHandler_1342745169579)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-19 20:46:09.602 RS_0 qa441mod2.dyn.intelerad (PROFILE)&amp;#93;&lt;/span&gt; &amp;lt;-- Elapsed: 0.023 sec: Successfully invoked &apos;getNewerRequests&apos; from API &apos;com.intelerad.dicommasterservice&lt;br/&gt;
.protocol.dicommasterrequest.DicomMasterRequestApi1&apos;. Result is [[DicomModificationRequest{DicomModificationId=1-5-1-546, RequestedDateTime=1342745145301, DicomModificatio&lt;br/&gt;
nType=SERIES_CHECKPOINT_CORRECTION, Attributes={1=1.3.12.2.1107.5.1.4.54898.30000008071115462707800000003, 528446=Prone_Scout  0.6  T20s, 419...] (timer ProfilingInvocatio&lt;br/&gt;
nHandler_1342745169579)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-19 20:46:09.602 RS_0 qa441mod2.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Got &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; requests.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-19 20:46:10.246 RS_0 qa441mod2.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Pending modifications marker file created successfully for study 1.2.840.114202.4.769315632.2524365775.33298&lt;br/&gt;
90540.4094334295 at location &lt;span class=&quot;error&quot;&gt;&amp;#91;/var/spool/Intelerad/LdsPendingCorrectionsMarker/v0/OW/1.2.840.114202.4.769315632.2524365775.3329890540.4094334295&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-19 20:46:10.247 RS_0 qa441mod2.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Pending modifications marker file created successfully for study 1.2.840.114202.4.493693082.1810065967.14139&lt;br/&gt;
99204.1319238082 at location &lt;span class=&quot;error&quot;&gt;&amp;#91;/var/spool/Intelerad/LdsPendingCorrectionsMarker/v0/ZV/1.2.840.114202.4.493693082.1810065967.1413999204.1319238082&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-19 20:46:22.198 RS_0 qa441mod2.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Attempting to build DicomModification with id : 1-6-1-1268&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-19 20:46:22.200 RS_0 qa441mod2.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; sending 1 requests to DMS&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-19 20:46:22.200 RS_0 qa441mod2.dyn.intelerad (PROFILE)&amp;#93;&lt;/span&gt; --&amp;gt; Start: Invoking &apos;storeLdsRequests&apos; from API &apos;com.intelerad.dicommasterservice.protocol.dicommasterrequ&lt;br/&gt;
est.DicomMasterRequestApi1&apos;... (timer ProfilingInvocationHandler_1342745182200)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-19 20:47:27.133 RS_0 qa441mod2.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Thread &apos;RequestSynchronizer_0&apos; started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-19 20:47:28.641 RS_0 qa441mod2.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Attempting to build DicomModification with id : 1-6-1-1268&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-19 20:47:29.863 RS_0 qa441mod2.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Negotiating protocol &apos;[0:com.intelerad.dicommasterservice.protocol.dicommasterrequest.DicomMasterRequestProt&lt;br/&gt;
ocol1@916f80]&apos; with &apos;qa441mdb1.dyn.intelerad:5009&apos;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-19 20:47:33.792 RS_0 qa441mod2.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Connecting to &apos;DicomMasterRequestService&apos; on &apos;qa441mdb1.dyn.intelerad:5009&apos; with protocol &apos;DicomMasterReques&lt;br/&gt;
tProtocol1.0&apos; and session &apos;LTExNTEwMjI3OTkxMzhhMWRhOTY5OTUxODAwbG9jYWxob3N0LmxvY2FsZG9tYWlu&apos;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-19 20:47:33.799 RS_0 qa441mod2.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Service API &apos;com.intelerad.dicommasterservice.protocol.dicommasterrequest.DicomMasterRequestApi1&apos; will be se&lt;br/&gt;
rved by service &apos;DicomMasterRequestService&apos; on &apos;qa441mdb1.dyn.intelerad:5009&apos; using session &apos;LTExNTEwMjI3OTkxMzhhMWRhOTY5OTUxODAwbG9jYWxob3N0LmxvY2FsZG9tYWlu&apos;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-19 20:47:33.821 RS_0 qa441mod2.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; sending 1 requests to DMS&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-19 20:47:33.822 RS_0 qa441mod2.dyn.intelerad (PROFILE)&amp;#93;&lt;/span&gt; --&amp;gt; Start: Invoking &apos;storeLdsRequests&apos; from API &apos;com.intelerad.dicommasterservice.protocol.dicommasterrequ&lt;br/&gt;
est.DicomMasterRequestApi1&apos;... (timer ProfilingInvocationHandler_1342745253822)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-19 20:47:33.976 RS_0 qa441mod2.dyn.intelerad (PROFILE)&amp;#93;&lt;/span&gt; &amp;lt;-- Elapsed: 0.154 sec: Failed to invoke &apos;storeLdsRequests&apos; from API &apos;com.intelerad.dicommasterservice.pro&lt;br/&gt;
tocol.dicommasterrequest.DicomMasterRequestApi1&apos; (timer ProfilingInvocationHandler_1342745253822)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-19 20:47:33.976 RS_0 qa441mod2.dyn.intelerad&amp;#93;&lt;/span&gt; &lt;br/&gt;
*************************&lt;br/&gt;
ERROR: Failed to execute task &lt;span class=&quot;error&quot;&gt;&amp;#91;Store new LDS-generated requests&amp;#93;&lt;/span&gt; due to database issue: ERROR: duplicate key value violates unique constraint &quot;requests_nk&quot;&lt;br/&gt;
*************************&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-07-19 20:47:33.977 RS_0 qa441mod2.dyn.intelerad&amp;#93;&lt;/span&gt; Stack trace:&lt;br/&gt;
com.intelerad.dicommasterservice.protocol.dicommasterrequest.DicomMasterRequestProtocolException: Failed to execute task &lt;span class=&quot;error&quot;&gt;&amp;#91;Store new LDS-generated requests&amp;#93;&lt;/span&gt; due to database issue: ERROR: duplicate key value violates unique constraint &quot;requests_nk&quot;&lt;br/&gt;
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)&lt;br/&gt;
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)&lt;br/&gt;
        at com.intelerad.db.lib.DatabaseCallableSchedulingUtils.newExceptionInstance(DatabaseCallableSchedulingUtils.java:237)&lt;br/&gt;
        at com.intelerad.db.lib.DatabaseCallableSchedulingUtils.newException(DatabaseCallableSchedulingUtils.java:222)&lt;br/&gt;
        at com.intelerad.db.lib.DatabaseCallableSchedulingUtils.handleCommonException(DatabaseCallableSchedulingUtils.java:282)&lt;br/&gt;
        at com.intelerad.db.lib.DatabaseCallableSchedulingUtils.access$000(DatabaseCallableSchedulingUtils.java:12)&lt;br/&gt;
        at com.intelerad.db.lib.DatabaseCallableSchedulingUtils$LoseCauseHandler.handleWithWrappedException(DatabaseCallableSchedulingUtils.java:46)&lt;br/&gt;
        at com.intelerad.db.lib.DatabaseCallableSchedulingUtils.submitWithNoLog(DatabaseCallableSchedulingUtils.java:209)&lt;br/&gt;
        at com.intelerad.db.lib.DatabaseCallableSchedulingUtils.submitWithLog(DatabaseCallableSchedulingUtils.java:179)&lt;br/&gt;
        at com.intelerad.db.lib.DatabaseCallableSchedulingUtils.submit(DatabaseCallableSchedulingUtils.java:134)&lt;br/&gt;
        at com.intelerad.dicommasterservice.task.dicommasterrequest.GlobalDicomUpdateDbInvoker.storeRequests(GlobalDicomUpdateDbInvoker.java:58)&lt;br/&gt;
        at com.intelerad.dicommasterservice.task.dicommasterrequest.DicomMasterRequestFacade.storeRequests(DicomMasterRequestFacade.java:187)&lt;br/&gt;
        at com.intelerad.dicommasterservice.implementation.DicomMasterRequestImpl.storeLdsRequests(DicomMasterRequestImpl.java:160)&lt;br/&gt;
        at sun.reflect.GeneratedMethodAccessor19.invoke(Unknown Source)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at com.caucho.hessian.server.HessianSkeleton.invoke(HessianSkeleton.java:180)&lt;br/&gt;
        at com.caucho.hessian.server.HessianSkeleton.invoke(HessianSkeleton.java:109)&lt;br/&gt;
        at com.intelerad.db.intermediaries.lib.ProfilingSkeleton.invoke(ProfilingSkeleton.java:39)&lt;br/&gt;
        at com.intelerad.db.intermediaries.lib.http.DefaultRequestHandler.invoke(DefaultRequestHandler.java:171)&lt;br/&gt;
        at com.intelerad.db.intermediaries.lib.http.DefaultRequestHandler.tryHandle(DefaultRequestHandler.java:119)&lt;br/&gt;
        at com.intelerad.db.intermediaries.lib.http.DefaultRequestHandler.handle(DefaultRequestHandler.java:64)&lt;br/&gt;
        at org.apache.http.nio.protocol.ThrottlingHttpServiceHandler.handleRequest(ThrottlingHttpServiceHandler.java:537)&lt;br/&gt;
        at org.apache.http.nio.protocol.ThrottlingHttpServiceHandler.access$000(ThrottlingHttpServiceHandler.java:103)&lt;br/&gt;
        at org.apache.http.nio.protocol.ThrottlingHttpServiceHandler$1.run(ThrottlingHttpServiceHandler.java:257)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:662)&lt;br/&gt;
        at com.intelerad.db.intermediaries.lib.http.DefaultRequestExecutor$Worker.run(DefaultRequestExecutor.java:51)&lt;br/&gt;
        at com.intelerad.lib.hessian.client.InteleradHessianProxyFactory.attachStackTrace(InteleradHessianProxyFactory.java:156)&lt;br/&gt;
        at com.intelerad.lib.hessian.client.InteleradHessianProxyFactory$1.invoke(InteleradHessianProxyFactory.java:66)&lt;br/&gt;
        at com.intelerad.db.intermediaries.lib.ProfilingInvocationHandler.invoke(ProfilingInvocationHandler.java:54)&lt;br/&gt;
        at com.intelerad.db.intermediaries.lib.SingleHostClientFactory$RenegotiatingInvocationHandler.invoke(SingleHostClientFactory.java:316)&lt;br/&gt;
        at $Proxy32.storeLdsRequests(Unknown Source)&lt;br/&gt;
        at com.intelerad.localdicomservice.modifications.RequestSynchronizerDefault.sendRequests(RequestSynchronizerDefault.java:253)&lt;br/&gt;
        at com.intelerad.localdicomservice.modifications.RequestSynchronizerDefault.sendLocallyGeneratedRequests(RequestSynchronizerDefault.java:214)&lt;br/&gt;
        at com.intelerad.localdicomservice.modifications.RequestSynchronizerStarterScheduler$1.run(RequestSynchronizerStarterScheduler.java:94)&lt;br/&gt;
        at com.intelerad.tools.lib.scheduling.DefaultScheduler$MonitoredCommand.run(DefaultScheduler.java:248)&lt;br/&gt;
        at com.intelerad.tools.lib.scheduling.DefaultScheduler$RunnableWithDebugLevel.run(DefaultScheduler.java:318)&lt;br/&gt;
        at com.intelerad.tools.lib.scheduling.DefaultScheduler$ExceptionLoggerCommand.run(DefaultScheduler.java:280)&lt;br/&gt;
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)&lt;br/&gt;
        at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:317)&lt;br/&gt;
        at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:150)&lt;br/&gt;
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:98)&lt;br/&gt;
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(ScheduledThreadPoolExecutor.java:180)&lt;br/&gt;
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:204)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;br/&gt;
        at com.intelerad.tools.lib.scheduling.LoggingThreadFactory.runCommand(LoggingThreadFactory.java:134)&lt;br/&gt;
        at com.intelerad.tools.lib.scheduling.LoggingThreadFactory.access$000(LoggingThreadFactory.java:19)&lt;br/&gt;
        at com.intelerad.tools.lib.scheduling.LoggingThreadFactory$2.run(LoggingThreadFactory.java:98)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:662)&lt;/p&gt;




&lt;p&gt;Expected behaviour        : each request id should only be pushed once to DMS.&lt;br/&gt;
What happened instead?    : The same request id is pushed twice which triggers a database duplicate error.&lt;/p&gt;</description>
            <key id="88692">IP-56438</key>
            <summary>LDS pushes the same request id twice.</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://jira.intelerad.com/images/icons/priorities/critical.svg">High</priority>
                        <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="ncabatoff">Nick Cabatoff</assignee>
                                    <reporter username="fzaryouh">Fouad Zaryouh</reporter>
                        <labels>
                            <label>DCD</label>
                    </labels>
                <created>Fri, 20 Jul 2012 17:22:58 -0400</created>
                <updated>Mon, 25 Mar 2019 14:09:35 -0400</updated>
                            <resolved>Mon, 24 Dec 2012 10:21:00 -0500</resolved>
                                    <version>4-4-1</version>
                                    <fixVersion>4-4-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="290331" author="fzaryouh" created="Fri, 20 Jul 2012 17:24:41 -0400"  >&lt;p&gt;The logs can be found in qa441mod2:~/fouad/bz/&lt;/p&gt;</comment>
                            <comment id="290332" author="nick.cabatoff" created="Fri, 20 Jul 2012 17:34:03 -0400"  >&lt;p&gt;This is happening because LDS was restarted after it had sent the request 1-6-1-1268 to DMS, but before it had updated the requestserverstatus table.&lt;/p&gt;</comment>
                            <comment id="290333" author="fabio.padilha" created="Mon, 23 Jul 2012 10:04:50 -0400"  >&lt;p&gt;disregarding how LDS handles this, I think DMS should tolerate this scenario.&lt;/p&gt;</comment>
                            <comment id="290334" author="build" created="Tue, 24 Jul 2012 16:17:19 -0400"  >&lt;p&gt;Released by ncabatoff to stable at 2012-07-24 16:17:15 (push 15631):&lt;br/&gt;
  PACS-4-4-1 (fix)        (previous build: PACS-4-4-1-P49)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-4-2-A2)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/b34860d87115&quot; target=&quot;_blank&quot;&gt;intelepacs:b34860d87115&lt;/a&gt;  ncabatoff   PACS-4-4-1  37348 fix: Add new DMS method to fetch newer requests for a single owner.  Have LDS invoke that&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/045706df2b5d&quot; target=&quot;_blank&quot;&gt;intelepacs:045706df2b5d&lt;/a&gt;  ncabatoff   trunk       37348 fix: Add new DMS method to fetch newer requests for a single owner.  Have LDS invoke that&lt;/p&gt;</comment>
                            <comment id="290335" author="nick.cabatoff" created="Tue, 24 Jul 2012 16:45:06 -0400"  >&lt;p&gt;Description of the solution: &lt;/p&gt;

&lt;p&gt;LDS uses the localdicom.requestserverstatus to track the highest seqnum it&lt;br/&gt;
knows for each owner, including itself.  Before pushing locally generated&lt;br/&gt;
requests to DMS, LDS now asks DMS for all the requests with the owning&lt;br/&gt;
pacsid/serverid/appid that LDS instance uses, that have a seqnum greater than&lt;br/&gt;
what&apos;s recorded in requestserverstatus.  Normally it should get back nothing,&lt;br/&gt;
but if something has gone wrong with synchronization in the past (e.g. the case&lt;br/&gt;
for which this bug was opened, where LDS gets shutdown after it has sent&lt;br/&gt;
requests to DMS but before updating requestserverstatus with the new max seqnum&lt;br/&gt;
for the requests pushed) then we can expect to receive some requests from this&lt;br/&gt;
hessian call.  Provided all the requests pulled are present in identical form&lt;br/&gt;
in localdicom.requests, they will be silently ignored and the&lt;br/&gt;
requestserverstatus entry bumped to reflect them.  If any of the requests do&lt;br/&gt;
not exist in localdicom.requests, or exist with different values, an exception&lt;br/&gt;
will be thrown.&lt;/p&gt;

&lt;p&gt;Tests executed:&lt;/p&gt;

&lt;p&gt;Sent an image to a clean PACS.  Verified the requests generated on reception&lt;br/&gt;
were present in both globaldicom and localdicom.requests.  Updated the &lt;br/&gt;
requestserverstatus row corresponding to the LDS instance, setting last_seq_num&lt;br/&gt;
to a lower value.  Observed that with the old code, we get the duplicate key&lt;br/&gt;
stack trace from DMS.  With the new code, we see LDS pulling the remote requests,&lt;br/&gt;
comparing them to the local requests, updating requestserverstatus, then moving on.&lt;/p&gt;

&lt;p&gt;Unit tests added or modified:&lt;/p&gt;

&lt;p&gt;None of note.&lt;/p&gt;</comment>
                            <comment id="290336" author="build" created="Tue, 24 Jul 2012 17:48:57 -0400"  >&lt;p&gt;Released by lvu to master at 2012-07-24 17:48:53 (push 15639):&lt;br/&gt;
  PACS-4-4-1 (fix)        (previous build: PACS-4-4-1-P50)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-4-2-A2)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/b34860d87115&quot; target=&quot;_blank&quot;&gt;intelepacs:b34860d87115&lt;/a&gt;  ncabatoff   PACS-4-4-1  37348 fix: Add new DMS method to fetch newer requests for a single owner.  Have LDS invoke that&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/045706df2b5d&quot; target=&quot;_blank&quot;&gt;intelepacs:045706df2b5d&lt;/a&gt;  ncabatoff   trunk       37348 fix: Add new DMS method to fetch newer requests for a single owner.  Have LDS invoke that&lt;/p&gt;</comment>
                            <comment id="290337" author="fzaryouh" created="Fri, 27 Jul 2012 14:13:00 -0400"  >&lt;p&gt;Reproduced with RPMs: &lt;br/&gt;
Verified with RPMs: LocalDicomService-4.4.1.P54-ims01&lt;br/&gt;
Verification steps: &lt;/p&gt;

&lt;p&gt;I did exactly what Nick did in comment #5. &lt;br/&gt;
It&apos;s the most easy and efficient way to reproduce it.&lt;/p&gt;

&lt;p&gt;Test cases added or modified: TR&lt;br/&gt;
End result: verified.&lt;/p&gt;</comment>
                            <comment id="290338" author="rami.bechara" created="Thu, 23 Aug 2012 11:02:16 -0400"  >&lt;p&gt;Included in PACS-4-4-1-R1&lt;/p&gt;</comment>
                            <comment id="290339" author="rami.bechara" created="Mon, 24 Dec 2012 10:21:51 -0500"  >&lt;p&gt;Included in PACS-4-5-1-R1&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                    <customfield id="customfield_13806" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Availability Impact</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14409"><![CDATA[BlocksPLA]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37348</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13135"><![CDATA[DicomMasterService]]></customfieldvalue>
    <customfieldvalue key="13268"><![CDATA[LocalDicomService]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzr5jr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_13801" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Reported By Tester?</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14404"><![CDATA[Yes]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10801"><![CDATA[CRITICAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-55714] CorrectPatientInfo is looking for ImageServer sections for a web server without image storage</title>
                <link>https://jira.intelerad.com/browse/IP-55714</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;RPM Version               : CorrectPatientInfo-4.4.1.P4-ims01.noarch&lt;br/&gt;
EW                        : &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=253490&quot; target=&quot;_blank&quot;&gt;EW253490&lt;/a&gt;&lt;br/&gt;
Minimal steps to reproduce: Install a web server without image storage&lt;br/&gt;
Expected behaviour        : Should work&lt;br/&gt;
What happened instead?    : Doesn&apos;t&lt;/p&gt;

&lt;p&gt;Errors for qa441web1.dyn.intelerad:&lt;br/&gt;
  Error compiling control files:&lt;br/&gt;
    compileControlFiles: error: /usr/local/tools/control_files/source/requestDeletion.cfg, lines 10-9: invalid redirect: no such section &lt;span class=&quot;error&quot;&gt;&amp;#91;ImageServer_qa441web1.dyn.intelerad&amp;#93;&lt;/span&gt; in /usr/local/tools/control_files/source/PACS.cfg&lt;br/&gt;
  compileControlFiles: error: compilation failed, no files were modified&lt;/p&gt;

&lt;p&gt;pacsConfigurator did not add an ImageServer section for this server, which seems to be the correct behaviour.  How ever, the source control file still expects it.&lt;/p&gt;</description>
            <key id="87968">IP-55714</key>
            <summary>CorrectPatientInfo is looking for ImageServer sections for a web server without image storage</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="ncabatoff">Nick Cabatoff</assignee>
                                    <reporter username="abeauregard">Alexandre Beauregard</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 May 2012 18:27:04 -0400</created>
                <updated>Fri, 26 Apr 2019 14:04:40 -0400</updated>
                            <resolved>Mon, 24 Dec 2012 10:24:00 -0500</resolved>
                                    <version>4-4-1</version>
                                    <fixVersion>4-4-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="285447" author="build" created="Thu, 10 May 2012 13:03:31 -0400"  >&lt;p&gt;Released by ncabatoff to master at 2012-05-10 13:03:27 (push 14108):&lt;br/&gt;
  PACS-4-4-1 (fix)        (previous build: PACS-4-4-1-P4)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-4-2-A1)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/0ecdae91d0fc&quot; target=&quot;_blank&quot;&gt;intelepacs:0ecdae91d0fc&lt;/a&gt;  ncabatoff   PACS-4-4-1  36415 fix: Provide a default (empty) value for MY_AE_TITLE to make compileControlFiles happy.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/4f7f08ad31ae&quot; target=&quot;_blank&quot;&gt;intelepacs:4f7f08ad31ae&lt;/a&gt;  ncabatoff   trunk       36415 fix: Provide a default (empty) value for MY_AE_TITLE to make compileControlFiles happy.&lt;/p&gt;</comment>
                            <comment id="285448" author="nick.cabatoff" created="Thu, 10 May 2012 13:10:06 -0400"  >&lt;p&gt;Description of the solution: Allow for &lt;span class=&quot;error&quot;&gt;&amp;#91;ImageServer_$hostname&amp;#93;&lt;/span&gt; to be absent in pacsCore.cfg.  If we have no value for MY_AE_TITLE we simply disallow local deletion requests.&lt;/p&gt;

&lt;p&gt;Tests executed: Verified that global and local deletions could be requested with MY_AE_TITLE populated.  Verified with MY_AE_TITLE empty, global deletions could still be requested, local deletions resulted in an error.&lt;/p&gt;

&lt;p&gt;Unit tests added or modified: None&lt;/p&gt;</comment>
                            <comment id="285449" author="build" created="Thu, 10 May 2012 19:37:42 -0400"  >&lt;p&gt;Released by fdelisle to master at 2012-05-10 19:37:39 (push 14127):&lt;br/&gt;
  PACS-4-4-1.lwt (fix)        (previous build: None)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/74c79fac4416&quot; target=&quot;_blank&quot;&gt;intelepacs:74c79fac4416&lt;/a&gt;  fdelisle    PACS-4-4-1.lwt  36108 fix,36404 fix,36408 fix,36410 fix,29982 fix,36124 fix,35922 fix,36279 fix,32476 fix,36415 fix,36378 fix,34201 fix,36262 fix,34801 fix,31680 fix,35771 fix,35904 ongoing,35903 ongoing,17924 ongoing: merge from PACS-4-4-1&lt;/p&gt;</comment>
                            <comment id="285450" author="rami.bechara" created="Thu, 23 Aug 2012 11:03:36 -0400"  >&lt;p&gt;Included in PACS-4-4-1-R1&lt;/p&gt;</comment>
                            <comment id="285451" author="adron.nguyen" created="Thu, 20 Dec 2012 10:56:24 -0500"  >&lt;p&gt;Reproduced with RPMs: Couldn&apos;t reproduce since 4.4.1.P4 was no longer available on the build repo.  Also, the first release available for 4-4-1-R1 is P66.&lt;/p&gt;

&lt;p&gt;Verified with RPMs: &lt;br/&gt;
1. Configure the PACS through distribute.cfg such that the server does not have an image storage.&lt;br/&gt;
 -&amp;gt; I used the following configuration on qa451std1 single server PACS which ended up removing image_server, DicomMaster and a bunch of other RPMs.&lt;br/&gt;
 -&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;HOSTLIST&amp;#93;&lt;/span&gt;&lt;br/&gt;
    qa451std1.dyn.intelerad                          = AccountingServer, AnalyticsServer, CentralDatabaseBackup, DistributionServer, IheAuditTrailServer, ModalityWorklistServer, Notification, ReportDistributionServer, Result    sWorkflowServer, RisGatewayWithDb, RisPrefetchServer, StatisticsServer, WebServerWithRisUnidirectionalAndRWLAndAudioServer&lt;/p&gt;

&lt;p&gt; -&amp;gt; Alexandre recommended the following configuration but distribute wasn&apos;t able to process it properly and returned an error&lt;br/&gt;
 qa451std1.dyn.intelerad                          = ReportDistributionServer, ResultsWorkflowServer, WebServerWithRisUnidirectionalAndRWLAndAudioServer&lt;/p&gt;

&lt;p&gt; Error returned:&lt;br/&gt;
Are you sure you want to take action on ALL servers? &lt;span class=&quot;error&quot;&gt;&amp;#91;yes/NO&amp;#93;&lt;/span&gt; yes&lt;br/&gt;
Loading and verifying control file data...&lt;br/&gt;
This program MUST be run from one of&lt;/p&gt;

&lt;p&gt;See /usr/local/Intelerad/upgrade/usr/local/tools/src/PACSinstall/log/PACSdistribute.log for details&lt;/p&gt;

&lt;p&gt;Alex explained that this is because the server type DistributionServer is required.  Anyhow, the first configuration I used properly removes the required RPMs and makes it look like a server without image storage.&lt;/p&gt;

&lt;p&gt;2. Configure pacsCore.cfg by removing &lt;span class=&quot;error&quot;&gt;&amp;#91;ImageServer_${long_localhost}&amp;#93;&lt;/span&gt; section and all of its related keys.&lt;/p&gt;

&lt;p&gt;3. Distribute and restart the PACS&lt;/p&gt;

&lt;p&gt;4. Check for any compileControlFiles error&lt;br/&gt;
 -&amp;gt; There are no compileControlFiles errors.&lt;/p&gt;


&lt;p&gt;Verification steps: Tests passed.  Marking as verified.&lt;/p&gt;

&lt;p&gt;Test cases added or modified: None needed.  These compileControlFiles errors are usually a one-off or one-time fix with very little or no chances of regression.&lt;/p&gt;

&lt;p&gt;End result: Marking as verified&lt;/p&gt;</comment>
                            <comment id="285452" author="rami.bechara" created="Mon, 24 Dec 2012 10:24:49 -0500"  >&lt;p&gt;Included in PACS-4-5-1-R1&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36415</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13053"><![CDATA[CorrectPatientInfo]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzr13b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10802"><![CDATA[MAJOR]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-53513] PatientSearchLibrary: (GSPS) Add the ability to process extra information of studies and series search results</title>
                <link>https://jira.intelerad.com/browse/IP-53513</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;This slip covers work that is part of the wiki:InteleViewer/Design/ThirdPartyPresentationStates project.&lt;/p&gt;

&lt;p&gt;Under &lt;a href=&quot;https://jira.intelerad.com/browse/IP-53453&quot; title=&quot;IB: add support for 3rd party presentation states in the Search servlet&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-53453&quot;&gt;&lt;del&gt;IP-53453&lt;/del&gt;&lt;/a&gt;, IB&apos;s Search servlet was improved in order to return extra information:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;For studies, return the patient date of birth.&lt;/li&gt;
	&lt;li&gt;For series, return the series type.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The purpose of this slip is to add to the PatientSearchLibrary the ability to use the new information provided by the Search servlet.&lt;/p&gt;</description>
            <key id="85767">IP-53513</key>
            <summary>PatientSearchLibrary: (GSPS) Add the ability to process extra information of studies and series search results</summary>
                <type id="10905" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13911&amp;avatarType=issuetype">Enhancement</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="inteleviewer">InteleViewer Team</assignee>
                                    <reporter username="victor">Victor Rodriguez</reporter>
                        <labels>
                    </labels>
                <created>Fri, 30 Sep 2011 10:24:00 -0400</created>
                <updated>Mon, 25 Mar 2019 14:10:11 -0400</updated>
                            <resolved>Tue, 12 Feb 2013 00:10:00 -0500</resolved>
                                    <version>4-3-2</version>
                                    <fixVersion>4-3-2</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="269606" author="victor" created="Fri, 30 Sep 2011 11:26:27 -0400"  >&lt;p&gt;Description of the solution: &lt;/p&gt;

&lt;p&gt;  33752 ongoing: Factor out PatientSearchLibrary.Data.&lt;/p&gt;
{Study,Series}.Key to their own classes.&lt;br/&gt;
  &lt;br/&gt;
  PACS/PatientSearch/PatientSearchLibrary&lt;br/&gt;
  =======================================&lt;br/&gt;
  &lt;br/&gt;
  Study, StudyKey:&lt;br/&gt;
  &lt;br/&gt;
    * Rename class Study.Key to StudyKey and move it to its own file.&lt;br/&gt;
  &lt;br/&gt;
  Series, SeriesKey:&lt;br/&gt;
  &lt;br/&gt;
    * Rename class Series.Key to SeriesKey and move it to its own file.&lt;br/&gt;
  &lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;reviewer: ylabidi&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
  33752 fix: Make Study and Series constructors take a list of keys.&lt;br/&gt;
  &lt;br/&gt;
  PACS/PatientSearch/PatientSearchLibrary&lt;br/&gt;
  =======================================&lt;br/&gt;
  &lt;br/&gt;
  Study, Series:&lt;br/&gt;
  &lt;br/&gt;
    * Change the constructor signature to add as an argument a list of keys&lt;br/&gt;
      specifying the columns included in the data string to be parsed.&lt;br/&gt;
  &lt;br/&gt;
    * Add static factory methods parseUnversioned(), which creates a Study and&lt;br/&gt;
      Series objects using the previous signature of the constructors.&lt;br/&gt;
  &lt;br/&gt;
  StudyKey:&lt;br/&gt;
  &lt;br/&gt;
    * Add two constant lists of keys: STUDY_KEYS_UNVERSIONED, and&lt;br/&gt;
      STUDY_KEYS_V1. The first one reflects the columns returned by pre &lt;a href=&quot;https://jira.intelerad.com/browse/IP-53453&quot; title=&quot;IB: add support for 3rd party presentation states in the Search servlet&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-53453&quot;&gt;&lt;del&gt;IP-53453&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
      Search servlets, while the second reflects the augmented columns.&lt;br/&gt;
  &lt;br/&gt;
    * Add static utility methods to encode and decode keys in a string (for use as&lt;br/&gt;
      headers in the Search servlet results).&lt;br/&gt;
  &lt;br/&gt;
  SeriesKey:&lt;br/&gt;
  &lt;br/&gt;
    * Add two constant lists of keys: SERIES_KEYS_UNVERSIONED, and&lt;br/&gt;
      SERIES_KEYS_V1. The first one reflects the columns returned by pre &lt;a href=&quot;https://jira.intelerad.com/browse/IP-53453&quot; title=&quot;IB: add support for 3rd party presentation states in the Search servlet&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-53453&quot;&gt;&lt;del&gt;IP-53453&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
      Search servlets, while the second reflects the augmented columns.&lt;br/&gt;
  &lt;br/&gt;
  PacsSearchClient:&lt;br/&gt;
  &lt;br/&gt;
    * Update method parseStudiesAndSeries() to account for the possible presence&lt;br/&gt;
      of headers for the study and series results.&lt;br/&gt;
  &lt;br/&gt;
  TestAll, TestPacsSearchClient:&lt;br/&gt;
  &lt;br/&gt;
    * Add new test suite TestPacsSearchClient. The unit tests in this suite test&lt;br/&gt;
      that old and new Search servlet results are correctly parsed.&lt;br/&gt;
  &lt;br/&gt;
  &lt;br/&gt;
  Viewer/Client&lt;br/&gt;
  =============&lt;br/&gt;
  &lt;br/&gt;
  TestInteleViewerSeriesDisplay:&lt;br/&gt;
  &lt;br/&gt;
    * Use {Study,Series}
&lt;p&gt;.parseUnversioned() factory methods instead of the old&lt;br/&gt;
      constructors.&lt;/p&gt;


&lt;p&gt;  Web/InteleBrowser&lt;br/&gt;
  =================&lt;/p&gt;

&lt;p&gt;  INTELEBROWSER.filelist:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Add PACS/PatientSearch/PatientSearchLibrary&apos;s StudyKey and SeriesKey java&lt;br/&gt;
      files as compile-time dependencies.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;  Search:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Rather than hard-coded strings, use the StudyKey and SeriesKey constants to&lt;br/&gt;
      generate the search results headers.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;reviewer: ylabidi&amp;#93;&lt;/span&gt;&lt;/p&gt;


&lt;p&gt;  33752 fix: Fix calls from PacsSeriesMoverClient to &lt;/p&gt;
{Study,Series}
&lt;p&gt;.parseUnversioned().&lt;/p&gt;

&lt;p&gt;  PACS/PatientSearch/PatientSearchLibrary&lt;br/&gt;
  =======================================&lt;/p&gt;

&lt;p&gt;  PacsSeriesMoverClient:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Method getLocationForSeriesUids() uses a bogus string to create a Study&lt;br/&gt;
      object, and a quasi-bogus one to create Series objects (only the series UIDs&lt;br/&gt;
      are correct). The number of values in the pipe-separated string was wrong,&lt;br/&gt;
      so fix it, as the parseUnversioned() methods now throw an exception when the&lt;br/&gt;
      number of values is wrong.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;reviewer: ylabidi&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Tests executed: &lt;/p&gt;

&lt;p&gt;  Run all unit tests in the affected projects.&lt;/p&gt;

&lt;p&gt;  Run IV and perform a search. Verified that the search results are correctly displayed, and that IV can successfully load studies. (Note however that at this point IV is still incapable of requesting augmented results, that functionality will be added in a later slip).&lt;/p&gt;


&lt;p&gt;Unit tests added or modified: &lt;/p&gt;

&lt;p&gt;  TestPacsSearchClient&lt;br/&gt;
  TestSeriesMoverClient&lt;br/&gt;
  TestInteleViewerSeriesDisplay&lt;/p&gt;


&lt;p&gt;The following changesets were committed to PACS-4-3-2 in devel-gsps: &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/f8201be3547a&quot; target=&quot;_blank&quot;&gt;intelepacs:f8201be3547a&lt;/a&gt;, &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/f43b3c23f0b4&quot; target=&quot;_blank&quot;&gt;intelepacs:f43b3c23f0b4&lt;/a&gt; and &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/ff02f274a44c&quot; target=&quot;_blank&quot;&gt;intelepacs:ff02f274a44c&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="269607" author="build" created="Thu, 1 Dec 2011 16:34:10 -0500"  >&lt;p&gt;Released by jan to master at 2011-12-01 16:34:04 (push 10685):&lt;br/&gt;
  PACS-4-3-2 (fix)        (previous build: PACS-4-3-2-P33)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-3-4-A1)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/f8201be3547a&quot; target=&quot;_blank&quot;&gt;intelepacs:f8201be3547a&lt;/a&gt;  PACS-4-3-2  33752 ongoing: Factor out PatientSearchLibrary.Data.&lt;/p&gt;
{Study,Series}.Key to their own classes.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/f43b3c23f0b4&quot; target=&quot;_blank&quot;&gt;intelepacs:f43b3c23f0b4&lt;/a&gt;  PACS-4-3-2  33752 fix: Make Study and Series constructors take a list of keys.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/ff02f274a44c&quot; target=&quot;_blank&quot;&gt;intelepacs:ff02f274a44c&lt;/a&gt;  PACS-4-3-2  33752 fix: Fix calls from PacsSeriesMoverClient to {Study,Series}
&lt;p&gt;.parseUnversioned().&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/e4ca34a577ad&quot; target=&quot;_blank&quot;&gt;intelepacs:e4ca34a577ad&lt;/a&gt;  trunk       33351 fix,33506 fix,33640 fix,33680 fix,33752 fix,7829 fix,33905 fix,33750 fix,33278 fix,33639 fix,34027 fix,33903 fix,34042 fix,34091 fix,33276 fix,34152 fix,34243 fix,34341 fix: merge from PACS-4-3-2&lt;/p&gt;</comment>
                            <comment id="269608" author="costa.galanis" created="Tue, 13 Dec 2011 10:57:48 -0500"  >&lt;p&gt;Verified via new feature testing for the 3rd Party GSPS project.&lt;/p&gt;

&lt;p&gt;Test Plan -&amp;gt; &lt;a href=&quot;http://testrail.intelerad.com/testrail/index.php?/suites/view/294&quot; target=&quot;_blank&quot;&gt;TRS:294&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="269609" author="rami.bechara" created="Tue, 24 Jan 2012 16:20:30 -0500"  >&lt;p&gt;Included in PACS-4-3-2-R3&lt;/p&gt;</comment>
                            <comment id="269610" author="rami.bechara" created="Tue, 24 Jan 2012 16:20:37 -0500"  >&lt;p&gt;Included in IV-4-3-2-R3 (4-3-2-P44)&lt;/p&gt;</comment>
                            <comment id="269611" author="jmartin" created="Fri, 27 Jan 2012 18:29:47 -0500"  >&lt;p&gt;&lt;br/&gt;
No doc impact on the 4-3-2 R3 IV release notes (IVEN432RN-O Issue 003).&lt;/p&gt;</comment>
                            <comment id="269612" author="iplokar" created="Sun, 12 Feb 2012 21:05:58 -0500"  >&lt;p&gt;Triaged for the PACS-4-3-2 release notes (part#: IPEN432RN-O Issue 002). No doc impact.&lt;/p&gt;</comment>
                            <comment id="269613" author="lucie" created="Wed, 11 Apr 2012 18:08:22 -0400"  >&lt;p&gt;Included in IV-4-3-4-R1&lt;/p&gt;</comment>
                            <comment id="269614" author="rami.bechara" created="Thu, 23 Aug 2012 11:01:16 -0400"  >&lt;p&gt;Included in PACS-4-4-1-R1&lt;/p&gt;</comment>
                            <comment id="269615" author="rami.bechara" created="Tue, 12 Feb 2013 12:10:31 -0500"  >&lt;p&gt;Included in PACS-4-3-4-R1&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Blocks</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="85352">IP-53098</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="85904">IP-53650</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="85707">IP-53453</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33752</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13209"><![CDATA[InteleBrowser]]></customfieldvalue>
    <customfieldvalue key="13232"><![CDATA[InteleViewer]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzqnb3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12102" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Release Notes</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12017"><![CDATA[Approved]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10804"><![CDATA[INTERNAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-52880] PCEH:  Fails to re-calculate access group on org/accession change to offline study</title>
                <link>https://jira.intelerad.com/browse/IP-52880</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;RPM Version               : PatientCorrectionEventHandler-4.2.1.P164-ims01&lt;br/&gt;
EW                        : &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=223207&quot; target=&quot;_blank&quot;&gt;EW223207&lt;/a&gt;&lt;br/&gt;
Minimal steps to reproduce: &lt;/p&gt;

&lt;p&gt;  1.  Have an offline study, belonging to org. &quot;A&quot;&lt;br/&gt;
  2.  Correct the offline study and change the org. code to &quot;B&quot;&lt;/p&gt;

&lt;p&gt;Expected behaviour        : &lt;/p&gt;

&lt;p&gt;  The org. code changes, &lt;b&gt;and&lt;/b&gt; access groups are recalculated to reflect the change in org. code.&lt;/p&gt;

&lt;p&gt;What happened instead?    : &lt;/p&gt;

&lt;p&gt;  The org. code changes, but access groups are not recalculated.&lt;/p&gt;

&lt;p&gt;===&lt;/p&gt;

&lt;p&gt;Jan and Steve and I looked at this, and at seems to come down to the fact that we follow a different path in the code for online vs. offline studies.&lt;/p&gt;

&lt;p&gt;From the PCEH logs we can see the following:&lt;/p&gt;

&lt;p&gt;===&lt;/p&gt;

&lt;p&gt;(...)&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-07-29 08:19:09.015 PCEH sotp10mst1.sot (TRACE)&amp;#93;&lt;/span&gt; No online location for series 1.2.840.113619.2.176.3596.6358444.7426.1199794427.2 no deletionsare required. The series files do not need to be corrected&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-07-29 08:19:09.017 PCEH sotp10mst1.sot (TRACE)&amp;#93;&lt;/span&gt; No online location for series 1.2.840.113619.2.176.3596.6358444.7426.1199794427.3 no deletionsare required. The series files do not need to be corrected&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-07-29 08:19:09.018 PCEH sotp10mst1.sot (TRACE)&amp;#93;&lt;/span&gt; No online location for series 1.2.840.113619.2.5.19211724.1199880223.99.5 no deletions arerequired. The series files do not need to be corrected&lt;br/&gt;
...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-07-29 08:19:09.134 PCEH sotp10mst1.sot (TRACE)&amp;#93;&lt;/span&gt; All series for study 1.2.840.113619.2.176.3596.6358444.7426.1199794426.997 are offline. Modifying DicomMaster\&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-07-29 08:19:09.134 PCEH sotp10mst1.sot (TRACE)&amp;#93;&lt;/span&gt; Updating DicomMasters using the following command:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;0:/usr/local/tools/pctMdbUpdater|1:-c|2:98681&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-07-29 08:19:09.900 PCEH sotp10mst1.sot (TRACE)&amp;#93;&lt;/span&gt; Waiting for series to be corrected&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-07-29 08:19:09.900 PCEH sotp10mst1.sot (TRACE)&amp;#93;&lt;/span&gt; Retrieving next work item for PatientCorrection number 98681 and instance type &apos;STUDY&apos;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-07-29 08:19:09.902 PCEH sotp10mst1.sot (TRACE)&amp;#93;&lt;/span&gt; Correction 98681 successfully fixed on AEs (empty set)&lt;br/&gt;
===&lt;/p&gt;

&lt;p&gt;So here we see that we are updating DicomMaster(s) directly using pctMdbUpdater, thus bypassing UpdateMasterDB/DicomMasterService/etc which would normally handle the access calculations.&lt;/p&gt;

&lt;p&gt;From the code of PatientCorrectionEventHandler.java:&lt;/p&gt;

&lt;p&gt;===&lt;br/&gt;
if ( size == offline ) &lt;br/&gt;
            {&lt;br/&gt;
                mDebug.printTrace( &quot;All series for study &quot; + studyInstanceUid + &quot; are offline.  Modifying DicomMaster&quot; );&lt;br/&gt;
                if ( !updateMasterDatabase( correctionNumber ) )&lt;/p&gt;
                {
                    mDebug.printError( &quot;Failed to update DicomMaster.  Databases may be out of sync!&quot; );
                    return null;
                }
&lt;p&gt;            }&lt;br/&gt;
            else&lt;br/&gt;
            {&lt;br/&gt;
                for ( Iterator i = aeRequiringCorrections.iterator(); i.hasNext(); ) &lt;br/&gt;
                {&lt;br/&gt;
                    final String aeTitle = (String) i.next();&lt;br/&gt;
                    try &lt;/p&gt;
                    {
                        mDebug.printTrace( &quot;Scheduling correction for studyInstanceUid &quot;
                                           + studyInstanceUid + &quot; on &quot; + aeTitle );
                        mDicomMaster.insertSeriesCorrectionFixEvent( correctionNumber, studyInstanceUid, aeTitle );
                    }
&lt;p&gt;                    catch ( SQLException se )&lt;/p&gt;
                    {
                        mDebug.printError( &quot;Failed to insert a series correction event for study: &quot; + studyInstanceUid + &quot; for fixing on AE: &quot; + aeTitle );
                        mDebug.printStackTrace( se );
                        return null;
                    }
&lt;p&gt;                }&lt;br/&gt;
                signalSeriesCorrectionEventHandler( aeRequiringCorrections );&lt;br/&gt;
            }&lt;br/&gt;
===&lt;/p&gt;

&lt;p&gt;and:&lt;/p&gt;

&lt;p&gt;===&lt;br/&gt;
    private boolean updateMasterDatabase( final int correctionNumber )&lt;br/&gt;
    {&lt;br/&gt;
        boolean success = true;&lt;br/&gt;
        final String execString[] = buildRuntime( correctionNumber, mControl.getCentralHost(), mControl.getSiteId() );&lt;/p&gt;

&lt;p&gt;        mDebug.printTrace( &quot;Updating DicomMasters using the following command:\n&quot; + ToString.array( execString ) );&lt;/p&gt;

&lt;p&gt;(...)&lt;/p&gt;

&lt;p&gt;===&lt;/p&gt;

&lt;p&gt;So we are simply using pctMdbUpdater to update DicomMaster for offline studies, otherwise we go ahead and do the actual series corrections, which would trigger UpdateMasterDB/DicomMasterService along the way.  So pctMdbUpdater should be talking to DicomMasterService to do its updates in order to ensure all the usual business logic takes place along the way.&lt;/p&gt;</description>
            <key id="85134">IP-52880</key>
            <summary>PCEH:  Fails to re-calculate access group on org/accession change to offline study</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="ldegruchy">Luke de Gruchy</assignee>
                                    <reporter username="jmason">John Mason</reporter>
                        <labels>
                            <label>esc-exclude</label>
                    </labels>
                <created>Fri, 29 Jul 2011 17:04:02 -0400</created>
                <updated>Fri, 26 Apr 2019 14:05:56 -0400</updated>
                            <resolved>Tue, 17 Jun 2014 11:01:00 -0400</resolved>
                                    <version>4-2-1</version>
                                    <fixVersion>4-2-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="264608" author="build" created="Mon, 20 Aug 2012 08:57:01 -0400"  >&lt;p&gt;Released by ldegruchy to master at 2012-08-20 08:56:56 (push 16175):&lt;br/&gt;
  PACS-4-2-1 (fix)        (previous build: PACS-4-2-1-P370)&lt;br/&gt;
  PACS-4-2-4 (fix)        (previous build: PACS-4-2-4-P111)&lt;br/&gt;
  PACS-4-3-1 (fix)        (previous build: PACS-4-3-1-P326)&lt;br/&gt;
  PACS-4-3-2 (fix)        (previous build: PACS-4-3-2-P73)&lt;br/&gt;
  PACS-4-3-4 (fix)        (previous build: PACS-4-3-4-P114)&lt;br/&gt;
  PACS-4-4-1 (dummy)      (previous build: PACS-4-4-1-P77)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/dc8b4f8f50e2&quot; target=&quot;_blank&quot;&gt;intelepacs:dc8b4f8f50e2&lt;/a&gt;  ldegruchy   PACS-4-2-1  33008 fix: Call DMS to recalculate access codes for offline studies from PctMdbUpdater.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/974069adfbed&quot; target=&quot;_blank&quot;&gt;intelepacs:974069adfbed&lt;/a&gt;  ldegruchy   PACS-4-2-4  33008 fix: Call DMS to recalculate access codes for offline studies from PctMdbUpdater.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/5b73cb9e5801&quot; target=&quot;_blank&quot;&gt;intelepacs:5b73cb9e5801&lt;/a&gt;  ldegruchy   PACS-4-3-1  33008 fix: Call DMS to recalculate access codes for offline studies from PctMdbUpdater.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/4c4cc93132da&quot; target=&quot;_blank&quot;&gt;intelepacs:4c4cc93132da&lt;/a&gt;  ldegruchy   PACS-4-3-2  33008 fix: Call DMS to recalculate access codes for offline studies from PctMdbUpdater.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/f5142700b846&quot; target=&quot;_blank&quot;&gt;intelepacs:f5142700b846&lt;/a&gt;  ldegruchy   PACS-4-3-4  33008 fix: Call DMS to recalculate access codes for offline studies from PctMdbUpdater.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/77814938c412&quot; target=&quot;_blank&quot;&gt;intelepacs:77814938c412&lt;/a&gt;  ldegruchy   PACS-4-4-1  33008 dummy: dummy merge from PACS-4-3-4&lt;/p&gt;</comment>
                            <comment id="264609" author="build" created="Mon, 20 Aug 2012 09:22:31 -0400"  >&lt;p&gt;Released by ldegruchy to master at 2012-08-20 09:22:29 (push 16176):&lt;br/&gt;
  PACS-4-3-1 (fix)        (previous build: PACS-4-3-1-P326)&lt;br/&gt;
  PACS-4-3-2 (fix)        (previous build: PACS-4-3-2-P73)&lt;br/&gt;
  PACS-4-3-4 (fix)        (previous build: PACS-4-3-4-P114)&lt;br/&gt;
  PACS-4-4-1 (dummy)      (previous build: PACS-4-4-1-P77)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/ba91b4d3c26f&quot; target=&quot;_blank&quot;&gt;intelepacs:ba91b4d3c26f&lt;/a&gt;  ldegruchy   PACS-4-3-1  33008 fix: Fix compile error from 4-3-1 and up.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/f1cd5c2a86d7&quot; target=&quot;_blank&quot;&gt;intelepacs:f1cd5c2a86d7&lt;/a&gt;  ldegruchy   PACS-4-3-2  33008 fix: Fix compile error from 4-3-1 and up.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/2b6bdd2bf640&quot; target=&quot;_blank&quot;&gt;intelepacs:2b6bdd2bf640&lt;/a&gt;  ldegruchy   PACS-4-3-4  33008 fix: Fix compile error from 4-3-1 and up.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/0712b341d0a3&quot; target=&quot;_blank&quot;&gt;intelepacs:0712b341d0a3&lt;/a&gt;  ldegruchy   PACS-4-4-1  33008 dummy: dummy merge from PACS-4-3-4&lt;/p&gt;</comment>
                            <comment id="264610" author="luke.degruchy" created="Mon, 20 Aug 2012 09:47:29 -0400"  >&lt;p&gt;Description of the solution:  Add code to PctMdbUpdater to call the DicomMasterService Hessian service to request a recalculation of access codes.&lt;/p&gt;

&lt;p&gt;Tests executed: On a 441 VM:&lt;/p&gt;

&lt;p&gt;1) Create normal study sending to normal AE title.&lt;br/&gt;
2) Add archive(NL_ARCH) AE title with UPD_AE_STATUS = 5 and isUp 1.&lt;br/&gt;
3) Manual SQL insert for the study&apos;s series id and archive AE title in DicomMaster.SeriesLocation&lt;br/&gt;
4) Delete study --dellocal&lt;br/&gt;
	delstudybyUID.pl --dellocal &lt;/p&gt;
{study ID} &lt;br/&gt;
5) correctPatientInfo to change the org code&lt;br/&gt;
	correctPatientInfo -usr admin -site {new org code}  {study ID}
&lt;p&gt;6) manageAccessCodes --study &lt;/p&gt;
{study id}
&lt;p&gt;	&amp;gt;&amp;gt;&amp;gt; verify that the org code is the new org code, not the old org code.  Before this fix, manageAccessCodes would return the old org code.&lt;/p&gt;

&lt;p&gt;Unit tests added or modified: N/A&lt;/p&gt;</comment>
                            <comment id="264611" author="luke.degruchy" created="Wed, 5 Sep 2012 16:17:48 -0400"  >&lt;p&gt;To be clear, this fix applies only to the legacy corrections framework from 4-2-1 to 4-3-4.   This has not been applied to 4-4-1 and later releases.&lt;/p&gt;

&lt;p&gt;The reason this does not apply to 4-4-1 and onwards is because this problem is already resolved by the DCD changes in 4-4-1.&lt;/p&gt;</comment>
                            <comment id="264612" author="luke.degruchy" created="Tue, 18 Sep 2012 08:52:45 -0400"  >&lt;p&gt;Apologies.  I included the wrong RPM.  It&apos;s PctMdbUpdater, NOT PatientCorrectionEventHandler.&lt;/p&gt;</comment>
                            <comment id="264613" author="emma.lao" created="Tue, 18 Sep 2012 10:49:12 -0400"  >&lt;p&gt;Reproduced with RPMs: PctMdbUpdater-4.3.1.P193-ims01&lt;br/&gt;
Verified with RPMs: PctMdbUpdater-4.3.1.P328-ims01&lt;br/&gt;
Verification steps: please refer to &lt;a href=&quot;http://testrail.intelerad.com/testrail/index.php?/cases/view/30066&quot; target=&quot;_blank&quot;&gt;TRC:30066&lt;/a&gt;&lt;br/&gt;
Test cases added or modified: &lt;a href=&quot;http://testrail.intelerad.com/testrail/index.php?/runs/view/1240&quot; target=&quot;_blank&quot;&gt;TRR:1240&lt;/a&gt;&lt;br/&gt;
End result: verified&lt;/p&gt;</comment>
                            <comment id="264614" author="rami.bechara" created="Mon, 1 Oct 2012 11:44:52 -0400"  >&lt;p&gt;Included in PACS-4-3-4-R4&lt;/p&gt;</comment>
                            <comment id="264615" author="rami.bechara" created="Mon, 1 Oct 2012 17:02:22 -0400"  >&lt;p&gt;Included in PACS-4-3-1-R19&lt;/p&gt;</comment>
                            <comment id="264616" author="rami.bechara" created="Wed, 10 Oct 2012 18:00:06 -0400"  >&lt;p&gt;Included in PACS-4-2-1-R26&lt;/p&gt;</comment>
                            <comment id="264617" author="rami.bechara" created="Wed, 10 Oct 2012 18:02:10 -0400"  >&lt;p&gt;Included in PACS-4-3-2-R10&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12603" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Affected Clients</customfieldname>
                        <customfieldvalues>
                                        <label>SOT</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33008</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13316"><![CDATA[PctMdbUpdater]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzqjen:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_11001" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>ServiceNow Case #</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>223207</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10801"><![CDATA[CRITICAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12116" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Test Case Status</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12048"><![CDATA[Added]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>


<item>
            <title>[IP-52410] SCEH: Accession number disappears from DICOM header when order is edited</title>
                <link>https://jira.intelerad.com/browse/IP-52410</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;RPM Version               : InteleBrowser-4.3.1.P76-ims01&lt;br/&gt;
                            RisOrderEntryModule-4.3.1.P76-ims01&lt;/p&gt;

&lt;p&gt;Minimal steps to reproduce: &lt;br/&gt;
1. Perform any patient correction. (example: using OET in IB)&lt;br/&gt;
2. Look at the study you just corrected.&lt;/p&gt;

&lt;p&gt;Expected behaviour        : All associated images have their DICOM header updated with the new changes that were committed to the order.&lt;/p&gt;

&lt;p&gt;What happened instead?    : All associated images have their DICOM header updated with the new changes, but their accession number is wiped out:&lt;/p&gt;

&lt;p&gt;(0010,0010) PatientName      PN    # 10         1        &lt;span class=&quot;error&quot;&gt;&amp;#91;SMITH^JANE&amp;#93;&lt;/span&gt;&lt;br/&gt;
(0010,0020) PatientID        LO    # 10         1        &lt;span class=&quot;error&quot;&gt;&amp;#91;ADRON57338&amp;#93;&lt;/span&gt;&lt;br/&gt;
(0008,0050) AccessionNumber  SH    # 0          0        []&lt;/p&gt;</description>
            <key id="84664">IP-52410</key>
            <summary>SCEH: Accession number disappears from DICOM header when order is edited</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="fpadilha">Fabio Padilha</assignee>
                                    <reporter username="anguyen">Adron Nguyen</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 Jun 2011 18:14:59 -0400</created>
                <updated>Mon, 25 Mar 2019 14:10:28 -0400</updated>
                            <resolved>Thu, 3 Nov 2011 17:45:00 -0400</resolved>
                                    <version>4-3-1</version>
                                    <fixVersion>4-3-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="260971" author="htrinh" created="Tue, 21 Jun 2011 10:03:16 -0400"  >&lt;p&gt;This only occurs on studies that have no postfix associated with them. Very similar to an Image Management issue found for LargeAccNum that was fixed in 431-P25 during feature implementation. See&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://groupware.intelerad.com/imswiki/ImageManagement/LargerAccNum/QaIssues#issue13&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://groupware.intelerad.com/imswiki/ImageManagement/LargerAccNum/QaIssues#issue13&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Sounds like a backend bug. Re-assigning to Image Management for investigation.&lt;/p&gt;
</comment>
                            <comment id="260972" author="costa.galanis" created="Thu, 23 Jun 2011 11:50:39 -0400"  >&lt;p&gt;I know it&apos;s already being worked on, but I&apos;m upping the severity on this bug because it&apos;s currently blocking an extremely large set of our Regression test cases.&lt;/p&gt;</comment>
                            <comment id="260973" author="fabio.padilha" created="Mon, 27 Jun 2011 11:43:06 -0400"  >&lt;p&gt;Description of the solution: &lt;/p&gt;

&lt;p&gt;Fix SCEH to only change AccNum and ImsPostFix when AccNum changes.&lt;br/&gt;
Remove option to black ImsPostFix.&lt;/p&gt;

&lt;p&gt;Tests executed: &lt;br/&gt;
Using IB, I issued a correction to change patient name and check DicomImage.PatientLevel and file system to make sure everything was corrected.&lt;/p&gt;

&lt;p&gt;Unit tests added or modified: &lt;br/&gt;
testNoChangesToPostFixOrAccNum&lt;br/&gt;
testUpdateDicomImageAccNumNotPresent&lt;br/&gt;
testCorrectionAccNumWithPostFixButDontMatch&lt;br/&gt;
testEmptyImsPostFixInFileAndLegacyCorrection&lt;/p&gt;</comment>
                            <comment id="260974" author="build" created="Mon, 27 Jun 2011 11:47:39 -0400"  >&lt;p&gt;Released by fpadilha to master at 2011-06-27 11:47:38 (push 7424):&lt;br/&gt;
  PACS-4-3-1 (fix)        (previous build: PACS-4-3-1-P85)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-3-2-A1)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/3476e750c85b&quot; target=&quot;_blank&quot;&gt;intelepacs:3476e750c85b&lt;/a&gt;  PACS-4-3-1  32486 fix: Fix SCEH to only check if AccNum&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/ca2e07a5ae92&quot; target=&quot;_blank&quot;&gt;intelepacs:ca2e07a5ae92&lt;/a&gt;  trunk       32486 fix: Fix SCEH to only check if AccNum&lt;/p&gt;</comment>
                            <comment id="260975" author="htrinh" created="Wed, 6 Jul 2011 16:45:04 -0400"  >&lt;p&gt;Reproduced with RPMs: SeriesCorrectionEventHandler-4.3.1.P85-ims01&lt;br/&gt;
Verified with RPMs: SeriesCorrectionEventHandler-4.3.1.P92-ims01&lt;br/&gt;
Verification steps: &lt;/p&gt;

&lt;p&gt;1. Send a study and order without a postfix to the PACS&lt;br/&gt;
2. Perform a correction by changing the patient name&lt;br/&gt;
3. Observe the accession is blanked&lt;br/&gt;
4. Upgrade the SCEH rpm&lt;br/&gt;
5. Perform steps 1 to 3&lt;br/&gt;
6. Observe the accession number is not blanked&lt;/p&gt;

&lt;p&gt;End result: Verified&lt;/p&gt;

&lt;p&gt;Note: Further verification of corrections is done or will be done in &lt;a href=&quot;https://jira.intelerad.com/browse/IP-52392&quot; title=&quot;IB - Patient Correction: dropdown for postfixes adds unnecessary complexity for clients who are not using postfixed accession numbers.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-52392&quot;&gt;&lt;del&gt;IP-52392&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://jira.intelerad.com/browse/IP-52218&quot; title=&quot;IB - Patient Correction: Changes in accession and/or postfix are not mapped correctly to DicomMaster/PatientCorrectionList&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-52218&quot;&gt;&lt;del&gt;IP-52218&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://jira.intelerad.com/browse/IP-52585&quot; title=&quot;IB: Cannot correct accession number without changing the site code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-52585&quot;&gt;&lt;del&gt;IP-52585&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="260976" author="rami.bechara" created="Thu, 3 Nov 2011 17:45:57 -0400"  >&lt;p&gt;Included in PACS-4-3-2-R1&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                    <customfield id="customfield_13806" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Availability Impact</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14409"><![CDATA[BlocksPLA]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32486</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13386"><![CDATA[SeriesCorrectionEventHandler]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzqgif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_13801" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Reported By Tester?</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14404"><![CDATA[Yes]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10801"><![CDATA[CRITICAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-51944] PCEH: CorrectPatientInfo accepts non post fixed AccNum greater than 16 chars</title>
                <link>https://jira.intelerad.com/browse/IP-51944</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;correctPatientInfo shouldn&apos;t accept non post fixed AccNum greater than 16 chars.&lt;/p&gt;</description>
            <key id="84198">IP-51944</key>
            <summary>PCEH: CorrectPatientInfo accepts non post fixed AccNum greater than 16 chars</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="fpadilha">Fabio Padilha</assignee>
                                    <reporter username="fpadilha">Fabio Padilha</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 May 2011 17:16:15 -0400</created>
                <updated>Fri, 26 Apr 2019 14:04:53 -0400</updated>
                            <resolved>Tue, 12 Feb 2013 00:13:00 -0500</resolved>
                                    <version>4-3-1</version>
                                    <fixVersion>4-3-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="257877" author="build" created="Wed, 18 May 2011 11:10:02 -0400"  >&lt;p&gt;Released by fpadilha to master at 2011-05-18 11:10:01 (push 6674):&lt;br/&gt;
  PACS-4-3-1 (fix)        (previous build: PACS-4-3-1-P25)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-2-5-A47)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/3abf6adb02f2&quot; target=&quot;_blank&quot;&gt;intelepacs:3abf6adb02f2&lt;/a&gt;  PACS-4-3-1  31934 fix: Fix CorrectPatientInfo to not accept non post fixed&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/e29649614e23&quot; target=&quot;_blank&quot;&gt;intelepacs:e29649614e23&lt;/a&gt;  trunk       31883 fix,31934 fix: merge from PACS-4-3-1&lt;/p&gt;</comment>
                            <comment id="257878" author="fabio.padilha" created="Wed, 18 May 2011 11:22:08 -0400"  >&lt;p&gt;Description of the solution: &lt;/p&gt;

&lt;p&gt;When CorrectPatientInfo is invoked, just after it process arguments, it verifies if non post fixed Accession Number is greater than 16 chars extracting ImsPostFix from the end of AccNum. It checks also if AccNum.endsWith( imsPostFix ).&lt;/p&gt;

&lt;p&gt;Tests executed: &lt;br/&gt;
 In my vmware, I invoked CorrectPatientInfo with the following arguments:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Post fixed AccNum shorter than 16 and no ImsPostFix ( no error )&lt;/li&gt;
	&lt;li&gt;Post fixed AccNum shorter than 16 and ImsPostFix ( no error )&lt;/li&gt;
	&lt;li&gt;Non post fixed AccNum larger than 16 ( error )&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Unit tests added or modified: &lt;br/&gt;
PACS/PatientCorrection/PatientCorrectionEventHandler/TestPatientCorrectionEventHandler.java&lt;/p&gt;</comment>
                            <comment id="257879" author="htrinh" created="Thu, 26 May 2011 15:08:10 -0400"  >&lt;p&gt;Reproduced with RPMs: &lt;br/&gt;
Verified with RPMs: CorrectPatientInfo-4.3.1.P27-ims01, InteleBrowser-4.3.1.P27-ims01, Hl7GatewayServer-4.3.1.P27-ims01&lt;br/&gt;
Verification steps: &lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Performed corrections for accessions+postfix with less than 16 characters, 16 characters and greater than 16&lt;/li&gt;
	&lt;li&gt;Performed corrections on accessions without postfix adding a postfix greater than 16 characters&lt;/li&gt;
	&lt;li&gt;Performed correction by removing a postfix from an accession less and greater than 16 characters&lt;/li&gt;
	&lt;li&gt;Performed correction by changing site, birth date, name, sex, rpid, StuinstUid, description, age, patId and institution name&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;End result: Verified&lt;/p&gt;

&lt;p&gt;Found &lt;a href=&quot;https://jira.intelerad.com/browse/IP-52081&quot; title=&quot;correctPatientInfo updating patient age value is not clearly defined&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-52081&quot;&gt;&lt;del&gt;IP-52081&lt;/del&gt;&lt;/a&gt; while verifying&lt;/p&gt;</comment>
                            <comment id="257880" author="build" created="Wed, 1 Jun 2011 16:40:23 -0400"  >&lt;p&gt;Released by andrew to stable at 2011-06-01 16:40:23 (push 6925):&lt;br/&gt;
  PACS-4-3-1 (fix)        (previous build: PACS-4-3-1-P45)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-2-5-A47)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/3abf6adb02f2&quot; target=&quot;_blank&quot;&gt;intelepacs:3abf6adb02f2&lt;/a&gt;  PACS-4-3-1  31934 fix: Fix CorrectPatientInfo to not accept non post fixed&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/e29649614e23&quot; target=&quot;_blank&quot;&gt;intelepacs:e29649614e23&lt;/a&gt;  trunk       31883 fix,31934 fix: merge from PACS-4-3-1&lt;/p&gt;</comment>
                            <comment id="257881" author="rami.bechara" created="Thu, 3 Nov 2011 17:46:34 -0400"  >&lt;p&gt;Included in PACS-4-3-2-R1&lt;/p&gt;</comment>
                            <comment id="257882" author="rami.bechara" created="Tue, 24 Jan 2012 16:20:13 -0500"  >&lt;p&gt;Included in PACS-4-3-2-R3&lt;/p&gt;</comment>
                            <comment id="257883" author="iplokar" created="Fri, 10 Feb 2012 13:41:47 -0500"  >&lt;p&gt;Triaged for the &lt;a href=&quot;https://jira.intelerad.com/browse/IP-4&quot; title=&quot;Receiving messages from Test application&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-4&quot;&gt;&lt;del&gt;IP-4&lt;/del&gt;&lt;/a&gt;-3-2 Release Notes (part#: IPEN432RN-O Issue 002). No doc impact.&lt;/p&gt;</comment>
                            <comment id="257884" author="rami.bechara" created="Thu, 23 Aug 2012 11:03:11 -0400"  >&lt;p&gt;Included in PACS-4-4-1-R1&lt;/p&gt;</comment>
                            <comment id="257885" author="rami.bechara" created="Tue, 12 Feb 2013 12:13:09 -0500"  >&lt;p&gt;Included in PACS-4-3-4-R1&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Blocks</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="83488">IP-51234</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31934</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13053"><![CDATA[CorrectPatientInfo]]></customfieldvalue>
    <customfieldvalue key="13183"><![CDATA[Hl7GatewayServer]]></customfieldvalue>
    <customfieldvalue key="13209"><![CDATA[InteleBrowser]]></customfieldvalue>
    <customfieldvalue key="13314"><![CDATA[PatientCorrectionEventHandler]]></customfieldvalue>
    <customfieldvalue key="13386"><![CDATA[SeriesCorrectionEventHandler]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzqdnb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10803"><![CDATA[MINOR]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-51894] SCEH: Inserts ImsPostFix tag into JDT dictionary but (group,element) is dynamic</title>
                <link>https://jira.intelerad.com/browse/IP-51894</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;In order to add ImsPostFix when correcting images in SCEH, JDT needs an entry in the dictionary to write with correct VR.&lt;br/&gt;
This entry will stay permanently in the dictionary which can result on multiples entries due to the way how DICOM works with private tags.&lt;br/&gt;
We evaluated and it turned out that it&apos;s not a big deal in SCEH but it&apos;s in IV.&lt;/p&gt;

&lt;p&gt;We have to change to make this behavior optional and only use it in SCEH.&lt;/p&gt;</description>
            <key id="84148">IP-51894</key>
            <summary>SCEH: Inserts ImsPostFix tag into JDT dictionary but (group,element) is dynamic</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="fpadilha">Fabio Padilha</assignee>
                                    <reporter username="fpadilha">Fabio Padilha</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 May 2011 10:53:28 -0400</created>
                <updated>Fri, 26 Apr 2019 14:04:51 -0400</updated>
                            <resolved>Tue, 12 Feb 2013 00:10:00 -0500</resolved>
                                    <version>4-3-1</version>
                                    <fixVersion>4-3-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="257479" author="build" created="Wed, 18 May 2011 11:10:02 -0400"  >&lt;p&gt;Released by fpadilha to master at 2011-05-18 11:10:01 (push 6674):&lt;br/&gt;
  PACS-4-3-1 (fix)        (previous build: PACS-4-3-1-P25)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-2-5-A47)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/4720157ead50&quot; target=&quot;_blank&quot;&gt;intelepacs:4720157ead50&lt;/a&gt;  trunk       31883 fix: Change PrivateElement to only add to JDT dictionary when&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/d0875fcb4e4d&quot; target=&quot;_blank&quot;&gt;intelepacs:d0875fcb4e4d&lt;/a&gt;  PACS-4-3-1  31883 fix: Change PrivateElement to only add to JDT dictionary when&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/e29649614e23&quot; target=&quot;_blank&quot;&gt;intelepacs:e29649614e23&lt;/a&gt;  trunk       31883 fix,31934 fix: merge from PACS-4-3-1&lt;/p&gt;</comment>
                            <comment id="257480" author="fabio.padilha" created="Wed, 18 May 2011 11:33:20 -0400"  >&lt;p&gt;Description of the solution: &lt;/p&gt;

&lt;p&gt; JDT doesn&apos;t work very well with DICOM private tags, therefore we have to add to JDT dictionary before inserting a new private tag to be able to use proper VR.&lt;br/&gt;
The problem is that the element of (group,element) in private tags are calculated dynamically. When different vendors use the same group for a particular private tag, they will share the same group, but they will use different prefixes for element.&lt;br/&gt;
Ex:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Group: 0x0011&lt;/li&gt;
	&lt;li&gt;Element: 0xXX10&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; if vendor Z wants to add a private tag with group 0x0011 but vendor Y already added with the same group. The first two hex numbers of element will differentiate between two vendors.&lt;/p&gt;

&lt;p&gt;Adding our private tags to JDT dictionary may result in others problems, like multiples entries for the same tag in dictionary, so I decided to do this only for ImsPostFix tag.&lt;/p&gt;


&lt;p&gt;Tests executed: &lt;br/&gt;
Issue a correction and check if the images have ImsPostFix with correct VR.&lt;/p&gt;

&lt;p&gt;Unit tests added or modified: &lt;br/&gt;
PACS/DICOM/Tools/Java/dicomtools/TestPrivateElement.java&lt;/p&gt;</comment>
                            <comment id="257481" author="build" created="Wed, 1 Jun 2011 16:40:23 -0400"  >&lt;p&gt;Released by andrew to stable at 2011-06-01 16:40:23 (push 6925):&lt;br/&gt;
  PACS-4-3-1 (fix)        (previous build: PACS-4-3-1-P45)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-2-5-A47)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/4720157ead50&quot; target=&quot;_blank&quot;&gt;intelepacs:4720157ead50&lt;/a&gt;  trunk       31883 fix: Change PrivateElement to only add to JDT dictionary when&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/d0875fcb4e4d&quot; target=&quot;_blank&quot;&gt;intelepacs:d0875fcb4e4d&lt;/a&gt;  PACS-4-3-1  31883 fix: Change PrivateElement to only add to JDT dictionary when&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/e29649614e23&quot; target=&quot;_blank&quot;&gt;intelepacs:e29649614e23&lt;/a&gt;  trunk       31883 fix,31934 fix: merge from PACS-4-3-1&lt;/p&gt;</comment>
                            <comment id="257482" author="fabio.padilha" created="Thu, 23 Jun 2011 10:44:55 -0400"  >&lt;p&gt;Changing rpms list&lt;/p&gt;</comment>
                            <comment id="257483" author="htrinh" created="Fri, 8 Jul 2011 11:29:51 -0400"  >&lt;p&gt;Tested while running new feature testing as documented in &quot;4-3-1 PLA - New Features&quot; (&lt;a href=&quot;http://qadata/testrail/index.php?/suites/view/147&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://qadata/testrail/index.php?/suites/view/147&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Closing as Verified.&lt;/p&gt;</comment>
                            <comment id="257484" author="rami.bechara" created="Thu, 3 Nov 2011 17:46:11 -0400"  >&lt;p&gt;Included in PACS-4-3-2-R1&lt;/p&gt;</comment>
                            <comment id="257485" author="rami.bechara" created="Tue, 24 Jan 2012 16:20:42 -0500"  >&lt;p&gt;Included in PACS-4-3-2-R3&lt;/p&gt;</comment>
                            <comment id="257486" author="iplokar" created="Fri, 10 Feb 2012 13:41:05 -0500"  >&lt;p&gt;Triaged for the &lt;a href=&quot;https://jira.intelerad.com/browse/IP-4&quot; title=&quot;Receiving messages from Test application&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-4&quot;&gt;&lt;del&gt;IP-4&lt;/del&gt;&lt;/a&gt;-3-2 Release Notes (part#: IPEN432RN-O Issue 002). No doc impact.&lt;/p&gt;</comment>
                            <comment id="257487" author="rami.bechara" created="Thu, 23 Aug 2012 11:03:57 -0400"  >&lt;p&gt;Included in PACS-4-4-1-R1&lt;/p&gt;</comment>
                            <comment id="257488" author="rami.bechara" created="Tue, 12 Feb 2013 12:10:56 -0500"  >&lt;p&gt;Included in PACS-4-3-4-R1&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Blocks</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="83488">IP-51234</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31883</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13053"><![CDATA[CorrectPatientInfo]]></customfieldvalue>
    <customfieldvalue key="13180"><![CDATA[Hl7FileSender]]></customfieldvalue>
    <customfieldvalue key="13183"><![CDATA[Hl7GatewayServer]]></customfieldvalue>
    <customfieldvalue key="13209"><![CDATA[InteleBrowser]]></customfieldvalue>
    <customfieldvalue key="13314"><![CDATA[PatientCorrectionEventHandler]]></customfieldvalue>
    <customfieldvalue key="13386"><![CDATA[SeriesCorrectionEventHandler]]></customfieldvalue>
    <customfieldvalue key="13450"><![CDATA[ValidationDbStudyLevelMonitor]]></customfieldvalue>
    <customfieldvalue key="13451"><![CDATA[ValidationServlet]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzqdc7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10803"><![CDATA[MINOR]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-51750] Local Dicom Service: Implement Validation</title>
                <link>https://jira.intelerad.com/browse/IP-51750</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;This slip covers Validation implementation in LocalDicomService&lt;/p&gt;</description>
            <key id="84004">IP-51750</key>
            <summary>Local Dicom Service: Implement Validation</summary>
                <type id="10905" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13911&amp;avatarType=issuetype">Enhancement</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="fpadilha">Fabio Padilha</assignee>
                                    <reporter username="fpadilha">Fabio Padilha</reporter>
                        <labels>
                            <label>DCD</label>
                    </labels>
                <created>Thu, 5 May 2011 10:50:03 -0400</created>
                <updated>Mon, 25 Mar 2019 14:10:40 -0400</updated>
                            <resolved>Fri, 27 Jul 2012 16:26:00 -0400</resolved>
                                    <version>N/A</version>
                                    <fixVersion>Next Branch (Trunk)</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="256396" author="nick.cabatoff" created="Tue, 22 Nov 2011 09:59:24 -0500"  >&lt;p&gt;Marking enhancement (feature) bugs as Internal because bugzilla doesn&apos;t seem to let me change a bug to Enhancement after the fact.&lt;/p&gt;</comment>
                            <comment id="256397" author="fabio.padilha" created="Mon, 16 Jan 2012 11:42:46 -0500"  >&lt;p&gt;I&apos;m closing this BZ since it&apos;s a feature and we finished this already. If we have others related features or bugs, we should open new BZs.&lt;/p&gt;</comment>
                            <comment id="256398" author="build" created="Tue, 13 Mar 2012 13:04:41 -0400"  >&lt;p&gt;Released by fpadilha to master at 2012-03-13 11:30:29 (push 12625):&lt;br/&gt;
  trunk      (ongoing)    (previous build: PACS-4-3-5-A1)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/52b453a18b44&quot; target=&quot;_blank&quot;&gt;intelepacs:52b453a18b44&lt;/a&gt;  trunk       31730 ongoing: Migrate code to use dcm4che. Code refactoring.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/eb95d397d2cd&quot; target=&quot;_blank&quot;&gt;intelepacs:eb95d397d2cd&lt;/a&gt;  trunk       31730 ongoing: Migrate code from ValidationController.cpp to ValidationHandler.java.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/cea9a5a6ce55&quot; target=&quot;_blank&quot;&gt;intelepacs:cea9a5a6ce55&lt;/a&gt;  trunk       31730 ongoing: Migrate code from ValidationController.cpp to ValidationHandler.java.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/e44972e9b9dd&quot; target=&quot;_blank&quot;&gt;intelepacs:e44972e9b9dd&lt;/a&gt;  trunk       31730 ongoing: Migrate code from ValidationController.cpp&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/a461b7321361&quot; target=&quot;_blank&quot;&gt;intelepacs:a461b7321361&lt;/a&gt;  trunk       31730 ongoing: Modify makefile to build jni files.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/9203e994e31d&quot; target=&quot;_blank&quot;&gt;intelepacs:9203e994e31d&lt;/a&gt;  trunk       31730 ongoing: Implement jni interface with ValidationController.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/f72622453eef&quot; target=&quot;_blank&quot;&gt;intelepacs:f72622453eef&lt;/a&gt;  trunk       31730 ongoing: add Guice to the LBE (requested by fpadilha).&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/d02f1920eb29&quot; target=&quot;_blank&quot;&gt;intelepacs:d02f1920eb29&lt;/a&gt;  trunk       31730 ongoing: Introduce deferred Validation and IncomingFileWorkUnit.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/2b047873b05d&quot; target=&quot;_blank&quot;&gt;intelepacs:2b047873b05d&lt;/a&gt;  trunk       31730 ongoing: Use new ApplicationSetup in a separate class to configure LDS.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/14a9f15670d4&quot; target=&quot;_blank&quot;&gt;intelepacs:14a9f15670d4&lt;/a&gt;  trunk       31730 ongoing: Implement validation using JNI and introduce StudyValidationStatus&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/ee5091ca49b0&quot; target=&quot;_blank&quot;&gt;intelepacs:ee5091ca49b0&lt;/a&gt;  trunk       31730 ongoing: Change ValidationController to work&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/cc86e949edc6&quot; target=&quot;_blank&quot;&gt;intelepacs:cc86e949edc6&lt;/a&gt;  trunk       31730 ongoing: Fix broken build due NetLibrary.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/6ae57bf52ccc&quot; target=&quot;_blank&quot;&gt;intelepacs:6ae57bf52ccc&lt;/a&gt;  trunk       31730 ongoing: Validation always creates a correction to make sure all images of the same study&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/0337c4eb4563&quot; target=&quot;_blank&quot;&gt;intelepacs:0337c4eb4563&lt;/a&gt;  trunk       31730 ongoing: Initial changes to fix Validation&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/02bfe9990fac&quot; target=&quot;_blank&quot;&gt;intelepacs:02bfe9990fac&lt;/a&gt;  trunk       31730 ongoing: Fix classpath to include slf4j-jdk14.  Fix how we log exceptions in&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/860819fe1a32&quot; target=&quot;_blank&quot;&gt;intelepacs:860819fe1a32&lt;/a&gt;  trunk       31730 ongoing: Add missing entries to TagAttributeDictionary.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/65957c29e410&quot; target=&quot;_blank&quot;&gt;intelepacs:65957c29e410&lt;/a&gt;  trunk       31730 ongoing: Update counters like NumPatRelSer on DicomImage&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/61ce355346c4&quot; target=&quot;_blank&quot;&gt;intelepacs:61ce355346c4&lt;/a&gt;  trunk       31730 ongoing: Hack libgetpid.so to work with new and old ProcessLock package.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/3240819ad0a2&quot; target=&quot;_blank&quot;&gt;intelepacs:3240819ad0a2&lt;/a&gt;  trunk       31730 ongoing: Allow logs to stdout.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/cafbd77d4f85&quot; target=&quot;_blank&quot;&gt;intelepacs:cafbd77d4f85&lt;/a&gt;  trunk       31730 ongoing: Add missing tags to Attribute Dictionary&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/5688ae63e9cb&quot; target=&quot;_blank&quot;&gt;intelepacs:5688ae63e9cb&lt;/a&gt;  trunk       31730 ongoing: Remove java logging dependency&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/3d31587a82c4&quot; target=&quot;_blank&quot;&gt;intelepacs:3d31587a82c4&lt;/a&gt;  trunk       31730 ongoing: Remove ValidationController dependency to DicomImage.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/74f20c406bec&quot; target=&quot;_blank&quot;&gt;intelepacs:74f20c406bec&lt;/a&gt;  trunk       31730 ongoing: Rename method automatic order generation.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/ee8dac33509d&quot; target=&quot;_blank&quot;&gt;intelepacs:ee8dac33509d&lt;/a&gt;  trunk       31730 ongoing: Fix AeTitleInfoCacheInterface java package&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/1098ca5aaafe&quot; target=&quot;_blank&quot;&gt;intelepacs:1098ca5aaafe&lt;/a&gt;  trunk       31730 ongoing: Add missing files to the tree&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/da5a586e7fac&quot; target=&quot;_blank&quot;&gt;intelepacs:da5a586e7fac&lt;/a&gt;  trunk       31730 fix: Log SQL parameters from now on.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/03e22572c772&quot; target=&quot;_blank&quot;&gt;intelepacs:03e22572c772&lt;/a&gt;  trunk       31730 fix: Make ValidationController do not depend on DicomImage.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/7773d322d53d&quot; target=&quot;_blank&quot;&gt;intelepacs:7773d322d53d&lt;/a&gt;  trunk       31730 ongoing: Modify Makefile.Common to add commonly used jars to the existing jar macros.  Update LDS&apos;s Makefile&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/d96cb82b2438&quot; target=&quot;_blank&quot;&gt;intelepacs:d96cb82b2438&lt;/a&gt;  trunk       31730 ongoing: fix some issues with inserting null values in DicomImage (qa issues #13, #15)&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/e134a95921b8&quot; target=&quot;_blank&quot;&gt;intelepacs:e134a95921b8&lt;/a&gt;  trunk       31730 ongoing: Re-enable some unit tests that were needlessly disabled.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/4fe1b700f8be&quot; target=&quot;_blank&quot;&gt;intelepacs:4fe1b700f8be&lt;/a&gt;  trunk       31730 ongoing: Remove ValidationTester RPM since we&apos;re not building the binary.&lt;/p&gt;</comment>
                            <comment id="256399" author="rami.bechara" created="Fri, 27 Jul 2012 16:26:46 -0400"  >&lt;p&gt;This defect has been verified by the developer at the time of code change plus the execution of development testing. In addition, integration testing done by QA also verifies that this issue has been resolved.&lt;/p&gt;

&lt;p&gt;In certain cases the deployment team during test farm creation will be the group responsible for verification during routine deployment testing.&lt;/p&gt;

&lt;p&gt;Marking CLOSED.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Blocks</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="82287">IP-50033</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31730</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13268"><![CDATA[LocalDicomService]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzqcg7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10804"><![CDATA[INTERNAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-51678] SCEH:  delseriesbyUID hangs deleting a series, stuck writing to stdout</title>
                <link>https://jira.intelerad.com/browse/IP-51678</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;RPM Version               : SeriesCorrectionEventHandler-4.2.1.P244-ims01&lt;br/&gt;
EW                        : &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=213757&quot; target=&quot;_blank&quot;&gt;EW213757&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Minimal steps to reproduce: &lt;/p&gt;

&lt;p&gt;  Have SCEH launch delseriesbyUID and have delseriesbyUID generate a lot of output.&lt;/p&gt;

&lt;p&gt;Expected behaviour        : &lt;/p&gt;

&lt;p&gt;  delseriesbyUID runs and completes.&lt;/p&gt;

&lt;p&gt;What happened instead?    : &lt;/p&gt;

&lt;p&gt;  delseriesbyUID hangs once the stdout pipe fills up since SCEH is not draining this buffer.&lt;/p&gt;

&lt;p&gt;Strace done at the time shows that delseriesbyUID is stuck writing to stdout:&lt;/p&gt;

&lt;p&gt;===&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;admin@rdsarch2&amp;#93;&lt;/span&gt; &lt;/p&gt;
{tmp}
&lt;p&gt; strace -p 27926&lt;br/&gt;
Process 27926 attached - interrupt to quit&lt;br/&gt;
write(1, &quot;[2011-04-27 16:03:41.296 delseri&quot;..., 62 &amp;lt;unfinished ...&amp;gt;&lt;br/&gt;
Process 27926 detached&lt;br/&gt;
===&lt;/p&gt;

&lt;p&gt;The SCEH.log shows that delseries was stuck for 20 minutes before it was killed:&lt;/p&gt;

&lt;p&gt;===&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-04-27 16:03:06.929 SCEH rdsarch2.rds (TRACE)&amp;#93;&lt;/span&gt; Attempting to delete series: 1.2.392.200036.9125.3.35174140193170.64648251088.2504223 locally.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-04-27 16:24:40.116 SCEH rdsarch2.rds&amp;#93;&lt;/span&gt; &lt;br/&gt;
*************************&lt;br/&gt;
ERROR: /usr/local/tools/delseriesbyUID.pl failed to delete 1.2.392.200036.9125.3.35174140193170.64648251088.2504223. Exit code: 143&lt;br/&gt;
*************************&lt;br/&gt;
===&lt;/p&gt;

&lt;p&gt;I confirmed this with Nick, the code is calling delseriesbyUID like this:&lt;/p&gt;

&lt;p&gt;===&lt;br/&gt;
 private boolean deleteLocalSeries( final String seriesInstanceUid )&lt;br/&gt;
    {&lt;br/&gt;
        String exec[] = new String[] &lt;/p&gt;
{                                   
            DELSERIESBYUID,
            &quot;--no_backup&quot;,
            &quot;--dellocal&quot;,
            seriesInstanceUid }
&lt;p&gt;;&lt;/p&gt;

&lt;p&gt;        try &lt;br/&gt;
        {&lt;br/&gt;
            Process procs = ( Runtime.getRuntime() ).exec( exec );&lt;br/&gt;
            procs.waitFor();&lt;br/&gt;
            if ( procs.exitValue() != 0 ) &lt;/p&gt;
            {
                mDebug.printError( DELSERIESBYUID + &quot; failed to delete &quot; + seriesInstanceUid + &quot;. Exit code: &quot; + procs.exitValue() );
                return false;
            }

&lt;p&gt;===&lt;/p&gt;

&lt;p&gt;From &lt;a href=&quot;http://download.oracle.com/javase/1.4.2/docs/api/java/lang/Process.html:&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://download.oracle.com/javase/1.4.2/docs/api/java/lang/Process.html:&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The parent process uses these streams to feed input to and get output from the subprocess. Because some native platforms only provide limited buffer size for standard input and output streams, failure to promptly write the input stream or read the output stream of the subprocess may cause the subprocess to block, and even deadlock.&lt;/p&gt;

&lt;p&gt;===&lt;/p&gt;

&lt;p&gt;This is very similar to &lt;a href=&quot;https://jira.intelerad.com/browse/IP-51236&quot; title=&quot;IB:  delstudybyuid hangs while writing to stdout when run from IB&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-51236&quot;&gt;&lt;del&gt;IP-51236&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Nick suggested that we may want to consider auditing the code for other examples of this, since there is the potential for this to happen in other areas of the PACS.&lt;/p&gt;

&lt;p&gt;I think this has the potential to be considered a critical bug, but I&apos;ll leave it as major since similar bugs are also ranked major.&lt;/p&gt;</description>
            <key id="83932">IP-51678</key>
            <summary>SCEH:  delseriesbyUID hangs deleting a series, stuck writing to stdout</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="mzhao">Mike Zhao</assignee>
                                    <reporter username="jmason">John Mason</reporter>
                        <labels>
                            <label>KB1190</label>
                    </labels>
                <created>Thu, 28 Apr 2011 16:23:52 -0400</created>
                <updated>Fri, 26 Apr 2019 14:04:24 -0400</updated>
                            <resolved>Fri, 13 Jan 2012 16:16:00 -0500</resolved>
                                    <version>4-2-1</version>
                                    <fixVersion>4-1-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="255768" author="jmason" created="Thu, 16 Jun 2011 14:21:30 -0400"  >&lt;p&gt;This occurred again at RDS (and is likely occurring frequently, see &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=216815&quot; target=&quot;_blank&quot;&gt;EW216815&lt;/a&gt;, &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=218438&quot; target=&quot;_blank&quot;&gt;EW218438&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Setting to CRITICAL as this and &lt;a href=&quot;https://jira.intelerad.com/browse/IP-51794&quot; title=&quot;delseriesbyuid: Iterating over all masters trying to delete serieslocations in multi-org setup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-51794&quot;&gt;&lt;del&gt;IP-51794&lt;/del&gt;&lt;/a&gt; are affecting core functionality.&lt;/p&gt;</comment>
                            <comment id="255769" author="jhie" created="Fri, 17 Jun 2011 15:57:29 -0400"  >&lt;p&gt;Affected RDS in &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=218953&quot; target=&quot;_blank&quot;&gt;EW218953&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="255770" author="mtremblay" created="Mon, 20 Jun 2011 14:27:59 -0400"  >&lt;p&gt;Added KB1190 keyword for RDS (&lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=218989&quot; target=&quot;_blank&quot;&gt;EW218989&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="255771" author="build" created="Tue, 21 Jun 2011 11:50:30 -0400"  >&lt;p&gt;Released by mzhao to master at 2011-06-21 11:50:29 (push 7319):&lt;br/&gt;
  PACS-4-1-1 (fix)        (previous build: PACS-4-1-1-P252)&lt;br/&gt;
  PACS-4-1-2 (fix)        (previous build: PACS-4-1-2-P89)&lt;br/&gt;
  PACS-4-2-1 (fix)        (previous build: PACS-4-2-1-P296)&lt;br/&gt;
  PACS-4-2-4 (fix)        (previous build: PACS-4-2-4-P70)&lt;br/&gt;
  PACS-4-3-1 (fix)        (previous build: PACS-4-3-1-P80)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-3-2-A1)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/a33c57a4446b&quot; target=&quot;_blank&quot;&gt;intelepacs:a33c57a4446b&lt;/a&gt;  PACS-4-1-1  31650 fix: use CommandLauncher to consume stdout of delseriesbyUID thus fix the issue&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/a6edd73bc993&quot; target=&quot;_blank&quot;&gt;intelepacs:a6edd73bc993&lt;/a&gt;  PACS-4-1-2  31650 fix: use CommandLauncher to consume stdout of delseriesbyUID thus fix the issue&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/96745a80c01b&quot; target=&quot;_blank&quot;&gt;intelepacs:96745a80c01b&lt;/a&gt;  PACS-4-2-1  31650 fix: use CommandLauncher to consume stdout of delseriesbyUID thus fix the issue&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/5bda1f360af7&quot; target=&quot;_blank&quot;&gt;intelepacs:5bda1f360af7&lt;/a&gt;  PACS-4-2-4  31650 fix: use CommandLauncher to consume stdout of delseriesbyUID thus fix the issue&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/c1eec626a353&quot; target=&quot;_blank&quot;&gt;intelepacs:c1eec626a353&lt;/a&gt;  PACS-4-3-1  31650 fix: use CommandLauncher to consume stdout of delseriesbyUID thus fix the issue&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/9a88c07e4530&quot; target=&quot;_blank&quot;&gt;intelepacs:9a88c07e4530&lt;/a&gt;  trunk       31650 fix: use CommandLauncher to consume stdout of delseriesbyUID thus fix the issue&lt;/p&gt;</comment>
                            <comment id="255772" author="mike.zhao" created="Tue, 21 Jun 2011 12:01:13 -0400"  >&lt;p&gt;Description of the solution: &lt;br/&gt;
use CommandLauncher to consume stdout of delseriesbyUID thus fix the issue&lt;/p&gt;

&lt;p&gt;Tests executed:&lt;br/&gt;
used pc421mdb1/pc421arch1 to do the testing, made correction on one image,&lt;br/&gt;
even delseriesbyUID had lots of output, SCEH ran successfully.&lt;/p&gt;

&lt;p&gt;Unit tests added or modified: &lt;br/&gt;
N/A&lt;/p&gt;</comment>
                            <comment id="255773" author="thungho" created="Tue, 5 Jul 2011 09:48:46 -0400"  >&lt;p&gt;Reproduced with RPMs: SeriesCorrectionEventHandler-4.2.1.P244-ims01&lt;br/&gt;
Verified with RPMs: SeriesCorrectionEventHandler-4.2.1.P298-ims01&lt;/p&gt;

&lt;p&gt;Verification steps: &lt;br/&gt;
1. reproduced issue on qa421&lt;br/&gt;
2. modify the delseriesbyUID.pl to have large output in order to reproduce the issue&lt;br/&gt;
3. do a patient correction&lt;br/&gt;
4. note that /usr/local/tools/delseriesbyUID.pl hangs&lt;br/&gt;
5. update rpm and restart &lt;br/&gt;
6. correction is done without hanging nor errors.&lt;br/&gt;
7. note the changes in SCEH.log on mod1 where delseriesbyUID ran&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-07-04 17:25:12.974 SCEH qa421mod1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Retrieving next work item for AE: QA421MOD1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-07-04 17:25:13.848 SCEH qa421mod1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Attempting to delete series: 1.3.12.2.1107.5.2.12.21249.30000006042813333603100002513 locally.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-07-04 17:25:13.851 SCEH qa421mod1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; About to launch /usr/local/tools/delseriesbyUID.pl using: CommandLauncher[ &apos;sh&apos; &apos;-c&apos; &apos;/usr/local/tools/delseriesbyUID.pl --no_backup --dellocal 1.3.12.2.1107.5.2.12.21249.30000006042813333603100002513&amp;gt;/dev/null&apos; ]&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-07-04 17:25:14.628 SCEH qa421mod1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Marking series: 1.3.12.2.1107.5.2.12.21249.30000006042813333603100002513 with deletion operation as SUCCEEDED&lt;/p&gt;

&lt;p&gt;Also tested patient correction on other large series.&lt;/p&gt;

&lt;p&gt;End result: marking verified.&lt;/p&gt;</comment>
                            <comment id="255774" author="lucie" created="Wed, 3 Aug 2011 15:35:48 -0400"  >&lt;p&gt;Included in PACS-4-2-1-R17&lt;/p&gt;</comment>
                            <comment id="255775" author="iplokar" created="Wed, 3 Aug 2011 16:38:10 -0400"  >&lt;p&gt;Documented as a resolved issue in the IP 4-2-1 R17 Release Notes.&lt;/p&gt;</comment>
                            <comment id="255776" author="lucie" created="Tue, 16 Aug 2011 10:51:55 -0400"  >&lt;p&gt;Included in PACS-4-2-4-R3&lt;/p&gt;</comment>
                            <comment id="255777" author="rami.bechara" created="Thu, 3 Nov 2011 17:46:25 -0400"  >&lt;p&gt;Included in PACS-4-3-2-R1&lt;/p&gt;</comment>
                            <comment id="255778" author="jmartin" created="Wed, 7 Dec 2011 15:59:38 -0500"  >&lt;p&gt;&lt;br/&gt;
Included in the IntelePACS 411 R24 Release Notes.&lt;/p&gt;</comment>
                            <comment id="255779" author="jmartin" created="Wed, 7 Dec 2011 15:59:59 -0500"  >&lt;p&gt;Triaged for the IntelePACS 411 R24 Release Notes. No doc impact.&lt;/p&gt;</comment>
                            <comment id="255780" author="jmartin" created="Wed, 7 Dec 2011 16:00:42 -0500"  >&lt;p&gt;Disregard comment #12.  Included in the IntelePACS 411 R24 Release Notes.&lt;/p&gt;</comment>
                            <comment id="255781" author="rami.bechara" created="Fri, 13 Jan 2012 16:16:49 -0500"  >&lt;p&gt;Included in PACS-4-1-1-R24&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12603" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Affected Clients</customfieldname>
                        <customfieldvalues>
                                        <label>RDS</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31650</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13386"><![CDATA[SeriesCorrectionEventHandler]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzqc07:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12102" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Release Notes</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12017"><![CDATA[Approved]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_11001" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>ServiceNow Case #</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>213746, 218438, 218953</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10801"><![CDATA[CRITICAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-51644] PctMdbUpdater: Add imsPostFix to the columns that are updated in DicomMaster</title>
                <link>https://jira.intelerad.com/browse/IP-51644</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;PctMdbUpdater must take into account ImsPostFix when correction DicomMaster.&lt;/p&gt;</description>
            <key id="83898">IP-51644</key>
            <summary>PctMdbUpdater: Add imsPostFix to the columns that are updated in DicomMaster</summary>
                <type id="10905" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13911&amp;avatarType=issuetype">Enhancement</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="fpadilha">Fabio Padilha</assignee>
                                    <reporter username="fpadilha">Fabio Padilha</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Apr 2011 12:09:55 -0400</created>
                <updated>Mon, 25 Mar 2019 14:10:44 -0400</updated>
                            <resolved>Wed, 25 Jan 2012 16:23:00 -0500</resolved>
                                    <version>4-3-1</version>
                                    <fixVersion>4-3-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="255448" author="build" created="Mon, 2 May 2011 15:48:28 -0400"  >&lt;p&gt;Released by fpadilha to master at 2011-05-02 15:48:27 (push 6359):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-2-5-A47)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/4cbb1f83b2fe&quot; target=&quot;_blank&quot;&gt;intelepacs:4cbb1f83b2fe&lt;/a&gt;  trunk       31614 fix: Read imsPostFix from Correction XML and update DicomMaster&lt;/p&gt;</comment>
                            <comment id="255449" author="fabio.padilha" created="Mon, 2 May 2011 15:56:33 -0400"  >&lt;p&gt;Description of the solution: &lt;/p&gt;

&lt;p&gt;Parse ImsPostFix from PatientCorrection XML.&lt;br/&gt;
Use imsPostFix value to update DicomMaster.StudyLevel.&lt;/p&gt;

&lt;p&gt;Tests executed: &lt;br/&gt;
In my vmware, I ran pctMdbUpdater with a valid correction id and checked that it updates DicomMaster adequately. &lt;/p&gt;

&lt;p&gt;Unit tests added or modified: &lt;br/&gt;
TestPctMdbUpdater&lt;/p&gt;</comment>
                            <comment id="255450" author="build" created="Tue, 3 May 2011 15:27:05 -0400"  >&lt;p&gt;Released by fpadilha to master at 2011-05-03 15:27:05 (push 6381):&lt;br/&gt;
  PACS-4-3-1 (fix)        (previous build: PACS-4-3-1-P1)&lt;br/&gt;
  trunk      (dummy)      (previous build: PACS-4-2-5-A47)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/c6b26a224f6d&quot; target=&quot;_blank&quot;&gt;intelepacs:c6b26a224f6d&lt;/a&gt;  PACS-4-3-1  31614 fix: Read imsPostFix from Correction XML and update DicomMaster&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/b672e3adea5e&quot; target=&quot;_blank&quot;&gt;intelepacs:b672e3adea5e&lt;/a&gt;  trunk       31614 dummy: dummy merge from PACS-4-3-1&lt;/p&gt;</comment>
                            <comment id="255451" author="build" created="Wed, 4 May 2011 15:54:19 -0400"  >&lt;p&gt;Released by hormoz to stable at 2011-05-04 15:54:19 (push 6416):&lt;br/&gt;
  PACS-4-3-1 (fix)        (previous build: PACS-4-3-1-P1)&lt;br/&gt;
  trunk      (dummy)      (previous build: PACS-4-2-5-A47)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/4cbb1f83b2fe&quot; target=&quot;_blank&quot;&gt;intelepacs:4cbb1f83b2fe&lt;/a&gt;  trunk       31614 fix: Read imsPostFix from Correction XML and update DicomMaster&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/c6b26a224f6d&quot; target=&quot;_blank&quot;&gt;intelepacs:c6b26a224f6d&lt;/a&gt;  PACS-4-3-1  31614 fix: Read imsPostFix from Correction XML and update DicomMaster&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/b672e3adea5e&quot; target=&quot;_blank&quot;&gt;intelepacs:b672e3adea5e&lt;/a&gt;  trunk       31614 dummy: dummy merge from PACS-4-3-1&lt;/p&gt;</comment>
                            <comment id="255452" author="htrinh" created="Fri, 8 Jul 2011 15:25:45 -0400"  >&lt;p&gt;RDS setup required. Since VRD does not use a satellite setup, deferring this verification to later to finish up 431 testing/verification for PLA.&lt;/p&gt;</comment>
                            <comment id="255453" author="rami.bechara" created="Thu, 3 Nov 2011 17:46:48 -0400"  >&lt;p&gt;Included in PACS-4-3-2-R1&lt;/p&gt;</comment>
                            <comment id="255454" author="htrinh" created="Wed, 25 Jan 2012 16:23:57 -0500"  >&lt;p&gt;This defect has been verified by the developer at the time of code change plus the execution of development testing. In addition, integration testing done by QA also verifies that this issue has been resolved.&lt;/p&gt;

&lt;p&gt;In certain cases the deployment team during test farm creation will be the group responsible for verification during routine deployment testing.&lt;/p&gt;

&lt;p&gt;Marking CLOSED.&lt;/p&gt;


&lt;p&gt;431 is out in the field. Closing as not verified.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Blocks</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="83488">IP-51234</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31614</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13316"><![CDATA[PctMdbUpdater]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzqbsn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10804"><![CDATA[INTERNAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-51387] SCEH: Change SCEH and PCEH to support new column ImsPostFix</title>
                <link>https://jira.intelerad.com/browse/IP-51387</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;SCEH and PCEH have to support new field/column ImsPostFix&lt;/p&gt;</description>
            <key id="83641">IP-51387</key>
            <summary>SCEH: Change SCEH and PCEH to support new column ImsPostFix</summary>
                <type id="10905" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13911&amp;avatarType=issuetype">Enhancement</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="fpadilha">Fabio Padilha</assignee>
                                    <reporter username="fpadilha">Fabio Padilha</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 Apr 2011 15:09:57 -0400</created>
                <updated>Mon, 25 Mar 2019 14:10:48 -0400</updated>
                            <resolved>Fri, 8 Jul 2011 11:07:00 -0400</resolved>
                                    <version>4-3-1</version>
                                    <fixVersion>4-3-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="253834" author="build" created="Wed, 13 Apr 2011 13:50:50 -0400"  >&lt;p&gt;Released by fpadilha to master at 2011-04-13 13:50:49 (push 5966):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-2-5-A38)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/bd9686675648&quot; target=&quot;_blank&quot;&gt;intelepacs:bd9686675648&lt;/a&gt;  trunk       31318 ongoing: Add ImsPostFix field in PatientCorrectionRequest and&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/9d6fd86416bc&quot; target=&quot;_blank&quot;&gt;intelepacs:9d6fd86416bc&lt;/a&gt;  trunk       31318 fix: Add imsPostFix to PatientCorrectionRequest.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/f07e33d53f8f&quot; target=&quot;_blank&quot;&gt;intelepacs:f07e33d53f8f&lt;/a&gt;  trunk       31318 fix: Revert changes that is supposed to be made in another BZ.&lt;/p&gt;</comment>
                            <comment id="253835" author="fabio.padilha" created="Wed, 13 Apr 2011 15:39:22 -0400"  >&lt;p&gt;Description of the solution: &lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;ImsDicomObject now supports imsPostFix&lt;/li&gt;
	&lt;li&gt;Add imsPostFix as a private element in PrivateElement.java and dictionary&lt;/li&gt;
	&lt;li&gt;CorrectPatientInfo cmd_line tool supports changing imsPostFix&lt;/li&gt;
	&lt;li&gt;SCEH updates DicomImage with imsPostFix&lt;/li&gt;
	&lt;li&gt;SCEH is able to modify imsPostFix private tag in dicom files&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;Tests executed: &lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Installed in my vmware SCEH, PCEH and CorrectPatientInfo cmdLine tool and checked that I can correct AccNum, ImsPostFix and PatientName. I confirmed that DicomImage.StudyLevel has changed and the files as well with dcmdump.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Unit tests added or modified: &lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;TestHeaderModifier&lt;/li&gt;
	&lt;li&gt;TestSeriesCorrectionEventHandler&lt;/li&gt;
	&lt;li&gt;TestPrivateElement&lt;/li&gt;
	&lt;li&gt;TestPatientCorrectionRequest&lt;/li&gt;
	&lt;li&gt;TestValidationDbFacade&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="253836" author="build" created="Thu, 14 Apr 2011 15:25:52 -0400"  >&lt;p&gt;Released by fpadilha to master at 2011-04-14 15:25:52 (push 5995):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-2-5-A38)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/6ecf35239358&quot; target=&quot;_blank&quot;&gt;intelepacs:6ecf35239358&lt;/a&gt;  trunk       31467 fix,31318 fix: Add ImsPostFix to SeriesHeader.ish file.&lt;/p&gt;</comment>
                            <comment id="253837" author="htrinh" created="Fri, 8 Jul 2011 11:07:07 -0400"  >&lt;p&gt;Tested while running new feature testing as documented in &quot;4-3-1 PLA - New Features&quot; (&lt;a href=&quot;http://qadata/testrail/index.php?/suites/view/147&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://qadata/testrail/index.php?/suites/view/147&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Closing as Verified.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Blocks</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="83488">IP-51234</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31318</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13053"><![CDATA[CorrectPatientInfo]]></customfieldvalue>
    <customfieldvalue key="13183"><![CDATA[Hl7GatewayServer]]></customfieldvalue>
    <customfieldvalue key="13209"><![CDATA[InteleBrowser]]></customfieldvalue>
    <customfieldvalue key="13314"><![CDATA[PatientCorrectionEventHandler]]></customfieldvalue>
    <customfieldvalue key="13386"><![CDATA[SeriesCorrectionEventHandler]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzqa7z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10804"><![CDATA[INTERNAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-51166] SCEH:Corrupting certain lossy jpeg images with group 2001 sequences (fix specific to 4.2.1)</title>
                <link>https://jira.intelerad.com/browse/IP-51166</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;RPM Version               : &lt;br/&gt;
EW                        : EW&lt;br/&gt;
Minimal steps to reproduce: &lt;br/&gt;
Expected behaviour        : &lt;br/&gt;
What happened instead?    :&lt;/p&gt;</description>
            <key id="83420">IP-51166</key>
            <summary>SCEH:Corrupting certain lossy jpeg images with group 2001 sequences (fix specific to 4.2.1)</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="aleksey.izmailov">Aleksey Izmailov</assignee>
                                    <reporter username="aleksey.izmailov">Aleksey Izmailov</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Mar 2011 11:35:34 -0500</created>
                <updated>Mon, 25 Mar 2019 14:10:51 -0400</updated>
                            <resolved>Fri, 18 Mar 2011 00:45:00 -0400</resolved>
                                    <version>4-2-1</version>
                                    <fixVersion>4-2-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="252343" author="aleksey.izmailov" created="Wed, 9 Mar 2011 11:47:58 -0500"  >&lt;p&gt;This bug addresses backporting a fix from &lt;a href=&quot;https://jira.intelerad.com/browse/IP-50892&quot; title=&quot;SCEH:Corrupting certain lossy jpeg images with group 2001 sequences&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-50892&quot;&gt;&lt;del&gt;IP-50892&lt;/del&gt;&lt;/a&gt; specifically for SCEH only. &lt;br/&gt;
We want to minimize risk on branch so we will use a new version of jdt library only for SCEH. To achieve that we will include new jdt.jar file into SCEH and change runtime script for SCEH to use that jar instead of 3rdParty jar (change classpath).&lt;br/&gt;
This bug also minimizes the scope of testing for QA as jdt is being used in multiple projects. QA will be able to test this bug fairly quickly and we can push changes to the client while the rest of the affected apps will be tested on trunk.&lt;br/&gt;
The fix for this bug will only apply to 421 branch, as on trunk we use new version of jdt for all projects and this modification of runtime script is not required.&lt;/p&gt;</comment>
                            <comment id="252344" author="build" created="Wed, 9 Mar 2011 17:22:37 -0500"  >&lt;p&gt;Released by aizmailov to master at 2011-03-09 17:22:36 (push 5392):&lt;br/&gt;
  PACS-4-2-1 (fix)        (previous build: PACS-4-2-1-P243)&lt;br/&gt;
  PACS-4-2-4 (dummy)      (previous build: PACS-4-2-4-P2)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/7f1f92cb8de1&quot; target=&quot;_blank&quot;&gt;intelepacs:7f1f92cb8de1&lt;/a&gt;  PACS-4-2-1  31067 fix: Modify SCEH classpath to use it&apos;s own jdt. Add jdt.jar and key to SCEH rpm. 421 only.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/233b42dfb28d&quot; target=&quot;_blank&quot;&gt;intelepacs:233b42dfb28d&lt;/a&gt;  PACS-4-2-4  31067 dummy: dummy merge from PACS-4-2-1&lt;/p&gt;</comment>
                            <comment id="252345" author="aleksey.izmailov" created="Wed, 9 Mar 2011 17:25:14 -0500"  >&lt;p&gt;Description of the solution: &lt;br/&gt;
Added jdt.jar and jdt.key to SCEH rpm. SCEH will use these files and other apps will use jdt from 3rd party rpms.&lt;br/&gt;
Modified runtime script to have classpath point to new jdt.&lt;br/&gt;
jdt.jar is a binary file in our 421 repository now.&lt;br/&gt;
Modified build files to include jdt file into SCEH rpm&lt;br/&gt;
Tests executed: &lt;br/&gt;
smoke test on VM421 - app does startup.&lt;br/&gt;
Unit tests added or modified: &lt;br/&gt;
None&lt;/p&gt;</comment>
                            <comment id="252346" author="htrinh" created="Thu, 10 Mar 2011 15:50:15 -0500"  >&lt;p&gt;Reproduced with RPMs: 3rdPartyRpms-4.2.1.P182-ims01.i386.rpm&lt;br/&gt;
Verified with RPMs: 3rdPartyRpms-4.2.1.P244-ims01.i386.rpm&lt;br/&gt;
Verification steps: &lt;/p&gt;

&lt;p&gt;1. Send an jpeg baseline extended image to the pacs&lt;/p&gt;

&lt;p&gt;eg.:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Dicom-File-Format&lt;/li&gt;
&lt;/ol&gt;


&lt;ol&gt;
	&lt;li&gt;Dicom-Meta-Information-Header&lt;/li&gt;
	&lt;li&gt;Used TransferSyntax: LittleEndianExplicit&lt;br/&gt;
(0002,0000) UL 166                                      #   4, 1 MetaElementGroupLength&lt;br/&gt;
(0002,0001) OB 01\00                                    #   2, 1 FileMetaInformationVersion&lt;br/&gt;
(0002,0002) UI =ComputedRadiographyImageStorage         #  26, 1 MediaStorageSOPClassUID&lt;br/&gt;
(0002,0003) UI &lt;span class=&quot;error&quot;&gt;&amp;#91;1.3.46.670589.30.1.3.1.116524605839.1294876737468.1&amp;#93;&lt;/span&gt; #  52, 1 MediaStorageSOPInstanceUID&lt;br/&gt;
(0002,0010) UI =JPEGExtended:Process2+4                 #  22, 1 TransferSyntaxUID&lt;br/&gt;
(0002,0012) UI &lt;span class=&quot;error&quot;&gt;&amp;#91;1.2.840.114202.5.3.1&amp;#93;&lt;/span&gt;                   #  20, 1 ImplementationClassUID&lt;/li&gt;
&lt;/ol&gt;


&lt;ol&gt;
	&lt;li&gt;Dicom-Data-Set&lt;/li&gt;
	&lt;li&gt;Used TransferSyntax: JPEG Extended, Process 2+4&lt;br/&gt;
(0008,0000) UL 654                                      #   4, 1 IdentifyingGroupLength&lt;br/&gt;
(0008,0008) CS [DERIVED\SECONDARY]                     #  18, 3 ImageType&lt;br/&gt;
(0008,0016) UI =ComputedRadiographyImageStorage         #  26, 1 SOPClassUID&lt;br/&gt;
(0008,0018) UI &lt;span class=&quot;error&quot;&gt;&amp;#91;1.3.46.670589.30.1.3.1.116524605839.1294876737468.1&amp;#93;&lt;/span&gt; #  52, 1 SOPInstanceUID&lt;br/&gt;
(0008,0020) DA &lt;span class=&quot;error&quot;&gt;&amp;#91;20101214&amp;#93;&lt;/span&gt;                               #   8, 1 StudyDate&lt;br/&gt;
(0008,0021) DA &lt;span class=&quot;error&quot;&gt;&amp;#91;20101214&amp;#93;&lt;/span&gt;                               #   8, 1 SeriesDate&lt;br/&gt;
(0008,0022) DA &lt;span class=&quot;error&quot;&gt;&amp;#91;20101214&amp;#93;&lt;/span&gt;                               #   8, 1 AcquisitionDate&lt;br/&gt;
(0008,0023) DA &lt;span class=&quot;error&quot;&gt;&amp;#91;20101214&amp;#93;&lt;/span&gt;                               #   8, 1 ContentDate&lt;br/&gt;
(0008,0030) TM &lt;span class=&quot;error&quot;&gt;&amp;#91;121132.109000&amp;#93;&lt;/span&gt;                          #  14, 1 StudyTime&lt;br/&gt;
(0008,0031) TM &lt;span class=&quot;error&quot;&gt;&amp;#91;121141.000000&amp;#93;&lt;/span&gt;                          #  14, 1 SeriesTime&lt;br/&gt;
(0008,0032) TM &lt;span class=&quot;error&quot;&gt;&amp;#91;121259&amp;#93;&lt;/span&gt;                                 #   6, 1 AcquisitionTime&lt;br/&gt;
(0008,0033) TM &lt;span class=&quot;error&quot;&gt;&amp;#91;121259&amp;#93;&lt;/span&gt;                                 #   6, 1 ContentTime&lt;br/&gt;
(0008,0050) SH (no value available)                     #   0, 0 AccessionNumber&lt;br/&gt;
(0008,0060) CS &lt;span class=&quot;error&quot;&gt;&amp;#91;CR&amp;#93;&lt;/span&gt;                                     #   2, 1 Modality&lt;br/&gt;
(0008,0070) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;Philips Medical Systems&amp;#93;&lt;/span&gt;                #  24, 1 Manufacturer&lt;br/&gt;
(0008,0080) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;DUBBO MEDICAL AND ALLIED&amp;#93;&lt;/span&gt;               #  24, 1 InstitutionName&lt;br/&gt;
(0008,0081) ST &lt;span class=&quot;error&quot;&gt;&amp;#91;Bultje St Dubbo Australia&amp;#93;&lt;/span&gt;              #  26, 1 InstitutionAddress&lt;br/&gt;
(0008,0090) PN (no value available)                     #   0, 0 ReferringPhysiciansName&lt;br/&gt;
(0008,1010) SH &lt;span class=&quot;error&quot;&gt;&amp;#91;Direct01&amp;#93;&lt;/span&gt;                               #   8, 1 StationName&lt;br/&gt;
(0008,1030) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;Cervical Spine&amp;#93;&lt;/span&gt;                         #  14, 1 StudyDescription&lt;br/&gt;
(0008,103e) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;AP&amp;#93;&lt;/span&gt;                                     #   2, 1 SeriesDescription&lt;br/&gt;
(0008,1040) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;Radiography&amp;#93;&lt;/span&gt;                            #  12, 1 InstitutionalDepartmentName&lt;br/&gt;
(0008,1050) PN (no value available)                     #   0, 0 PerformingPhysiciansName&lt;br/&gt;
(0008,1070) PN &lt;span class=&quot;error&quot;&gt;&amp;#91;eleva&amp;#93;&lt;/span&gt;                                  #   6, 1 OperatorsName&lt;br/&gt;
(0008,1090) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;Essenta DR Compact&amp;#93;&lt;/span&gt;                     #  18, 1 ManufacturersModelName&lt;br/&gt;
(0008,1111) SQ (Sequence with explicit length #=1)      # 112, 1 ReferencedPerformedProcedureStepSequence&lt;br/&gt;
  (fffe,e000) na (Item with explicit length #=3)          # 104, 1 Item&lt;br/&gt;
    (0008,0000) UL 92                                       #   4, 1 IdentifyingGroupLength&lt;br/&gt;
    (0008,1150) UI =ModalityPerformedProcedureStepSOPClass  #  24, 1 ReferencedSOPClassUID&lt;br/&gt;
    (0008,1155) UI &lt;span class=&quot;error&quot;&gt;&amp;#91;1.3.46.670589.30.1.3.1.116524605839.1292288913921.1&amp;#93;&lt;/span&gt; #  52, 1 ReferencedSOPInstanceUID&lt;br/&gt;
  (fffe,e00d) na (ItemDelimitationItem for re-encoding)   #   0, 0 ItemDelimitationItem&lt;br/&gt;
(fffe,e0dd) na (SequenceDelimitationItem for re-encod.) #   0, 0 SequenceDelimitationItem&lt;br/&gt;
(0008,2111) ST &lt;span class=&quot;error&quot;&gt;&amp;#91;JPEG12 9.0:1 Q=20 (lossy)&amp;#93;&lt;/span&gt;              #  26, 1 DerivationDescription&lt;br/&gt;
(0010,0000) UL 146                                      #   4, 1 PatientGroupLength&lt;br/&gt;
(0010,0010) PN &lt;span class=&quot;error&quot;&gt;&amp;#91;barling^rohan&amp;#93;&lt;/span&gt;                          #  14, 1 PatientsName&lt;br/&gt;
(0010,0020) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;20101214-01-0005&amp;#93;&lt;/span&gt;                       #  16, 1 PatientID&lt;br/&gt;
(0010,0030) DA (no value available)                     #   0, 0 PatientsBirthDate&lt;br/&gt;
(0010,0040) CS &lt;span class=&quot;error&quot;&gt;&amp;#91;M&amp;#93;&lt;/span&gt;                                      #   2, 1 PatientsSex&lt;br/&gt;
(0010,1000) LO (no value available)                     #   0, 0 OtherPatientIDs&lt;br/&gt;
(0010,1020) DS &lt;span class=&quot;error&quot;&gt;&amp;#91;0.0&amp;#93;&lt;/span&gt;                                    #   4, 1 PatientsSize&lt;br/&gt;
(0010,1030) DS &lt;span class=&quot;error&quot;&gt;&amp;#91;0.0&amp;#93;&lt;/span&gt;                                    #   4, 1 PatientsWeight&lt;br/&gt;
(0010,2000) LO (no value available)                     #   0, 0 MedicalAlerts&lt;br/&gt;
(0010,2110) LO (no value available)                     #   0, 0 ContrastAllergies&lt;br/&gt;
(0010,2160) SH (no value available)                     #   0, 0 EthnicGroup&lt;br/&gt;
(0010,21b0) LT (no value available)                     #   0, 0 AdditionalPatientHistory&lt;br/&gt;
(0010,21c0) US 4                                        #   2, 1 PregnancyStatus&lt;br/&gt;
(0010,4000) LT (no value available)                     #   0, 0 PatientComments&lt;br/&gt;
(0018,0000) UL 234                                      #   4, 1 AcquisitionGroupLength&lt;br/&gt;
(0018,0015) CS &lt;span class=&quot;error&quot;&gt;&amp;#91;CSPINE&amp;#93;&lt;/span&gt;                                 #   6, 1 BodyPartExamined&lt;br/&gt;
(0018,1000) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;116524605839&amp;#93;&lt;/span&gt;                           #  12, 1 DeviceSerialNumber&lt;br/&gt;
(0018,1020) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;1.0.0\PMS81.101.1.1 GXR GXRIM6.0&amp;#93;&lt;/span&gt;       #  32, 2 SoftwareVersions&lt;br/&gt;
(0018,1030) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;Cervical Spine&amp;#93;&lt;/span&gt;                         #  14, 1 ProtocolName&lt;br/&gt;
(0018,1050) DS &lt;span class=&quot;error&quot;&gt;&amp;#91;0.182&amp;#93;&lt;/span&gt;                                  #   6, 1 SpatialResolution&lt;br/&gt;
(0018,115e) DS &lt;span class=&quot;error&quot;&gt;&amp;#91;0.0&amp;#93;&lt;/span&gt;                                    #   4, 1 ImageAndFluoroscopyAreaDoseProduct&lt;br/&gt;
(0018,1164) DS &lt;span class=&quot;error&quot;&gt;&amp;#91;0.182\0.182&amp;#93;&lt;/span&gt;                            #  12, 2 ImagerPixelSpacing&lt;br/&gt;
(0018,1400) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;UNIQUE: S:200 L:4.0 SCL d:1 g:1.67 sb:3.31 eq:0 nr:0 dc:4.5 b...&amp;#93;&lt;/span&gt; #  64, 1 AcquisitionDeviceProcessingDescription&lt;br/&gt;
(0018,1405) IS &lt;span class=&quot;error&quot;&gt;&amp;#91;222&amp;#93;&lt;/span&gt;                                    #   4, 1 RelativeXRayExposure&lt;br/&gt;
(0018,5101) CS (no value available)                     #   0, 0 ViewPosition&lt;br/&gt;
(0020,0000) UL 176                                      #   4, 1 ImageGroupLength&lt;br/&gt;
(0020,000d) UI &lt;span class=&quot;error&quot;&gt;&amp;#91;1.3.46.670589.30.1.3.1.116524605839.1292288876234.1&amp;#93;&lt;/span&gt; #  52, 1 StudyInstanceUID&lt;br/&gt;
(0020,000e) UI &lt;span class=&quot;error&quot;&gt;&amp;#91;1.3.46.670589.30.1.3.1.116524605839.1294876737437.1&amp;#93;&lt;/span&gt; #  52, 1 SeriesInstanceUID&lt;br/&gt;
(0020,0010) SH &lt;span class=&quot;error&quot;&gt;&amp;#91;S-GHO3FIKQ.1&amp;#93;&lt;/span&gt;                           #  12, 1 StudyID&lt;br/&gt;
(0020,0011) IS &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;                                      #   2, 1 SeriesNumber&lt;br/&gt;
(0020,0013) IS &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;                                      #   2, 1 InstanceNumber&lt;br/&gt;
(0020,0020) CS (no value available)                     #   0, 0 PatientOrientation&lt;br/&gt;
(0020,0060) CS (no value available)                     #   0, 0 Laterality&lt;br/&gt;
(0028,0000) UL 222                                      #   4, 1 ImagePresentationGroupLength&lt;br/&gt;
(0028,0002) US 1                                        #   2, 1 SamplesPerPixel&lt;br/&gt;
(0028,0004) CS &lt;span class=&quot;error&quot;&gt;&amp;#91;MONOCHROME2&amp;#93;&lt;/span&gt;                            #  12, 1 PhotometricInterpretation&lt;br/&gt;
(0028,0010) US 1289                                     #   2, 1 Rows&lt;br/&gt;
(0028,0011) US 922                                      #   2, 1 Columns&lt;br/&gt;
(0028,0030) DS &lt;span class=&quot;error&quot;&gt;&amp;#91;0.1730654545455\0.1730654545455&amp;#93;&lt;/span&gt;        #  32, 2 PixelSpacing&lt;br/&gt;
(0028,0100) US 16                                       #   2, 1 BitsAllocated&lt;br/&gt;
(0028,0101) US 12                                       #   2, 1 BitsStored&lt;br/&gt;
(0028,0102) US 11                                       #   2, 1 HighBit&lt;br/&gt;
(0028,0103) US 0                                        #   2, 1 PixelRepresentation&lt;br/&gt;
(0028,0301) CS &lt;span class=&quot;error&quot;&gt;&amp;#91;NO&amp;#93;&lt;/span&gt;                                     #   2, 1 BurnedInAnnotation&lt;br/&gt;
(0028,1050) DS &lt;span class=&quot;error&quot;&gt;&amp;#91;2047.0&amp;#93;&lt;/span&gt;                                 #   6, 1 WindowCenter&lt;br/&gt;
(0028,1051) DS &lt;span class=&quot;error&quot;&gt;&amp;#91;4095.0&amp;#93;&lt;/span&gt;                                 #   6, 1 WindowWidth&lt;br/&gt;
(0028,1052) DS &lt;span class=&quot;error&quot;&gt;&amp;#91;0.0&amp;#93;&lt;/span&gt;                                    #   4, 1 RescaleIntercept&lt;br/&gt;
(0028,1053) DS &lt;span class=&quot;error&quot;&gt;&amp;#91;1.0&amp;#93;&lt;/span&gt;                                    #   4, 1 RescaleSlope&lt;br/&gt;
(0028,1054) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;US&amp;#93;&lt;/span&gt;                                     #   2, 1 RescaleType&lt;br/&gt;
(0028,2110) CS &lt;span class=&quot;error&quot;&gt;&amp;#91;01&amp;#93;&lt;/span&gt;                                     #   2, 1 LossyImageCompression&lt;br/&gt;
(0028,2112) DS &lt;span class=&quot;error&quot;&gt;&amp;#91;9&amp;#93;&lt;/span&gt;                                      #   2, 1 LossyImageCompressionRatio&lt;br/&gt;
(0032,0000) UL 24                                       #   4, 1 StudyGroupLength&lt;br/&gt;
(0032,1032) PN (no value available)                     #   0, 0 RequestingPhysician&lt;br/&gt;
(0032,1033) LO (no value available)                     #   0, 0 RequestingService&lt;br/&gt;
(0032,1060) LO (no value available)                     #   0, 0 RequestedProcedureDescription&lt;br/&gt;
(0038,0000) UL 16                                       #   4, 1 VisitGroupLength&lt;br/&gt;
(0038,0050) LO (no value available)                     #   0, 0 SpecialNeeds&lt;br/&gt;
(0038,0500) LO (no value available)                     #   0, 0 PatientState&lt;br/&gt;
(0040,0000) UL 196                                      #   4, 1 ModalityWorklistGroupLength&lt;br/&gt;
(0040,0241) AE &lt;span class=&quot;error&quot;&gt;&amp;#91;Eleva&amp;#93;&lt;/span&gt;                                  #   6, 1 PerformedStationAETitle&lt;br/&gt;
(0040,0244) DA &lt;span class=&quot;error&quot;&gt;&amp;#91;20101214&amp;#93;&lt;/span&gt;                               #   8, 1 PerformedProcedureStepStartDate&lt;br/&gt;
(0040,0245) TM &lt;span class=&quot;error&quot;&gt;&amp;#91;121132.109000&amp;#93;&lt;/span&gt;                          #  14, 1 PerformedProcedureStepStartTime&lt;br/&gt;
(0040,0252) CS (no value available)                     #   0, 0 PerformedProcedureStepStatus&lt;br/&gt;
(0040,0253) SH &lt;span class=&quot;error&quot;&gt;&amp;#91;E-GHO3GBNL.1&amp;#93;&lt;/span&gt;                           #  12, 1 PerformedProcedureStepID&lt;br/&gt;
(0040,0254) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;Cervical Spine&amp;#93;&lt;/span&gt;                         #  14, 1 PerformedProcedureStepDescription&lt;br/&gt;
(0040,0301) US 3                                        #   2, 1 TotalNumberOfExposures&lt;br/&gt;
(0040,0321) SQ (Sequence with explicit length #=0)      #   0, 1 FilmConsumptionSequence&lt;br/&gt;
(fffe,e0dd) na (SequenceDelimitationItem for re-encod.) #   0, 0 SequenceDelimitationItem&lt;br/&gt;
(0040,1001) SH (no value available)                     #   0, 0 RequestedProcedureID&lt;br/&gt;
(0040,1002) LO (no value available)                     #   0, 0 ReasonForTheRequestedProcedure&lt;br/&gt;
(0040,1003) SH (no value available)                     #   0, 0 RequestedProcedurePriority&lt;br/&gt;
(0040,1004) LO (no value available)                     #   0, 0 PatientTransportArrangements&lt;br/&gt;
(0040,1010) PN (no value available)                     #   0, 0 NamesOfIntendedRecipientsOfResults&lt;br/&gt;
(0040,1400) LT (no value available)                     #   0, 0 RequestedProcedureComments&lt;br/&gt;
(0040,2001) LO (no value available)                     #   0, 0 RETIRED_ReasonForTheImagingServiceRequest&lt;br/&gt;
(0040,2004) DA (no value available)                     #   0, 0 IssueDateOfImagingServiceRequest&lt;br/&gt;
(0040,2400) LT (no value available)                     #   0, 0 ImagingServiceRequestComments&lt;br/&gt;
(0088,0200) SQ (Sequence with explicit length #=1)      # 11886, 1 IconImageSequence&lt;br/&gt;
 (fffe,e000) na (Item with explicit length #=9)          # 11878, 1 Item&lt;br/&gt;
    (0028,0002) US 1                                        #   2, 1 SamplesPerPixel&lt;br/&gt;
    (0028,0004) CS &lt;span class=&quot;error&quot;&gt;&amp;#91;MONOCHROME2&amp;#93;&lt;/span&gt;                            #  12, 1 PhotometricInterpretation&lt;br/&gt;
    (0028,0010) US 128                                      #   2, 1 Rows&lt;br/&gt;
    (0028,0011) US 92                                       #   2, 1 Columns&lt;br/&gt;
    (0028,0100) US 8                                        #   2, 1 BitsAllocated&lt;br/&gt;
    (0028,0101) US 8                                        #   2, 1 BitsStored&lt;br/&gt;
    (0028,0102) US 7                                        #   2, 1 HighBit&lt;br/&gt;
    (0028,0103) US 0                                        #   2, 1 PixelRepresentation&lt;br/&gt;
    (7fe0,0010) OW 0000\0000\0000\0000\0000\0000\0000\0000\0000\0000\0000\0000\0000... # 11776, 1 PixelData&lt;br/&gt;
  (fffe,e00d) na (ItemDelimitationItem for re-encoding)   #   0, 0 ItemDelimitationItem&lt;br/&gt;
(fffe,e0dd) na (SequenceDelimitationItem for re-encod.) #   0, 0 SequenceDelimitationItem&lt;br/&gt;
(2001,0000) UL 1330                                     #   4, 1 PrivateGroupLength&lt;br/&gt;
(2001,0010) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;Philips Imaging DD 001&amp;#93;&lt;/span&gt;                 #  22, 1 PrivateCreator&lt;br/&gt;
(2001,0011) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;Philips Imaging DD 129&amp;#93;&lt;/span&gt;                 #  22, 1 PrivateCreator&lt;br/&gt;
(2001,1063) CS &lt;span class=&quot;error&quot;&gt;&amp;#91;ELSEWHERE&amp;#93;&lt;/span&gt;                              #  10, 1 ExaminationSource&lt;br/&gt;
(2001,106e) SH &lt;span class=&quot;error&quot;&gt;&amp;#91;DXSERIES&amp;#93;&lt;/span&gt;                               #   8, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(2001,1100) SQ (Sequence with explicit length #=1)      # 1224, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
  (fffe,e000) na (Item with explicit length #=33)         # 1216, 1 Item&lt;br/&gt;
    (0008,0000) UL 326                                      #   4, 1 IdentifyingGroupLength&lt;br/&gt;
    (0008,0016) UI =GrayscaleSoftcopyPresentationStateStorage #  28, 1 SOPClassUID&lt;br/&gt;
    (0008,0018) UI &lt;span class=&quot;error&quot;&gt;&amp;#91;1.3.46.670589.30.1.3.1.116524605839.1294876737562.1&amp;#93;&lt;/span&gt; #  52, 1 SOPInstanceUID&lt;br/&gt;
    (0008,1115) SQ (Sequence with explicit length #=1)      # 218, 1 ReferencedSeriesSequence&lt;br/&gt;
      (fffe,e000) na (Item with explicit length #=4)          # 210, 1 Item&lt;br/&gt;
        (0008,0000) UL 126                                      #   4, 1 IdentifyingGroupLength&lt;br/&gt;
        (0008,1140) SQ (Sequence with explicit length #=1)      # 114, 1 ReferencedImageSequence&lt;br/&gt;
          (fffe,e000) na (Item with explicit length #=3)          # 106, 1 Item&lt;br/&gt;
            (0008,0000) UL 94                                       #   4, 1 IdentifyingGroupLength&lt;br/&gt;
            (0008,1150) UI =ComputedRadiographyImageStorage         #  26, 1 ReferencedSOPClassUID&lt;br/&gt;
            (0008,1155) UI &lt;span class=&quot;error&quot;&gt;&amp;#91;1.3.46.670589.30.1.3.1.116524605839.1294876737468.1&amp;#93;&lt;/span&gt; #  52, 1 ReferencedSOPInstanceUID&lt;br/&gt;
          (fffe,e00d) na (ItemDelimitationItem for re-encoding)   #   0, 0 ItemDelimitationItem&lt;br/&gt;
        (fffe,e0dd) na (SequenceDelimitationItem for re-encod.) #   0, 0 SequenceDelimitationItem&lt;br/&gt;
        (0020,0000) UL 60                                       #   4, 1 ImageGroupLength&lt;br/&gt;
        (0020,000e) UI &lt;span class=&quot;error&quot;&gt;&amp;#91;1.3.46.670589.30.1.3.1.116524605839.1294876737437.1&amp;#93;&lt;/span&gt; #  52, 1 SeriesInstanceUID&lt;br/&gt;
      (fffe,e00d) na (ItemDelimitationItem for re-encoding)   #   0, 0 ItemDelimitationItem&lt;br/&gt;
    (fffe,e0dd) na (SequenceDelimitationItem for re-encod.) #   0, 0 SequenceDelimitationItem&lt;br/&gt;
    (0020,0000) UL 10                                       #   4, 1 ImageGroupLength&lt;br/&gt;
    (0020,0013) IS &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;                                      #   2, 1 InstanceNumber&lt;br/&gt;
    (0070,0000) UL 396                                      #   4, 1 PresentationStateGroupLength&lt;br/&gt;
    (0070,0001) SQ (Sequence with explicit length #=1)      # 226, 1 GraphicAnnotationSequence&lt;br/&gt;
      (fffe,e000) na (Item with explicit length #=3)          # 218, 1 Item&lt;br/&gt;
        (0070,0000) UL 206                                      #   4, 1 PresentationStateGroupLength&lt;br/&gt;
        (0070,0002) CS &lt;span class=&quot;error&quot;&gt;&amp;#91;ANNOTATION_LAYER&amp;#93;&lt;/span&gt;                       #  16, 1 GraphicLayer&lt;br/&gt;
        (0070,0008) SQ (Sequence with explicit length #=1)      # 170, 1 TextObjectSequence&lt;br/&gt;
          (fffe,e000) na (Item with explicit length #=10)         # 162, 1 Item&lt;br/&gt;
            (0070,0000) UL 82                                       #   4, 1 PresentationStateGroupLength&lt;br/&gt;
            (0070,0004) CS &lt;span class=&quot;error&quot;&gt;&amp;#91;PIXEL&amp;#93;&lt;/span&gt;                                  #   6, 1 AnchorPointAnnotationUnits&lt;br/&gt;
            (0070,0006) ST &lt;span class=&quot;error&quot;&gt;&amp;#91;L&amp;#93;&lt;/span&gt;                                      #   2, 1 UnformattedTextValue&lt;br/&gt;
            (0070,0010) FL 870.5\31.5                               #   8, 2 BoundingBoxTopLeftHandCorner&lt;br/&gt;
            (0070,0011) FL 898.5\74.5                               #   8, 2 BoundingBoxBottomRightHandCorner&lt;br/&gt;
            (0070,0014) FL 0.959328\0.0411171                       #   8, 2 AnchorPoint&lt;br/&gt;
            (0070,0015) CS &lt;span class=&quot;error&quot;&gt;&amp;#91;N&amp;#93;&lt;/span&gt;                                      #   2, 1 AnchorPointVisibility&lt;br/&gt;
            (2001,0000) UL 56                                       #   4, 1 PrivateGroupLength&lt;br/&gt;
            (2001,0010) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;Philips Imaging DD 001&amp;#93;&lt;/span&gt;                 #  22, 1 PrivateCreator&lt;br/&gt;
            (2001,106d) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;Arial^110,60,43.0&amp;#93;&lt;/span&gt;                      #  18, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
          (fffe,e00d) na (ItemDelimitationItem for re-encoding)   #   0, 0 ItemDelimitationItem&lt;br/&gt;
        (fffe,e0dd) na (SequenceDelimitationItem for re-encod.) #   0, 0 SequenceDelimitationItem&lt;br/&gt;
      (fffe,e00d) na (ItemDelimitationItem for re-encoding)   #   0, 0 ItemDelimitationItem&lt;br/&gt;
    (fffe,e0dd) na (SequenceDelimitationItem for re-encod.) #   0, 0 SequenceDelimitationItem&lt;br/&gt;
    (0070,005a) SQ (Sequence with explicit length #=1)      #  72, 1 DisplayedAreaSelectionSequence&lt;br/&gt;
      (fffe,e000) na (Item with explicit length #=4)          #  64, 1 Item&lt;br/&gt;
        (0070,0000) UL 52                                       #   4, 1 PresentationStateGroupLength&lt;br/&gt;
     (0070,0052) SL 1\1                                      #   8, 2 DisplayedAreaTopLeftHandCorner&lt;br/&gt;
        (0070,0053) SL 922\1289                                 #   8, 2 DisplayedAreaBottomRightHandCorner&lt;br/&gt;
        (0070,0100) CS &lt;span class=&quot;error&quot;&gt;&amp;#91;SCALE TO FIT&amp;#93;&lt;/span&gt;                           #  12, 1 PresentationSizeMode&lt;br/&gt;
      (fffe,e00d) na (ItemDelimitationItem for re-encoding)   #   0, 0 ItemDelimitationItem&lt;br/&gt;
    (fffe,e0dd) na (SequenceDelimitationItem for re-encod.) #   0, 0 SequenceDelimitationItem&lt;br/&gt;
    (0070,0080) CS &lt;span class=&quot;error&quot;&gt;&amp;#91;AS_EXPORTED&amp;#93;&lt;/span&gt;                            #  12, 1 ContentLabel&lt;br/&gt;
    (0070,0081) LO (no value available)                     #   0, 0 ContentDescription&lt;br/&gt;
    (0070,0082) DA &lt;span class=&quot;error&quot;&gt;&amp;#91;20101214&amp;#93;&lt;/span&gt;                               #   8, 1 PresentationCreationDate&lt;br/&gt;
    (0070,0083) TM &lt;span class=&quot;error&quot;&gt;&amp;#91;121259.000000&amp;#93;&lt;/span&gt;                          #  14, 1 PresentationCreationTime&lt;br/&gt;
    (0070,0084) PN (no value available)                     #   0, 0 ContentCreatorsName&lt;br/&gt;
    (200b,0000) UL 408                                      #   4, 1 PrivateGroupLength&lt;br/&gt;
    (200b,0070) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;Philips RAD Imaging DD 097&amp;#93;&lt;/span&gt;             #  26, 1 PrivateCreator&lt;br/&gt;
    (200b,7001) CS &lt;span class=&quot;error&quot;&gt;&amp;#91;N&amp;#93;&lt;/span&gt;                                      #   2, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
    (200b,7002) SS 0                                        #   2, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
    (200b,7054) ST &lt;span class=&quot;error&quot;&gt;&amp;#91;bfa0468d-8b35-4934-8e41-a1d78778501a&amp;#93;&lt;/span&gt;   #  36, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
    (200b,7065) SS 1                                        #   2, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
    (200b,7072) FD 0                                        #   8, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
    (200b,7075) CS &lt;span class=&quot;error&quot;&gt;&amp;#91;ZOOM_TO_SHUTTER&amp;#93;&lt;/span&gt;                        #  16, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
    (200b,7078) IS &lt;span class=&quot;error&quot;&gt;&amp;#91;1392\539\1400\1818\489\1827\479\543\479\543&amp;#93;&lt;/span&gt; #  44,10 Unknown Tag &amp;amp; Data&lt;br/&gt;
    (200b,707b) US 2365                                     #   2, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
    (200b,707c) US 1918                                     #   2, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
    (200b,707d) IS &lt;span class=&quot;error&quot;&gt;&amp;#91;479\539\1399\539\1399\1826\479\1826&amp;#93;&lt;/span&gt;    #  36, 8 Unknown Tag &amp;amp; Data&lt;br/&gt;
    (200b,7081) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;QM_Cspine_ap_es&amp;#93;&lt;/span&gt;                        #  16, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
    (200b,7082) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;Customer preset&amp;#93;&lt;/span&gt;                        #  16, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
    (200b,7085) IS &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;                                      #   2, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
    (200b,70a0) LT &lt;span class=&quot;error&quot;&gt;&amp;#91;CR_-703725390_1.3.46.670589.30.1.3.1.116524605839.1292289179484.1&amp;#93;&lt;/span&gt; #  66, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
    (200b,70a1) CS &lt;span class=&quot;error&quot;&gt;&amp;#91;OFF&amp;#93;&lt;/span&gt;                                    #   4, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
    (2050,0000) UL 16                                       #   4, 1 PresentationLUTGroupLength&lt;br/&gt;
    (2050,0020) CS &lt;span class=&quot;error&quot;&gt;&amp;#91;IDENTITY&amp;#93;&lt;/span&gt;                               #   8, 1 PresentationLUTShape&lt;br/&gt;
  (fffe,e00d) na (ItemDelimitationItem for re-encoding)   #   0, 0 ItemDelimitationItem&lt;br/&gt;
(fffe,e0dd) na (SequenceDelimitationItem for re-encod.) #   0, 0 SequenceDelimitationItem&lt;br/&gt;
(200b,0000) UL 866                                      #   4, 1 PrivateGroupLength&lt;br/&gt;
(200b,0010) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;Philips RAD Imaging DD 001&amp;#93;&lt;/span&gt;             #  26, 1 PrivateCreator&lt;br/&gt;
(200b,0011) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;Philips RAD Imaging DD 097&amp;#93;&lt;/span&gt;             #  26, 1 PrivateCreator&lt;br/&gt;
(200b,1000) PN (no value available)                     #   0, 0 Unknown Tag &amp;amp; Data&lt;br/&gt;
(200b,1001) US 4                                        #   2, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(200b,1002) US 7                                        #   2, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(200b,1005) IS &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;                                      #   2, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(200b,1011) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;AP&amp;#93;&lt;/span&gt;                                     #   2, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(200b,1027) DT &lt;span class=&quot;error&quot;&gt;&amp;#91;30000101000000.000000&amp;#93;&lt;/span&gt;                  #  22, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(200b,102b) DA &lt;span class=&quot;error&quot;&gt;&amp;#91;20101214&amp;#93;&lt;/span&gt;                               #   8, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(200b,102c) TM &lt;span class=&quot;error&quot;&gt;&amp;#91;120833&amp;#93;&lt;/span&gt;                                 #   6, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(200b,103b) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;Cervical Spine&amp;#93;&lt;/span&gt;                         #  14, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(200b,1041) SH &lt;span class=&quot;error&quot;&gt;&amp;#91;TRUE&amp;#93;&lt;/span&gt;                                   #   4, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(200b,1042) UI &lt;span class=&quot;error&quot;&gt;&amp;#91;1.3.46.670589.30.1.3.1.116524605839.1292288913921.1&amp;#93;&lt;/span&gt; #  52, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(200b,1043) UI &lt;span class=&quot;error&quot;&gt;&amp;#91;1.3.46.670589.30.1.3.1.116524605839.1292288913921.1&amp;#93;&lt;/span&gt; #  52, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(200b,1047) DA &lt;span class=&quot;error&quot;&gt;&amp;#91;20101214&amp;#93;&lt;/span&gt;                               #   8, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(200b,1048) SH &lt;span class=&quot;error&quot;&gt;&amp;#91;FALSE&amp;#93;&lt;/span&gt;                                  #   6, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(200b,104c) SH &lt;span class=&quot;error&quot;&gt;&amp;#91;COMPLETED&amp;#93;&lt;/span&gt;                              #  10, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(200b,104f) DT &lt;span class=&quot;error&quot;&gt;&amp;#91;20101214121433.046000&amp;#93;&lt;/span&gt;                  #  22, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(200b,1052) CS &lt;span class=&quot;error&quot;&gt;&amp;#91;NORMAL&amp;#93;&lt;/span&gt;                                 #   6, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(200b,1100) ST &lt;a href=&quot;file:/G:/Images/gxrDUBB607668783067395771.gip&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/G:/Images/gxrDUBB607668783067395771.gip&lt;/a&gt; #  46, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(200b,1160) LT &lt;span class=&quot;error&quot;&gt;&amp;#91;PastaMRLlocalhost:6432.30.1&amp;#93;&lt;/span&gt;            #  28, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(200b,1163) LT [UNIQUE: S:200 L:4.0 SCL d:1 g:1.67 sb:3.31 eq:0 nr:0 dc:4.5 bal:0.... # 130, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(200b,1179) IS &lt;span class=&quot;error&quot;&gt;&amp;#91;6000&amp;#93;&lt;/span&gt;                                   #   4, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(200b,117a) IS &lt;span class=&quot;error&quot;&gt;&amp;#91;5&amp;#93;&lt;/span&gt;                                      #   2, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(200b,117e) UI &lt;span class=&quot;error&quot;&gt;&amp;#91;1.3.46.670589.30.1.3.1.116524605839.1294876737562.1&amp;#93;&lt;/span&gt; #  52, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(200b,1188) CS &lt;span class=&quot;error&quot;&gt;&amp;#91;TRUE&amp;#93;&lt;/span&gt;                                   #   4, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(200b,1189) LT &lt;span class=&quot;error&quot;&gt;&amp;#91;PastaMRLlocalhost:21086.43.1&amp;#93;&lt;/span&gt;           #  28, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(200b,1196) SH &lt;span class=&quot;error&quot;&gt;&amp;#91;Wall&amp;#93;&lt;/span&gt;                                   #   4, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(200b,11a0) LT &lt;span class=&quot;error&quot;&gt;&amp;#91;CR_-703725390_1.3.46.670589.30.1.3.1.116524605839.1292289179484.1&amp;#93;&lt;/span&gt; #  66, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(2050,0000) UL 16                                       #   4, 1 PresentationLUTGroupLength&lt;br/&gt;
(2050,0020) CS &lt;span class=&quot;error&quot;&gt;&amp;#91;IDENTITY&amp;#93;&lt;/span&gt;                               #   8, 1 PresentationLUTShape&lt;br/&gt;
(3109,0010) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;Applicare/RadWorks/Version 5.0&amp;#93;&lt;/span&gt;         #  30, 1 PrivateCreator&lt;br/&gt;
(3109,0011) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;Applicare/RadWorks/Version 6.0/Summary&amp;#93;&lt;/span&gt; #  38, 1 PrivateCreator&lt;br/&gt;
(3109,1002) SH &lt;span class=&quot;error&quot;&gt;&amp;#91;NEW&amp;#93;&lt;/span&gt;                                    #   4, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(3109,1008) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;ELEVA&amp;#93;&lt;/span&gt;                                  #   6, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(3109,100a) DA &lt;span class=&quot;error&quot;&gt;&amp;#91;20110113&amp;#93;&lt;/span&gt;                               #   8, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(3109,100b) TM &lt;span class=&quot;error&quot;&gt;&amp;#91;105725&amp;#93;&lt;/span&gt;                                 #   6, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(3109,1112) ST &lt;span class=&quot;error&quot;&gt;&amp;#91;eleva&amp;#93;&lt;/span&gt;                                  #   6, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
(6000,0000) UL 148632                                   #   4, 1 OverlayGroupLength&lt;br/&gt;
(6000,0010) US 1289                                     #   2, 1 OverlayRows&lt;br/&gt;
(6000,0011) US 922                                      #   2, 1 OverlayColumns&lt;br/&gt;
(6000,0040) CS &lt;span class=&quot;error&quot;&gt;&amp;#91;G&amp;#93;&lt;/span&gt;                                      #   2, 1 OverlayType&lt;br/&gt;
(6000,0050) SS 1\1                                      #   4, 2 OverlayOrigin&lt;br/&gt;
(6000,0100) US 1                                        #   2, 1 OverlayBitsAllocated&lt;br/&gt;
(6000,0102) US 0                                        #   2, 1 OverlayBitPosition&lt;br/&gt;
(6000,3000) OW 0000\0000\0000\0000\0000\0000\0000\0000\0000\0000\0000\0000\0000... # 148558, 1 OverlayData&lt;br/&gt;
(7fe0,0000) UL 263642                                   #   4, 1 PixelDataGroupLength&lt;br/&gt;
(7fe0,0010) OB (PixelSequence #=2)                      # u/l, 1 PixelData&lt;br/&gt;
  (fffe,e000) pi 00\00\00\00                              #   4, 1 Item&lt;br/&gt;
  (fffe,e000) pi ff\d8\ff\e0\00\10\4a\46\49\46\00\01\02\00\00\01\00\01\00\00\ff\e1... # 263602, 1 Item&lt;br/&gt;
(fffe,e0dd) na (SequenceDelimitationItem)               #   0, 0 SequenceDelimitationItem&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;2. Verify dcmdump works correctly on the dcm file stored&lt;br/&gt;
3. Perform a patient correction on the study&lt;br/&gt;
4. Verify dcmdump errors&lt;/p&gt;

&lt;p&gt;dcmdump 1.3.46.670589.30.1.3.1.116524605839&lt;br/&gt;
.1294876737468.1.dcm&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (2001,0000)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (2001,0010)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (2001,0011)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (2001,1063)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (2001,106e)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (2001,1100)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,0000)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,0010)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,0011)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1000)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1001)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1002)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1005)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1011)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1027)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,102b)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,102c)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,103b)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1041)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1042)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1043)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1047)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1048)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,104c)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,104f)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1052)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1100)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1160)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1163)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1179)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,117a)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,117e)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1188)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1189)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1196)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,11a0)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (2050,0000)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (2050,0020)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3109,0000)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3109,0010)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3109,0011)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3109,1002)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3109,1008)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3109,100a)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3109,100b)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3109,1112)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3f01,0000)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3f01,0010)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3f01,1001)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3f01,1003)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3f01,1004)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3f01,1005)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3f01,1007)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3f01,1009)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3f01,100a)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3f01,100b)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3f03,0000)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3f03,0010)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3f03,1001)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (6000,0000)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (6000,0010)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (6000,0011)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (6000,0040)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (6000,0050)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (6000,0100)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (6000,0102)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (6001,0000)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (6001,0010)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (6001,1001)&lt;br/&gt;
dcmdump: error: I/O suspension or premature end of stream: reading file: 1.3.46.670589.30.1.3.1.116524605839.1294876737468.1.dcm&lt;/p&gt;

&lt;p&gt;5. Update SCEH rpm&lt;br/&gt;
6. Correct the study once again&lt;br/&gt;
7. Dcmdump the file and observe there are no errors&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Verified basic image flow (send, dictate, transcribe, sign)&lt;/li&gt;
	&lt;li&gt;Verified basic patient correction&lt;/li&gt;
	&lt;li&gt;Verified corrections on JPEG 12bit extended, 8bit baseline, rle, uncompressed&lt;/li&gt;
	&lt;li&gt;Correction on Archived Study (delete online locations)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;End result: Verified&lt;br/&gt;
Time spent: 4 hrs&lt;/p&gt;</comment>
                            <comment id="252347" author="iplokar" created="Fri, 18 Mar 2011 07:54:56 -0400"  >&lt;p&gt;Documented as a resolved issue in the IntelePACS 421R14 Release Notes.&lt;/p&gt;</comment>
                            <comment id="252348" author="lucie" created="Fri, 18 Mar 2011 12:45:02 -0400"  >&lt;p&gt;Included in PACS-4-2-1-R14 &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Blocks</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="83146">IP-50892</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31067</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13386"><![CDATA[SeriesCorrectionEventHandler]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzq8vr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12102" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Release Notes</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12017"><![CDATA[Approved]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_11001" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>ServiceNow Case #</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>203992</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[IP-50892] SCEH:Corrupting certain lossy jpeg images with group 2001 sequences</title>
                <link>https://jira.intelerad.com/browse/IP-50892</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;Software version:&lt;/p&gt;

&lt;p&gt;SeriesCorrectionEventHandler-5.1.7.P5B2-3.8.1.P340&lt;/p&gt;

&lt;p&gt;Issue summary (optional):&lt;/p&gt;

&lt;p&gt;A certain scanner/modality/image source (DUBALLIEDHEALTH) sends us images in lossy jpeg (baseline and extended).&lt;/p&gt;

&lt;p&gt;They come in OK, but then when they are validated, they become corrupt (see below for details)&lt;/p&gt;

&lt;p&gt;Steps to reproduce:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Send affected image in the PACS, make it fail validation&lt;/li&gt;
	&lt;li&gt;dcmdump the image to make sure it&apos;s ok (it should be ok)&lt;/li&gt;
	&lt;li&gt;Go to the manual validation, and override the study, giving it an accession number.&lt;/li&gt;
	&lt;li&gt;Let the correction happen&lt;/li&gt;
	&lt;li&gt;dcmdump the image again, it should fail.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Expected behavior: We DO NOT corrupt stuff.&lt;/p&gt;

&lt;p&gt;Actual behavior: Until proven otherwise, we seem to be corrupting these images.&lt;/p&gt;

&lt;p&gt;Investigation summary: Reproduced on ts411.&lt;/p&gt;

&lt;p&gt;Customer impact (optional): They have a workaround (they are sending from the modality directly, which do not send in loss ;  but this is still critical internally in my opinion. We need to get to the bottom of this sooner rather than later (like now).&lt;/p&gt;



&lt;p&gt;Here is what you see when you dcmdump the file post correction :&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;admin@ts411mdb1&amp;#93;&lt;/span&gt; &lt;/p&gt;
{/usr/local/PACS/images/20110121/1.3.46.670589.30.1.3.1.116524605839.1292288876234.1/1.3.46.670589.30.1.3.1.116524605839.1294876738031.1}
&lt;p&gt; dcm&lt;br/&gt;
dump 1.3.46.670589.30.1.3.1.116524605839.1294876738062.1.dcm&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (2001,0000)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (2001,0010)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (2001,0011)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (2001,1063)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (2001,106e)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (2001,1100)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,0000)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,0010)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,0011)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1000)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1001)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1002)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1005)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1011)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1027)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,102b)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,102c)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,103b)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1041)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1042)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1043)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1047)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1048)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,104c)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,104f)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1052)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1100)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1160)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1163)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1179)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,117a)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,117e)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1188)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1189)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,1196)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (200b,11a0)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (2050,0000)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (2050,0020)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3109,0000)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3109,0010)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3109,0011)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3109,1002)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3109,1008)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3109,100a)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3109,100b)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3109,1112)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3f01,0000)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3f01,0010)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3f01,1001)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3f01,1003)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3f01,1004)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3f01,1005)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3f01,1007)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3f01,1009)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3f01,100a)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (3f01,100b)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (6000,0000)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (6000,0010)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (6000,0011)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (6000,0040)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (6000,0050)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (6000,0100)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (6000,0102)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (6001,0000)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (6001,0010)&lt;br/&gt;
DcmItem: Dataset not in ascending tag order, at element (6001,1001)&lt;br/&gt;
dcmdump: error: I/O suspension or premature end of stream: reading file: 1.3.46.670589.30.1.3.1.116524605839.1294876738062.1.dcm&lt;/p&gt;



&lt;p&gt;See EW ticket for tarball of originals saved by keep_temp_files in image_server and detailed reproduction instructions.&lt;/p&gt;</description>
            <key id="83146">IP-50892</key>
            <summary>SCEH:Corrupting certain lossy jpeg images with group 2001 sequences</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="aleksey.izmailov">Aleksey Izmailov</assignee>
                                    <reporter username="jan">Jan Lavoie</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 Jan 2011 10:36:42 -0500</created>
                <updated>Mon, 25 Mar 2019 14:10:57 -0400</updated>
                            <resolved>Mon, 4 Jul 2011 16:53:00 -0400</resolved>
                                    <version>3-8-1</version>
                                    <fixVersion>Next Branch (Trunk)</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="250245" author="fabio.padilha" created="Fri, 21 Jan 2011 10:56:33 -0500"  >&lt;p&gt;I believe the cause is not because the images are JPEG. I think the problem is that those images have private tags with groups 20xx and we are not handling properly in SCEH.&lt;/p&gt;</comment>
                            <comment id="250246" author="jan" created="Fri, 21 Jan 2011 14:28:20 -0500"  >&lt;p&gt;Attaching massaged output from dcm2text (dcm4che).&lt;/p&gt;

&lt;p&gt;Working and broken are attached. (soon)&lt;/p&gt;</comment>
                            <comment id="250247" author="jan" created="Fri, 21 Jan 2011 14:29:34 -0500"  >&lt;p&gt;broken dump&lt;/p&gt;</comment>
                            <comment id="250264" author="jan" created="Fri, 21 Jan 2011 14:29:34 -0500"  >&lt;p&gt;Attachment dcm4chedump.broken has been added with description: broken dump&lt;/p&gt;</comment>
                            <comment id="250265" author="jan" created="Fri, 21 Jan 2011 14:30:08 -0500"  >&lt;p&gt;Attachment dcm4chedump has been added with description: dump of image after reception from image_server, before sceh breaks it&lt;/p&gt;</comment>
                            <comment id="250248" author="fabio.padilha" created="Fri, 21 Jan 2011 16:15:15 -0500"  >&lt;p&gt;I could reproduce with an Unit Test. TestHeaderModifier.java.&lt;/p&gt;</comment>
                            <comment id="250249" author="aleksey.izmailov" created="Wed, 2 Feb 2011 10:36:53 -0500"  >&lt;p&gt;The issue is caused by jdt-1.6 which does not save dcm properly. Most probably it&apos;s an internal jdt bug: &quot;#0151 : &apos;keep sequence delimitation&apos; option for writing dicom streams/files&quot; or some other bug. Anyway I just tried opening and then saving a file without any changes to it which resulted in the same problem. I also tried version 2.5 which works just fine. I did try using different files and explicit transfer syntaxes with 1.6 with no success. This is just to point out a real issue with jdt which might occur in other apps using it.&lt;/p&gt;</comment>
                            <comment id="250250" author="aleksey.izmailov" created="Thu, 3 Feb 2011 16:21:34 -0500"  >&lt;p&gt;This problem looks exactly the same as &lt;a href=&quot;https://jira.intelerad.com/browse/IP-46658&quot; title=&quot;DicomScp: Unable to import studies from CD using IV when series contain IconImageSequence; imported dcm files are corrupted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-46658&quot;&gt;&lt;del&gt;IP-46658&lt;/del&gt;&lt;/a&gt;. There is a problem in jdt-1.6 in &apos;write&apos; function which writes incorrect element length and corrupts files.&lt;/p&gt;</comment>
                            <comment id="250251" author="aleksey.izmailov" created="Tue, 8 Feb 2011 13:07:06 -0500"  >&lt;p&gt;Status update: &lt;br/&gt;
we have our internal fix for JDT library which computes correct element and sequence length and fixes this problem. &lt;br/&gt;
Fabio also requested a patch from trispark - JDT developer. We are waiting for their answer right now so the bug fix will be slightly delayed, but in either case we have a fix.&lt;/p&gt;</comment>
                            <comment id="250252" author="aleksey.izmailov" created="Mon, 21 Feb 2011 15:18:34 -0500"  >&lt;p&gt;Description of the solution: &lt;br/&gt;
We got source code for jdt-1.60_1179 and applied our patch to calculate correct sequence length in jdt library. Created a jdt repo to track source code changes. Now we produce an rpm of jdt repo which contains jdt jar and key files. Greg checked that no prior history existed for jdt, thus all changes can be found in that repo. &lt;br/&gt;
Tests executed: No integration tests have been performed.&lt;br/&gt;
Unit tests added or modified: &lt;br/&gt;
Updated TestHeaderModifier. The test opens a dcm file and saves it back to disk using jdt API. After that it runs dcmdump and checks exit code to test whether file got corrupted. This is enough to reproduce a problem with older jdt version. Also see TestHeaderModifier.dbg to see which files failed to be processed.&lt;br/&gt;
Note: for changes to have an effect only jdt rpm has to be upgraded, nothing is changed in SCEH.&lt;/p&gt;</comment>
                            <comment id="250253" author="build" created="Tue, 22 Feb 2011 10:50:33 -0500"  >&lt;p&gt;Released by aizmailov to master at 2011-02-22 10:50:32 (push 5149):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-2-3-A21)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/ce7626628f08&quot; target=&quot;_blank&quot;&gt;intelepacs:ce7626628f08&lt;/a&gt;  trunk       30696 fix: Calculate correct Icon sequence length for lossy jpeg images in jdt-1.6_1179.&lt;/p&gt;</comment>
                            <comment id="250254" author="build" created="Tue, 22 Feb 2011 10:56:05 -0500"  >&lt;p&gt;Released by aizmailov to master at 2011-02-22 10:56:04 (push 5150):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-2-3-A21)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/b9f71539318e&quot; target=&quot;_blank&quot;&gt;intelepacs:b9f71539318e&lt;/a&gt;  trunk       30696 fix: jdt lib test data (for &lt;a href=&quot;https://jira.intelerad.com/browse/IP-50892&quot; title=&quot;SCEH:Corrupting certain lossy jpeg images with group 2001 sequences&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-50892&quot;&gt;&lt;del&gt;IP-50892&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="250255" author="aleksey.izmailov" created="Wed, 23 Feb 2011 09:53:12 -0500"  >&lt;p&gt;Here is a complete story regarding this bug:&lt;/p&gt;

&lt;p&gt;We used jdt-1.60_1179 jar file in our apps. This jar file was provided by 3rd party vendor and we didn&apos;t have source code matching this build. In other words we never built this jar. We only had source for earlier and later versions. &lt;/p&gt;

&lt;p&gt;We requested 1179 source code and created a jdt repository and rpm based on it. &lt;br/&gt;
The vendor confirmed that this was a known bug in their library: &quot;...that is indeed the problem. 1.6 miscalculates the length of the pixeldata for the icon. It wrongly adds some extra length because it regards the icon as being encapsulated (compressed), which is not true of course...&quot;. &lt;/p&gt;

&lt;p&gt;We examined jdt-2.5 library to find changes related to this fix. The change that fixed calculation of length of pixeldata was isolated and applied as a patch to our new jdt repository. We confirmed that it makes sense logically and created unit tests to verify it.&lt;/p&gt;

&lt;p&gt;We did not have any prior history for jdt, so the new jdt repo will tracking all changes. Please note that no API has been changed so it should be binary compatible.&lt;/p&gt;</comment>
                            <comment id="250256" author="aleksey.izmailov" created="Wed, 23 Feb 2011 10:39:55 -0500"  >&lt;p&gt;This change broke a UnitTest that ensured that a hack for jdt introduced in &lt;a href=&quot;https://jira.intelerad.com/browse/IP-38567&quot; title=&quot;IV: Speed up DICOM header reading with a hack in JdtUtil&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-38567&quot;&gt;&lt;del&gt;IP-38567&lt;/del&gt;&lt;/a&gt; works. Although it does not break any production code it makes reading dicom header slower.&lt;/p&gt;</comment>
                            <comment id="250257" author="aleksey.izmailov" created="Wed, 23 Feb 2011 14:03:53 -0500"  >&lt;p&gt;Reopening to address unittest and &lt;a href=&quot;https://jira.intelerad.com/browse/IP-38567&quot; title=&quot;IV: Speed up DICOM header reading with a hack in JdtUtil&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-38567&quot;&gt;&lt;del&gt;IP-38567&lt;/del&gt;&lt;/a&gt; issue. I will add another patch to jdt to make OffsetInputStream.getOffset() public and being used instead of previous hack.&lt;/p&gt;</comment>
                            <comment id="250258" author="build" created="Thu, 24 Feb 2011 11:06:33 -0500"  >&lt;p&gt;Released by aizmailov to master at 2011-02-24 11:06:32 (push 5207):&lt;br/&gt;
  trunk      (ongoing)    (previous build: PACS-4-2-5-A1)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/87ac96b41f4c&quot; target=&quot;_blank&quot;&gt;intelepacs:87ac96b41f4c&lt;/a&gt;  trunk       30696 ongoing: Temp revert to jdt-1.60_1179.ims02, disable 1 jdt test until bugfix is ready and doesn&apos;t break build&lt;/p&gt;</comment>
                            <comment id="250259" author="build" created="Thu, 24 Feb 2011 15:21:01 -0500"  >&lt;p&gt;Released by sclark to master at 2011-02-24 15:21:00 (push 5214):&lt;br/&gt;
  trunk      (revert)     (previous build: PACS-4-2-5-A2)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/a77e0e69daaf&quot; target=&quot;_blank&quot;&gt;intelepacs:a77e0e69daaf&lt;/a&gt;  trunk       30696 revert: Temporarily reverting changes from &lt;a href=&quot;https://jira.intelerad.com/browse/IP-50892&quot; title=&quot;SCEH:Corrupting certain lossy jpeg images with group 2001 sequences&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-50892&quot;&gt;&lt;del&gt;IP-50892&lt;/del&gt;&lt;/a&gt; ( rollback to old jdt version )&lt;/p&gt;</comment>
                            <comment id="250260" author="build" created="Tue, 8 Mar 2011 16:33:58 -0500"  >&lt;p&gt;Released by aizmailov to master at 2011-03-08 16:33:57 (push 5362):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-2-5-A10)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/7aa68a5b88b4&quot; target=&quot;_blank&quot;&gt;intelepacs:7aa68a5b88b4&lt;/a&gt;  trunk       30696 fix: allow public access to getOffset for jdtUtil, update jdt rpm spec to add obfuscation.&lt;/p&gt;</comment>
                            <comment id="250261" author="aleksey.izmailov" created="Tue, 8 Mar 2011 16:55:57 -0500"  >&lt;p&gt;Description of the solution: &lt;br/&gt;
&lt;a href=&quot;https://jira.intelerad.com/browse/IP-38567&quot; title=&quot;IV: Speed up DICOM header reading with a hack in JdtUtil&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-38567&quot;&gt;&lt;del&gt;IP-38567&lt;/del&gt;&lt;/a&gt; introduced a hack that allowed to skip image data in order to speed up file reads. The hack relied on reflection as there was no public access to the desired APIs. &lt;br/&gt;
Changed OffsetInputStream.getOffset() to public to allow this access. Updated JdtUtil to make use of this method and removed reflection part.&lt;br/&gt;
In jdt repository fixed a part related to calculating correct sequence length as described above.&lt;br/&gt;
Finally due to licence agreement we had to obfuscate resulting jdt.jar file, so I added necessary scripts to do that.&lt;br/&gt;
Tests executed: &lt;br/&gt;
compared public API for both jar files: orig and new. Compiled dependent projects and ran unit tests.&lt;br/&gt;
Unit tests added or modified: &lt;br/&gt;
Added a test that insures that jdt can read and save files properly&lt;/p&gt;</comment>
                            <comment id="250262" author="build" created="Wed, 9 Mar 2011 11:06:02 -0500"  >&lt;p&gt;Released by aizmailov to master at 2011-03-09 11:06:01 (push 5375):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-2-5-A11)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/27cda048039c&quot; target=&quot;_blank&quot;&gt;intelepacs:27cda048039c&lt;/a&gt;  trunk       30696 fix: Cosmetic changes. Remove unused exception handler.&lt;/p&gt;</comment>
                            <comment id="250263" author="thungho" created="Mon, 4 Jul 2011 16:53:49 -0400"  >&lt;p&gt;Reproduced with RPMs: &lt;br/&gt;
Verified with RPMs: 3rdPartyRpms-4.3.1.P92-ims01&lt;br/&gt;
Verification steps: &lt;br/&gt;
1. Send affected image (ie. lossyjpegbaselineandextended.dcm contains 2001 tags and overlay.dcm)   to the PACS, make it fail validation&lt;br/&gt;
2. dcmdump the image to make sure it&apos;s ok &lt;br/&gt;
3. Go to the manual validation, and override the study, giving it an accession number.&lt;br/&gt;
4. Let the correction happen&lt;br/&gt;
5. dcmdump the image again and it&apos;s ok and verify logs  are clean.&lt;/p&gt;

&lt;p&gt;Also, verified basic image flow (send, dictate, transcribe, sign) and verified basic patient correction.&lt;/p&gt;

&lt;p&gt;End result: marking verified&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Blocks</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="83420">IP-51166</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10002">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="78912">IP-46658</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="22977" name="dcm4chedump" size="11749" author="jan" created="Fri, 21 Jan 2011 14:30:08 -0500"/>
                            <attachment id="22976" name="dcm4chedump.broken" size="13156" author="jan" created="Fri, 21 Jan 2011 14:29:34 -0500"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12603" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Affected Clients</customfieldname>
                        <customfieldvalues>
                                        <label>PRPDI</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30696</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13002"><![CDATA[3rdPartyRpms]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzq77j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_11001" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>ServiceNow Case #</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>203992</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10801"><![CDATA[CRITICAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-50693] SCEH: Can run out of memory for series with large DCM headers (GEMS_Ultrasound_MovieGroup_001)</title>
                <link>https://jira.intelerad.com/browse/IP-50693</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;Software version: SeriesCorrectionEventHandler-4.2.1.P133-ims01&lt;/p&gt;

&lt;p&gt;Issue summary (optional):&lt;/p&gt;

&lt;p&gt;Some series cannot be corrected. They have some dicom files with large headers (9MB+).&lt;br/&gt;
SCEH runs out of memory. It is launched with 512MB already.&lt;/p&gt;

&lt;p&gt;Steps to reproduce: At PRS, correct series 1.2.840.113619.2.226.4270236.1292598347.0.6 (of course, don&apos;t really do that... bring the series here and try it)&lt;/p&gt;

&lt;p&gt;Expected behavior: The correction can be processed.&lt;/p&gt;

&lt;p&gt;Actual behavior: SCEH dies, client has to have support do manual intervention. They use dcmodify and send back the series. We do not want to do that.&lt;/p&gt;


&lt;p&gt;Investigation summary: Checked the logs, the images and the code. It seems all the image headers are loaded in handleLegacyData. In this case, we run out of memory. &lt;/p&gt;

&lt;p&gt;Customer impact (optional): Cannot proceed with their correction. This is a big deal for PRS.&lt;/p&gt;

&lt;p&gt;A possible workaround of course would be to KB1190 SCEH to launch with more memory, but I don&apos;t really want us to do that. Not marking practical workaround.&lt;/p&gt;</description>
            <key id="82947">IP-50693</key>
            <summary>SCEH: Can run out of memory for series with large DCM headers (GEMS_Ultrasound_MovieGroup_001)</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="fpadilha">Fabio Padilha</assignee>
                                    <reporter username="jan">Jan Lavoie</reporter>
                        <labels>
                            <label>KB1190</label>
                            <label>regression_bug</label>
                    </labels>
                <created>Mon, 20 Dec 2010 13:16:42 -0500</created>
                <updated>Fri, 26 Apr 2019 14:05:58 -0400</updated>
                            <resolved>Thu, 17 Jul 2014 11:48:00 -0400</resolved>
                                    <version>4-2-1</version>
                                    <fixVersion>3-8-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="248809" author="jan" created="Mon, 20 Dec 2010 13:17:51 -0500"  >&lt;p&gt;stack trace :&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 09:10:01.527 SCEH prsmod1.proscan.com&amp;#93;&lt;/span&gt; &lt;br/&gt;
*************************&lt;br/&gt;
ERROR: Failed to load DICOM file/usr/local/PACS/images/dev2/20101217/1.2.840.113619.2.226.4270236.1292598347.0.5/1.2.840.113619.2.226.4270236.1292598347.0.6/1.2.840.113619.2.226&lt;br/&gt;
.4270236.1292598347.0.45.dcm&lt;br/&gt;
*************************&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 09:10:01.528 SCEH prsmod1.proscan.com&amp;#93;&lt;/span&gt; Stack trace:&lt;br/&gt;
com.intelerad.lib.dicomtools.DicomToolsException: Failed to load DICOM object for file/usr/local/PACS/images/dev2/20101217/1.2.840.113619.2.226.4270236.1292598347.0.5/1.2.840.11&lt;br/&gt;
3619.2.226.4270236.1292598347.0.6/1.2.840.113619.2.226.4270236.1292598347.0.45.dcm due to an OutOfMemoryError. The filemay be too big or corrupt (retrieval from tape may be nece&lt;br/&gt;
ssary).&lt;br/&gt;
        at com.intelerad.lib.dicomtools.DicomObjectIo.readDicomObject(DicomObjectIo.java:809)&lt;br/&gt;
        at com.intelerad.lib.dicomtools.DicomObjectIo.load(DicomObjectIo.java:253)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.handleLegacyData(SeriesCorrectionEventHandler.java:2133)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.fixDicomFiles(SeriesCorrectionEventHandler.java:400)&lt;br/&gt;
        atcom.intelerad.sceh.SeriesCorrectionEventHandler.handleDicomImageFileChanges(SeriesCorrectionEventHandler.java:1386)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.fixStudyInstanceUid(SeriesCorrectionEventHandler.java:1580)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.handleDbRecord(SeriesCorrectionEventHandler.java:1837)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.correctForMdbHost(SeriesCorrectionEventHandler.java:1915)&lt;br/&gt;
        atcom.intelerad.sceh.SeriesCorrectionEventHandler.correctForOrganization(SeriesCorrectionEventHandler.java:1950)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.correctionsLoop(SeriesCorrectionEventHandler.java:2001)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.main(SeriesCorrectionEventHandler.java:2087)&lt;br/&gt;
Caused by: java.lang.OutOfMemoryError: GC overhead limit exceeded&lt;br/&gt;
        at java.util.Arrays.copyOfRange(Arrays.java:3209)&lt;br/&gt;
        at java.lang.String.&amp;lt;init&amp;gt;(String.java:215)&lt;br/&gt;
        at java.lang.StringBuffer.toString(StringBuffer.java:585)&lt;br/&gt;
        at com.archimed.dicom.DumpUtils.tagDescriptionString(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.c.a(Unknown Source)&lt;/p&gt;</comment>
                            <comment id="248810" author="jan" created="Mon, 20 Dec 2010 13:18:18 -0500"  >&lt;p&gt;Example of what is in the dicom header that makes it so large :&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&lt;/p&gt;


&lt;p&gt;    (fffe,e0dd) na (SequenceDelimitationItem)               #   0, 0 SequenceDelimitationItem&lt;br/&gt;
    (7fe1,1073) SQ (Sequence with undefined length #=1)     # u/l, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
      (fffe,e000) na (Item with undefined length #=3)         # u/l, 1 Item&lt;br/&gt;
        (7fe1,0010) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;GEMS_Ultrasound_MovieGroup_001&amp;#93;&lt;/span&gt;         #  30, 1 PrivateCreator&lt;br/&gt;
        (7fe1,1074) UN (no value available)                     #   0, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
        (7fe1,1075) SQ (Sequence with undefined length #=8)     # u/l, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
          (fffe,e000) na (Item with undefined length #=3)         # u/l, 1 Item&lt;br/&gt;
            (7fe1,0010) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;GEMS_Ultrasound_MovieGroup_001&amp;#93;&lt;/span&gt;         #  30, 1 PrivateCreator&lt;br/&gt;
            (7fe1,1048) UN 00\00\00\00\00\b0\7d\40                  #   8, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
            (7fe1,1054) UN 00\00\00\00                              #   4, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
          (fffe,e00d) na (ItemDelimitationItem)                   #   0, 0 ItemDelimitationItem&lt;br/&gt;
          (fffe,e000) na (Item with undefined length #=3)         # u/l, 1 Item&lt;br/&gt;
            (7fe1,0010) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;GEMS_Ultrasound_MovieGroup_001&amp;#93;&lt;/span&gt;         #  30, 1 PrivateCreator&lt;br/&gt;
            (7fe1,1048) UN 00\00\00\00\00\c0\7d\40                  #   8, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
            (7fe1,1057) UN 54\65\78\74                              #   4, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
          (fffe,e00d) na (ItemDelimitationItem)                   #   0, 0 ItemDelimitationItem&lt;br/&gt;
          (fffe,e000) na (Item with undefined length #=3)         # u/l, 1 Item&lt;br/&gt;
            (7fe1,0010) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;GEMS_Ultrasound_MovieGroup_001&amp;#93;&lt;/span&gt;         #  30, 1 PrivateCreator&lt;br/&gt;
            (7fe1,1048) UN 00\00\00\00\00\d0\7d\40                  #   8, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
            (7fe1,1052) UN 00\00\00\00\00\00\00\00                  #   8, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
          (fffe,e00d) na (ItemDelimitationItem)                   #   0, 0 ItemDelimitationItem&lt;br/&gt;
          (fffe,e000) na (Item with undefined length #=3)         # u/l, 1 Item&lt;br/&gt;
            (7fe1,0010) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;GEMS_Ultrasound_MovieGroup_001&amp;#93;&lt;/span&gt;         #  30, 1 PrivateCreator&lt;br/&gt;
            (7fe1,1048) UN 00\00\00\00\00\e0\7d\40                  #   8, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
            (7fe1,1054) UN ff\ff\00\00                              #   4, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
          (fffe,e00d) na (ItemDelimitationItem)                   #   0, 0 ItemDelimitationItem&lt;br/&gt;
          (fffe,e000) na (Item with undefined length #=3)         # u/l, 1 Item&lt;br/&gt;
            (7fe1,0010) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;GEMS_Ultrasound_MovieGroup_001&amp;#93;&lt;/span&gt;         #  30, 1 PrivateCreator&lt;br/&gt;
            (7fe1,1048) UN 00\00\00\00\00\f0\7d\40                  #   8, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
            (7fe1,1057) UN 48\65\6c\76\65\74\69\63\61\3a\32\32      #  12, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
          (fffe,e00d) na (ItemDelimitationItem)                   #   0, 0 ItemDelimitationItem&lt;br/&gt;
          (fffe,e000) na (Item with undefined length #=3)         # u/l, 1 Item&lt;br/&gt;
            (7fe1,0010) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;GEMS_Ultrasound_MovieGroup_001&amp;#93;&lt;/span&gt;         #  30, 1 PrivateCreator&lt;br/&gt;
            (7fe1,1048) UN 00\00\00\00\00\00\7e\40                  #   8, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
            (7fe1,1057) UN 31\2c\30\2c\31\2c\31\2c\31\20            #  10, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
          (fffe,e00d) na (ItemDelimitationItem)                   #   0, 0 ItemDelimitationItem&lt;br/&gt;
          (fffe,e000) na (Item with undefined length #=3)         # u/l, 1 Item&lt;br/&gt;
            (7fe1,0010) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;GEMS_Ultrasound_MovieGroup_001&amp;#93;&lt;/span&gt;         #  30, 1 PrivateCreator&lt;br/&gt;
            (7fe1,1048) UN 00\00\00\00\00\10\7e\40                  #   8, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
            (7fe1,1087) UN 05\a1\7f\74\1b\53\90\3f\8e\79\fa\68\35\09\b1\3f\00\00\00\00\00\00... #  32, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
          (fffe,e00d) na (ItemDelimitationItem)                   #   0, 0 ItemDelimitationItem&lt;br/&gt;
          (fffe,e000) na (Item with undefined length #=3)         # u/l, 1 Item&lt;br/&gt;
            (7fe1,0010) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;GEMS_Ultrasound_MovieGroup_001&amp;#93;&lt;/span&gt;         #  30, 1 PrivateCreator&lt;br/&gt;
            (7fe1,1048) UN 00\00\00\00\00\20\7e\40                  #   8, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
            (7fe1,1057) UN 4c\65\66\74\20\43\46\41\20\50\72\6f\78\20 #  14, 1 Unknown Tag &amp;amp; Data&lt;br/&gt;
          (fffe,e00d) na (ItemDelimitationItem)                   #   0, 0 ItemDelimitationItem&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="248811" author="fabio.padilha" created="Mon, 20 Dec 2010 16:22:07 -0500"  >&lt;p&gt;This is indeed a bug. SeriesCorrectionEventHandler loads all files of a series in memory to correct them. It doesn&apos;t do one at a time. It only skips private tags or sequences larger than 10 Mbytes. Although, I believe that sequences with undefined length are not skipped. Tags larger than 10Mb within a sequence are skipped.&lt;br/&gt;
I&apos;m promoting this BZ to a development bug.&lt;/p&gt;</comment>
                            <comment id="248812" author="fabio.padilha" created="Tue, 21 Dec 2010 11:47:53 -0500"  >&lt;p&gt;SeriesCorrectionEventHandler used to load one file at a time and a regression was introduced when fixing &lt;a href=&quot;https://jira.intelerad.com/browse/IP-46813&quot; title=&quot;SCEH: runs out of Java heap memory for large studies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-46813&quot;&gt;&lt;del&gt;IP-46813&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="248827" author="fabio.padilha" created="Thu, 23 Dec 2010 16:45:04 -0500"  >&lt;p&gt;Attachment SCEH2.diff has been added with description: Patch to fix this bug&lt;/p&gt;</comment>
                            <comment id="248813" author="build" created="Mon, 3 Jan 2011 12:35:29 -0500"  >&lt;p&gt;Released by fpadilha to master at 2011-01-03 12:35:27 (push 4569):&lt;br/&gt;
  PACS-3-8-1 (fix)        (previous build: PACS-3-8-1-P378)&lt;br/&gt;
  PACS-4-1-1 (fix)        (previous build: PACS-4-1-1-P236)&lt;br/&gt;
  PACS-4-1-2 (fix)        (previous build: PACS-4-1-2-P89)&lt;br/&gt;
  PACS-4-2-1 (fix)        (previous build: PACS-4-2-1-P185)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-2-3-A14)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/aeffbc182354&quot; target=&quot;_blank&quot;&gt;intelepacs:aeffbc182354&lt;/a&gt;  PACS-3-8-1  30441 fix: Changed the way how it loads Dicom files and checks for&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/4d1827149250&quot; target=&quot;_blank&quot;&gt;intelepacs:4d1827149250&lt;/a&gt;  PACS-4-1-1  30441 fix: Changed the way how it loads Dicom files and checks for&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/b02c52eeff97&quot; target=&quot;_blank&quot;&gt;intelepacs:b02c52eeff97&lt;/a&gt;  PACS-4-1-2  30441 fix: Changed the way how it loads Dicom files and checks for&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/d1feb4638941&quot; target=&quot;_blank&quot;&gt;intelepacs:d1feb4638941&lt;/a&gt;  PACS-4-2-1  30441 fix: Changed the way how it loads Dicom files and checks for&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/4ff0da5fae1e&quot; target=&quot;_blank&quot;&gt;intelepacs:4ff0da5fae1e&lt;/a&gt;  trunk       30441 fix: Changed the way how it loads Dicom files and checks for&lt;/p&gt;</comment>
                            <comment id="248814" author="fabio.padilha" created="Mon, 3 Jan 2011 14:32:56 -0500"  >&lt;p&gt;Description of the solution: &lt;br/&gt;
handleLegacyFiles method used to return a List of LoadedData objects with the DicomObject in memory. This list was only used by another function to see if there are skipped tags. I made a change to make handleLegacyFiles function return a boolean indicating if there is any skipped tags.&lt;/p&gt;

&lt;p&gt;Tests executed: &lt;br/&gt;
I ran the unit testing and tested in my 411 vmware with the files that were claimed to be causing the issue. The issue was reproducible without my fix and not reproducible after my changes.&lt;/p&gt;

&lt;p&gt;Unit tests added or modified: &lt;br/&gt;
None&lt;/p&gt;</comment>
                            <comment id="248815" author="acarmel" created="Mon, 3 Jan 2011 17:27:46 -0500"  >&lt;p&gt;This is actively happening in &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=202298&quot; target=&quot;_blank&quot;&gt;EW202298&lt;/a&gt; and &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=202257&quot; target=&quot;_blank&quot;&gt;EW202257&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;SCEH can get stuck without ever getting the stack trace or an exception. In these cases, Ipmon fails to kill it and corrections / validation grind to a halt.&lt;/p&gt;</comment>
                            <comment id="248816" author="htrinh" created="Tue, 4 Jan 2011 10:10:10 -0500"  >&lt;p&gt;Reproduced with RPMs: SeriesCorrectionEventHandler-4.2.1.P133-ims01&lt;br/&gt;
Verified with RPMs: SeriesCorrectionEventHandler-4.2.1.P186-ims01&lt;br/&gt;
Verification steps: &lt;/p&gt;

&lt;p&gt;1. Get study from client (1.2.840.113619.2.226.4270236.1292598347.0.6) with large header&lt;br/&gt;
2. Regenerate DCM files&lt;br/&gt;
3. Send study to PACS&lt;br/&gt;
4. In IB, wait for study to be validated and perform a patient correction&lt;br/&gt;
5. Observe the error in the SCEH logs&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;SCEH.log&amp;#93;&lt;/span&gt;:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-04 09:52:55.560 SCEH qa421mdb1.dyn.intelerad&amp;#93;&lt;/span&gt; &lt;br/&gt;
*************************&lt;br/&gt;
ERROR: Failed to load DICOM file /usr/local/PACS/images/20110104/1.2.276.0.7230010.3.1.2.1560951810.9185.1294150275.1/1.2.276.0.7230010.3.1.3.1560951810.9186.1294150276.1/1.2.276.0.7230010.3.1.4.1560951810.9220.1294150294.61.dcm&lt;br/&gt;
*************************&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-04 09:52:55.561 SCEH qa421mdb1.dyn.intelerad&amp;#93;&lt;/span&gt; Stack trace:&lt;br/&gt;
com.intelerad.lib.dicomtools.DicomToolsException: Failed to load DICOM object for file /usr/local/PACS/images/20110104/1.2.276.0.7230010.3.1.2.1560951810.9185.1294150275.1/1.2.276.0.7230010.3.1.3.1560951810.9186.1294150276.1/1.2.276.0.7230010.3.1.4.1560951810.9220.1294150294.61.dcm due to an OutOfMemoryError. The file may be too big or corrupt (retrieval from tape may be necessary).&lt;br/&gt;
        at com.intelerad.lib.dicomtools.DicomObjectIo.readDicomObject(DicomObjectIo.java:809)&lt;br/&gt;
        at com.intelerad.lib.dicomtools.DicomObjectIo.load(DicomObjectIo.java:253)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.handleLegacyData(SeriesCorrectionEventHandler.java:2133)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.fixDicomFiles(SeriesCorrectionEventHandler.java:400)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.handleDicomImageFileChanges(SeriesCorrectionEventHandler.java:1386)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.fixStudyInstanceUid(SeriesCorrectionEventHandler.java:1580)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.handleDbRecord(SeriesCorrectionEventHandler.java:1837)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.correctForMdbHost(SeriesCorrectionEventHandler.java:1915)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.correctForOrganization(SeriesCorrectionEventHandler.java:1950)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.correctionsLoop(SeriesCorrectionEventHandler.java:2001)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.main(SeriesCorrectionEventHandler.java:2087)&lt;br/&gt;
Caused by: java.lang.OutOfMemoryError: Java heap space&lt;br/&gt;
        at com.archimed.dicom.q.do(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.q.if(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.c.do(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.c.a(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.c.a(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.c.if(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.c.do(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.c.a(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.c.a(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.c.if(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.c.do(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.c.a(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.c.a(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.c.if(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.c.do(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.c.a(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.DicomReader.readTags(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.DicomReader.readDICOMStream(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.DicomReader.read(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.DicomReader.read(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.DicomReader.read(Unknown Source)&lt;br/&gt;
        at com.intelerad.lib.dicomtools.DicomObjectIo.readDicomObject(DicomObjectIo.java:793)&lt;br/&gt;
        ... 10 more&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-04 09:52:55.570 SCEH qa421mdb1.dyn.intelerad (WARNING)&amp;#93;&lt;/span&gt; Failed to fix study instance UID: 1.2.276.0.7230010.3.1.2.1560951810.9185.1294150275.1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-04 09:52:55.570 SCEH qa421mdb1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Marking study: 1.2.276.0.7230010.3.1.2.1560951810.9185.1294150275.1 with correction operation as FAILED&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-04 09:52:55.580 SCEH qa421mdb1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Retrieving next work item for AE: QA421MDB1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-04 09:52:55.583 SCEH qa421mdb1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Nothing found in the database on qa421mdb1.dyn.intelerad to work on.  Sleeping for 120 seconds.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-04 09:52:55.602 SCEH qa421mdb1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Dropping timestamp into the future for 30 minutes.&lt;/p&gt;

&lt;p&gt;6. Update SeriesCorrectionEventHandler rpm with fix&lt;br/&gt;
7. Perform patient correction on the same series&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Verified basic patient corrections with Name, DOB, PID, Acc#&lt;/li&gt;
	&lt;li&gt;Verified basic patient search, viewing images, viewing header info&lt;/li&gt;
	&lt;li&gt;Verified basic series edit/move&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;End result: Patient Correciton is successful&lt;br/&gt;
Time spent: 1 hr&lt;/p&gt;



&lt;p&gt;In addition, was also able to reproduce issue with a different stack trace (before the fix) as indicated by Alexandre (for future reference). Ipmon is unable to kill the running process while it takes up 100% cpu (very bad)&lt;/p&gt;


&lt;p&gt;PRIMARY_HOST = &lt;/p&gt;

&lt;p&gt;Organization(s) configured:&lt;/p&gt;


&lt;p&gt;ORGANIZATION ................ &lt;br/&gt;
MDB HOSTS ................... &lt;span class=&quot;error&quot;&gt;&amp;#91;qa421mdb1.dyn.intelerad, qa421web1.dyn.intelerad&amp;#93;&lt;/span&gt;&lt;br/&gt;
PRIMARY MDB SATELLITES ...... &lt;span class=&quot;error&quot;&gt;&amp;#91;qa421mdb1.dyn.intelerad&amp;#93;&lt;/span&gt;&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-04 09:47:05.762 SCEH qa421mdb1.dyn.intelerad&amp;#93;&lt;/span&gt; &lt;br/&gt;
*************************&lt;br/&gt;
ERROR: Caught exception: java.net.BindException: Address already in use&lt;br/&gt;
*************************&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-04 09:47:05.763 SCEH qa421mdb1.dyn.intelerad&amp;#93;&lt;/span&gt; Stack trace:&lt;br/&gt;
java.net.BindException: Address already in use&lt;br/&gt;
        at java.net.PlainSocketImpl.socketBind(Native Method)&lt;br/&gt;
        at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:365)&lt;br/&gt;
        at java.net.ServerSocket.bind(ServerSocket.java:319)&lt;br/&gt;
        at java.net.ServerSocket.bind(ServerSocket.java:277)&lt;br/&gt;
        at NetLibrary.TcpSignalListener.initializeServerPort(TcpSignalListener.java:67)&lt;br/&gt;
        at NetLibrary.TcpSignalListener.execute(TcpSignalListener.java:130)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.initializeTcpSignalListener(SeriesCorrectionEventHandler.java:155)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.main(SeriesCorrectionEventHandler.java:2086)&lt;/p&gt;</comment>
                            <comment id="248817" author="htrinh" created="Tue, 4 Jan 2011 10:28:23 -0500"  >&lt;p&gt;Note: The second stack trace was not reproducible after the fix. This is only for future reference.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;SCEH.log&amp;#93;&lt;/span&gt;&lt;br/&gt;
PRIMARY_HOST = &lt;/p&gt;

&lt;p&gt;Organization(s) configured:&lt;/p&gt;


&lt;p&gt;ORGANIZATION ................ &lt;br/&gt;
MDB HOSTS ................... &lt;span class=&quot;error&quot;&gt;&amp;#91;qa421mdb1.dyn.intelerad, qa421web1.dyn.intelerad&amp;#93;&lt;/span&gt;&lt;br/&gt;
PRIMARY MDB SATELLITES ...... &lt;span class=&quot;error&quot;&gt;&amp;#91;qa421mdb1.dyn.intelerad&amp;#93;&lt;/span&gt;&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-04 09:47:05.762 SCEH qa421mdb1.dyn.intelerad&amp;#93;&lt;/span&gt; &lt;br/&gt;
*************************&lt;br/&gt;
ERROR: Caught exception: java.net.BindException: Address already in use&lt;br/&gt;
*************************&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-04 09:47:05.763 SCEH qa421mdb1.dyn.intelerad&amp;#93;&lt;/span&gt; Stack trace:&lt;br/&gt;
java.net.BindException: Address already in use&lt;br/&gt;
        at java.net.PlainSocketImpl.socketBind(Native Method)&lt;br/&gt;
        at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:365)&lt;br/&gt;
        at java.net.ServerSocket.bind(ServerSocket.java:319)&lt;br/&gt;
        at java.net.ServerSocket.bind(ServerSocket.java:277)&lt;br/&gt;
        at NetLibrary.TcpSignalListener.initializeServerPort(TcpSignalListener.java:67)&lt;br/&gt;
        at NetLibrary.TcpSignalListener.execute(TcpSignalListener.java:130)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.initializeTcpSignalListener(SeriesCorrectionEventHandler.java:155)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.main(SeriesCorrectionEventHandler.java:2086)&lt;/p&gt;</comment>
                            <comment id="248818" author="mtremblay" created="Tue, 4 Jan 2011 14:21:07 -0500"  >&lt;p&gt;&lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=202436&quot; target=&quot;_blank&quot;&gt;EW202436&lt;/a&gt; (PRS) is tagged KB1190 and associated to this specific BZ. KB1190 keyword added.&lt;/p&gt;</comment>
                            <comment id="248819" author="iplokar" created="Tue, 4 Jan 2011 14:50:03 -0500"  >&lt;p&gt;Documented as a resolved issue in the 421R11 Release Notes.&lt;/p&gt;</comment>
                            <comment id="248820" author="lucie" created="Wed, 5 Jan 2011 10:11:37 -0500"  >&lt;p&gt;Included in PACS-4-2-1-R11&lt;/p&gt;</comment>
                            <comment id="248821" author="mpaquette" created="Wed, 5 Jan 2011 14:45:15 -0500"  >&lt;p&gt;Documented in 4.1.1 R19 release notes.&lt;/p&gt;</comment>
                            <comment id="248822" author="mpaquette" created="Wed, 5 Jan 2011 14:45:30 -0500"  >&lt;p&gt;Documented in 4.1.1 R19 release notes.&lt;/p&gt;</comment>
                            <comment id="248823" author="rami.bechara" created="Wed, 5 Jan 2011 15:26:46 -0500"  >&lt;p&gt;Included in PACS-4-1-1-R19&lt;/p&gt;</comment>
                            <comment id="248824" author="build" created="Wed, 2 Mar 2011 15:45:58 -0500"  >&lt;p&gt;Released by jsabella to master at 2011-03-02 15:45:47 (push 5270):&lt;br/&gt;
  PACS-4-2-4 (dummy)      (previous build: PACS-4-2-4-P1)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/3d22a9d14a1d&quot; target=&quot;_blank&quot;&gt;intelepacs:3d22a9d14a1d&lt;/a&gt;  PACS-4-2-4  30441 fix: Changed the way how it loads Dicom files and checks for&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/6caeb6d1c4f4&quot; target=&quot;_blank&quot;&gt;intelepacs:6caeb6d1c4f4&lt;/a&gt;  PACS-4-2-4  28856 dummy,29131 dummy,29148 dummy,28985 dummy,27550 dummy,28262 dummy,29096 dummy,29092 dummy,28855 dummy,29083 dummy,27472 dummy,28888 dummy,29157 dummy,28185 dummy,29163 dummy,29103 dummy,29017 dummy,28978 dummy,29144 dummy,29154 dummy,29097 dummy,29134 dummy,29176 dummy,29177 dummy,29178 dummy,29175 dummy,29062 dummy,29067 dummy,29123 dummy,29186 dummy,29181 dummy,29188 dummy,27627 dummy,28614 dummy,28638 dummy,29211 dummy,26476 dummy,29218 dummy,29180 dummy,29219 dummy,28933 dummy,20365 dummy,29185 dummy,28295 dummy,29117 dummy,28900 dummy,29079 dummy,29232 dummy,29225 dummy,27718 dummy,22614 dummy,29239 dummy,20740 dummy,22575 dummy,29231 dummy,29249 dummy,29099 dummy,29237 dummy,29259 dummy,29250 dummy,29255 dummy,28928 dummy,27536 dummy,29192 dummy,29203 dummy,29094 dummy,29275 dummy,29142 dummy,28535 dummy,29166 dummy,29262 dummy,29102 dummy,29246 dummy,29274 dummy,29305 dummy,29315 dummy,28991 dummy,27046 dummy,25832 dummy,28401 dummy,28915 dummy,28030 dummy,29326 dummy,29331 dummy,29316 dummy,29194 dummy,29342 dummy,29321 dummy,28563 dummy,22318 dummy,29287 dummy,29263 dummy,29252 dummy,27033 dummy,27025 dummy,26580 dummy,29282 dummy,24642 dummy,29221 dummy,29361 dummy,29297 dummy,29369 dummy,29352 dummy,29101 dummy,29385 dummy,29285 dummy,28491 dummy,24790 dummy,29417 dummy,29081 dummy,28255 dummy,29428 dummy,29363 dummy,29381 dummy,28551 dummy,29072 dummy,29432 dummy,29433 dummy,29362 dummy,29422 dummy,29394 dummy,28140 dummy,29454 dummy,29463 dummy,29465 dummy,29459 dummy,29193 dummy,29470 dummy,29472 dummy,29440 dummy,29462 dummy,29403 dummy,29415 dummy,29323 dummy,29429 dummy,29475 dummy,29482 dummy,29377 dummy,29504 dummy,29453 dummy,29442 dummy,29376 dummy,29509 dummy,29284 dummy,29471 dummy,29330 dummy,29516 dummy,29523 dummy,28549 dummy,29485 dummy,29497 dummy,29538 dummy,29506 dummy,29545 dummy,27488 dummy,29552 dummy,28512 dummy,29521 dummy,29455 dummy,29484 dummy,29411 dummy,29468 dummy,22259 dummy,23394 dummy,29518 dummy,29141 dummy,29578 dummy,28627 dummy,29581 dummy,29572 dummy,28839 dummy,28354 dummy,29364 dummy,29598 dummy,27896 dummy,11640 dummy,28748 dummy,29327 dummy,29254 dummy,29356 dummy,29413 dummy,29418 dummy,29152 dummy,29525 dummy,29546 dummy,29549 dummy,28447 dummy,14177 dummy,29612 dummy,29607 dummy,29603 dummy,29628 dummy,29370 dummy,29594 dummy,29542 dummy,29629 dummy,28036 dummy,29614 dummy,29519 dummy,29642 dummy,23876 dummy,29638 dummy,29382 dummy,28807 dummy,29631 dummy,25647 dummy,29649 dummy,29654 dummy,29655 dummy,29358 dummy,29667 dummy,29670 dummy,25241 dummy,29686 dummy,29657 dummy,29445 dummy,29595 dummy,29688 dummy,29652 dummy,29698 dummy,29113 dummy,29671 dummy,29672 dummy,28375 dummy,29543 dummy,28084 dummy,29703 dummy,29730 dummy,29666 dummy,29731 dummy,29734 dummy,29663 dummy,29718 dummy,28285 dummy,29713 dummy,28905 dummy,29021 dummy,29754 dummy,29755 dummy,27119 dummy,29740 dummy,29772 dummy,29757 dummy,29648 dummy,29775 dummy,26948 dummy,27889 dummy,27851 dummy,29325 dummy,29770 dummy,28334 dummy,25623 dummy,29332 dummy,29769 dummy,27249 dummy,29267 dummy,27802 dummy,29776 dummy,29825 dummy,29815 dummy,29844 dummy,25924 dummy,29840 dummy,29858 dummy,29859 dummy,25935 dummy,29526 dummy,29739 dummy,26399 dummy,29848 dummy,29367 dummy,29889 dummy,21764 dummy,29868 dummy,29865 dummy,29781 dummy,26909 dummy,28940 dummy,29199 dummy,29257 dummy,29875 dummy,29912 dummy,29339 dummy,28038 dummy,29894 dummy,28300 dummy,27872 dummy,29313 dummy,29571 dummy,29898 dummy,29916 dummy,29691 dummy,27820 dummy,27668 dummy,29717 dummy,24663 dummy,26977 dummy,29920 dummy,26110 dummy,29195 dummy,29965 dummy,29899 dummy,29808 dummy,29904 dummy,29989 dummy,29986 dummy,29979 dummy,29976 dummy,30015 dummy,22572 dummy,23588 dummy,30024 dummy,28785 dummy,28166 dummy,30037 dummy,29981 dummy,30040 dummy,30048 dummy,29946 dummy,30043 dummy,29460 dummy,27154 dummy,29818 dummy,30014 dummy,30088 dummy,30097 dummy,29927 dummy,29620 dummy,27793 dummy,30096 dummy,29867 dummy,30020 dummy,29984 dummy,30104 dummy,30101 dummy,22690 dummy,30117 dummy,30120 dummy,30067 dummy,30093 dummy,30130 dummy,30189 dummy,30198 dummy,25854 dummy,30179 dummy,30248 dummy,30247 dummy,29005 dummy,30270 dummy,30025 dummy,26449 dummy,28552 dummy,30281 dummy,30064 dummy,29919 dummy,30295 dummy,30259 dummy,30313 dummy,30291 dummy,30309 dummy,29922 dummy,30314 dummy,30319 dummy,29498 dummy,30323 dummy,25727 dummy,25188 dummy,30326 dummy,25778 dummy,30092 dummy,30347 dummy,30032 dummy,30342 dummy,30316 dummy,30255 dummy,29228 dummy,23056 dummy,30321 dummy,29561 dummy,30268 dummy,30384 dummy,29807 dummy,29597 dummy,30393 dummy,30398 dummy,7837 dummy,29924 dummy,30423 dummy,29590 dummy,24440 dummy,30434 dummy,30428 dummy,30447 dummy,30455 dummy,30370 dummy,30459 dummy,30409 dummy,30457 dummy,27380 dummy,30463 dummy,30441 dummy,30334 dummy,30470 dummy,28561 dummy,30472 dummy,30485 dummy,27870 dummy,27134 dummy,29905 dummy,30484 dummy,30301 dummy,30507 dummy,30422 dummy,30267 dummy,30527 dummy,30528 dummy,30531 dummy,30517 dummy,30535 dummy,30534 dummy,30479 dummy,30480 dummy,30521 dummy,30386 dummy,30297 dummy,30538 dummy,30483 dummy,30504 dummy,30537 dummy,30548 dummy,30554 dummy,30532 dummy,30552 dummy,30602 dummy,30591 dummy,30612 dummy,18871 dummy,29931 dummy,23370 dummy,30558 dummy,30557 dummy,30526 dummy,30646 dummy,30642 dummy,30053 dummy,29710 dummy,30565 dummy,30648 dummy,30687 dummy,30679 dummy,30702 dummy,30689 dummy,30707 dummy,30631 dummy,30722 dummy,30681 dummy,30544 dummy,30672 dummy,30741 dummy,30645 dummy,30312 dummy,30733 dummy,30726 dummy,22068 dummy,30098 dummy,30752 dummy,30195 dummy,30786 dummy,26317 dummy,30776 dummy,30662 dummy,29810 dummy,29618 dummy,30735 dummy,30023 dummy,30822 dummy,30261 dummy,30904 dummy,22288 dummy,30830 dummy,30827 dummy,30804 dummy,29949 dummy,30878 dummy,30927 dummy,30385 dummy,29292 dummy,30493 dummy,27600 dummy,30928 dummy,29156 dummy,30864 dummy,30505 dummy,30881 dummy,30952 dummy,30959 dummy,28419 dummy,30791 dummy,30639 dummy,30991 dummy: dummy merge from PACS-4-2-1&lt;/p&gt;</comment>
                            <comment id="248825" author="rami.bechara" created="Mon, 7 Jul 2014 13:29:20 -0400"  >&lt;p&gt;Included in PACS-3-8-1-R25&lt;/p&gt;</comment>
                            <comment id="248826" author="rboyle" created="Thu, 17 Jul 2014 11:48:31 -0400"  >&lt;p&gt;Added to the Resolved Issues section of the IntelePACS 3.8.1 R25 Release Notes (part#: IPEN381RN-O, issue 022).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="22932" name="SCEH2.diff" size="4475" author="fpadilha" created="Thu, 23 Dec 2010 16:45:04 -0500"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12603" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Affected Clients</customfieldname>
                        <customfieldvalues>
                                        <label>CLI</label>
            <label>PRS</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[2.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30441</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13386"><![CDATA[SeriesCorrectionEventHandler]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzq5zr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12102" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Release Notes</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12017"><![CDATA[Approved]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_11001" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>ServiceNow Case #</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>201551, 202298, 202257</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10801"><![CDATA[CRITICAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-50264] InteleViewer: upgrade derby</title>
                <link>https://jira.intelerad.com/browse/IP-50264</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;This slip covers holding area implementation in LocalDicomService&lt;/p&gt;</description>
            <key id="82518">IP-50264</key>
            <summary>InteleViewer: upgrade derby</summary>
                <type id="10905" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13911&amp;avatarType=issuetype">Enhancement</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="fpadilha">Fabio Padilha</assignee>
                                    <reporter username="fpadilha">Fabio Padilha</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Nov 2010 14:34:37 -0500</created>
                <updated>Mon, 25 Mar 2019 14:11:11 -0400</updated>
                            <resolved>Thu, 23 Aug 2012 09:39:00 -0400</resolved>
                                    <version>N/A</version>
                                    <fixVersion>4-3-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="245939" author="build" created="Thu, 10 Feb 2011 16:21:42 -0500"  >&lt;p&gt;Released by ncabatoff to master at 2011-02-10 16:21:41 (push 5012):&lt;br/&gt;
  trunk      (ongoing)    (previous build: PACS-4-2-3-A18)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/a85fd770342e&quot; target=&quot;_blank&quot;&gt;intelepacs:a85fd770342e&lt;/a&gt;  trunk       29966 ongoing: Upgrading to a new db-derby version for LDS.&lt;/p&gt;</comment>
                            <comment id="245940" author="nick.cabatoff" created="Wed, 8 Jun 2011 10:00:03 -0400"  >&lt;p&gt;Closing this bug for now because it having commits on 4-3-1 (for the Derby upgrade) while remaining open flags it in QA&apos;s tools as a problem.&lt;/p&gt;</comment>
                            <comment id="245941" author="build" created="Wed, 22 Jun 2011 13:22:20 -0400"  >&lt;p&gt;Released by ncabatoff to master at 2011-02-10 16:21:41 (push 5012):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-2-3-A18)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/a85fd770342e&quot; target=&quot;_blank&quot;&gt;intelepacs:a85fd770342e&lt;/a&gt;  trunk       29966 fix: Upgrading to a new db-derby version for LDS.&lt;/p&gt;</comment>
                            <comment id="245942" author="fabio.padilha" created="Thu, 23 Jun 2011 14:15:36 -0400"  >&lt;p&gt;Since we committed derby under LocalDicomService, now we have to rename this BZ to be just the derby upgrade that has been done.&lt;/p&gt;</comment>
                            <comment id="245943" author="costa.galanis" created="Thu, 14 Jul 2011 11:01:22 -0400"  >&lt;p&gt;Verified with RPMs: InteleViewer-4.3.1.P97-ims01&lt;/p&gt;

&lt;p&gt;Verified implicitly while testing &lt;a href=&quot;https://jira.intelerad.com/browse/IP-51074&quot; title=&quot;IV: (DICOM SCP): Upgrade derby library to 10.7.1.1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-51074&quot;&gt;&lt;del&gt;IP-51074&lt;/del&gt;&lt;/a&gt;. See &lt;a href=&quot;https://jira.intelerad.com/browse/IP-51074&quot; title=&quot;IV: (DICOM SCP): Upgrade derby library to 10.7.1.1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-51074&quot;&gt;&lt;del&gt;IP-51074&lt;/del&gt;&lt;/a&gt; comment 7 for details.&lt;/p&gt;</comment>
                            <comment id="245944" author="rami.bechara" created="Fri, 22 Jul 2011 16:56:07 -0400"  >&lt;p&gt;Included in IV-4-3-1-R1 (4-3-1-P119)&lt;/p&gt;</comment>
                            <comment id="245945" author="build" created="Tue, 13 Mar 2012 13:04:41 -0400"  >&lt;p&gt;Released by fpadilha to master at 2012-03-13 11:30:29 (push 12625):&lt;br/&gt;
  trunk      (ongoing)    (previous build: PACS-4-3-5-A1)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/365edabb1d70&quot; target=&quot;_blank&quot;&gt;intelepacs:365edabb1d70&lt;/a&gt;  trunk       29966 ongoing: First commit with draft versions.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/cb1af1c16c02&quot; target=&quot;_blank&quot;&gt;intelepacs:cb1af1c16c02&lt;/a&gt;  trunk       29966 ongoing: Move the holding area table from LocalDicom to DicomImage.  Add a new max_one_row_per_page index&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/08c40221c92b&quot; target=&quot;_blank&quot;&gt;intelepacs:08c40221c92b&lt;/a&gt;  trunk       29966 ongoing: Draft Version with more changes&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/e396061ea1c2&quot; target=&quot;_blank&quot;&gt;intelepacs:e396061ea1c2&lt;/a&gt;  trunk       29966 ongoing: Saving everything I have until now&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/26259f4fa1c2&quot; target=&quot;_blank&quot;&gt;intelepacs:26259f4fa1c2&lt;/a&gt;  trunk       29966 ongoing: Saving everything I have until now&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/052f115c8d1e&quot; target=&quot;_blank&quot;&gt;intelepacs:052f115c8d1e&lt;/a&gt;  trunk       29966 ongoing: Saving my changes until now&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/e5c6e01e39a7&quot; target=&quot;_blank&quot;&gt;intelepacs:e5c6e01e39a7&lt;/a&gt;  trunk       29966 ongoing: Saving everything I have until now&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/386074ed3c53&quot; target=&quot;_blank&quot;&gt;intelepacs:386074ed3c53&lt;/a&gt;  trunk       29966 ongoing: Saving everything I have until now&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/78bd1a5047b6&quot; target=&quot;_blank&quot;&gt;intelepacs:78bd1a5047b6&lt;/a&gt;  trunk       29966 ongoing: Saving everything I have until now&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/a14a29de38f4&quot; target=&quot;_blank&quot;&gt;intelepacs:a14a29de38f4&lt;/a&gt;  trunk       29966 ongoing: Saving everything I have until now&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/1aa844db1ead&quot; target=&quot;_blank&quot;&gt;intelepacs:1aa844db1ead&lt;/a&gt;  trunk       29966 ongoing: Saving everything I have until now&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/1b24a67670ac&quot; target=&quot;_blank&quot;&gt;intelepacs:1b24a67670ac&lt;/a&gt;  trunk       29966 ongoing: Saving everything I have until now.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/3d15249cd904&quot; target=&quot;_blank&quot;&gt;intelepacs:3d15249cd904&lt;/a&gt;  trunk       29966 ongoing: Saving everything I have until now.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/00c5467cf8f0&quot; target=&quot;_blank&quot;&gt;intelepacs:00c5467cf8f0&lt;/a&gt;  trunk       29966 ongoing: Saving everything I have until now.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/2e7b403757b3&quot; target=&quot;_blank&quot;&gt;intelepacs:2e7b403757b3&lt;/a&gt;  trunk       29966 ongoing: Add new Sybase DB user localdicomservice&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/6998528d61cd&quot; target=&quot;_blank&quot;&gt;intelepacs:6998528d61cd&lt;/a&gt;  trunk       29966 ongoing: Saving everything I have until now. SQL files.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/dd425595ec7a&quot; target=&quot;_blank&quot;&gt;intelepacs:dd425595ec7a&lt;/a&gt;  trunk       29966 ongoing: Saving everything I have until now. Test Files.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/88068220a5d1&quot; target=&quot;_blank&quot;&gt;intelepacs:88068220a5d1&lt;/a&gt;  trunk       29966 ongoing: Saving everything I have until now.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/845418f69af5&quot; target=&quot;_blank&quot;&gt;intelepacs:845418f69af5&lt;/a&gt;  trunk       29966 ongoing: Saving everything I have until now. Test Files.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/c05947a56276&quot; target=&quot;_blank&quot;&gt;intelepacs:c05947a56276&lt;/a&gt;  trunk       29966 ongoing: Saving everything I have until now.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/2030d82649d3&quot; target=&quot;_blank&quot;&gt;intelepacs:2030d82649d3&lt;/a&gt;  trunk       29966 ongoing: Saving everything I have until now.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/10a473fba409&quot; target=&quot;_blank&quot;&gt;intelepacs:10a473fba409&lt;/a&gt;  trunk       29966 ongoing: Read DicomFile and insert into DicomImage, fix DateUtilities&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/bd6bd2dab774&quot; target=&quot;_blank&quot;&gt;intelepacs:bd6bd2dab774&lt;/a&gt;  trunk       29966 ongoing: Add Eclipse project files.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/ff075d57589c&quot; target=&quot;_blank&quot;&gt;intelepacs:ff075d57589c&lt;/a&gt;  trunk       29966 ongoing: Fix post reception events. Check enable/disable keys before processing events&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/83b6666e7edf&quot; target=&quot;_blank&quot;&gt;intelepacs:83b6666e7edf&lt;/a&gt;  trunk       29966 ongoing: Implement first correction applied to new files.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/f09eb266e0ba&quot; target=&quot;_blank&quot;&gt;intelepacs:f09eb266e0ba&lt;/a&gt;  trunk       29966 ongoing: Move HoldingArea from Sybase to Postgres.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/f6b2a112acb2&quot; target=&quot;_blank&quot;&gt;intelepacs:f6b2a112acb2&lt;/a&gt;  trunk       29966 ongoing: Fix Integration Tests and add more unit testing.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/d436d50ac937&quot; target=&quot;_blank&quot;&gt;intelepacs:d436d50ac937&lt;/a&gt;  trunk       29966 ongoing: Fix how StoreAndForward takes default destination to set imsOwner.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/544db2c2cd64&quot; target=&quot;_blank&quot;&gt;intelepacs:544db2c2cd64&lt;/a&gt;  trunk       29966 ongoing: Implement first correction when first file arrives and&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/0fc7a471b85c&quot; target=&quot;_blank&quot;&gt;intelepacs:0fc7a471b85c&lt;/a&gt;  trunk       29966 ongoing: Fix process to calculate permanent file path.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/f5354f0943a3&quot; target=&quot;_blank&quot;&gt;intelepacs:f5354f0943a3&lt;/a&gt;  trunk       29966 ongoing: Fix integration tests.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/167552a98070&quot; target=&quot;_blank&quot;&gt;intelepacs:167552a98070&lt;/a&gt;  trunk       29966 ongoing: Fix integration testing in order to use relative path.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/8f96d0c7cd27&quot; target=&quot;_blank&quot;&gt;intelepacs:8f96d0c7cd27&lt;/a&gt;  trunk       29966 ongoing: Fix holding area columns and unit testing.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/926769607192&quot; target=&quot;_blank&quot;&gt;intelepacs:926769607192&lt;/a&gt;  trunk       29966 ongoing: Use Derby&apos;s iq instead of ant to load SQL files.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/f27a3381d337&quot; target=&quot;_blank&quot;&gt;intelepacs:f27a3381d337&lt;/a&gt;  trunk       29966 ongoing: Fix method that calculates permanent folder.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/b6de57c0656c&quot; target=&quot;_blank&quot;&gt;intelepacs:b6de57c0656c&lt;/a&gt;  trunk       29966 ongoing: Fix PatientLevel db insertion in sybase&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/6dca7cab18be&quot; target=&quot;_blank&quot;&gt;intelepacs:6dca7cab18be&lt;/a&gt;  trunk       29966 ongoing: Fix the status on new holding area events to match what LDS expects.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/761e39527893&quot; target=&quot;_blank&quot;&gt;intelepacs:761e39527893&lt;/a&gt;  trunk       29966 ongoing: Implement post validation events.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/4c9f6706e383&quot; target=&quot;_blank&quot;&gt;intelepacs:4c9f6706e383&lt;/a&gt;  trunk       29966 ongoing: Fix ControlFiles to be instantiated just once.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/d6fc1a0d2238&quot; target=&quot;_blank&quot;&gt;intelepacs:d6fc1a0d2238&lt;/a&gt;  trunk       29966 ongoing: Add schema files used by unit testing.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/e80060cc0a19&quot; target=&quot;_blank&quot;&gt;intelepacs:e80060cc0a19&lt;/a&gt;  trunk       29966 ongoing: Code refactoring on database connections and guice modules.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/30f5eba2e7e1&quot; target=&quot;_blank&quot;&gt;intelepacs:30f5eba2e7e1&lt;/a&gt;  trunk       29966 ongoing: Add dcmRouteDb into list of database names.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/b984b602900a&quot; target=&quot;_blank&quot;&gt;intelepacs:b984b602900a&lt;/a&gt;  trunk       29966 ongoing: Do not attempt to open database connections when&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/fa0898811ede&quot; target=&quot;_blank&quot;&gt;intelepacs:fa0898811ede&lt;/a&gt;  trunk       29966 ongoing: Code refactoring in post reception module and IncomingFile&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/94e75e1a1c74&quot; target=&quot;_blank&quot;&gt;intelepacs:94e75e1a1c74&lt;/a&gt;  trunk       29966 ongoing: Implement post validation events.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/620420fea88e&quot; target=&quot;_blank&quot;&gt;intelepacs:620420fea88e&lt;/a&gt;  trunk       29966 ongoing: New Unit Testing for File Corrections, data model validation and ValidationHandler.&lt;/p&gt;</comment>
                            <comment id="245946" author="rami.bechara" created="Thu, 23 Aug 2012 09:39:40 -0400"  >&lt;p&gt;Included in IV-4-4-1-R1 (4-4-1-P66)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Blocks</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="82287">IP-50033</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29966</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13232"><![CDATA[InteleViewer]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzq3d3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10804"><![CDATA[INTERNAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-50245] PCEH: may choose wrong server to do correction if images not on owner - possible loss of images (backport to 3-7-1)</title>
                <link>https://jira.intelerad.com/browse/IP-50245</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;RPM Version               : 3-7-1&lt;/p&gt;

&lt;p&gt;This is a backport request for ERAD for &lt;a href=&quot;https://jira.intelerad.com/browse/IP-45276&quot; title=&quot;PCEH: may choose wrong server to do correction if images not on owner - possible loss of images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-45276&quot;&gt;&lt;del&gt;IP-45276&lt;/del&gt;&lt;/a&gt;.  They are not able to FPU to 4-2-1 until June of 2011.&lt;/p&gt;

&lt;p&gt;+++ This bug was initially created as a clone of &lt;a href=&quot;https://jira.intelerad.com/browse/IP-45276&quot; title=&quot;PCEH: may choose wrong server to do correction if images not on owner - possible loss of images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-45276&quot;&gt;&lt;del&gt;IP-45276&lt;/del&gt;&lt;/a&gt; +++&lt;/p&gt;

&lt;p&gt;RPM Version               : PatientCorrectionEventHandler-3.1.13.P3B4-3.6.1.P137&lt;br/&gt;
EW                        : &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=144230&quot; target=&quot;_blank&quot;&gt;EW144230&lt;/a&gt;&lt;br/&gt;
Minimal steps to reproduce: &lt;br/&gt;
1. make sure a series have more than one image in multiply locationes&lt;br/&gt;
2. Series owner don&apos;t have this series&lt;br/&gt;
3. one location(with AE as A) has only 1 image and the other locations( B ) has the full amount of images.&lt;br/&gt;
4. issue one patient correction for the study&lt;br/&gt;
Expected behaviour        : location A will be delete and B will be choose to do the correction.&lt;br/&gt;
What happened instead?    : location B be deleted, and A was selected as the correcting location.&lt;/p&gt;</description>
            <key id="82499">IP-50245</key>
            <summary>PCEH: may choose wrong server to do correction if images not on owner - possible loss of images (backport to 3-7-1)</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="aleksey.izmailov">Aleksey Izmailov</assignee>
                                    <reporter username="tawney">Tawney Gowan</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Nov 2010 15:48:03 -0500</created>
                <updated>Mon, 25 Mar 2019 14:11:11 -0400</updated>
                            <resolved>Wed, 7 Sep 2011 16:12:00 -0400</resolved>
                                    <version>3-7-1</version>
                                    <fixVersion>3-7-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="245796" author="build" created="Thu, 18 Nov 2010 16:11:14 -0500"  >&lt;p&gt;Released by aizmailov to master at 2010-11-18 16:11:13 (push 3858):&lt;br/&gt;
  PACS-3-7-1 (fix)        (previous build: PACS-3-7-1-P242)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/339bf71ab8f8&quot; target=&quot;_blank&quot;&gt;intelepacs:339bf71ab8f8&lt;/a&gt;  PACS-3-7-1  29946 fix: backported from 173b9800f944, 3f81576f92b7, 0441b661457b, 1eabe6da576b on PACS-3-8-1&lt;/p&gt;</comment>
                            <comment id="245797" author="aleksey.izmailov" created="Thu, 18 Nov 2010 16:12:26 -0500"  >&lt;p&gt;Description of the solution: &lt;br/&gt;
Backported from 3-8-1 as a single changeset. Checked that the code compiles and ran unit tests.&lt;br/&gt;
Tests executed:&lt;br/&gt;
NONE. It&apos;s desirable if QA tests it.&lt;br/&gt;
Unit tests added or modified: NONE&lt;br/&gt;
However the original &lt;a href=&quot;https://jira.intelerad.com/browse/IP-45276&quot; title=&quot;PCEH: may choose wrong server to do correction if images not on owner - possible loss of images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-45276&quot;&gt;&lt;del&gt;IP-45276&lt;/del&gt;&lt;/a&gt; adds/modifies: &lt;br/&gt;
hl7gatewayserver/TestSynchronizePacs.java&lt;br/&gt;
TestDicomMasterDatabaseIo.java&lt;br/&gt;
PatientCorrectionEventHandler/TestAll.java&lt;br/&gt;
PatientCorrectionEventHandler/TestPatientCorrectionEventHandler.java&lt;/p&gt;</comment>
                            <comment id="245798" author="build" created="Mon, 22 Nov 2010 09:18:25 -0500"  >&lt;p&gt;Released by aizmailov to master at 2010-11-22 09:18:24 (push 3940):&lt;br/&gt;
  PACS-3-7-1 (fix)        (previous build: PACS-3-7-1-P243)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/eb36ec212693&quot; target=&quot;_blank&quot;&gt;intelepacs:eb36ec212693&lt;/a&gt;  PACS-3-7-1  29946 fix: Fix Unit Test&lt;/p&gt;</comment>
                            <comment id="245799" author="htrinh" created="Mon, 22 Nov 2010 15:42:19 -0500"  >&lt;p&gt;Reproduced with RPMs: PatientCorrectionEventHandler-3.1.14.P2B2-3.7.1.P22&lt;br/&gt;
Verified with RPMs: PatientCorrectionEventHandler-3.1.14.P2B2-3.7.1.P244&lt;br/&gt;
Verification steps: &lt;/p&gt;

&lt;p&gt;1. Send a study that has multiple images to the PACS (qa371mdb1 autoroutes to qa371arch1)&lt;br/&gt;
2. Modify the owner directly in DicomMaster/DicomImage&lt;/p&gt;

{sqsh}
&lt;p&gt;.rdc@QA371MDB1.DicomImage.1&amp;gt; update StudyLevel set Owner=&apos;HOA&apos; where StuInsUID=&apos;1.2.276.0.7230010.3.1.2.1560951810.6220.1290179609.1&apos;&lt;/p&gt;

&lt;p&gt;3. Take a backup of studies on mdb1&lt;br/&gt;
4. Perform a delseriresbyUID --dellocal 1.2.276.0.7230010.3.1.2.1560951810.6220.1290179609.1 on mdb1&lt;br/&gt;
5. Remove 1 dcm file from the backup and resend the study to mdb1&lt;/p&gt;

&lt;p&gt;sendImages --hostname qa371mdb1 *.dcm&lt;/p&gt;

&lt;p&gt;6. listLocsforStudy.pl HOA2585127&lt;/p&gt;

&lt;p&gt;StuInsUID: 1.2.276.0.7230010.3.1.2.1560951810.6220.1290179609.1&lt;br/&gt;
StuDat: 20101119  StuTim: 10:13:29 ( 36809 ssm )&lt;br/&gt;
InsertDate: 20101119  InsertTime: 10:13:33 ( 36813 ssm )&lt;br/&gt;
PatNam: &lt;span class=&quot;error&quot;&gt;&amp;#91;HOA2585127^HOA&amp;#93;&lt;/span&gt;  PatID: &lt;span class=&quot;error&quot;&gt;&amp;#91;HOA2585127&amp;#93;&lt;/span&gt;  AccNum: &lt;span class=&quot;error&quot;&gt;&amp;#91;G101119101330312&amp;#93;&lt;/span&gt;&lt;br/&gt;
RPId: &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;  Owner: &lt;span class=&quot;error&quot;&gt;&amp;#91;QA371MDB1&amp;#93;&lt;/span&gt;  Modality: &lt;span class=&quot;error&quot;&gt;&amp;#91;CT&amp;#93;&lt;/span&gt;  Organization: &lt;span class=&quot;error&quot;&gt;&amp;#91;IMS&amp;#93;&lt;/span&gt;&lt;br/&gt;
StuDes: &lt;span class=&quot;error&quot;&gt;&amp;#91;ABDOMEN&amp;#93;&lt;/span&gt;  GroupName: &lt;span class=&quot;error&quot;&gt;&amp;#91;HOA2585127^HOA&amp;#93;&lt;/span&gt;&lt;br/&gt;
   SerInsUID: 1.2.276.0.7230010.3.1.3.1560951810.6221.1290179609.1&lt;br/&gt;
   Owner: QA371MDB1  Mod: CT  SerNum: 2  NumSerRelIma: 79  isUpdated: F&lt;br/&gt;
   InsertDate: 20101119  InsertTime: 10:13:33 ( 36813 ssm )  SPSId: 1&lt;br/&gt;
   SeriesDate: 20101119  SeriesTime: 10:13:29  Source AE: HOA_AE&lt;br/&gt;
     Location: QA371ARCH1CACHE1  Num: 79&lt;br/&gt;
     Location: QA371MDB1  Num: 78&lt;/p&gt;

&lt;p&gt;7. Perform a patient correciton &lt;br/&gt;
8. Observe mdb1 is chosen as the owner and images are removed from arch1&lt;/p&gt;

&lt;p&gt;listLocsforStudy.pl HOA2585127&lt;/p&gt;

&lt;p&gt;StuInsUID: 1.2.276.0.7230010.3.1.2.1560951810.6220.1290179609.1&lt;br/&gt;
StuDat: 20101119  StuTim: 10:13:29 ( 36809 ssm )&lt;br/&gt;
InsertDate: 20101119  InsertTime: 10:13:33 ( 36813 ssm )&lt;br/&gt;
PatNam: &lt;span class=&quot;error&quot;&gt;&amp;#91;HOA2585127^HOA&amp;#93;&lt;/span&gt;  PatID: &lt;span class=&quot;error&quot;&gt;&amp;#91;HOA2585127&amp;#93;&lt;/span&gt;  AccNum: &lt;span class=&quot;error&quot;&gt;&amp;#91;G101119101330312&amp;#93;&lt;/span&gt;&lt;br/&gt;
RPId: &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;  Owner: &lt;span class=&quot;error&quot;&gt;&amp;#91;QA371MDB1&amp;#93;&lt;/span&gt;  Modality: &lt;span class=&quot;error&quot;&gt;&amp;#91;CT&amp;#93;&lt;/span&gt;  Organization: &lt;span class=&quot;error&quot;&gt;&amp;#91;IMS&amp;#93;&lt;/span&gt;&lt;br/&gt;
StuDes: &lt;span class=&quot;error&quot;&gt;&amp;#91;ABDOMEN&amp;#93;&lt;/span&gt;  GroupName: &lt;span class=&quot;error&quot;&gt;&amp;#91;HOA2585127^HOA&amp;#93;&lt;/span&gt;&lt;br/&gt;
   SerInsUID: 1.2.276.0.7230010.3.1.3.1560951810.6221.1290179609.1&lt;br/&gt;
   Owner: QA371MDB1  Mod: CT  SerNum: 2  NumSerRelIma: 79  isUpdated: F&lt;br/&gt;
   InsertDate: 20101119  InsertTime: 10:13:33 ( 36813 ssm )  SPSId: 1&lt;br/&gt;
   SeriesDate: 20101119  SeriesTime: 10:13:29  Source AE: HOA_AE&lt;br/&gt;
     Location: QA371ARCH1CACHE1  Num: 78&lt;br/&gt;
     Location: QA371MDB1  Num: 78&lt;/p&gt;

&lt;p&gt;9. Image is lost&lt;br/&gt;
10. Update rpm and perform steps 1 to 8 again&lt;br/&gt;
11. Observe issue still occurs&lt;/p&gt;

&lt;p&gt;Re-opening&lt;/p&gt;</comment>
                            <comment id="245800" author="aleksey.izmailov" created="Wed, 24 Nov 2010 10:42:15 -0500"  >&lt;p&gt;Description of the solution: &lt;br/&gt;
The backport has been verified by QA and turned out to be working fine. However this bug covers only some specific cases as mentioned in original &lt;a href=&quot;https://jira.intelerad.com/browse/IP-45276&quot; title=&quot;PCEH: may choose wrong server to do correction if images not on owner - possible loss of images&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-45276&quot;&gt;&lt;del&gt;IP-45276&lt;/del&gt;&lt;/a&gt;. No further code changes are done. Changing resolution to Fixed.&lt;br/&gt;
Tests executed: &lt;br/&gt;
NONE&lt;br/&gt;
Unit tests added or modified: &lt;br/&gt;
NONE&lt;/p&gt;</comment>
                            <comment id="245801" author="htrinh" created="Wed, 24 Nov 2010 10:52:00 -0500"  >&lt;p&gt;Reproduced with RPMs: PatientCorrectionEventHandler-3.1.14.P2B2-3.7.1.P22&lt;br/&gt;
Verified with RPMs: PatientCorrectionEventHandler-3.1.14.P2B2-3.7.1.P244&lt;br/&gt;
Verification steps: &lt;/p&gt;

&lt;p&gt;1. Change qa371arch1cache1 to a modality server (this was originally not made clear, but modality servers will take precedent over Archive servers and this issue will still be reproducible if this change is not made)&lt;br/&gt;
2. Send a study that has multiple images to the PACS (qa371mdb1 autoroutes to qa371arch1)&lt;br/&gt;
3. Modify the owner directly in DicomMaster/DicomImage&lt;/p&gt;

{sqsh}
&lt;p&gt;.rdc@QA371MDB1.DicomImage.1&amp;gt; update SeriesLevel set Owner=&apos;HOA&apos; where SerInsUID=&apos;1.2.276.0.7230010.3.1.2.1560951810.6220.1290179609.1&apos;&lt;/p&gt;

&lt;p&gt;4. Take a backup of studies on mdb1&lt;br/&gt;
5. Perform a delseriresbyUID --dellocal 1.2.276.0.7230010.3.1.2.1560951810.6220.1290179609.1 on mdb1&lt;br/&gt;
6. Remove 1 dcm file from the backup and resend the study to mdb1&lt;/p&gt;

&lt;p&gt;sendImages --hostname qa371mdb1 *.dcm&lt;/p&gt;

&lt;p&gt;7. listLocsforStudy.pl HOA2585127&lt;/p&gt;

&lt;p&gt;StuInsUID: 1.2.276.0.7230010.3.1.2.1560951810.6220.1290179609.1&lt;br/&gt;
StuDat: 20101119  StuTim: 10:13:29 ( 36809 ssm )&lt;br/&gt;
InsertDate: 20101119  InsertTime: 10:13:33 ( 36813 ssm )&lt;br/&gt;
PatNam: &lt;span class=&quot;error&quot;&gt;&amp;#91;HOA2585127^HOA&amp;#93;&lt;/span&gt;  PatID: &lt;span class=&quot;error&quot;&gt;&amp;#91;HOA2585127&amp;#93;&lt;/span&gt;  AccNum: &lt;span class=&quot;error&quot;&gt;&amp;#91;G101119101330312&amp;#93;&lt;/span&gt;&lt;br/&gt;
RPId: &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;  Owner: &lt;span class=&quot;error&quot;&gt;&amp;#91;QA371MDB1&amp;#93;&lt;/span&gt;  Modality: &lt;span class=&quot;error&quot;&gt;&amp;#91;CT&amp;#93;&lt;/span&gt;  Organization: &lt;span class=&quot;error&quot;&gt;&amp;#91;IMS&amp;#93;&lt;/span&gt;&lt;br/&gt;
StuDes: &lt;span class=&quot;error&quot;&gt;&amp;#91;ABDOMEN&amp;#93;&lt;/span&gt;  GroupName: &lt;span class=&quot;error&quot;&gt;&amp;#91;HOA2585127^HOA&amp;#93;&lt;/span&gt;&lt;br/&gt;
   SerInsUID: 1.2.276.0.7230010.3.1.3.1560951810.6221.1290179609.1&lt;br/&gt;
   Owner: QA371MDB1  Mod: CT  SerNum: 2  NumSerRelIma: 79  isUpdated: F&lt;br/&gt;
   InsertDate: 20101119  InsertTime: 10:13:33 ( 36813 ssm )  SPSId: 1&lt;br/&gt;
   SeriesDate: 20101119  SeriesTime: 10:13:29  Source AE: HOA_AE&lt;br/&gt;
     Location: QA371ARCH1CACHE1  Num: 79&lt;br/&gt;
     Location: QA371MDB1  Num: 78&lt;/p&gt;

&lt;p&gt;8. Perform a patient correciton &lt;br/&gt;
9. Observe mdb1 is chosen as the owner and images are removed from arch1&lt;/p&gt;

&lt;p&gt;listLocsforStudy.pl HOA2585127&lt;/p&gt;

&lt;p&gt;StuInsUID: 1.2.276.0.7230010.3.1.2.1560951810.6220.1290179609.1&lt;br/&gt;
StuDat: 20101119  StuTim: 10:13:29 ( 36809 ssm )&lt;br/&gt;
InsertDate: 20101119  InsertTime: 10:13:33 ( 36813 ssm )&lt;br/&gt;
PatNam: &lt;span class=&quot;error&quot;&gt;&amp;#91;HOA2585127^HOA&amp;#93;&lt;/span&gt;  PatID: &lt;span class=&quot;error&quot;&gt;&amp;#91;HOA2585127&amp;#93;&lt;/span&gt;  AccNum: &lt;span class=&quot;error&quot;&gt;&amp;#91;G101119101330312&amp;#93;&lt;/span&gt;&lt;br/&gt;
RPId: &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;  Owner: &lt;span class=&quot;error&quot;&gt;&amp;#91;QA371MDB1&amp;#93;&lt;/span&gt;  Modality: &lt;span class=&quot;error&quot;&gt;&amp;#91;CT&amp;#93;&lt;/span&gt;  Organization: &lt;span class=&quot;error&quot;&gt;&amp;#91;IMS&amp;#93;&lt;/span&gt;&lt;br/&gt;
StuDes: &lt;span class=&quot;error&quot;&gt;&amp;#91;ABDOMEN&amp;#93;&lt;/span&gt;  GroupName: &lt;span class=&quot;error&quot;&gt;&amp;#91;HOA2585127^HOA&amp;#93;&lt;/span&gt;&lt;br/&gt;
   SerInsUID: 1.2.276.0.7230010.3.1.3.1560951810.6221.1290179609.1&lt;br/&gt;
   Owner: QA371MDB1  Mod: CT  SerNum: 2  NumSerRelIma: 79  isUpdated: F&lt;br/&gt;
   InsertDate: 20101119  InsertTime: 10:13:33 ( 36813 ssm )  SPSId: 1&lt;br/&gt;
   SeriesDate: 20101119  SeriesTime: 10:13:29  Source AE: HOA_AE&lt;br/&gt;
     Location: QA371ARCH1CACHE1  Num: 78&lt;br/&gt;
     Location: QA371MDB1  Num: 78&lt;/p&gt;

&lt;p&gt;10. Image is lost&lt;br/&gt;
11. Update rpm and restart PCEH&lt;br/&gt;
12. Perform steps 1 to 8 again&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Verified&lt;/li&gt;
	&lt;li&gt;Ran InteleTest plugins (Hl7.plugin, Hl7Bindings.plugin, Hl7Merges.plugin, Hl7StateTransition.plugin)&lt;/li&gt;
	&lt;li&gt;Verified ADT msgs (A01, A02, A03, A04, A05, A08, A11, A12, A13, A17, A18, A30, A31, A34, A45) from /net/qa-fs1/qa0/testing_ressources/RIS/Hl7MessagesFromClientSites&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;End result: Modality server that contains the most images is chosen as the owner (in this case arch1 instead of mdb1)&lt;br/&gt;
Time spent: 4 hr&lt;/p&gt;


&lt;p&gt;Note: This is a very specific fix for a very specific case (Case 1 below) when the owner of the images no longer has the study locally.&lt;/p&gt;

&lt;p&gt;Case 1: &lt;br/&gt;
If MOD1 server (1 image) and MOD2 server (5 images) are the only servers that have copies of the study, MOD2 server will be chosen as the owner since it is a modality server that contains the most images.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://jira.intelerad.com/browse/IP-23559&quot; title=&quot;Site code management for WebServer user accounts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-23559&quot;&gt;&lt;del&gt;IP-23559&lt;/del&gt;&lt;/a&gt;:&lt;br/&gt;
If MOD server (1 image) and ARCH server (5 images) are the only servers that have copies of the study, MOD server will be chosen as the owner because it has precedent over archive servers (ie. images will be lost, expected behaviour confirmed by Nick and Steve)&lt;/p&gt;

&lt;p&gt;Case 3:&lt;br/&gt;
If ARCH1 server (1 image) and ARCH2 server (5 images) are the only servers that have copies of the study, ARCH2 server will be chosen as the owner since it is a modality server that contains the most images.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://jira.intelerad.com/browse/IP-23559&quot; title=&quot;Site code management for WebServer user accounts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-23559&quot;&gt;&lt;del&gt;IP-23559&lt;/del&gt;&lt;/a&gt;:&lt;br/&gt;
If MOD server (5 image) and ARCH server (1 images) are the only servers that have copies of the study, MOD server will be chosen as the owner because it has precedent over archive servers, however in this scenario no images are lost because MOD server has more images than ARCH server.&lt;/p&gt;</comment>
                            <comment id="245802" author="lucie" created="Fri, 26 Nov 2010 12:18:15 -0500"  >&lt;p&gt;Included in PACS-4-1-1-R18&lt;/p&gt;</comment>
                            <comment id="245803" author="rami.bechara" created="Fri, 3 Dec 2010 09:12:08 -0500"  >&lt;p&gt;Included in PACS-4-2-1-R10&lt;/p&gt;</comment>
                            <comment id="245804" author="jmartin" created="Fri, 3 Dec 2010 14:24:13 -0500"  >&lt;p&gt;Included in IntelePACS 4.2.1 R10 release notes (IPEN421RN-O Issue 010).&lt;/p&gt;</comment>
                            <comment id="245805" author="ron.levreault" created="Thu, 23 Dec 2010 12:23:53 -0500"  >&lt;p&gt;Added to IntelePACS 381 R24 Release Notes (IPEN381RN-O Issue 021).&lt;/p&gt;

&lt;p&gt;Triaged during IntelePACS 381 R24 Release Notes.&lt;br/&gt;
Does not need to be added to main docs.&lt;/p&gt;

&lt;p&gt;(Fixed flags: Set ReleaseNotes to - and left Documentation as -)&lt;/p&gt;</comment>
                            <comment id="245806" author="build" created="Wed, 2 Mar 2011 15:46:00 -0500"  >&lt;p&gt;Released by jsabella to master at 2011-03-02 15:45:47 (push 5270):&lt;br/&gt;
  PACS-4-2-4 (dummy)      (previous build: PACS-4-2-4-P1)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/6caeb6d1c4f4&quot; target=&quot;_blank&quot;&gt;intelepacs:6caeb6d1c4f4&lt;/a&gt;  PACS-4-2-4  28856 dummy,29131 dummy,29148 dummy,28985 dummy,27550 dummy,28262 dummy,29096 dummy,29092 dummy,28855 dummy,29083 dummy,27472 dummy,28888 dummy,29157 dummy,28185 dummy,29163 dummy,29103 dummy,29017 dummy,28978 dummy,29144 dummy,29154 dummy,29097 dummy,29134 dummy,29176 dummy,29177 dummy,29178 dummy,29175 dummy,29062 dummy,29067 dummy,29123 dummy,29186 dummy,29181 dummy,29188 dummy,27627 dummy,28614 dummy,28638 dummy,29211 dummy,26476 dummy,29218 dummy,29180 dummy,29219 dummy,28933 dummy,20365 dummy,29185 dummy,28295 dummy,29117 dummy,28900 dummy,29079 dummy,29232 dummy,29225 dummy,27718 dummy,22614 dummy,29239 dummy,20740 dummy,22575 dummy,29231 dummy,29249 dummy,29099 dummy,29237 dummy,29259 dummy,29250 dummy,29255 dummy,28928 dummy,27536 dummy,29192 dummy,29203 dummy,29094 dummy,29275 dummy,29142 dummy,28535 dummy,29166 dummy,29262 dummy,29102 dummy,29246 dummy,29274 dummy,29305 dummy,29315 dummy,28991 dummy,27046 dummy,25832 dummy,28401 dummy,28915 dummy,28030 dummy,29326 dummy,29331 dummy,29316 dummy,29194 dummy,29342 dummy,29321 dummy,28563 dummy,22318 dummy,29287 dummy,29263 dummy,29252 dummy,27033 dummy,27025 dummy,26580 dummy,29282 dummy,24642 dummy,29221 dummy,29361 dummy,29297 dummy,29369 dummy,29352 dummy,29101 dummy,29385 dummy,29285 dummy,28491 dummy,24790 dummy,29417 dummy,29081 dummy,28255 dummy,29428 dummy,29363 dummy,29381 dummy,28551 dummy,29072 dummy,29432 dummy,29433 dummy,29362 dummy,29422 dummy,29394 dummy,28140 dummy,29454 dummy,29463 dummy,29465 dummy,29459 dummy,29193 dummy,29470 dummy,29472 dummy,29440 dummy,29462 dummy,29403 dummy,29415 dummy,29323 dummy,29429 dummy,29475 dummy,29482 dummy,29377 dummy,29504 dummy,29453 dummy,29442 dummy,29376 dummy,29509 dummy,29284 dummy,29471 dummy,29330 dummy,29516 dummy,29523 dummy,28549 dummy,29485 dummy,29497 dummy,29538 dummy,29506 dummy,29545 dummy,27488 dummy,29552 dummy,28512 dummy,29521 dummy,29455 dummy,29484 dummy,29411 dummy,29468 dummy,22259 dummy,23394 dummy,29518 dummy,29141 dummy,29578 dummy,28627 dummy,29581 dummy,29572 dummy,28839 dummy,28354 dummy,29364 dummy,29598 dummy,27896 dummy,11640 dummy,28748 dummy,29327 dummy,29254 dummy,29356 dummy,29413 dummy,29418 dummy,29152 dummy,29525 dummy,29546 dummy,29549 dummy,28447 dummy,14177 dummy,29612 dummy,29607 dummy,29603 dummy,29628 dummy,29370 dummy,29594 dummy,29542 dummy,29629 dummy,28036 dummy,29614 dummy,29519 dummy,29642 dummy,23876 dummy,29638 dummy,29382 dummy,28807 dummy,29631 dummy,25647 dummy,29649 dummy,29654 dummy,29655 dummy,29358 dummy,29667 dummy,29670 dummy,25241 dummy,29686 dummy,29657 dummy,29445 dummy,29595 dummy,29688 dummy,29652 dummy,29698 dummy,29113 dummy,29671 dummy,29672 dummy,28375 dummy,29543 dummy,28084 dummy,29703 dummy,29730 dummy,29666 dummy,29731 dummy,29734 dummy,29663 dummy,29718 dummy,28285 dummy,29713 dummy,28905 dummy,29021 dummy,29754 dummy,29755 dummy,27119 dummy,29740 dummy,29772 dummy,29757 dummy,29648 dummy,29775 dummy,26948 dummy,27889 dummy,27851 dummy,29325 dummy,29770 dummy,28334 dummy,25623 dummy,29332 dummy,29769 dummy,27249 dummy,29267 dummy,27802 dummy,29776 dummy,29825 dummy,29815 dummy,29844 dummy,25924 dummy,29840 dummy,29858 dummy,29859 dummy,25935 dummy,29526 dummy,29739 dummy,26399 dummy,29848 dummy,29367 dummy,29889 dummy,21764 dummy,29868 dummy,29865 dummy,29781 dummy,26909 dummy,28940 dummy,29199 dummy,29257 dummy,29875 dummy,29912 dummy,29339 dummy,28038 dummy,29894 dummy,28300 dummy,27872 dummy,29313 dummy,29571 dummy,29898 dummy,29916 dummy,29691 dummy,27820 dummy,27668 dummy,29717 dummy,24663 dummy,26977 dummy,29920 dummy,26110 dummy,29195 dummy,29965 dummy,29899 dummy,29808 dummy,29904 dummy,29989 dummy,29986 dummy,29979 dummy,29976 dummy,30015 dummy,22572 dummy,23588 dummy,30024 dummy,28785 dummy,28166 dummy,30037 dummy,29981 dummy,30040 dummy,30048 dummy,29946 dummy,30043 dummy,29460 dummy,27154 dummy,29818 dummy,30014 dummy,30088 dummy,30097 dummy,29927 dummy,29620 dummy,27793 dummy,30096 dummy,29867 dummy,30020 dummy,29984 dummy,30104 dummy,30101 dummy,22690 dummy,30117 dummy,30120 dummy,30067 dummy,30093 dummy,30130 dummy,30189 dummy,30198 dummy,25854 dummy,30179 dummy,30248 dummy,30247 dummy,29005 dummy,30270 dummy,30025 dummy,26449 dummy,28552 dummy,30281 dummy,30064 dummy,29919 dummy,30295 dummy,30259 dummy,30313 dummy,30291 dummy,30309 dummy,29922 dummy,30314 dummy,30319 dummy,29498 dummy,30323 dummy,25727 dummy,25188 dummy,30326 dummy,25778 dummy,30092 dummy,30347 dummy,30032 dummy,30342 dummy,30316 dummy,30255 dummy,29228 dummy,23056 dummy,30321 dummy,29561 dummy,30268 dummy,30384 dummy,29807 dummy,29597 dummy,30393 dummy,30398 dummy,7837 dummy,29924 dummy,30423 dummy,29590 dummy,24440 dummy,30434 dummy,30428 dummy,30447 dummy,30455 dummy,30370 dummy,30459 dummy,30409 dummy,30457 dummy,27380 dummy,30463 dummy,30441 dummy,30334 dummy,30470 dummy,28561 dummy,30472 dummy,30485 dummy,27870 dummy,27134 dummy,29905 dummy,30484 dummy,30301 dummy,30507 dummy,30422 dummy,30267 dummy,30527 dummy,30528 dummy,30531 dummy,30517 dummy,30535 dummy,30534 dummy,30479 dummy,30480 dummy,30521 dummy,30386 dummy,30297 dummy,30538 dummy,30483 dummy,30504 dummy,30537 dummy,30548 dummy,30554 dummy,30532 dummy,30552 dummy,30602 dummy,30591 dummy,30612 dummy,18871 dummy,29931 dummy,23370 dummy,30558 dummy,30557 dummy,30526 dummy,30646 dummy,30642 dummy,30053 dummy,29710 dummy,30565 dummy,30648 dummy,30687 dummy,30679 dummy,30702 dummy,30689 dummy,30707 dummy,30631 dummy,30722 dummy,30681 dummy,30544 dummy,30672 dummy,30741 dummy,30645 dummy,30312 dummy,30733 dummy,30726 dummy,22068 dummy,30098 dummy,30752 dummy,30195 dummy,30786 dummy,26317 dummy,30776 dummy,30662 dummy,29810 dummy,29618 dummy,30735 dummy,30023 dummy,30822 dummy,30261 dummy,30904 dummy,22288 dummy,30830 dummy,30827 dummy,30804 dummy,29949 dummy,30878 dummy,30927 dummy,30385 dummy,29292 dummy,30493 dummy,27600 dummy,30928 dummy,29156 dummy,30864 dummy,30505 dummy,30881 dummy,30952 dummy,30959 dummy,28419 dummy,30791 dummy,30639 dummy,30991 dummy: dummy merge from PACS-4-2-1&lt;/p&gt;</comment>
                            <comment id="245807" author="rami.bechara" created="Tue, 15 Mar 2011 12:04:08 -0400"  >&lt;p&gt;Included in PACS-3-8-1-R24&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12603" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Affected Clients</customfieldname>
                        <customfieldvalues>
                                        <label>ERAD</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12110" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Documentation</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12035"><![CDATA[Approved]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29946</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13314"><![CDATA[PatientCorrectionEventHandler]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzq38v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12102" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Release Notes</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12017"><![CDATA[Approved]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10801"><![CDATA[CRITICAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-49445] SCEH: Patient Correction when series is in archieve queue breaks archiving</title>
                <link>https://jira.intelerad.com/browse/IP-49445</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;RPM Version               : PatientCorrectionEventHandler-4.2.1.P3-ims01.i386.rpm&lt;br/&gt;
EW                        : &lt;br/&gt;
Minimal steps to reproduce: &lt;/p&gt;

&lt;p&gt;1. Send an image to the Pacs using modifyAndSend (AutoRoute moves series from mdb1 to arch1 to be archived)&lt;br/&gt;
2. Do a patient correction (modify all fields) while the series is waiting in the SeriesArchive&lt;br/&gt;
3. Observe the InsertTime is incorrect (contains the date and time. eg. 20100728170256) in the SeriesCorrectionEventHandlers logs. &lt;br/&gt;
4. Series is never archived&lt;/p&gt;

&lt;p&gt;Expected behaviour        : Series gets archived&lt;br/&gt;
What happened instead?    : DLTd is unable to archive series due to incorrect InsertTime and stays in the queue indefinitely &lt;/p&gt;



&lt;p&gt;SCEH.log:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:55.990 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Step 1: SKIPPING: ValidationDB is not configured&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:55.998 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Step 2: START: Modifying all image files for each series in study 1.2.276.0.72300&lt;br/&gt;
10.3.1.2.1560953602.4408.1280350729.1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:55.998 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Found 1 series on the local machine.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.015 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Splitting pixel data from legacy DICOM files&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.027 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; DICOM object for file /usr/local/PACS/images/20100728/1.2.276.0.7230010.3.1.2.156&lt;br/&gt;
0953602.4408.1280350729.1/1.2.276.0.7230010.3.1.3.1560953602.4409.1280350729.1/1.2.276.0.7230010.3.1.4.1560953602.4443.1280350730.1.dcm has stripp&lt;br/&gt;
ed pixel data&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.028 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; No pxl, boz, mpg or ljpg files have been created&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.029 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Backing up the DICOM files from /usr/local/PACS/images/20100728/1.2.276.0.7230010&lt;br/&gt;
.3.1.2.1560953602.4408.1280350729.1/1.2.276.0.7230010.3.1.3.1560953602.4409.1280350729.1 to /usr/local/PACS/deleted_images/SeriesCorrection/823/20&lt;br/&gt;
100728/1.2.276.0.7230010.3.1.2.1560953602.4408.1280350729.1/1.2.276.0.7230010.3.1.3.1560953602.4409.1280350729.1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.030 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Copying /usr/local/PACS/images/20100728/1.2.276.0.7230010.3.1.2.1560953602.4408.1&lt;br/&gt;
280350729.1/1.2.276.0.7230010.3.1.3.1560953602.4409.1280350729.1/1.2.276.0.7230010.3.1.4.1560953602.4443.1280350730.1.dcm to /usr/local/PACS/delet&lt;br/&gt;
ed_images/SeriesCorrection/823/20100728/1.2.276.0.7230010.3.1.2.1560953602.4408.1280350729.1/1.2.276.0.7230010.3.1.3.1560953602.4409.1280350729.1/&lt;br/&gt;
1.2.276.0.7230010.3.1.4.1560953602.4443.1280350730.1.dcm&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.031 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Modifying file /usr/local/PACS/images/20100728/1.2.276.0.7230010.3.1.2.1560953602&lt;br/&gt;
.4408.1280350729.1/1.2.276.0.7230010.3.1.3.1560953602.4409.1280350729.1/1.2.276.0.7230010.3.1.4.1560953602.4443.1280350730.1.dcm with the followin&lt;br/&gt;
g parameters:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.036 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Changing &lt;span class=&quot;error&quot;&gt;&amp;#91;Accession Number ............  from HOABZ_2908 to HOA99775533&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.036 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Changing &lt;span class=&quot;error&quot;&gt;&amp;#91;Patient&amp;#39;s Age ...............  from 079Y to 032Y&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.036 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Changing &lt;span class=&quot;error&quot;&gt;&amp;#91;Patient&amp;#39;s Birth Date ........  from 19310315 to 19780401&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.036 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Changing &lt;span class=&quot;error&quot;&gt;&amp;#91;Patient&amp;#39;s Id ................  from HOABZ_2908 to HOA99775533&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.036 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Changing &lt;span class=&quot;error&quot;&gt;&amp;#91;Patient&amp;#39;s Name ..............  from HOABZ_2908^HOABZ_ to TRINH^HOA&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.036 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Requested change &lt;span class=&quot;error&quot;&gt;&amp;#91;Patient&amp;#39;s Sex ...............  from M to M not needed&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.036 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Changing &lt;span class=&quot;error&quot;&gt;&amp;#91;Study Date ..................  from 20100728 to 20100401&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.036 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Changing &lt;span class=&quot;error&quot;&gt;&amp;#91;Study Description ...........  from ABDOMEN to CHEST&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.036 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Changing &lt;span class=&quot;error&quot;&gt;&amp;#91;Requested Procedure Id ......  from 1 to HOA99775533&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.037 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Writing DICOM headers to /usr/local/PACS/images/20100728/1.2.276.0.7230010.3.1.2.&lt;br/&gt;
1560953602.4408.1280350729.1/1.2.276.0.7230010.3.1.3.1560953602.4409.1280350729.1/SCEH_HM4335855306475012061.fix&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.049 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Rename /usr/local/PACS/images/20100728/1.2.276.0.7230010.3.1.2.1560953602.4408.12&lt;br/&gt;
80350729.1/1.2.276.0.7230010.3.1.3.1560953602.4409.1280350729.1/SCEH_HM4335855306475012061.fix to /usr/local/PACS/images/20100728/1.2.276.0.723001&lt;br/&gt;
0.3.1.2.1560953602.4408.1280350729.1/1.2.276.0.7230010.3.1.3.1560953602.4409.1280350729.1/1.2.276.0.7230010.3.1.4.1560953602.4443.1280350730.1.dcm&lt;br/&gt;
 Success=true&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.049 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; DICOM header correction 823 successful. Removing directory /usr/local/PACS/delete&lt;br/&gt;
d_images/SeriesCorrection/823/20100728/1.2.276.0.7230010.3.1.2.1560953602.4408.1280350729.1/1.2.276.0.7230010.3.1.3.1560953602.4409.1280350729.1 u&lt;br/&gt;
p to /usr/local/PACS/deleted_images/SeriesCorrection/823&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.055 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Step 2: COMPLETED: Modified all image files for each series in study 1.2.276.0.72&lt;br/&gt;
30010.3.1.2.1560953602.4408.1280350729.1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.094 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Step 3: START: Updating local image databases for study: 1.2.276.0.7230010.3.1.2.&lt;br/&gt;
1560953602.4408.1280350729.1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.094 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; In the correction request the referring physician ID is &apos;&apos;, the name in PN format&lt;br/&gt;
 is &apos;&apos;, and the name in XCN format is &apos;&apos; (see &lt;a href=&quot;https://jira.intelerad.com/browse/IP-43839&quot; title=&quot;HL7GS: Always issues correction for RefPhysName and RefPhysID creating useless load&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-43839&quot;&gt;&lt;del&gt;IP-43839&lt;/del&gt;&lt;/a&gt;)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.098 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Updating patient ID: HOABZ_2908 to new patient ID: HOA99775533 for study instance&lt;br/&gt;
 UID: 1.2.276.0.7230010.3.1.2.1560953602.4408.1280350729.1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.104 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Only one study for this Patient ID, updating that one entry&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.104 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Updating PatientLevel&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.107 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Updated 1 row(s) in table PatientLevel&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.109 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; There are 1 studies for this patient ID&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.112 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Updated 1 row(s) in table StudyLevel&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.118 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Updated 1 row(s) in table PatientLevel&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.123 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Updated 1 row(s) in table StudyLevel&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.125 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; No changes to be made at the SeriesLevel&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.125 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Step 3: COMPLETED: Updated local image databases for study: 1.2.276.0.7230010.3.1&lt;br/&gt;
.2.1560953602.4408.1280350729.1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.131 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Step 4: START: Checking if Study Instance UID changed&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.131 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Step 4: COMPLETED&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.137 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Step 5: START: Resending series [0:1.2.276.0.7230010.3.1.3.1560953602.4409.128035&lt;br/&gt;
0729.1] to the deletion locations&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.137 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Retrieving next work item for PatientCorrection number 823 and instance type &apos;SER&lt;br/&gt;
IES&apos;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.142 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Step 5: COMPLETED: Resending series&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.148 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Step 6: START: Pushing fixed series...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.152 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Adding event to regenerate SeriesHeader.ish for Series Instance UID 1.2.276.0.723&lt;br/&gt;
0010.3.1.3.1560953602.4409.1280350729.1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.155 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Signalling waveletConversionEventHandler&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.193 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Successfully signalled application (waveletConversionEventHandler, pid: 19936) wi&lt;br/&gt;
th signal (10).&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.193 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Successfully sent a SIGUSR1 to waveletConversionEventHandler&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.194 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Attempting to autoroute series: 1.2.276.0.7230010.3.1.3.1560953602.4409.128035072&lt;br/&gt;
9.1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.257 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Step 6: COMPLETED: Pushed fixed series...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-07-28 17:02:56.258 SCEH pre421arch1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Inserting into SeriesArchive AETitle, SerInsUID, InsertDate, InsertTime ) VALUES &lt;br/&gt;
( PRE421ARCH1CACHE,1.2.276.0.7230010.3.1.3.1560953602.4409.1280350729.1,20100728,20100728170256 )&lt;/p&gt;</description>
            <key id="81699">IP-49445</key>
            <summary>SCEH: Patient Correction when series is in archieve queue breaks archiving</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="fpadilha">Fabio Padilha</assignee>
                                    <reporter username="htrinh">Hoa Trinh</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Jul 2010 17:14:48 -0400</created>
                <updated>Mon, 25 Mar 2019 14:11:26 -0400</updated>
                            <resolved>Tue, 17 Aug 2010 11:10:00 -0400</resolved>
                                    <version>4-2-1</version>
                                    <fixVersion>4-2-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="239930" author="htrinh" created="Wed, 28 Jul 2010 17:16:39 -0400"  >&lt;p&gt;Correction in Steps to Reproduce:&lt;/p&gt;

&lt;p&gt;1. Send an image to the Pacs using modifyAndSend (AutoRoute moves series from&lt;br/&gt;
mdb1 to arch1 to be archived)&lt;br/&gt;
2. delstudybyUID --dellocal on mdb1&lt;br/&gt;
3. Do a patient correction (modify all fields) while the series is waiting in&lt;br/&gt;
the SeriesArchive&lt;br/&gt;
4. Observe the InsertTime is incorrect (contains the date and time. eg.&lt;br/&gt;
20100728170256) in the SeriesCorrectionEventHandlers logs. &lt;br/&gt;
5. Series is never archived&lt;/p&gt;</comment>
                            <comment id="239931" author="build" created="Tue, 10 Aug 2010 15:40:53 -0400"  >&lt;p&gt;Released by fpadilha to master at 2010-08-10 15:40:53 (push 2549):&lt;br/&gt;
  PACS-4-2-1 (fix)        (previous build: PACS-4-2-1-P25)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-2-2-A2)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/0e61df725ed7&quot; target=&quot;_blank&quot;&gt;intelepacs:0e61df725ed7&lt;/a&gt;  PACS-4-2-1  28943 fix: Fixed SCEH to insert only the time into SeriesArchiveDB.SeriesArchive&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/9344d50c8d46&quot; target=&quot;_blank&quot;&gt;intelepacs:9344d50c8d46&lt;/a&gt;  trunk       28943 fix: Fixed SCEH to insert only the time into SeriesArchiveDB.SeriesArchive&lt;/p&gt;</comment>
                            <comment id="239932" author="fabio.padilha" created="Tue, 10 Aug 2010 16:13:58 -0400"  >&lt;p&gt;Description of the solution: &lt;/p&gt;

&lt;p&gt;SCEH was inserting date and time in InsertTime column in SeriesArchiveDB.SeriesArchive table.&lt;br/&gt;
This was causing problems in schedule_DLT_archival.pl.&lt;br/&gt;
I changed to insert only the time in that column.&lt;/p&gt;

&lt;p&gt;Tests executed: &lt;/p&gt;

&lt;p&gt;1. Sent an image to arch1 using modifyAndSend&lt;br/&gt;
3. Did a patient correction&lt;br/&gt;
4. Observed the InsertTime is correct in SeriesArchive table&lt;br/&gt;
5. Checked the series gets archived.&lt;/p&gt;

&lt;p&gt;Unit tests added or modified: None&lt;/p&gt;</comment>
                            <comment id="239933" author="htrinh" created="Wed, 11 Aug 2010 16:12:25 -0400"  >&lt;p&gt;Reproduced with RPMs: SeriesCorrectionEventHandler-Config-4.2.1.P24-ims01.i386.rpm&lt;br/&gt;
Verified with RPMs: SeriesCorrectionEventHandler-Config-4.2.1.P26-ims01.i386.rpm&lt;br/&gt;
Verification steps: &lt;/p&gt;

&lt;p&gt;1. Send an image to the Arch1 using modifyAndSend (Archive Policy will send images to tape)&lt;br/&gt;
2. Do a patient correction (modify name) while the series is waiting in the SeriesArchive&lt;br/&gt;
3. Observe the InsertTime has been fixed in SeriesArchiveDB SeriesArchive &lt;br/&gt;
4. Force schedule_DLT_Archival.pl to move SeriesArchive queue to ArchiveRequest&lt;/p&gt;

&lt;p&gt;End result: Series is archived&lt;br/&gt;
Time spent: 30 mins&lt;/p&gt;</comment>
                            <comment id="239934" author="build" created="Wed, 2 Mar 2011 15:45:52 -0500"  >&lt;p&gt;Released by jsabella to master at 2011-03-02 15:45:47 (push 5270):&lt;br/&gt;
  PACS-4-2-4 (dummy)      (previous build: PACS-4-2-4-P1)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/10488ba510db&quot; target=&quot;_blank&quot;&gt;intelepacs:10488ba510db&lt;/a&gt;  PACS-4-2-4  28943 fix: Fixed SCEH to insert only the time into SeriesArchiveDB.SeriesArchive&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/6caeb6d1c4f4&quot; target=&quot;_blank&quot;&gt;intelepacs:6caeb6d1c4f4&lt;/a&gt;  PACS-4-2-4  28856 dummy,29131 dummy,29148 dummy,28985 dummy,27550 dummy,28262 dummy,29096 dummy,29092 dummy,28855 dummy,29083 dummy,27472 dummy,28888 dummy,29157 dummy,28185 dummy,29163 dummy,29103 dummy,29017 dummy,28978 dummy,29144 dummy,29154 dummy,29097 dummy,29134 dummy,29176 dummy,29177 dummy,29178 dummy,29175 dummy,29062 dummy,29067 dummy,29123 dummy,29186 dummy,29181 dummy,29188 dummy,27627 dummy,28614 dummy,28638 dummy,29211 dummy,26476 dummy,29218 dummy,29180 dummy,29219 dummy,28933 dummy,20365 dummy,29185 dummy,28295 dummy,29117 dummy,28900 dummy,29079 dummy,29232 dummy,29225 dummy,27718 dummy,22614 dummy,29239 dummy,20740 dummy,22575 dummy,29231 dummy,29249 dummy,29099 dummy,29237 dummy,29259 dummy,29250 dummy,29255 dummy,28928 dummy,27536 dummy,29192 dummy,29203 dummy,29094 dummy,29275 dummy,29142 dummy,28535 dummy,29166 dummy,29262 dummy,29102 dummy,29246 dummy,29274 dummy,29305 dummy,29315 dummy,28991 dummy,27046 dummy,25832 dummy,28401 dummy,28915 dummy,28030 dummy,29326 dummy,29331 dummy,29316 dummy,29194 dummy,29342 dummy,29321 dummy,28563 dummy,22318 dummy,29287 dummy,29263 dummy,29252 dummy,27033 dummy,27025 dummy,26580 dummy,29282 dummy,24642 dummy,29221 dummy,29361 dummy,29297 dummy,29369 dummy,29352 dummy,29101 dummy,29385 dummy,29285 dummy,28491 dummy,24790 dummy,29417 dummy,29081 dummy,28255 dummy,29428 dummy,29363 dummy,29381 dummy,28551 dummy,29072 dummy,29432 dummy,29433 dummy,29362 dummy,29422 dummy,29394 dummy,28140 dummy,29454 dummy,29463 dummy,29465 dummy,29459 dummy,29193 dummy,29470 dummy,29472 dummy,29440 dummy,29462 dummy,29403 dummy,29415 dummy,29323 dummy,29429 dummy,29475 dummy,29482 dummy,29377 dummy,29504 dummy,29453 dummy,29442 dummy,29376 dummy,29509 dummy,29284 dummy,29471 dummy,29330 dummy,29516 dummy,29523 dummy,28549 dummy,29485 dummy,29497 dummy,29538 dummy,29506 dummy,29545 dummy,27488 dummy,29552 dummy,28512 dummy,29521 dummy,29455 dummy,29484 dummy,29411 dummy,29468 dummy,22259 dummy,23394 dummy,29518 dummy,29141 dummy,29578 dummy,28627 dummy,29581 dummy,29572 dummy,28839 dummy,28354 dummy,29364 dummy,29598 dummy,27896 dummy,11640 dummy,28748 dummy,29327 dummy,29254 dummy,29356 dummy,29413 dummy,29418 dummy,29152 dummy,29525 dummy,29546 dummy,29549 dummy,28447 dummy,14177 dummy,29612 dummy,29607 dummy,29603 dummy,29628 dummy,29370 dummy,29594 dummy,29542 dummy,29629 dummy,28036 dummy,29614 dummy,29519 dummy,29642 dummy,23876 dummy,29638 dummy,29382 dummy,28807 dummy,29631 dummy,25647 dummy,29649 dummy,29654 dummy,29655 dummy,29358 dummy,29667 dummy,29670 dummy,25241 dummy,29686 dummy,29657 dummy,29445 dummy,29595 dummy,29688 dummy,29652 dummy,29698 dummy,29113 dummy,29671 dummy,29672 dummy,28375 dummy,29543 dummy,28084 dummy,29703 dummy,29730 dummy,29666 dummy,29731 dummy,29734 dummy,29663 dummy,29718 dummy,28285 dummy,29713 dummy,28905 dummy,29021 dummy,29754 dummy,29755 dummy,27119 dummy,29740 dummy,29772 dummy,29757 dummy,29648 dummy,29775 dummy,26948 dummy,27889 dummy,27851 dummy,29325 dummy,29770 dummy,28334 dummy,25623 dummy,29332 dummy,29769 dummy,27249 dummy,29267 dummy,27802 dummy,29776 dummy,29825 dummy,29815 dummy,29844 dummy,25924 dummy,29840 dummy,29858 dummy,29859 dummy,25935 dummy,29526 dummy,29739 dummy,26399 dummy,29848 dummy,29367 dummy,29889 dummy,21764 dummy,29868 dummy,29865 dummy,29781 dummy,26909 dummy,28940 dummy,29199 dummy,29257 dummy,29875 dummy,29912 dummy,29339 dummy,28038 dummy,29894 dummy,28300 dummy,27872 dummy,29313 dummy,29571 dummy,29898 dummy,29916 dummy,29691 dummy,27820 dummy,27668 dummy,29717 dummy,24663 dummy,26977 dummy,29920 dummy,26110 dummy,29195 dummy,29965 dummy,29899 dummy,29808 dummy,29904 dummy,29989 dummy,29986 dummy,29979 dummy,29976 dummy,30015 dummy,22572 dummy,23588 dummy,30024 dummy,28785 dummy,28166 dummy,30037 dummy,29981 dummy,30040 dummy,30048 dummy,29946 dummy,30043 dummy,29460 dummy,27154 dummy,29818 dummy,30014 dummy,30088 dummy,30097 dummy,29927 dummy,29620 dummy,27793 dummy,30096 dummy,29867 dummy,30020 dummy,29984 dummy,30104 dummy,30101 dummy,22690 dummy,30117 dummy,30120 dummy,30067 dummy,30093 dummy,30130 dummy,30189 dummy,30198 dummy,25854 dummy,30179 dummy,30248 dummy,30247 dummy,29005 dummy,30270 dummy,30025 dummy,26449 dummy,28552 dummy,30281 dummy,30064 dummy,29919 dummy,30295 dummy,30259 dummy,30313 dummy,30291 dummy,30309 dummy,29922 dummy,30314 dummy,30319 dummy,29498 dummy,30323 dummy,25727 dummy,25188 dummy,30326 dummy,25778 dummy,30092 dummy,30347 dummy,30032 dummy,30342 dummy,30316 dummy,30255 dummy,29228 dummy,23056 dummy,30321 dummy,29561 dummy,30268 dummy,30384 dummy,29807 dummy,29597 dummy,30393 dummy,30398 dummy,7837 dummy,29924 dummy,30423 dummy,29590 dummy,24440 dummy,30434 dummy,30428 dummy,30447 dummy,30455 dummy,30370 dummy,30459 dummy,30409 dummy,30457 dummy,27380 dummy,30463 dummy,30441 dummy,30334 dummy,30470 dummy,28561 dummy,30472 dummy,30485 dummy,27870 dummy,27134 dummy,29905 dummy,30484 dummy,30301 dummy,30507 dummy,30422 dummy,30267 dummy,30527 dummy,30528 dummy,30531 dummy,30517 dummy,30535 dummy,30534 dummy,30479 dummy,30480 dummy,30521 dummy,30386 dummy,30297 dummy,30538 dummy,30483 dummy,30504 dummy,30537 dummy,30548 dummy,30554 dummy,30532 dummy,30552 dummy,30602 dummy,30591 dummy,30612 dummy,18871 dummy,29931 dummy,23370 dummy,30558 dummy,30557 dummy,30526 dummy,30646 dummy,30642 dummy,30053 dummy,29710 dummy,30565 dummy,30648 dummy,30687 dummy,30679 dummy,30702 dummy,30689 dummy,30707 dummy,30631 dummy,30722 dummy,30681 dummy,30544 dummy,30672 dummy,30741 dummy,30645 dummy,30312 dummy,30733 dummy,30726 dummy,22068 dummy,30098 dummy,30752 dummy,30195 dummy,30786 dummy,26317 dummy,30776 dummy,30662 dummy,29810 dummy,29618 dummy,30735 dummy,30023 dummy,30822 dummy,30261 dummy,30904 dummy,22288 dummy,30830 dummy,30827 dummy,30804 dummy,29949 dummy,30878 dummy,30927 dummy,30385 dummy,29292 dummy,30493 dummy,27600 dummy,30928 dummy,29156 dummy,30864 dummy,30505 dummy,30881 dummy,30952 dummy,30959 dummy,28419 dummy,30791 dummy,30639 dummy,30991 dummy: dummy merge from PACS-4-2-1&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                    <customfield id="customfield_13806" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Availability Impact</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14409"><![CDATA[BlocksPLA]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>28943</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13386"><![CDATA[SeriesCorrectionEventHandler]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzpybb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_13801" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Reported By Tester?</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14404"><![CDATA[Yes]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10802"><![CDATA[MAJOR]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-49391] SCEH: Support YBR color space with both LittleEndian &amp; RLE</title>
                <link>https://jira.intelerad.com/browse/IP-49391</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;SCEH needs to split files for legacy files, so changes have to be made to integrate with splitPixelData app.&lt;/p&gt;</description>
            <key id="81645">IP-49391</key>
            <summary>SCEH: Support YBR color space with both LittleEndian &amp; RLE</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="fpadilha">Fabio Padilha</assignee>
                                    <reporter username="fpadilha">Fabio Padilha</reporter>
                        <labels>
                    </labels>
                <created>Thu, 22 Jul 2010 14:46:28 -0400</created>
                <updated>Mon, 25 Mar 2019 14:11:27 -0400</updated>
                            <resolved>Tue, 17 Aug 2010 11:10:00 -0400</resolved>
                                    <version>4-2-1</version>
                                    <fixVersion>4-2-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="239638" author="fabio.padilha" created="Fri, 23 Jul 2010 17:23:45 -0400"  >&lt;p&gt;Description of the solution: &lt;br/&gt;
SCEH calls splitPixelData and handles output correctly. According to the list of files created by splitPixelData, SCEH updates SeriesLevel with the file extensions created.&lt;/p&gt;

&lt;p&gt;Tests executed: &lt;br/&gt;
Test: Correct series with attached pixel data in SCEH&lt;/p&gt;

&lt;p&gt;Steps:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Send a DICOM file with RLE Ybr format to image_server&lt;/li&gt;
	&lt;li&gt;Go to the series folder. You can use listLocsForStudy.pl to find the study.&lt;/li&gt;
	&lt;li&gt;Run regenerateDicomFile to reattach the pixel data to the dcm file.&lt;/li&gt;
	&lt;li&gt;Log into IB, search the study and request a correction.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Verify:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The file has been split again in the folder.&lt;/li&gt;
	&lt;li&gt;There is no exception in SCEH.&lt;/li&gt;
	&lt;li&gt;Patient and Study Level tables have been updated with the new information.&lt;/li&gt;
	&lt;li&gt;dcmdump dumps the new information in the file.&lt;/li&gt;
	&lt;li&gt;SeriesInstance table was updated with the new file.&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;Unit tests added or modified: &lt;br/&gt;
TestSplitPixels.java:testReadFileExtensions()&lt;/p&gt;</comment>
                            <comment id="239639" author="build" created="Wed, 28 Jul 2010 10:26:19 -0400"  >&lt;p&gt;Released by fpadilha to master at 2010-07-28 10:26:16 (push 2348):&lt;br/&gt;
  PACS-4-2-1 (fix)        (previous build: PACS-4-2-1-P4)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-1-3-A74)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/a6489057ee4a&quot; target=&quot;_blank&quot;&gt;intelepacs:a6489057ee4a&lt;/a&gt;  PACS-4-2-1  28712 fix,28876 fix: Added the functionality to handle Ybr and Rle&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/fde904b79bcb&quot; target=&quot;_blank&quot;&gt;intelepacs:fde904b79bcb&lt;/a&gt;  trunk       28712 fix,28876 fix: Added the functionality to handle Ybr and Rle&lt;/p&gt;</comment>
                            <comment id="239640" author="build" created="Wed, 28 Jul 2010 10:38:53 -0400"  >&lt;p&gt;Released by fpadilha to master at 2010-07-28 10:38:52 (push 2350):&lt;br/&gt;
  PACS-4-2-1 (fix)        (previous build: PACS-4-2-1-P4)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-1-3-A74)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/46c618b0b2af&quot; target=&quot;_blank&quot;&gt;intelepacs:46c618b0b2af&lt;/a&gt;  PACS-4-2-1  28876 fix,28712 fix: Integrate changes in splitPixelData&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/63cfe5ac2ccc&quot; target=&quot;_blank&quot;&gt;intelepacs:63cfe5ac2ccc&lt;/a&gt;  trunk       28876 fix,28712 fix: Integrate changes in splitPixelData&lt;/p&gt;</comment>
                            <comment id="239641" author="build" created="Fri, 30 Jul 2010 10:46:55 -0400"  >&lt;p&gt;Released by dturko to master at 2010-07-30 10:46:54 (push 2401):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-2-2-A2)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/91e5ccdb12bc&quot; target=&quot;_blank&quot;&gt;intelepacs:91e5ccdb12bc&lt;/a&gt;  trunk       28712 fix,28876 fix: Added the functionality to handle Ybr and Rle&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/b3c44799ea60&quot; target=&quot;_blank&quot;&gt;intelepacs:b3c44799ea60&lt;/a&gt;  trunk       28876 fix,28712 fix: Integrate changes in splitPixelData&lt;/p&gt;</comment>
                            <comment id="239642" author="lucie" created="Wed, 11 Aug 2010 10:20:36 -0400"  >&lt;p&gt;Verified via New Feature testing for the New unsupported types and YBR handling.&lt;/p&gt;

&lt;p&gt;Testplan:&lt;br/&gt;
Ateliers/QA/TestPlans/4-2-1/Back_End/ImageMgt/421-001_Issue1_ImageMgt_NewPartiallySupportedTypesAndYBR_NEW.xls&lt;/p&gt;</comment>
                            <comment id="239643" author="build" created="Wed, 2 Mar 2011 15:45:50 -0500"  >&lt;p&gt;Released by jsabella to master at 2011-03-02 15:45:47 (push 5270):&lt;br/&gt;
  PACS-4-2-4 (dummy)      (previous build: PACS-4-2-4-P1)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/535a4f7eabe9&quot; target=&quot;_blank&quot;&gt;intelepacs:535a4f7eabe9&lt;/a&gt;  PACS-4-2-4  28712 fix,28876 fix: Added the functionality to handle Ybr and Rle&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/a75da8a77dc8&quot; target=&quot;_blank&quot;&gt;intelepacs:a75da8a77dc8&lt;/a&gt;  PACS-4-2-4  28876 fix,28712 fix: Integrate changes in splitPixelData&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/6caeb6d1c4f4&quot; target=&quot;_blank&quot;&gt;intelepacs:6caeb6d1c4f4&lt;/a&gt;  PACS-4-2-4  28856 dummy,29131 dummy,29148 dummy,28985 dummy,27550 dummy,28262 dummy,29096 dummy,29092 dummy,28855 dummy,29083 dummy,27472 dummy,28888 dummy,29157 dummy,28185 dummy,29163 dummy,29103 dummy,29017 dummy,28978 dummy,29144 dummy,29154 dummy,29097 dummy,29134 dummy,29176 dummy,29177 dummy,29178 dummy,29175 dummy,29062 dummy,29067 dummy,29123 dummy,29186 dummy,29181 dummy,29188 dummy,27627 dummy,28614 dummy,28638 dummy,29211 dummy,26476 dummy,29218 dummy,29180 dummy,29219 dummy,28933 dummy,20365 dummy,29185 dummy,28295 dummy,29117 dummy,28900 dummy,29079 dummy,29232 dummy,29225 dummy,27718 dummy,22614 dummy,29239 dummy,20740 dummy,22575 dummy,29231 dummy,29249 dummy,29099 dummy,29237 dummy,29259 dummy,29250 dummy,29255 dummy,28928 dummy,27536 dummy,29192 dummy,29203 dummy,29094 dummy,29275 dummy,29142 dummy,28535 dummy,29166 dummy,29262 dummy,29102 dummy,29246 dummy,29274 dummy,29305 dummy,29315 dummy,28991 dummy,27046 dummy,25832 dummy,28401 dummy,28915 dummy,28030 dummy,29326 dummy,29331 dummy,29316 dummy,29194 dummy,29342 dummy,29321 dummy,28563 dummy,22318 dummy,29287 dummy,29263 dummy,29252 dummy,27033 dummy,27025 dummy,26580 dummy,29282 dummy,24642 dummy,29221 dummy,29361 dummy,29297 dummy,29369 dummy,29352 dummy,29101 dummy,29385 dummy,29285 dummy,28491 dummy,24790 dummy,29417 dummy,29081 dummy,28255 dummy,29428 dummy,29363 dummy,29381 dummy,28551 dummy,29072 dummy,29432 dummy,29433 dummy,29362 dummy,29422 dummy,29394 dummy,28140 dummy,29454 dummy,29463 dummy,29465 dummy,29459 dummy,29193 dummy,29470 dummy,29472 dummy,29440 dummy,29462 dummy,29403 dummy,29415 dummy,29323 dummy,29429 dummy,29475 dummy,29482 dummy,29377 dummy,29504 dummy,29453 dummy,29442 dummy,29376 dummy,29509 dummy,29284 dummy,29471 dummy,29330 dummy,29516 dummy,29523 dummy,28549 dummy,29485 dummy,29497 dummy,29538 dummy,29506 dummy,29545 dummy,27488 dummy,29552 dummy,28512 dummy,29521 dummy,29455 dummy,29484 dummy,29411 dummy,29468 dummy,22259 dummy,23394 dummy,29518 dummy,29141 dummy,29578 dummy,28627 dummy,29581 dummy,29572 dummy,28839 dummy,28354 dummy,29364 dummy,29598 dummy,27896 dummy,11640 dummy,28748 dummy,29327 dummy,29254 dummy,29356 dummy,29413 dummy,29418 dummy,29152 dummy,29525 dummy,29546 dummy,29549 dummy,28447 dummy,14177 dummy,29612 dummy,29607 dummy,29603 dummy,29628 dummy,29370 dummy,29594 dummy,29542 dummy,29629 dummy,28036 dummy,29614 dummy,29519 dummy,29642 dummy,23876 dummy,29638 dummy,29382 dummy,28807 dummy,29631 dummy,25647 dummy,29649 dummy,29654 dummy,29655 dummy,29358 dummy,29667 dummy,29670 dummy,25241 dummy,29686 dummy,29657 dummy,29445 dummy,29595 dummy,29688 dummy,29652 dummy,29698 dummy,29113 dummy,29671 dummy,29672 dummy,28375 dummy,29543 dummy,28084 dummy,29703 dummy,29730 dummy,29666 dummy,29731 dummy,29734 dummy,29663 dummy,29718 dummy,28285 dummy,29713 dummy,28905 dummy,29021 dummy,29754 dummy,29755 dummy,27119 dummy,29740 dummy,29772 dummy,29757 dummy,29648 dummy,29775 dummy,26948 dummy,27889 dummy,27851 dummy,29325 dummy,29770 dummy,28334 dummy,25623 dummy,29332 dummy,29769 dummy,27249 dummy,29267 dummy,27802 dummy,29776 dummy,29825 dummy,29815 dummy,29844 dummy,25924 dummy,29840 dummy,29858 dummy,29859 dummy,25935 dummy,29526 dummy,29739 dummy,26399 dummy,29848 dummy,29367 dummy,29889 dummy,21764 dummy,29868 dummy,29865 dummy,29781 dummy,26909 dummy,28940 dummy,29199 dummy,29257 dummy,29875 dummy,29912 dummy,29339 dummy,28038 dummy,29894 dummy,28300 dummy,27872 dummy,29313 dummy,29571 dummy,29898 dummy,29916 dummy,29691 dummy,27820 dummy,27668 dummy,29717 dummy,24663 dummy,26977 dummy,29920 dummy,26110 dummy,29195 dummy,29965 dummy,29899 dummy,29808 dummy,29904 dummy,29989 dummy,29986 dummy,29979 dummy,29976 dummy,30015 dummy,22572 dummy,23588 dummy,30024 dummy,28785 dummy,28166 dummy,30037 dummy,29981 dummy,30040 dummy,30048 dummy,29946 dummy,30043 dummy,29460 dummy,27154 dummy,29818 dummy,30014 dummy,30088 dummy,30097 dummy,29927 dummy,29620 dummy,27793 dummy,30096 dummy,29867 dummy,30020 dummy,29984 dummy,30104 dummy,30101 dummy,22690 dummy,30117 dummy,30120 dummy,30067 dummy,30093 dummy,30130 dummy,30189 dummy,30198 dummy,25854 dummy,30179 dummy,30248 dummy,30247 dummy,29005 dummy,30270 dummy,30025 dummy,26449 dummy,28552 dummy,30281 dummy,30064 dummy,29919 dummy,30295 dummy,30259 dummy,30313 dummy,30291 dummy,30309 dummy,29922 dummy,30314 dummy,30319 dummy,29498 dummy,30323 dummy,25727 dummy,25188 dummy,30326 dummy,25778 dummy,30092 dummy,30347 dummy,30032 dummy,30342 dummy,30316 dummy,30255 dummy,29228 dummy,23056 dummy,30321 dummy,29561 dummy,30268 dummy,30384 dummy,29807 dummy,29597 dummy,30393 dummy,30398 dummy,7837 dummy,29924 dummy,30423 dummy,29590 dummy,24440 dummy,30434 dummy,30428 dummy,30447 dummy,30455 dummy,30370 dummy,30459 dummy,30409 dummy,30457 dummy,27380 dummy,30463 dummy,30441 dummy,30334 dummy,30470 dummy,28561 dummy,30472 dummy,30485 dummy,27870 dummy,27134 dummy,29905 dummy,30484 dummy,30301 dummy,30507 dummy,30422 dummy,30267 dummy,30527 dummy,30528 dummy,30531 dummy,30517 dummy,30535 dummy,30534 dummy,30479 dummy,30480 dummy,30521 dummy,30386 dummy,30297 dummy,30538 dummy,30483 dummy,30504 dummy,30537 dummy,30548 dummy,30554 dummy,30532 dummy,30552 dummy,30602 dummy,30591 dummy,30612 dummy,18871 dummy,29931 dummy,23370 dummy,30558 dummy,30557 dummy,30526 dummy,30646 dummy,30642 dummy,30053 dummy,29710 dummy,30565 dummy,30648 dummy,30687 dummy,30679 dummy,30702 dummy,30689 dummy,30707 dummy,30631 dummy,30722 dummy,30681 dummy,30544 dummy,30672 dummy,30741 dummy,30645 dummy,30312 dummy,30733 dummy,30726 dummy,22068 dummy,30098 dummy,30752 dummy,30195 dummy,30786 dummy,26317 dummy,30776 dummy,30662 dummy,29810 dummy,29618 dummy,30735 dummy,30023 dummy,30822 dummy,30261 dummy,30904 dummy,22288 dummy,30830 dummy,30827 dummy,30804 dummy,29949 dummy,30878 dummy,30927 dummy,30385 dummy,29292 dummy,30493 dummy,27600 dummy,30928 dummy,29156 dummy,30864 dummy,30505 dummy,30881 dummy,30952 dummy,30959 dummy,28419 dummy,30791 dummy,30639 dummy,30991 dummy: dummy merge from PACS-4-2-1&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Blocks</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="73240">IP-40986</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                    <customfield id="customfield_13806" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Availability Impact</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14409"><![CDATA[BlocksPLA]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>28876</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13146"><![CDATA[DicomTools]]></customfieldvalue>
    <customfieldvalue key="13148"><![CDATA[DicomUtilities]]></customfieldvalue>
    <customfieldvalue key="13386"><![CDATA[SeriesCorrectionEventHandler]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzpxzb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10802"><![CDATA[MAJOR]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-49387] UMDB: Offline patient corrections on dedicated masters broken</title>
                <link>https://jira.intelerad.com/browse/IP-49387</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;RPM Version               : UpdateMasterDb-4.1.3.A71&lt;br/&gt;
EW                        : &lt;br/&gt;
Minimal steps to reproduce: Trigger a patient correction for offline series in a PACS server that has PCEH running on a dedicated master.&lt;br/&gt;
Expected behaviour        : Its entry into DicomWorkQueueDB is processed correctly by UMDB&lt;br/&gt;
What happened instead?    : UMDB ignores the entry since its an image level entry and it UMDB has dicomUpdateEnabled set to false.&lt;/p&gt;</description>
            <key id="81641">IP-49387</key>
            <summary>UMDB: Offline patient corrections on dedicated masters broken</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="sclark">Steven Clark</assignee>
                                    <reporter username="sclark">Steven Clark</reporter>
                        <labels>
                            <label>regression_fix</label>
                    </labels>
                <created>Thu, 22 Jul 2010 11:45:49 -0400</created>
                <updated>Mon, 25 Mar 2019 14:11:27 -0400</updated>
                            <resolved>Wed, 11 Aug 2010 13:59:00 -0400</resolved>
                                    <version>4-2-1</version>
                                    <fixVersion>4-2-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="239624" author="build" created="Mon, 26 Jul 2010 10:25:26 -0400"  >&lt;p&gt;Released by sclark to master at 2010-07-26 10:25:24 (push 2301):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-1-3-A74)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/6216d0598b50&quot; target=&quot;_blank&quot;&gt;intelepacs:6216d0598b50&lt;/a&gt;  trunk       28872 fix: Do not ignore isUpdated events when dicomImageUpdateEnabled is false&lt;/p&gt;</comment>
                            <comment id="239625" author="sclark" created="Mon, 26 Jul 2010 10:28:28 -0400"  >&lt;p&gt;Description of the solution: Remove the isUpdated events from the list of ignored events in umdb. Change PCEH to use the local dicomworkqueuedb for scheduling those events from now on. &lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I also moved UMDB&apos;s run log into /var/log/PACS/UpdateMasterDb along with making the kill script sleep for 2 seconds only if it actually killed UMDB.&lt;br/&gt;
Tests executed: Verified that UMDB processes the scheduled event on sclark411 even with the dicomImageUpdateEnabled flag set to false.&lt;br/&gt;
Unit tests added or modified: None.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="239626" author="build" created="Mon, 26 Jul 2010 11:00:32 -0400"  >&lt;p&gt;Released by gward to master at 2010-07-26 10:51:59 (push 2302):&lt;br/&gt;
  PACS-4-2-1 (fix)        (previous build: None)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/8203839d8f95&quot; target=&quot;_blank&quot;&gt;intelepacs:8203839d8f95&lt;/a&gt;  PACS-4-2-1  28872 fix: Do not ignore isUpdated events when dicomImageUpdateEnabled is false&lt;/p&gt;</comment>
                            <comment id="239627" author="mario.doria" created="Wed, 11 Aug 2010 13:59:53 -0400"  >&lt;p&gt;&lt;br/&gt;
Verified while running the testplan &quot;MultipleReferringDoctors&quot;&lt;/p&gt;</comment>
                            <comment id="239628" author="build" created="Wed, 2 Mar 2011 15:45:59 -0500"  >&lt;p&gt;Released by jsabella to master at 2011-03-02 15:45:47 (push 5270):&lt;br/&gt;
  PACS-4-2-4 (dummy)      (previous build: PACS-4-2-4-P1)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/6caeb6d1c4f4&quot; target=&quot;_blank&quot;&gt;intelepacs:6caeb6d1c4f4&lt;/a&gt;  PACS-4-2-4  28856 dummy,29131 dummy,29148 dummy,28985 dummy,27550 dummy,28262 dummy,29096 dummy,29092 dummy,28855 dummy,29083 dummy,27472 dummy,28888 dummy,29157 dummy,28185 dummy,29163 dummy,29103 dummy,29017 dummy,28978 dummy,29144 dummy,29154 dummy,29097 dummy,29134 dummy,29176 dummy,29177 dummy,29178 dummy,29175 dummy,29062 dummy,29067 dummy,29123 dummy,29186 dummy,29181 dummy,29188 dummy,27627 dummy,28614 dummy,28638 dummy,29211 dummy,26476 dummy,29218 dummy,29180 dummy,29219 dummy,28933 dummy,20365 dummy,29185 dummy,28295 dummy,29117 dummy,28900 dummy,29079 dummy,29232 dummy,29225 dummy,27718 dummy,22614 dummy,29239 dummy,20740 dummy,22575 dummy,29231 dummy,29249 dummy,29099 dummy,29237 dummy,29259 dummy,29250 dummy,29255 dummy,28928 dummy,27536 dummy,29192 dummy,29203 dummy,29094 dummy,29275 dummy,29142 dummy,28535 dummy,29166 dummy,29262 dummy,29102 dummy,29246 dummy,29274 dummy,29305 dummy,29315 dummy,28991 dummy,27046 dummy,25832 dummy,28401 dummy,28915 dummy,28030 dummy,29326 dummy,29331 dummy,29316 dummy,29194 dummy,29342 dummy,29321 dummy,28563 dummy,22318 dummy,29287 dummy,29263 dummy,29252 dummy,27033 dummy,27025 dummy,26580 dummy,29282 dummy,24642 dummy,29221 dummy,29361 dummy,29297 dummy,29369 dummy,29352 dummy,29101 dummy,29385 dummy,29285 dummy,28491 dummy,24790 dummy,29417 dummy,29081 dummy,28255 dummy,29428 dummy,29363 dummy,29381 dummy,28551 dummy,29072 dummy,29432 dummy,29433 dummy,29362 dummy,29422 dummy,29394 dummy,28140 dummy,29454 dummy,29463 dummy,29465 dummy,29459 dummy,29193 dummy,29470 dummy,29472 dummy,29440 dummy,29462 dummy,29403 dummy,29415 dummy,29323 dummy,29429 dummy,29475 dummy,29482 dummy,29377 dummy,29504 dummy,29453 dummy,29442 dummy,29376 dummy,29509 dummy,29284 dummy,29471 dummy,29330 dummy,29516 dummy,29523 dummy,28549 dummy,29485 dummy,29497 dummy,29538 dummy,29506 dummy,29545 dummy,27488 dummy,29552 dummy,28512 dummy,29521 dummy,29455 dummy,29484 dummy,29411 dummy,29468 dummy,22259 dummy,23394 dummy,29518 dummy,29141 dummy,29578 dummy,28627 dummy,29581 dummy,29572 dummy,28839 dummy,28354 dummy,29364 dummy,29598 dummy,27896 dummy,11640 dummy,28748 dummy,29327 dummy,29254 dummy,29356 dummy,29413 dummy,29418 dummy,29152 dummy,29525 dummy,29546 dummy,29549 dummy,28447 dummy,14177 dummy,29612 dummy,29607 dummy,29603 dummy,29628 dummy,29370 dummy,29594 dummy,29542 dummy,29629 dummy,28036 dummy,29614 dummy,29519 dummy,29642 dummy,23876 dummy,29638 dummy,29382 dummy,28807 dummy,29631 dummy,25647 dummy,29649 dummy,29654 dummy,29655 dummy,29358 dummy,29667 dummy,29670 dummy,25241 dummy,29686 dummy,29657 dummy,29445 dummy,29595 dummy,29688 dummy,29652 dummy,29698 dummy,29113 dummy,29671 dummy,29672 dummy,28375 dummy,29543 dummy,28084 dummy,29703 dummy,29730 dummy,29666 dummy,29731 dummy,29734 dummy,29663 dummy,29718 dummy,28285 dummy,29713 dummy,28905 dummy,29021 dummy,29754 dummy,29755 dummy,27119 dummy,29740 dummy,29772 dummy,29757 dummy,29648 dummy,29775 dummy,26948 dummy,27889 dummy,27851 dummy,29325 dummy,29770 dummy,28334 dummy,25623 dummy,29332 dummy,29769 dummy,27249 dummy,29267 dummy,27802 dummy,29776 dummy,29825 dummy,29815 dummy,29844 dummy,25924 dummy,29840 dummy,29858 dummy,29859 dummy,25935 dummy,29526 dummy,29739 dummy,26399 dummy,29848 dummy,29367 dummy,29889 dummy,21764 dummy,29868 dummy,29865 dummy,29781 dummy,26909 dummy,28940 dummy,29199 dummy,29257 dummy,29875 dummy,29912 dummy,29339 dummy,28038 dummy,29894 dummy,28300 dummy,27872 dummy,29313 dummy,29571 dummy,29898 dummy,29916 dummy,29691 dummy,27820 dummy,27668 dummy,29717 dummy,24663 dummy,26977 dummy,29920 dummy,26110 dummy,29195 dummy,29965 dummy,29899 dummy,29808 dummy,29904 dummy,29989 dummy,29986 dummy,29979 dummy,29976 dummy,30015 dummy,22572 dummy,23588 dummy,30024 dummy,28785 dummy,28166 dummy,30037 dummy,29981 dummy,30040 dummy,30048 dummy,29946 dummy,30043 dummy,29460 dummy,27154 dummy,29818 dummy,30014 dummy,30088 dummy,30097 dummy,29927 dummy,29620 dummy,27793 dummy,30096 dummy,29867 dummy,30020 dummy,29984 dummy,30104 dummy,30101 dummy,22690 dummy,30117 dummy,30120 dummy,30067 dummy,30093 dummy,30130 dummy,30189 dummy,30198 dummy,25854 dummy,30179 dummy,30248 dummy,30247 dummy,29005 dummy,30270 dummy,30025 dummy,26449 dummy,28552 dummy,30281 dummy,30064 dummy,29919 dummy,30295 dummy,30259 dummy,30313 dummy,30291 dummy,30309 dummy,29922 dummy,30314 dummy,30319 dummy,29498 dummy,30323 dummy,25727 dummy,25188 dummy,30326 dummy,25778 dummy,30092 dummy,30347 dummy,30032 dummy,30342 dummy,30316 dummy,30255 dummy,29228 dummy,23056 dummy,30321 dummy,29561 dummy,30268 dummy,30384 dummy,29807 dummy,29597 dummy,30393 dummy,30398 dummy,7837 dummy,29924 dummy,30423 dummy,29590 dummy,24440 dummy,30434 dummy,30428 dummy,30447 dummy,30455 dummy,30370 dummy,30459 dummy,30409 dummy,30457 dummy,27380 dummy,30463 dummy,30441 dummy,30334 dummy,30470 dummy,28561 dummy,30472 dummy,30485 dummy,27870 dummy,27134 dummy,29905 dummy,30484 dummy,30301 dummy,30507 dummy,30422 dummy,30267 dummy,30527 dummy,30528 dummy,30531 dummy,30517 dummy,30535 dummy,30534 dummy,30479 dummy,30480 dummy,30521 dummy,30386 dummy,30297 dummy,30538 dummy,30483 dummy,30504 dummy,30537 dummy,30548 dummy,30554 dummy,30532 dummy,30552 dummy,30602 dummy,30591 dummy,30612 dummy,18871 dummy,29931 dummy,23370 dummy,30558 dummy,30557 dummy,30526 dummy,30646 dummy,30642 dummy,30053 dummy,29710 dummy,30565 dummy,30648 dummy,30687 dummy,30679 dummy,30702 dummy,30689 dummy,30707 dummy,30631 dummy,30722 dummy,30681 dummy,30544 dummy,30672 dummy,30741 dummy,30645 dummy,30312 dummy,30733 dummy,30726 dummy,22068 dummy,30098 dummy,30752 dummy,30195 dummy,30786 dummy,26317 dummy,30776 dummy,30662 dummy,29810 dummy,29618 dummy,30735 dummy,30023 dummy,30822 dummy,30261 dummy,30904 dummy,22288 dummy,30830 dummy,30827 dummy,30804 dummy,29949 dummy,30878 dummy,30927 dummy,30385 dummy,29292 dummy,30493 dummy,27600 dummy,30928 dummy,29156 dummy,30864 dummy,30505 dummy,30881 dummy,30952 dummy,30959 dummy,28419 dummy,30791 dummy,30639 dummy,30991 dummy: dummy merge from PACS-4-2-1&lt;/p&gt;</comment>
                            <comment id="239629" author="build" created="Fri, 4 Mar 2011 10:55:52 -0500"  >&lt;p&gt;Released by jsabella to master at 2011-03-04 10:55:50 (push 5303):&lt;br/&gt;
  PACS-4-2-4 (fix)        (previous build: PACS-4-2-4-P1)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/c1819917d7e9&quot; target=&quot;_blank&quot;&gt;intelepacs:c1819917d7e9&lt;/a&gt;  PACS-4-2-4  28872 fix: Do not ignore isUpdated events when dicomImageUpdateEnabled is false&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                    <customfield id="customfield_13806" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Availability Impact</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14409"><![CDATA[BlocksPLA]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>28872</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13314"><![CDATA[PatientCorrectionEventHandler]]></customfieldvalue>
    <customfieldvalue key="13438"><![CDATA[UpdateMasterDb]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzpxyf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10802"><![CDATA[MAJOR]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-49085] PCEH should not use the IsUP flag when dealing with archive locations</title>
                <link>https://jira.intelerad.com/browse/IP-49085</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;RPM Version               : PatientCorrectionEventHandler-4.1.3.A41-ims01&lt;br/&gt;
EW                        : EW&lt;br/&gt;
Minimal steps to reproduce: &lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Setup a third-party DICOM archive&lt;/li&gt;
	&lt;li&gt;Send some images to that location, make sure that the location is listed in your PACS&lt;/li&gt;
	&lt;li&gt;Issue a correction for some of the images in the offline location&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;Expected behaviour        : PCEH should make the correction on the online locations only, the offline locations (images in the DICOM archive) will never be online&lt;/p&gt;

&lt;p&gt;What happened instead?    : &lt;br/&gt;
PCEH wants the server to have the IsUP flag set to 1&lt;/p&gt;

&lt;p&gt;*************************&lt;br/&gt;
ERROR: Could not find RUISAE in GlobalCTNCtrl as a PACS server. Is server marked up? (Look at IsUP)&lt;br/&gt;
*************************&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-06-22 18:01:09.883 PCEH pre421mdb1.dyn.intelerad&amp;#93;&lt;/span&gt; &lt;br/&gt;
*************************&lt;br/&gt;
ERROR: AE Title record for RUISAE is as follows:&lt;/p&gt;</description>
            <key id="81339">IP-49085</key>
            <summary>PCEH should not use the IsUP flag when dealing with archive locations</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="lorenzo">Lorenzo Moretti</assignee>
                                    <reporter username="mario.doria">Mario Doria</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 Jun 2010 10:26:55 -0400</created>
                <updated>Mon, 25 Mar 2019 14:11:33 -0400</updated>
                            <resolved>Fri, 22 Jul 2011 17:45:00 -0400</resolved>
                                    <version>4-2-1</version>
                                    <fixVersion>Next Branch (Trunk)</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="237883" author="lorenzo" created="Mon, 28 Jun 2010 15:05:00 -0400"  >&lt;p&gt;Description of the solution: the location cache loaded by PCEH now contains all PACS servers, not only those that are up. Before starting a correction PCEH verifies that all online locations are up and reports on those that are not.&lt;br/&gt;
Tests executed: verified on lorenzo411 that a correction was possible when an archive location was marked down.&lt;br/&gt;
Unit tests added or modified: updated database unit tests TestGlobalCtnCtrlInterface and ran them on lorenzo411.&lt;/p&gt;

&lt;p&gt;Fixed in post 4-1-3.&lt;/p&gt;</comment>
                            <comment id="237884" author="build" created="Mon, 28 Jun 2010 15:05:15 -0400"  >&lt;p&gt;Released by lorenzo to master at 2010-06-28 15:05:15 (push 1930):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-1-3-A44)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/284b5787e9f3&quot; target=&quot;_blank&quot;&gt;intelepacs:284b5787e9f3&lt;/a&gt;  trunk       28494 fix: The location cache loaded by PCEH&lt;/p&gt;</comment>
                            <comment id="237885" author="lucie" created="Fri, 6 Aug 2010 11:55:23 -0400"  >&lt;p&gt;This is a RUIS specific issue. external dicom archives are not normally added as servers to the pacs configuration and do not impact on the isUp flag. &lt;/p&gt;

&lt;p&gt;This should be tested within the scope of RUIS integration.&lt;/p&gt;</comment>
                            <comment id="237886" author="mario.doria" created="Fri, 6 Aug 2010 12:04:43 -0400"  >&lt;p&gt;Re: comment#4. The problem is that 3rd party DICOM archives will be marked off line since 411 because the AE titles configurations comes from PacsGlobals. We should not even care about the IsUP flag when doing corrections if the AE is not part of the PACS.&lt;/p&gt;</comment>
                            <comment id="237887" author="lucie" created="Fri, 6 Aug 2010 14:11:28 -0400"  >&lt;p&gt;Reproduced with RPMs: -&lt;/p&gt;

&lt;p&gt;Verified with RPMs: PatientCorrectionEventHandler-4.2.1.P3-ims01&lt;/p&gt;

&lt;p&gt;Verification steps: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;corrected a study that had online locations and tape archive location (not on archive cache)&lt;/li&gt;
	&lt;li&gt;corrected a study with one online location and one external archive location.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;End result: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Is up flag is not looked at because the locations are seen as offline archives.&lt;/li&gt;
	&lt;li&gt;marking as verified.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Time spent: 60m&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10002">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="80391">IP-48137</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12603" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Affected Clients</customfieldname>
                        <customfieldvalues>
                                        <label>CCI</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_13806" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Availability Impact</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14409"><![CDATA[BlocksPLA]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>28494</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13314"><![CDATA[PatientCorrectionEventHandler]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzpw3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_13801" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Reported By Tester?</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="14404"><![CDATA[Yes]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_11001" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>ServiceNow Case #</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172131</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10802"><![CDATA[MAJOR]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-48786] SCEH : Can get stuck when there is a corrupted dicom file in a series ( handleLegacyData, OutOfMemory exception )</title>
                <link>https://jira.intelerad.com/browse/IP-48786</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;RPM Version               : SeriesCorrectionEventHandler-5.1.8.P1B2-4.1.1.P56&lt;/p&gt;

&lt;p&gt;EW                        : &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=179623&quot; target=&quot;_blank&quot;&gt;EW179623&lt;/a&gt;&lt;br/&gt;
Minimal steps to reproduce: &lt;/p&gt;

&lt;p&gt;You need to have a corrupted dicom file in a series that you are trying to correct.&lt;/p&gt;

&lt;p&gt;You need to go through the handleLegacyData code path.&lt;/p&gt;

&lt;p&gt;(Perhaps the developers would like to elaborate on what that is exactly)&lt;/p&gt;

&lt;p&gt;Expected behaviour        : SCEH corrects the study, or moves on to the next one. It does not get stuck.&lt;/p&gt;

&lt;p&gt;What happened instead?    : SCEH dies with the following exception in the run log ( SeriesCorrectionEventHandler_output.log )&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space&lt;br/&gt;
        at com.archimed.dicom.q.do(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.q.if(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.c.do(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.c.a(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.DicomReader.readTags(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.DicomReader.readDICOMStream(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.DicomReader.read(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.DicomReader.read(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.DicomReader.read(Unknown Source)&lt;br/&gt;
        at com.intelerad.lib.dicomtools.DicomObjectIo.readDicomObject(DicomObjectIo.java:648)&lt;br/&gt;
        at com.intelerad.lib.dicomtools.DicomObjectIo.load(DicomObjectIo.java:205)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.handleLegacyData(SeriesCorrectionEventHandler.java:2858)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.fixDicomFiles(SeriesCorrectionEventHandler.java:926)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.handleDicomImageFileChanges(SeriesCorrectionEventHandler.java:2098)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.fixStudyInstanceUid(SeriesCorrectionEventHandler.java:2322)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.handleDbRecord(SeriesCorrectionEventHandler.java:2580)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.correctForMdbHost(SeriesCorrectionEventHandler.java:2651)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.correctForOrganization(SeriesCorrectionEventHandler.java:2686)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.correctionsLoop(SeriesCorrectionEventHandler.java:2737)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.main(SeriesCorrectionEventHandler.java:2823)&lt;/p&gt;


&lt;p&gt;I spoke to Fabio and he said this was already caught in another code path, but not this one. He also said that it looked like a known issue since the other code path explicitly caught a OutOfMemory exception an notified about corrupted data.&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=179623&quot; target=&quot;_blank&quot;&gt;EW179623&lt;/a&gt; for more information.&lt;/p&gt;</description>
            <key id="81040">IP-48786</key>
            <summary>SCEH : Can get stuck when there is a corrupted dicom file in a series ( handleLegacyData, OutOfMemory exception )</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="kpasyar">Kia Pasyar</assignee>
                                    <reporter username="jan">Jan Lavoie</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 May 2010 15:49:36 -0400</created>
                <updated>Mon, 25 Mar 2019 14:11:40 -0400</updated>
                            <resolved>Wed, 9 Jun 2010 15:52:00 -0400</resolved>
                                    <version>4-1-1</version>
                                    <fixVersion>3-8-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="236009" author="fabio.padilha" created="Mon, 17 May 2010 17:20:12 -0400"  >&lt;p&gt;SCEH loads the a dicom file twice. It catches OutOfMemory exception in HeaderModifier but it doesn&apos;t do the same in handleLegacyData.&lt;br/&gt;
I think the fix should catch the exception, check if the file is corrupted somehow and if this is the case, mark the correction with a state that it doesn&apos;t try to correct it again.&lt;/p&gt;</comment>
                            <comment id="236010" author="build" created="Tue, 18 May 2010 12:39:40 -0400"  >&lt;p&gt;Released by kpasyar to master at 2010-05-18 12:39:39 (push 1434):&lt;br/&gt;
  PACS-3-8-1 (fix)        (previous build: PACS-3-8-1-P334)&lt;br/&gt;
  PACS-3-8-3 (fix)        (previous build: PACS-3-8-3-P56)&lt;br/&gt;
  PACS-4-1-1 (fix)        (previous build: PACS-4-1-1-P142)&lt;br/&gt;
  PACS-4-1-2 (fix)        (previous build: PACS-4-1-2-P48)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-1-3-A20)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/1a28bbc98240&quot; target=&quot;_blank&quot;&gt;intelepacs:1a28bbc98240&lt;/a&gt;  PACS-3-8-1  28098 fix: SCEH : Can get stuck when there is a corrupted dicom file in a series&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/e619b808b64b&quot; target=&quot;_blank&quot;&gt;intelepacs:e619b808b64b&lt;/a&gt;  PACS-3-8-3  28098 fix: SCEH : Can get stuck when there is a corrupted dicom file in a series&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/9eca755a9a39&quot; target=&quot;_blank&quot;&gt;intelepacs:9eca755a9a39&lt;/a&gt;  PACS-4-1-1  28098 fix: SCEH : Can get stuck when there is a corrupted dicom file in a series&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/e1bf2913a127&quot; target=&quot;_blank&quot;&gt;intelepacs:e1bf2913a127&lt;/a&gt;  PACS-4-1-2  28098 fix: SCEH : Can get stuck when there is a corrupted dicom file in a series&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/31563ec5c434&quot; target=&quot;_blank&quot;&gt;intelepacs:31563ec5c434&lt;/a&gt;  trunk       28098 fix: SCEH : Can get stuck when there is a corrupted dicom file in a series&lt;/p&gt;</comment>
                            <comment id="236011" author="kpasyar" created="Tue, 18 May 2010 13:26:50 -0400"  >&lt;p&gt;Description of the solution: &lt;/p&gt;

&lt;p&gt;Comment#1 refers to &lt;a href=&quot;https://jira.intelerad.com/browse/IP-46813&quot; title=&quot;SCEH: runs out of Java heap memory for large studies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-46813&quot;&gt;&lt;del&gt;IP-46813&lt;/del&gt;&lt;/a&gt; which had a similar problem.&lt;/p&gt;

&lt;p&gt;The preferred solution is to detect if the DicomFile is corrupt&lt;br/&gt;
or too large (for our enviroment) and return failure before the OutOfMemoryError occurs but this may take a little too much time to justify.&lt;/p&gt;

&lt;p&gt;Instead our solution is similar to that in &lt;a href=&quot;https://jira.intelerad.com/browse/IP-46813&quot; title=&quot;SCEH: runs out of Java heap memory for large studies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-46813&quot;&gt;&lt;del&gt;IP-46813&lt;/del&gt;&lt;/a&gt;. We effectively catch the OutOfMemoryError and replace it with a DicomToolsException which gets handled up the chain allowing cleanup code to run successfully.&lt;/p&gt;

&lt;p&gt;The behaviour of SCEH and PCEH is now the same for OutOfMemoryError as any other severe error while reading DicomFiles:&lt;/p&gt;

&lt;p&gt;SCEH  &lt;br/&gt;
  Immediately marks the correction as &apos;FAILED&apos; in &lt;br/&gt;
  DicomMaster.SeriesCorrectionList&lt;/p&gt;

&lt;p&gt;PCEH&lt;br/&gt;
  Ignores the failure and re-invokes the correction (including SCEH) a total &lt;br/&gt;
  of&quot;MAX_NUMBER_OF_ATTEMPTS&quot; times, sleeping for a small amount of time in &lt;br/&gt;
  between. MAX_NUMBER_OF_ATTEMPTS is a configuration value in &lt;br/&gt;
  PatientCorrectionEventHandler.cfg. Once the correction has failed &lt;br/&gt;
  &quot;MAX_NUMBER_OF_ATTEMPTS+1&quot; times PCEH marks it as failed in &lt;br/&gt;
  DicomMaster.PatientCorrectionList which effectively deactivates the &lt;br/&gt;
  correction.&lt;/p&gt;



&lt;p&gt;Tests executed: &lt;br/&gt;
  1) Hacked code to generate an OutOfMemoryError and reproduced the problem on &lt;br/&gt;
     a local 381 vm.&lt;br/&gt;
  2) Made changes to the SCEH and deployed new rpm to the vm.&lt;br/&gt;
  3) Reproduced the error and observed that SCEH is immediately marking the &lt;br/&gt;
     correction as &apos;FAILED&apos; in DicomMaster.SeriesCorrectionList. Also&lt;br/&gt;
     observed that PCEH ignores the failure and re-invokes SCEH  &lt;br/&gt;
     &quot;MAX_NUMBER_OF_ATTEMPTS&quot; times until it marks the correction as failed in&lt;br/&gt;
     DicomMaster.PatientCorrectionList. &lt;/p&gt;



&lt;p&gt;Unit tests added or modified: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;None&lt;/li&gt;
&lt;/ul&gt;




&lt;p&gt;To elaborate on handleLegacyData:&lt;/p&gt;

&lt;p&gt;This error was occurring in &quot;handleLegacyData&quot; which is a part of the code responsible for splitting pixel data from legacy DICOM files and updating the Dicom Image database with the corresponding information.&lt;/p&gt;
</comment>
                            <comment id="236012" author="lucie" created="Fri, 21 May 2010 12:28:23 -0400"  >&lt;p&gt;Reproduced with RPMs: Not reproduced. &lt;br/&gt;
Tested with SeriesCorrectionEventHandler-5.1.8.P1B2-4.1.1.P140.i386.rpm&lt;br/&gt;
Verified with RPMs: SeriesCorrectionEventHandler-5.1.8.P1B2-4.1.1.P143.i386.rpm&lt;br/&gt;
Verification steps: &lt;br/&gt;
used the corrupted file from the site to reproduce (unsuccessfully).&lt;br/&gt;
generated a correction&lt;br/&gt;
End result:  Was not able to reproduce. SCEH/PCEH worked as expected, marking status failed after 21 retries. marking as verified.&lt;br/&gt;
Time spent: 1h30 (training)&lt;/p&gt;</comment>
                            <comment id="236013" author="mario.doria" created="Tue, 25 May 2010 18:10:07 -0400"  >&lt;p&gt;Included in PACS-4-1-1-R8.&lt;/p&gt;</comment>
                            <comment id="236014" author="mario.doria" created="Wed, 9 Jun 2010 12:49:38 -0400"  >&lt;p&gt;Included in PACS-3-8-1-R19.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12603" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Affected Clients</customfieldname>
                        <customfieldvalues>
                                        <label>UIC</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>28098</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13386"><![CDATA[SeriesCorrectionEventHandler]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzpu9z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_11001" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>ServiceNow Case #</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>179623</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10801"><![CDATA[CRITICAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-48542] SCEH: Move FileOperationsAdapter class to FileUtilities package</title>
                <link>https://jira.intelerad.com/browse/IP-48542</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;RPM Version               : &lt;br/&gt;
EW                        : EW&lt;br/&gt;
Minimal steps to reproduce: &lt;br/&gt;
Expected behaviour        : &lt;br/&gt;
What happened instead?    : &lt;/p&gt;

&lt;p&gt;I&apos;m creating this bug to move FileOperationsAdapter class to FileUtilities which I created in &lt;a href=&quot;https://jira.intelerad.com/browse/IP-37235&quot; title=&quot;SCEH should also update ValidationDB:StudyLevel if there is a need for it (images burned with the &amp;quot;wrong&amp;quot; accession number)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-37235&quot;&gt;&lt;del&gt;IP-37235&lt;/del&gt;&lt;/a&gt;. I&apos;m doing that only on trunk.&lt;/p&gt;</description>
            <key id="80796">IP-48542</key>
            <summary>SCEH: Move FileOperationsAdapter class to FileUtilities package</summary>
                <type id="10905" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13911&amp;avatarType=issuetype">Enhancement</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="fpadilha">Fabio Padilha</assignee>
                                    <reporter username="fpadilha">Fabio Padilha</reporter>
                        <labels>
                    </labels>
                <created>Thu, 22 Apr 2010 10:47:08 -0400</created>
                <updated>Mon, 25 Mar 2019 14:11:45 -0400</updated>
                            <resolved>Tue, 10 Aug 2010 11:59:00 -0400</resolved>
                                    <version>N/A</version>
                                    <fixVersion>Next Branch (Trunk)</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="234481" author="build" created="Thu, 22 Apr 2010 14:32:54 -0400"  >&lt;p&gt;Released by fpadilha to master at 2010-04-22 14:32:54 (push 1123):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-1-3-A7)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/e84a5966c5c6&quot; target=&quot;_blank&quot;&gt;intelepacs:e84a5966c5c6&lt;/a&gt;  trunk       27784 fix: Move FileOperationsAdapter to FileUtilities package.&lt;/p&gt;</comment>
                            <comment id="234482" author="fabio.padilha" created="Thu, 22 Apr 2010 14:34:54 -0400"  >&lt;p&gt;Description of the solution: Refactoring in the code to move the class FileOperationsAdapter to FileUtilities and remove the class FileProvider from FileUtilities package&lt;br/&gt;
Tests executed: I ran all the unit testing.&lt;br/&gt;
Unit tests added or modified: none&lt;/p&gt;</comment>
                            <comment id="234483" author="rami.bechara" created="Tue, 10 Aug 2010 11:59:28 -0400"  >&lt;p&gt;This defect has been verified by the developer at the time of code change plus the execution of development testing. In addition, integration testing done by QA also verifies that this issue has been resolved.&lt;/p&gt;

&lt;p&gt;In certain cases the deployment team during test farm creation will be the group responsible for verification during routine deployment testing.&lt;/p&gt;

&lt;p&gt;Marking CLOSED.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[0.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>27784</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13386"><![CDATA[SeriesCorrectionEventHandler]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzpsrz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10804"><![CDATA[INTERNAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-47414] SCEH: writes institution code VR as UN (it should be LO) - corrupting DCM file</title>
                <link>https://jira.intelerad.com/browse/IP-47414</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;Software version: CorrectPatientInfo-3.1.12.P3B6-3.5.1.P221&lt;br/&gt;
Issue summary (optional): &lt;/p&gt;

&lt;p&gt;Steps to reproduce:&lt;br/&gt;
use correctPatientInfo or IB to change the organization code of a study&lt;/p&gt;

&lt;p&gt;Expected behavior:&lt;br/&gt;
The InstitutionCode dicom tag gets changed to the new org code.&lt;/p&gt;

&lt;p&gt;Actual behavior:&lt;br/&gt;
The InstitutionCode dicom tag is corrupted.&lt;/p&gt;

&lt;p&gt;Investigation summary:&lt;br/&gt;
While doing an organization code change at VIHA, we ran into thousands of series that couldn&apos;t have their InstitutionCode changed by dcmodify (it crashes with return code 2)&lt;br/&gt;
We noticed this was happening with series that were corrected.&lt;br/&gt;
We then reproduced the bug on PACZILLA.&lt;/p&gt;


&lt;p&gt;Customer impact (optional):&lt;/p&gt;</description>
            <key id="79668">IP-47414</key>
            <summary>SCEH: writes institution code VR as UN (it should be LO) - corrupting DCM file</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="ncabatoff">Nick Cabatoff</assignee>
                                    <reporter username="martin">Martin Chlumsky</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Dec 2009 14:35:41 -0500</created>
                <updated>Mon, 25 Mar 2019 14:12:06 -0400</updated>
                            <resolved>Mon, 21 Feb 2011 15:46:00 -0500</resolved>
                                    <version>3-5-1</version>
                                    <fixVersion>4-2-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="227642" author="ldilalla" created="Fri, 11 Dec 2009 15:41:40 -0500"  >&lt;p&gt;Changing severity to CRITICAL as there is corruption of DICOM data involved. &lt;/p&gt;</comment>
                            <comment id="227643" author="yxiao" created="Fri, 11 Dec 2009 17:36:00 -0500"  >&lt;p&gt;This is due to SCEH write this private tag with UN VR, &lt;/p&gt;</comment>
                            <comment id="227644" author="hlacroix" created="Mon, 14 Dec 2009 09:10:55 -0500"  >&lt;p&gt;Hi Yali,&lt;/p&gt;

&lt;p&gt;This bug might not affect our application but it prevent a major change to viha workflow which is to change the organization for over 1 million series.  So far we have encountered this problem for more than 5000 series and in the future I see that we will have to change more of those organization so the workaround is not very practical.&lt;/p&gt;

&lt;p&gt;I will have to change our code to delete the tag and reinsert which is even worse than changing the current tag. If this is trivial to fix please bump this in the pil as we will get more and more of those organization code change.&lt;/p&gt;</comment>
                            <comment id="227645" author="yxiao" created="Mon, 14 Dec 2009 11:11:04 -0500"  >&lt;p&gt;As the fix is not as easy as we first thought, change the difficulty as unknown&lt;/p&gt;</comment>
                            <comment id="227646" author="roger" created="Fri, 4 Feb 2011 16:47:36 -0500"  >&lt;p&gt;This BZ is preventing work from &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=200940&quot; target=&quot;_blank&quot;&gt;EW200940&lt;/a&gt; at PRS.  Adding the client code.&lt;/p&gt;</comment>
                            <comment id="227647" author="build" created="Wed, 9 Feb 2011 16:40:37 -0500"  >&lt;p&gt;Released by ncabatoff to master at 2011-02-09 16:40:37 (push 4992):&lt;br/&gt;
  PACS-4-2-1 (fix)        (previous build: PACS-4-2-1-P219)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-2-3-A17)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/5a9733b6821b&quot; target=&quot;_blank&quot;&gt;intelepacs:5a9733b6821b&lt;/a&gt;  PACS-4-2-1  26317 fix: Fix the code that calls DicomObject.set_ge() to modify the DICOM file, by adding a fourth&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/5ed8d7dac1d6&quot; target=&quot;_blank&quot;&gt;intelepacs:5ed8d7dac1d6&lt;/a&gt;  trunk       26317 fix: Fix the code that calls DicomObject.set_ge() to modify the DICOM file, by adding a fourth&lt;/p&gt;</comment>
                            <comment id="227648" author="nick.cabatoff" created="Wed, 9 Feb 2011 16:42:54 -0500"  >&lt;p&gt;Description of the solution: Fix call to JDT method set_ge() so that an in-place update of the tag is done, instead of adding and removing the tag.  The bug is caused because JDT doesn&apos;t look at our private dictionary when doing the add, so given an explicit VR file organization winds up being UN.&lt;br/&gt;
Tests executed: none&lt;br/&gt;
Unit tests added or modified: added testModifyInstitutionCode() to TestHeaderModifier.java.&lt;/p&gt;</comment>
                            <comment id="227649" author="htrinh" created="Thu, 10 Feb 2011 14:13:10 -0500"  >&lt;p&gt;Reproduced with RPMs: SeriesCorrectionEventHandler-4.2.1.P186-ims01&lt;br/&gt;
Verified with RPMs: SeriesCorrectionEventHandler-4.2.1.P220-ims01&lt;br/&gt;
Verification steps: &lt;/p&gt;

&lt;p&gt;1. Send a study to the PACS&lt;br/&gt;
2. Verify the InstitutionCode&lt;/p&gt;

&lt;p&gt;(3f01,0010) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;INTELERAD MEDICAL SYSTEMS&amp;#93;&lt;/span&gt;              #  26, 1 PrivateCreator&lt;br/&gt;
(3f01,1001) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;QA&amp;#93;&lt;/span&gt;                                     #   2, 1 InstitutionCode&lt;br/&gt;
(3f01,1003) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;HOA_AOG&amp;#93;&lt;/span&gt;                                #   8, 1 SourceAE&lt;/p&gt;

&lt;p&gt;3. Using IB&apos;s patient correction tool, modify the Organization code&lt;br/&gt;
4. Observe the InstitutionCode is corrupt&lt;/p&gt;

&lt;p&gt;(3f01,0010) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;INTELERAD MEDICAL SYSTEMS&amp;#93;&lt;/span&gt;              #  26, 1 PrivateCreator&lt;br/&gt;
(3f01,1001) UN 41\41\41\20                              #   4, 1 InstitutionCode&lt;br/&gt;
(3f01,1003) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;HOA_AOG&amp;#93;&lt;/span&gt;                                #   8, 1 SourceAE&lt;/p&gt;

&lt;p&gt;5. Update SeriesCorrectionEventHandler rpm and perform steps 1 to 3 again with a new study&lt;/p&gt;

&lt;p&gt;(3f01,0010) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;INTELERAD MEDICAL SYSTEMS&amp;#93;&lt;/span&gt;              #  26, 1 PrivateCreator&lt;br/&gt;
(3f01,1001) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;org0&amp;#93;&lt;/span&gt;                                   #   4, 1 InstitutionCode&lt;br/&gt;
(3f01,1003) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;HOA_AOG&amp;#93;&lt;/span&gt;                                #   8, 1 SourceAE&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Verified basic patient correction&lt;/li&gt;
	&lt;li&gt;Verified AutoRoute, AutoMove&lt;/li&gt;
	&lt;li&gt;Verified study can be opened in IV and viewed in IB&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;End result: Verified&lt;br/&gt;
Time spent: 3 hrs&lt;/p&gt;

&lt;p&gt;Note: Studies that have already been corrupted will not be corrected, however according to Nick, any C++ application that depends on the org code will continue to function as expected.&lt;/p&gt;</comment>
                            <comment id="227650" author="iplokar" created="Wed, 16 Feb 2011 18:01:19 -0500"  >&lt;p&gt;Included in the IntelePACS 421 R13 Release Notes (IPEN421RN-O Issue 013).&lt;/p&gt;</comment>
                            <comment id="227651" author="rami.bechara" created="Mon, 21 Feb 2011 15:46:25 -0500"  >&lt;p&gt;Included in PACS-4-2-1-R13&lt;/p&gt;</comment>
                            <comment id="227652" author="build" created="Wed, 2 Mar 2011 15:45:59 -0500"  >&lt;p&gt;Released by jsabella to master at 2011-03-02 15:45:47 (push 5270):&lt;br/&gt;
  PACS-4-2-4 (dummy)      (previous build: PACS-4-2-4-P1)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/96a0e8cf95fe&quot; target=&quot;_blank&quot;&gt;intelepacs:96a0e8cf95fe&lt;/a&gt;  PACS-4-2-4  26317 fix: Fix the code that calls DicomObject.set_ge() to modify the DICOM file, by adding a fourth&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/6caeb6d1c4f4&quot; target=&quot;_blank&quot;&gt;intelepacs:6caeb6d1c4f4&lt;/a&gt;  PACS-4-2-4  28856 dummy,29131 dummy,29148 dummy,28985 dummy,27550 dummy,28262 dummy,29096 dummy,29092 dummy,28855 dummy,29083 dummy,27472 dummy,28888 dummy,29157 dummy,28185 dummy,29163 dummy,29103 dummy,29017 dummy,28978 dummy,29144 dummy,29154 dummy,29097 dummy,29134 dummy,29176 dummy,29177 dummy,29178 dummy,29175 dummy,29062 dummy,29067 dummy,29123 dummy,29186 dummy,29181 dummy,29188 dummy,27627 dummy,28614 dummy,28638 dummy,29211 dummy,26476 dummy,29218 dummy,29180 dummy,29219 dummy,28933 dummy,20365 dummy,29185 dummy,28295 dummy,29117 dummy,28900 dummy,29079 dummy,29232 dummy,29225 dummy,27718 dummy,22614 dummy,29239 dummy,20740 dummy,22575 dummy,29231 dummy,29249 dummy,29099 dummy,29237 dummy,29259 dummy,29250 dummy,29255 dummy,28928 dummy,27536 dummy,29192 dummy,29203 dummy,29094 dummy,29275 dummy,29142 dummy,28535 dummy,29166 dummy,29262 dummy,29102 dummy,29246 dummy,29274 dummy,29305 dummy,29315 dummy,28991 dummy,27046 dummy,25832 dummy,28401 dummy,28915 dummy,28030 dummy,29326 dummy,29331 dummy,29316 dummy,29194 dummy,29342 dummy,29321 dummy,28563 dummy,22318 dummy,29287 dummy,29263 dummy,29252 dummy,27033 dummy,27025 dummy,26580 dummy,29282 dummy,24642 dummy,29221 dummy,29361 dummy,29297 dummy,29369 dummy,29352 dummy,29101 dummy,29385 dummy,29285 dummy,28491 dummy,24790 dummy,29417 dummy,29081 dummy,28255 dummy,29428 dummy,29363 dummy,29381 dummy,28551 dummy,29072 dummy,29432 dummy,29433 dummy,29362 dummy,29422 dummy,29394 dummy,28140 dummy,29454 dummy,29463 dummy,29465 dummy,29459 dummy,29193 dummy,29470 dummy,29472 dummy,29440 dummy,29462 dummy,29403 dummy,29415 dummy,29323 dummy,29429 dummy,29475 dummy,29482 dummy,29377 dummy,29504 dummy,29453 dummy,29442 dummy,29376 dummy,29509 dummy,29284 dummy,29471 dummy,29330 dummy,29516 dummy,29523 dummy,28549 dummy,29485 dummy,29497 dummy,29538 dummy,29506 dummy,29545 dummy,27488 dummy,29552 dummy,28512 dummy,29521 dummy,29455 dummy,29484 dummy,29411 dummy,29468 dummy,22259 dummy,23394 dummy,29518 dummy,29141 dummy,29578 dummy,28627 dummy,29581 dummy,29572 dummy,28839 dummy,28354 dummy,29364 dummy,29598 dummy,27896 dummy,11640 dummy,28748 dummy,29327 dummy,29254 dummy,29356 dummy,29413 dummy,29418 dummy,29152 dummy,29525 dummy,29546 dummy,29549 dummy,28447 dummy,14177 dummy,29612 dummy,29607 dummy,29603 dummy,29628 dummy,29370 dummy,29594 dummy,29542 dummy,29629 dummy,28036 dummy,29614 dummy,29519 dummy,29642 dummy,23876 dummy,29638 dummy,29382 dummy,28807 dummy,29631 dummy,25647 dummy,29649 dummy,29654 dummy,29655 dummy,29358 dummy,29667 dummy,29670 dummy,25241 dummy,29686 dummy,29657 dummy,29445 dummy,29595 dummy,29688 dummy,29652 dummy,29698 dummy,29113 dummy,29671 dummy,29672 dummy,28375 dummy,29543 dummy,28084 dummy,29703 dummy,29730 dummy,29666 dummy,29731 dummy,29734 dummy,29663 dummy,29718 dummy,28285 dummy,29713 dummy,28905 dummy,29021 dummy,29754 dummy,29755 dummy,27119 dummy,29740 dummy,29772 dummy,29757 dummy,29648 dummy,29775 dummy,26948 dummy,27889 dummy,27851 dummy,29325 dummy,29770 dummy,28334 dummy,25623 dummy,29332 dummy,29769 dummy,27249 dummy,29267 dummy,27802 dummy,29776 dummy,29825 dummy,29815 dummy,29844 dummy,25924 dummy,29840 dummy,29858 dummy,29859 dummy,25935 dummy,29526 dummy,29739 dummy,26399 dummy,29848 dummy,29367 dummy,29889 dummy,21764 dummy,29868 dummy,29865 dummy,29781 dummy,26909 dummy,28940 dummy,29199 dummy,29257 dummy,29875 dummy,29912 dummy,29339 dummy,28038 dummy,29894 dummy,28300 dummy,27872 dummy,29313 dummy,29571 dummy,29898 dummy,29916 dummy,29691 dummy,27820 dummy,27668 dummy,29717 dummy,24663 dummy,26977 dummy,29920 dummy,26110 dummy,29195 dummy,29965 dummy,29899 dummy,29808 dummy,29904 dummy,29989 dummy,29986 dummy,29979 dummy,29976 dummy,30015 dummy,22572 dummy,23588 dummy,30024 dummy,28785 dummy,28166 dummy,30037 dummy,29981 dummy,30040 dummy,30048 dummy,29946 dummy,30043 dummy,29460 dummy,27154 dummy,29818 dummy,30014 dummy,30088 dummy,30097 dummy,29927 dummy,29620 dummy,27793 dummy,30096 dummy,29867 dummy,30020 dummy,29984 dummy,30104 dummy,30101 dummy,22690 dummy,30117 dummy,30120 dummy,30067 dummy,30093 dummy,30130 dummy,30189 dummy,30198 dummy,25854 dummy,30179 dummy,30248 dummy,30247 dummy,29005 dummy,30270 dummy,30025 dummy,26449 dummy,28552 dummy,30281 dummy,30064 dummy,29919 dummy,30295 dummy,30259 dummy,30313 dummy,30291 dummy,30309 dummy,29922 dummy,30314 dummy,30319 dummy,29498 dummy,30323 dummy,25727 dummy,25188 dummy,30326 dummy,25778 dummy,30092 dummy,30347 dummy,30032 dummy,30342 dummy,30316 dummy,30255 dummy,29228 dummy,23056 dummy,30321 dummy,29561 dummy,30268 dummy,30384 dummy,29807 dummy,29597 dummy,30393 dummy,30398 dummy,7837 dummy,29924 dummy,30423 dummy,29590 dummy,24440 dummy,30434 dummy,30428 dummy,30447 dummy,30455 dummy,30370 dummy,30459 dummy,30409 dummy,30457 dummy,27380 dummy,30463 dummy,30441 dummy,30334 dummy,30470 dummy,28561 dummy,30472 dummy,30485 dummy,27870 dummy,27134 dummy,29905 dummy,30484 dummy,30301 dummy,30507 dummy,30422 dummy,30267 dummy,30527 dummy,30528 dummy,30531 dummy,30517 dummy,30535 dummy,30534 dummy,30479 dummy,30480 dummy,30521 dummy,30386 dummy,30297 dummy,30538 dummy,30483 dummy,30504 dummy,30537 dummy,30548 dummy,30554 dummy,30532 dummy,30552 dummy,30602 dummy,30591 dummy,30612 dummy,18871 dummy,29931 dummy,23370 dummy,30558 dummy,30557 dummy,30526 dummy,30646 dummy,30642 dummy,30053 dummy,29710 dummy,30565 dummy,30648 dummy,30687 dummy,30679 dummy,30702 dummy,30689 dummy,30707 dummy,30631 dummy,30722 dummy,30681 dummy,30544 dummy,30672 dummy,30741 dummy,30645 dummy,30312 dummy,30733 dummy,30726 dummy,22068 dummy,30098 dummy,30752 dummy,30195 dummy,30786 dummy,26317 dummy,30776 dummy,30662 dummy,29810 dummy,29618 dummy,30735 dummy,30023 dummy,30822 dummy,30261 dummy,30904 dummy,22288 dummy,30830 dummy,30827 dummy,30804 dummy,29949 dummy,30878 dummy,30927 dummy,30385 dummy,29292 dummy,30493 dummy,27600 dummy,30928 dummy,29156 dummy,30864 dummy,30505 dummy,30881 dummy,30952 dummy,30959 dummy,28419 dummy,30791 dummy,30639 dummy,30991 dummy: dummy merge from PACS-4-2-1&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12603" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Affected Clients</customfieldname>
                        <customfieldvalues>
                                        <label>MUHC</label>
            <label>PRS</label>
            <label>VIHA</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[3.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26317</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13386"><![CDATA[SeriesCorrectionEventHandler]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzpltr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12102" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Release Notes</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12017"><![CDATA[Approved]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_11001" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>ServiceNow Case #</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>165508 205109 200940</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10801"><![CDATA[CRITICAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-46813] SCEH: runs out of Java heap memory for large studies</title>
                <link>https://jira.intelerad.com/browse/IP-46813</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;Software version: SeriesCorrectionEventHandler-5.1.1.P2B10-3.5.1.P221&lt;br/&gt;
Issue summary (optional): big study fails to correct&lt;br/&gt;
Steps to reproduce: issue patient correction on 2.8GB study (compressed), 78 series, 390 images.&lt;br/&gt;
Expected behavior: correction is done.&lt;br/&gt;
Actual behavior: correction fails in SCEH with Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space&lt;br/&gt;
Investigation summary: see &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=1041232&quot; target=&quot;_blank&quot;&gt;EW1041232&lt;/a&gt;&lt;br/&gt;
Customer impact (optional):&lt;/p&gt;</description>
            <key id="79067">IP-46813</key>
            <summary>SCEH: runs out of Java heap memory for large studies</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="fpadilha">Fabio Padilha</assignee>
                                    <reporter username="lucie">Lucie Forget</reporter>
                        <labels>
                            <label>qa_reopened</label>
                    </labels>
                <created>Mon, 5 Oct 2009 15:48:22 -0400</created>
                <updated>Fri, 26 Apr 2019 14:06:41 -0400</updated>
                            <resolved>Thu, 8 Oct 2015 13:48:00 -0400</resolved>
                                    <version>3-8-1</version>
                                    <fixVersion>3-8-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="223432" author="neelin" created="Tue, 3 Nov 2009 12:31:03 -0500"  >&lt;p&gt;Note that that is &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewFollowup.php?id=1041232&quot; target=&quot;_blank&quot;&gt;EWF1041232&lt;/a&gt; in &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=159253&quot; target=&quot;_blank&quot;&gt;EW159253&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="223433" author="ldilalla" created="Mon, 1 Feb 2010 16:35:07 -0500"  >&lt;p&gt;am setting severity to critical as per &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=169185&quot; target=&quot;_blank&quot;&gt;EW169185&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="223434" author="fabio.padilha" created="Wed, 3 Feb 2010 10:14:01 -0500"  >&lt;p&gt;This is in fact caused by large private tags in the dicom header. I could see two examples of those large private tags. One of these private tags is a 3d volume.&lt;/p&gt;

&lt;p&gt;(200d,0030) LO &lt;span class=&quot;error&quot;&gt;&amp;#91;Philips US Imaging DD 033&amp;#93;&lt;/span&gt;              #  26, 1 PrivateCreator&lt;br/&gt;
        (200d,300e) OB 04\9e\36\00\b5\05\03\00\2b\00\11\00\b0\19\ae\00\00\00\00\00\00\00... # 251018240, 1 Unknown Tag &amp;amp; Data 1 Unknown Tag &amp;amp; Data&lt;/p&gt;

&lt;p&gt;We have jre set to 512mb the maximum memory (-Xmx ).&lt;br/&gt;
I looked at the code and noticed that we are loading the whole object in memory, setting the new values requested by the SeriesCorrection and then writing the file back to disk. A possible solution would be to use an InputStream to read and an OutputStream to write the header preventing the app from loading the entire object in memory.&lt;/p&gt;</comment>
                            <comment id="223435" author="fabio.padilha" created="Wed, 10 Mar 2010 17:57:14 -0500"  >&lt;p&gt;Another client: MUHC, &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=172693&quot; target=&quot;_blank&quot;&gt;EW172693&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="223436" author="fabio.padilha" created="Tue, 16 Mar 2010 11:18:08 -0400"  >&lt;p&gt;MRMI has 4-1-1.&lt;br/&gt;
SPH and MUHC have 3-8-1.&lt;/p&gt;

&lt;p&gt;Therefore I&apos;m changing the target branch to 3-8-1&lt;/p&gt;</comment>
                            <comment id="223437" author="fabio.padilha" created="Mon, 5 Apr 2010 17:26:22 -0400"  >&lt;p&gt;We can&apos;t use DCMODIFY to fix this because DCMODIFY doesn&apos;t allow us to insert new sequences in a dicom file.&lt;/p&gt;</comment>
                            <comment id="223438" author="build" created="Fri, 7 May 2010 11:10:06 -0400"  >&lt;p&gt;Released by fpadilha to master at 2010-05-07 11:10:05 (push 1320):&lt;br/&gt;
  PACS-3-8-1 (fix)        (previous build: PACS-3-8-1-P328)&lt;br/&gt;
  PACS-3-8-3 (fix)        (previous build: PACS-3-8-3-P56)&lt;br/&gt;
  PACS-4-1-1 (fix)        (previous build: PACS-4-1-1-P136)&lt;br/&gt;
  PACS-4-1-2 (fix)        (previous build: PACS-4-1-2-P47)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-1-3-A12)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/b2d48a616992&quot; target=&quot;_blank&quot;&gt;intelepacs:b2d48a616992&lt;/a&gt;  PACS-3-8-1  25531 fix: SeriesCorrection detects large private tags and then call a separate&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/3c83084b434b&quot; target=&quot;_blank&quot;&gt;intelepacs:3c83084b434b&lt;/a&gt;  PACS-3-8-3  25531 fix: SeriesCorrection detects large private tags and then call a separate&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/048be6960eee&quot; target=&quot;_blank&quot;&gt;intelepacs:048be6960eee&lt;/a&gt;  PACS-4-1-1  25531 fix: SeriesCorrection detects large private tags and then call a separate&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/5b167028d226&quot; target=&quot;_blank&quot;&gt;intelepacs:5b167028d226&lt;/a&gt;  PACS-4-1-2  25531 fix: SeriesCorrection detects large private tags and then call a separate&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/39d477c86b5e&quot; target=&quot;_blank&quot;&gt;intelepacs:39d477c86b5e&lt;/a&gt;  trunk       25531 fix: SeriesCorrection detects large private tags and then call a separate&lt;/p&gt;</comment>
                            <comment id="223439" author="fabio.padilha" created="Fri, 7 May 2010 11:43:01 -0400"  >&lt;p&gt;Description of the solution: &lt;/p&gt;

&lt;p&gt;I implemented a class to detect private large tags. Thus it skips these tags when reading dicom file. If large tags are detected, it calls a separate process to modify dicom header. Privates tags larger than 10 Mb are skipped. This parameter is hard coded.&lt;br/&gt;
I added a timeout in order to kill the process if it hangs. It&apos;s hard coded and I set it to 20 minutes. The new script to run this process is called run_HeaderModifier.sh. If it takes more than 20 minutes to finish. SeriesCorrectionEventHandler will kill it. We have to make sure we know the maximum time it might take to modify the greatest series in the world.&lt;/p&gt;


&lt;p&gt;Tests executed: &lt;/p&gt;

&lt;p&gt;I tested in my vmware 381. I requested a PatientCorrection using PCT in a series I knew that it didn&apos;t have any private tag larger than 10 Mb and it processed in the main process.&lt;br/&gt;
I tested then with a series with large tags and SeriesCorrectionEventHandler launched run_HeaderModifier.sh to modify the files.&lt;br/&gt;
We have to verify this change in others cases, like corrections coming from different sources like ADT Hl7 msgs. It would be nice to test with INLINE_JPEG, EMBEDDED OVERLAY, ATTACHED PIXEL DATA and SPLIT PIXEL DATA. &lt;/p&gt;

&lt;p&gt;Unit tests added or modified: &lt;/p&gt;

&lt;p&gt;TestSeriesCorrectionEventHandler&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;javatestGetBackupPath&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;TestHeaderModifier&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;testCommandLauncher&lt;/li&gt;
	&lt;li&gt;testDestroyProcess&lt;/li&gt;
	&lt;li&gt;testDoCorrection&lt;/li&gt;
	&lt;li&gt;testCrashInModifySeriesHeaders&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;TestDicomObjectIO&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;testLargeTagsWithinSequence&lt;/li&gt;
	&lt;li&gt;testLoadUsingSkippedTags&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="223440" author="fabio.padilha" created="Fri, 7 May 2010 12:22:22 -0400"  >&lt;p&gt;Updating affected RPMs.&lt;/p&gt;

&lt;p&gt;find . -name &quot;*.filelist&quot; | xargs grep &quot;DICOM_TOOLS.filelist&quot;&lt;br/&gt;
./PACS/PatientSearch/PatientSearchLibrary/PATIENT_SEARCH_LIBRARY.filelist:PACS/DICOM/Tools/DICOM_TOOLS.filelist&lt;br/&gt;
./PACS/DICOM/workFlow/DICOM_WORKFLOW.filelist:PACS/DICOM/Tools/DICOM_TOOLS.filelist&lt;br/&gt;
./PACS/DICOM/InteleDicomLibrary/INTELE_DICOM_LIBRARY.filelist:PACS/DICOM/Tools/DICOM_TOOLS.filelist&lt;br/&gt;
./PACS/DICOM/DicomToJpeg/DICOM_TO_JPEG.filelist:PACS/DICOM/Tools/DICOM_TOOLS.filelist&lt;br/&gt;
./PACS/PatientCorrection/PatientCorrectionLibrary/PATIENT_CORRECTION_LIBRARY.filelist:PACS/DICOM/Tools/DICOM_TOOLS.filelist = DicomTools&lt;br/&gt;
./PACS/PatientCorrection/CorrectionServer/CORRECTION_SERVER.filelist:PACS/DICOM/Tools/DICOM_TOOLS.filelist&lt;br/&gt;
./PACS/PatientCorrection/PatientCorrectionEventHandler/PATIENT_CORRECTION_EVENT_HANDLER.filelist:PACS/DICOM/Tools/DICOM_TOOLS.filelist&lt;br/&gt;
./PACS/PatientCorrection/SeriesCorrectionEventHandler/SERIES_CORRECTION_EVENT_HANDLER.filelist:PACS/DICOM/Tools/DICOM_TOOLS.filelist&lt;br/&gt;
./PACS/PatientCorrection/SeriesCorrector/SERIES_CORRECTOR.filelist:PACS/DICOM/Tools/DICOM_TOOLS.filelist&lt;br/&gt;
./PACS/PatientCorrection/SeriesCorrector/bin/SERIES_CORRECTOR.filelist:PACS/DICOM/Tools/DICOM_TOOLS.filelist&lt;br/&gt;
./Tools/RenderingLibrary/RENDERING_LIBRARY.filelist:PACS/DICOM/Tools/DICOM_TOOLS.filelist = DicomTools&lt;br/&gt;
./RIS/ValidationController/VALIDATION_CONTROLLER.filelist:PACS/DICOM/Tools/DICOM_TOOLS.filelist&lt;br/&gt;
./RIS/modalityWorklist/MODALITY_WORKLIST.filelist:PACS/DICOM/Tools/DICOM_TOOLS.filelist&lt;br/&gt;
./RIS/HL7/Hl7GatewayServer/HL7_GATEWAY_SERVER.filelist:PACS/DICOM/Tools/DICOM_TOOLS.filelist&lt;br/&gt;
./RIS/HL7/Hl7FileSender/HL7_FILE_SENDER.filelist:PACS/DICOM/Tools/DICOM_TOOLS.filelist&lt;br/&gt;
./Viewer/J2cProtocol/J2C_PROTOCOL.filelist:PACS/DICOM/Tools/DICOM_TOOLS.filelist&lt;br/&gt;
./Viewer/Client/VIEWER_CLIENT.filelist:PACS/DICOM/Tools/DICOM_TOOLS.filelist&lt;br/&gt;
./Viewer/Client/.build.InteleViewer/VIEWER_CLIENT.filelist:PACS/DICOM/Tools/DICOM_TOOLS.filelist&lt;/p&gt;</comment>
                            <comment id="223441" author="build" created="Fri, 7 May 2010 15:54:34 -0400"  >&lt;p&gt;Released by fpadilha to master at 2010-05-07 15:54:33 (push 1328):&lt;br/&gt;
  PACS-4-1-2 (fix)        (previous build: PACS-4-1-2-P47)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-1-3-A12)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/c730dfef48df&quot; target=&quot;_blank&quot;&gt;intelepacs:c730dfef48df&lt;/a&gt;  PACS-4-1-2  25531 fix: Fix the build. PacsVersion.printVersion is lightly different in 412.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/384f12fff4b3&quot; target=&quot;_blank&quot;&gt;intelepacs:384f12fff4b3&lt;/a&gt;  trunk       25531 fix: Fix the build. PacsVersion.printVersion is lightly different in 412.&lt;/p&gt;</comment>
                            <comment id="223442" author="build" created="Fri, 7 May 2010 17:26:32 -0400"  >&lt;p&gt;Released by fpadilha to master at 2010-05-07 17:26:31 (push 1330):&lt;br/&gt;
  PACS-3-8-1 (fix)        (previous build: PACS-3-8-1-P328)&lt;br/&gt;
  PACS-3-8-3 (fix)        (previous build: PACS-3-8-3-P56)&lt;br/&gt;
  PACS-4-1-1 (fix)        (previous build: PACS-4-1-1-P136)&lt;br/&gt;
  PACS-4-1-2 (fix)        (previous build: PACS-4-1-2-P47)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-1-3-A12)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/00834a166ebf&quot; target=&quot;_blank&quot;&gt;intelepacs:00834a166ebf&lt;/a&gt;  PACS-3-8-1  25531 fix: Fix broken unit test.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/93241892b647&quot; target=&quot;_blank&quot;&gt;intelepacs:93241892b647&lt;/a&gt;  PACS-3-8-3  25531 fix: Fix broken unit test.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/ea11fb641da6&quot; target=&quot;_blank&quot;&gt;intelepacs:ea11fb641da6&lt;/a&gt;  PACS-4-1-1  25531 fix: Fix broken unit test.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/71654e4f3c30&quot; target=&quot;_blank&quot;&gt;intelepacs:71654e4f3c30&lt;/a&gt;  PACS-4-1-2  25531 fix: Fix broken unit test.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/cb7fbd84ad30&quot; target=&quot;_blank&quot;&gt;intelepacs:cb7fbd84ad30&lt;/a&gt;  trunk       25531 fix: Fix broken unit test.&lt;/p&gt;</comment>
                            <comment id="223443" author="build" created="Mon, 10 May 2010 14:08:30 -0400"  >&lt;p&gt;Released by fpadilha to master at 2010-05-10 14:08:29 (push 1338):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-1-3-A13)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/3a05a72d1312&quot; target=&quot;_blank&quot;&gt;intelepacs:3a05a72d1312&lt;/a&gt;  trunk       25531 fix: Fixing the build. I moved two classes to other package. I added the imports needed.&lt;/p&gt;</comment>
                            <comment id="223444" author="build" created="Wed, 12 May 2010 14:33:07 -0400"  >&lt;p&gt;Released by fpadilha to master at 2010-05-12 14:33:06 (push 1370):&lt;br/&gt;
  PACS-3-8-1 (fix)        (previous build: PACS-3-8-1-P331)&lt;br/&gt;
  PACS-3-8-3 (fix)        (previous build: PACS-3-8-3-P56)&lt;br/&gt;
  PACS-4-1-1 (fix)        (previous build: PACS-4-1-1-P138)&lt;br/&gt;
  PACS-4-1-2 (fix)        (previous build: PACS-4-1-2-P47)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-1-3-A16)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/4b5e3442a2d3&quot; target=&quot;_blank&quot;&gt;intelepacs:4b5e3442a2d3&lt;/a&gt;  PACS-3-8-1  25531 fix: Fixing a log.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/0a2962a8ce78&quot; target=&quot;_blank&quot;&gt;intelepacs:0a2962a8ce78&lt;/a&gt;  PACS-3-8-3  25531 fix: Fixing a log.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/f8145081e66a&quot; target=&quot;_blank&quot;&gt;intelepacs:f8145081e66a&lt;/a&gt;  PACS-4-1-1  25531 fix: Fixing a log.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/ba9bf3a8f972&quot; target=&quot;_blank&quot;&gt;intelepacs:ba9bf3a8f972&lt;/a&gt;  PACS-4-1-2  25531 fix: Fixing a log.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/c187606d9ecd&quot; target=&quot;_blank&quot;&gt;intelepacs:c187606d9ecd&lt;/a&gt;  trunk       25531 fix: Fixing a log.&lt;/p&gt;</comment>
                            <comment id="223445" author="jan" created="Wed, 12 May 2010 16:50:57 -0400"  >&lt;p&gt;Reproduced with RPMs: -&lt;br/&gt;
Verified with RPMs: &lt;/p&gt;

&lt;p&gt;SeriesCorrectionEventHandler-5.1.8.P1B2-4.1.1.P137&lt;br/&gt;
PatientCorrectionEventHandler-3.1.17.P5B2-4.1.1.P137&lt;/p&gt;

&lt;p&gt;Verification steps: &lt;/p&gt;

&lt;p&gt;Using a 240MB image that Fabio provided, I tested making corrections.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Tested with one image.&lt;/li&gt;
	&lt;li&gt;Tested with 3 images.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;End result: Failed! Doesn&apos;t work with more than one image.&lt;/p&gt;

&lt;p&gt;Time spent: 1 hour.&lt;/p&gt;

&lt;p&gt;There is still more testing to be done. See comment#10 .&lt;/p&gt;

&lt;p&gt;This has already been analyzed and solved with Fabio. Reopening.&lt;/p&gt;</comment>
                            <comment id="223446" author="build" created="Thu, 13 May 2010 10:52:21 -0400"  >&lt;p&gt;Released by fpadilha to master at 2010-05-13 10:52:20 (push 1380):&lt;br/&gt;
  PACS-3-8-1 (fix)        (previous build: PACS-3-8-1-P331)&lt;br/&gt;
  PACS-3-8-3 (fix)        (previous build: PACS-3-8-3-P56)&lt;br/&gt;
  PACS-4-1-1 (fix)        (previous build: PACS-4-1-1-P138)&lt;br/&gt;
  PACS-4-1-2 (fix)        (previous build: PACS-4-1-2-P47)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-1-3-A17)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/987e644a3423&quot; target=&quot;_blank&quot;&gt;intelepacs:987e644a3423&lt;/a&gt;  PACS-3-8-1  25531 fix: Fixed how the string splits space and comma. Using StringSplit library now.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/2a61cbe51898&quot; target=&quot;_blank&quot;&gt;intelepacs:2a61cbe51898&lt;/a&gt;  PACS-3-8-3  25531 fix: Fixed how the string splits space and comma. Using StringSplit library now.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/a009a6cff09d&quot; target=&quot;_blank&quot;&gt;intelepacs:a009a6cff09d&lt;/a&gt;  PACS-4-1-1  25531 fix: Fixed how the string splits space and comma. Using StringSplit library now.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/a432e3f02d41&quot; target=&quot;_blank&quot;&gt;intelepacs:a432e3f02d41&lt;/a&gt;  PACS-4-1-2  25531 fix: Fixed how the string splits space and comma. Using StringSplit library now.&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/313d4cfa01e0&quot; target=&quot;_blank&quot;&gt;intelepacs:313d4cfa01e0&lt;/a&gt;  trunk       25531 fix: Fixed how the string splits space and comma. Using StringSplit library now.&lt;/p&gt;</comment>
                            <comment id="223447" author="fabio.padilha" created="Thu, 13 May 2010 10:53:52 -0400"  >&lt;p&gt;Description of the solution: &lt;/p&gt;

&lt;p&gt;It was not splitting comma and space properly. Using StringSplit library now.&lt;/p&gt;

&lt;p&gt;Tests executed: None&lt;/p&gt;

&lt;p&gt;Unit tests added or modified: &lt;br/&gt;
TestHeaderModifier&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;testReadSopList&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="223448" author="mario.doria" created="Thu, 13 May 2010 13:34:27 -0400"  >&lt;p&gt;Reproduced with RPMs: &lt;br/&gt;
Verified with RPMs: SeriesCorrectionEventHandler-4.1.3.A18-ims01&lt;br/&gt;
Verification steps: &lt;/p&gt;

&lt;p&gt;Reopening because run_HeaderModifier.sh is executed by PACS start when starting the PACS. This tool should be renamed to NOT include the run_ prefix. A valid name is HeaderModifier.sh&lt;/p&gt;


&lt;p&gt;End result: Reopening slip&lt;br/&gt;
Time spent: 5 min&lt;/p&gt;</comment>
                            <comment id="223449" author="jan" created="Thu, 13 May 2010 13:54:19 -0400"  >&lt;p&gt;From comment#19 :&lt;/p&gt;

&lt;p&gt;&quot;A valid name is HeaderModifier.sh&quot;&lt;/p&gt;

&lt;p&gt;According to IMS conventions, a valid name would be headerModifier :&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;No extension&lt;/li&gt;
	&lt;li&gt;Starts with a lowercase, then camel case.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="223450" author="build" created="Thu, 13 May 2010 15:18:08 -0400"  >&lt;p&gt;Released by fpadilha to master at 2010-05-13 15:18:07 (push 1384):&lt;br/&gt;
  PACS-3-8-1 (fix)        (previous build: PACS-3-8-1-P331)&lt;br/&gt;
  PACS-3-8-3 (fix)        (previous build: PACS-3-8-3-P56)&lt;br/&gt;
  PACS-4-1-1 (fix)        (previous build: PACS-4-1-1-P138)&lt;br/&gt;
  PACS-4-1-2 (fix)        (previous build: PACS-4-1-2-P47)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-1-3-A18)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/6eb6ff0a4251&quot; target=&quot;_blank&quot;&gt;intelepacs:6eb6ff0a4251&lt;/a&gt;  PACS-3-8-1  25531 fix: Rename run_HeaderModifier.sh to modifyHeader.sh&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/5047bc9e98cb&quot; target=&quot;_blank&quot;&gt;intelepacs:5047bc9e98cb&lt;/a&gt;  PACS-3-8-3  25531 fix: Rename run_HeaderModifier.sh to modifyHeader.sh&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/5093c3af95b7&quot; target=&quot;_blank&quot;&gt;intelepacs:5093c3af95b7&lt;/a&gt;  PACS-4-1-1  25531 fix: Rename run_HeaderModifier.sh to modifyHeader.sh&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/98171d5519e1&quot; target=&quot;_blank&quot;&gt;intelepacs:98171d5519e1&lt;/a&gt;  PACS-4-1-2  25531 fix: Rename run_HeaderModifier.sh to modifyHeader.sh&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/f10673d41d5b&quot; target=&quot;_blank&quot;&gt;intelepacs:f10673d41d5b&lt;/a&gt;  trunk       25531 fix: Rename run_HeaderModifier.sh to modifyHeader.sh&lt;/p&gt;</comment>
                            <comment id="223451" author="fabio.padilha" created="Thu, 13 May 2010 15:19:21 -0400"  >&lt;p&gt;Description of the solution: Renamed to modifyHeader.sh&lt;/p&gt;

&lt;p&gt;Tests executed: Unit tests&lt;/p&gt;

&lt;p&gt;Unit tests added or modified: None&lt;/p&gt;</comment>
                            <comment id="223452" author="build" created="Thu, 13 May 2010 17:32:06 -0400"  >&lt;p&gt;Released by fpadilha to master at 2010-05-13 17:32:05 (push 1388):&lt;br/&gt;
  PACS-3-8-1 (fix)        (previous build: PACS-3-8-1-P331)&lt;br/&gt;
  PACS-3-8-3 (fix)        (previous build: PACS-3-8-3-P56)&lt;br/&gt;
  PACS-4-1-1 (fix)        (previous build: PACS-4-1-1-P139)&lt;br/&gt;
  PACS-4-1-2 (fix)        (previous build: PACS-4-1-2-P47)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-1-3-A18)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/82eb16295f1d&quot; target=&quot;_blank&quot;&gt;intelepacs:82eb16295f1d&lt;/a&gt;  PACS-3-8-1  25531 fix: Removing the extension of modifyHeader&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/5655e2efbccd&quot; target=&quot;_blank&quot;&gt;intelepacs:5655e2efbccd&lt;/a&gt;  PACS-3-8-3  25531 fix: Removing the extension of modifyHeader&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/10e9fa86927e&quot; target=&quot;_blank&quot;&gt;intelepacs:10e9fa86927e&lt;/a&gt;  PACS-4-1-1  25531 fix: Removing the extension of modifyHeader&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/5c200ca455d5&quot; target=&quot;_blank&quot;&gt;intelepacs:5c200ca455d5&lt;/a&gt;  PACS-4-1-2  25531 fix: Removing the extension of modifyHeader&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/9ea014870e6c&quot; target=&quot;_blank&quot;&gt;intelepacs:9ea014870e6c&lt;/a&gt;  trunk       25531 fix: Removing the extension of modifyHeader&lt;/p&gt;</comment>
                            <comment id="223453" author="jan" created="Fri, 14 May 2010 17:55:37 -0400"  >&lt;p&gt;Reproduced with RPMs: -&lt;br/&gt;
Verified with RPMs: &lt;/p&gt;

&lt;p&gt;PatientCorrectionEventHandler-3.1.17.P5B2-4.1.1.P140.i386.rpm&lt;br/&gt;
SeriesCorrectionEventHandler-Config-5.1.8.P1B2-4.1.1.P140.i386.rpm&lt;/p&gt;


&lt;p&gt;Verification steps: &lt;/p&gt;

&lt;p&gt;Corrected a normal study&lt;br/&gt;
Corrected a study with large tags : 1 image , many images, many series&lt;/p&gt;

&lt;p&gt;Corrected a non split image&lt;br/&gt;
Corrected an image with embedded overlays&lt;/p&gt;

&lt;p&gt;Ensured inline jpeg and series editor still worked for normal images.&lt;/p&gt;

&lt;p&gt;End result: Verified!&lt;br/&gt;
Time spent: lonnnng... let&apos;s say 4 hours.&lt;/p&gt;</comment>
                            <comment id="223454" author="mario.doria" created="Wed, 26 May 2010 16:40:50 -0400"  >&lt;p&gt;Included in PACS-4-1-1-R8.&lt;/p&gt;</comment>
                            <comment id="223455" author="iplokar" created="Wed, 9 Jun 2010 09:04:15 -0400"  >&lt;p&gt;Added to the 381 R19 IntelePACS Release Notes.&lt;/p&gt;</comment>
                            <comment id="223456" author="mario.doria" created="Wed, 9 Jun 2010 12:49:35 -0400"  >&lt;p&gt;Included in PACS-3-8-1-R19.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10002">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="54922">IP-98934</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="54961">IP-99116</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12603" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Affected Clients</customfieldname>
                        <customfieldvalues>
                                        <label>MRMI</label>
            <label>MUHC</label>
            <label>SPH</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[3.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25531</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13106"><![CDATA[DatabaseIntermediariesPatientSearch]]></customfieldvalue>
    <customfieldvalue key="13145"><![CDATA[DicomToJpeg]]></customfieldvalue>
    <customfieldvalue key="13195"><![CDATA[ImageService]]></customfieldvalue>
    <customfieldvalue key="13209"><![CDATA[InteleBrowser]]></customfieldvalue>
    <customfieldvalue key="13232"><![CDATA[InteleViewer]]></customfieldvalue>
    <customfieldvalue key="13279"><![CDATA[ModalityWorklist]]></customfieldvalue>
    <customfieldvalue key="13314"><![CDATA[PatientCorrectionEventHandler]]></customfieldvalue>
    <customfieldvalue key="13386"><![CDATA[SeriesCorrectionEventHandler]]></customfieldvalue>
    <customfieldvalue key="13451"><![CDATA[ValidationServlet]]></customfieldvalue>
    <customfieldvalue key="13459"><![CDATA[WaveletServer]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzpi4f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_11001" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>ServiceNow Case #</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>159253, 169185, 172693</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10801"><![CDATA[CRITICAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-45292] PCEH: updates DicomMaster SeriesLocation with wrong Series tape position</title>
                <link>https://jira.intelerad.com/browse/IP-45292</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;RPM Version               : PatientCorrectionEventHandler-3.1.14.P3B1-3.7.2.P35&lt;br/&gt;
EW                        : &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=144240&quot; target=&quot;_blank&quot;&gt;EW144240&lt;/a&gt;&lt;br/&gt;
Minimal steps to reproduce: &lt;br/&gt;
1. make sure one series has at least two location, and 1 offline location.&lt;br/&gt;
2. make sure there two rows in DLTInfoDB.SeriesTapePosition for this series.&lt;br/&gt;
3. issue a patient correction event&lt;br/&gt;
Expected behaviour        : the lastest tape position get updated in DicomMaster&lt;br/&gt;
What happened instead?    : the oldest tape position get updated in DicomMaster.SeriesLocation&lt;/p&gt;

&lt;p&gt;The issue is PCEH will update both rows in SeriesTapePositon, which will trigger two update in DicomMaster, This is not expected, PCEH should only trigger the latest updating in DicomMaster.&lt;/p&gt;</description>
            <key id="77546">IP-45292</key>
            <summary>PCEH: updates DicomMaster SeriesLocation with wrong Series tape position</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="fpadilha">Fabio Padilha</assignee>
                                    <reporter username="yxiao">Yali Xiao</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 Apr 2009 13:17:01 -0400</created>
                <updated>Mon, 25 Mar 2019 14:12:49 -0400</updated>
                            <resolved>Fri, 6 Aug 2010 10:36:00 -0400</resolved>
                                    <version>3-6-1</version>
                                    <fixVersion>Next Branch (Trunk)</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="212572" author="ldilalla" created="Fri, 29 May 2009 19:21:07 -0400"  >&lt;p&gt;Upping the priority as it is affecting support/deployment.&lt;/p&gt;</comment>
                            <comment id="212573" author="fabio.padilha" created="Wed, 27 Jan 2010 17:42:09 -0500"  >&lt;p&gt;I changed the severity to minor because this bug doesn&apos;t affect DLTd workflow.&lt;/p&gt;</comment>
                            <comment id="212574" author="build" created="Mon, 1 Feb 2010 17:31:02 -0500"  >&lt;p&gt;Released by fpadilha at 2010-02-01 17:16:42 (push 188):&lt;br/&gt;
  trunk      (fix)        (previous build: trunk-P137)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/348eb2408bfd&quot; target=&quot;_blank&quot;&gt;intelepacs:348eb2408bfd&lt;/a&gt;  trunk       &lt;a href=&quot;https://jira.intelerad.com/browse/IP-45292&quot; title=&quot;PCEH: updates DicomMaster SeriesLocation with wrong Series tape position&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-45292&quot;&gt;&lt;del&gt;IP-45292&lt;/del&gt;&lt;/a&gt;: Prevent UpdateMasterDB from updating DicomMaster with an old SerieTapePosition.&lt;/p&gt;</comment>
                            <comment id="212575" author="fabio.padilha" created="Mon, 1 Feb 2010 17:39:37 -0500"  >&lt;p&gt;Description of the solution: Prevent UpdateMasterDB component from updating DicomMaster database with an old SerieTapePosition information. We verify now if the SerieTapePosition is the most recent (using date_archived column) for the given SeriesInsUID before updating the SeriesLocation table.&lt;br/&gt;
Tests executed: Deployed in qa411arch1 and tested requesting a Patient Correction. After that, I confirmed that the most recent location is in SeriesLocation table.&lt;br/&gt;
Unit tests added or modified: none&lt;/p&gt;

&lt;p&gt;Fixed on trunk&lt;/p&gt;</comment>
                            <comment id="212576" author="jan" created="Tue, 4 May 2010 17:03:16 -0400"  >&lt;p&gt;This is qawaiting because it is only fixed on trunk.&lt;/p&gt;</comment>
                            <comment id="212577" author="lucie" created="Thu, 15 Jul 2010 22:27:54 -0400"  >&lt;p&gt;marking back as qawaiting because &lt;a href=&quot;https://jira.intelerad.com/browse/IP-49293&quot; title=&quot;corrections no longer set the isUpdated flag to True&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-49293&quot;&gt;&lt;del&gt;IP-49293&lt;/del&gt;&lt;/a&gt; needs to be fixed to properly test this.&lt;/p&gt;</comment>
                            <comment id="212578" author="lucie" created="Fri, 6 Aug 2010 10:36:11 -0400"  >&lt;p&gt;Reproduced with RPMs: -&lt;br/&gt;
Verified with RPMs: DLTd-4.2.1.P3-ims01&lt;br/&gt;
Verification steps: &lt;br/&gt;
sent a study to pacs and archive cache&lt;br/&gt;
re-inserted for archival&lt;br/&gt;
triggered a correction &lt;/p&gt;

&lt;p&gt;End result: &lt;br/&gt;
verified that the tape position is the latest&lt;/p&gt;

&lt;p&gt;Time spent: 15m&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12603" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Affected Clients</customfieldname>
                        <customfieldvalues>
                                        <label>ARC</label>
            <label>ENV</label>
            <label>NZCRG</label>
            <label>RIA</label>
            <label>VIHA</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[5.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23593</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13069"><![CDATA[Database-DLTInfoDB]]></customfieldvalue>
    <customfieldvalue key="13438"><![CDATA[UpdateMasterDb]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzp8qv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_11001" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>ServiceNow Case #</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>144240 155639</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10803"><![CDATA[MINOR]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-45276] PCEH: may choose wrong server to do correction if images not on owner - possible loss of images</title>
                <link>https://jira.intelerad.com/browse/IP-45276</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;RPM Version               : PatientCorrectionEventHandler-3.1.13.P3B4-3.6.1.P137&lt;br/&gt;
EW                        : &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=144230&quot; target=&quot;_blank&quot;&gt;EW144230&lt;/a&gt;&lt;br/&gt;
Minimal steps to reproduce: &lt;br/&gt;
1. make sure a series have more than one image in multiply locationes&lt;br/&gt;
2. Series owner don&apos;t have this series&lt;br/&gt;
3. one location(with AE as A) has only 1 image and the other locations( B ) has the full amount of images.&lt;br/&gt;
4. issue one patient correction for the study&lt;br/&gt;
Expected behaviour        : location A will be delete and B will be choose to do the correction.&lt;br/&gt;
What happened instead?    : location B be deleted, and A was selected as the correcting location.&lt;/p&gt;</description>
            <key id="77530">IP-45276</key>
            <summary>PCEH: may choose wrong server to do correction if images not on owner - possible loss of images</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="yxiao">Yali Xiao</assignee>
                                    <reporter username="yxiao">Yali Xiao</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Apr 2009 15:36:07 -0400</created>
                <updated>Mon, 25 Mar 2019 14:12:50 -0400</updated>
                            <resolved>Tue, 7 Sep 2010 09:51:00 -0400</resolved>
                                    <version>3-6-1</version>
                                    <fixVersion>3-8-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="212413" author="kent" created="Wed, 22 Apr 2009 09:45:18 -0400"  >&lt;p&gt;Confirmed.&lt;/p&gt;</comment>
                            <comment id="212414" author="lvaugeois" created="Fri, 8 May 2009 09:57:52 -0400"  >&lt;p&gt;I don&apos;t know of any practical workaround to this issue, so I am marking it as such.&lt;/p&gt;</comment>
                            <comment id="212415" author="lvaugeois" created="Fri, 8 May 2009 10:08:01 -0400"  >&lt;p&gt;ARC is affected: &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=143803&quot; target=&quot;_blank&quot;&gt;EW143803&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="212416" author="lvaugeois" created="Thu, 19 Nov 2009 16:32:28 -0500"  >&lt;p&gt;RIL: &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewFollowup.php?id=1074119&quot; target=&quot;_blank&quot;&gt;EWF1074119&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="212417" author="yxiao" created="Tue, 2 Mar 2010 10:29:59 -0500"  >&lt;p&gt;Except ARC, all the affected site has 381, and ARC will have a upgrade to 411 in March, 2010. Set the target branch as 3-8-1&lt;/p&gt;</comment>
                            <comment id="212418" author="yxiao" created="Tue, 2 Mar 2010 12:52:19 -0500"  >&lt;p&gt;proposed solution: Put the image count into consideration for series deletion. so the first order of deletion will still keep the same as before: non-modality server, modality server. Then in each of those three types the deletion will go with the image count, delete the location with less images first.&lt;/p&gt;

&lt;p&gt;But please note, this does not cover the edge cases. Ex: the failure of deleriesbyUID.pl may cause some of the bad locations has more images than the other locations. Then this bad location will be choose as the correction source and the other location with the right data get lost.&lt;/p&gt;</comment>
                            <comment id="212419" author="yxiao" created="Wed, 3 Mar 2010 12:14:00 -0500"  >&lt;p&gt;Description of the solution: apply the solution in comment#6&lt;br/&gt;
Tests executed: tested in vmware yali411 with the steps in opening comments&lt;br/&gt;
PCEH will delete the image from a location has less images &lt;br/&gt;
Unit tests added or modified: added the unit test for PCEH&lt;/p&gt;</comment>
                            <comment id="212420" author="build" created="Wed, 3 Mar 2010 12:14:18 -0500"  >&lt;p&gt;Released by yxiao to master at 2010-03-03 12:14:18 (push 495):&lt;br/&gt;
  PACS-3-8-1 (fix)        (previous build: PACS-3-8-1-P260)&lt;br/&gt;
  PACS-3-8-3 (fix)        (previous build: PACS-3-8-3-P54)&lt;br/&gt;
  PACS-4-1-1 (fix)        (previous build: PACS-4-1-1-P88)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-1-2-A11)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/173b9800f944&quot; target=&quot;_blank&quot;&gt;intelepacs:173b9800f944&lt;/a&gt;  PACS-3-8-1  23575 fix: Try to delete image from the location with less images&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/3f81576f92b7&quot; target=&quot;_blank&quot;&gt;intelepacs:3f81576f92b7&lt;/a&gt;  PACS-3-8-1  23575 fix: add unit test&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/123942c22dd8&quot; target=&quot;_blank&quot;&gt;intelepacs:123942c22dd8&lt;/a&gt;  PACS-3-8-3  23575 fix: delete image from the location with less images at first&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/0441b661457b&quot; target=&quot;_blank&quot;&gt;intelepacs:0441b661457b&lt;/a&gt;  PACS-3-8-1  23575 fix: add interface method implement in unit test&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/545d7468ee21&quot; target=&quot;_blank&quot;&gt;intelepacs:545d7468ee21&lt;/a&gt;  PACS-3-8-3  23575 fix: add interface method implement in unit test&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/6ea04adea57b&quot; target=&quot;_blank&quot;&gt;intelepacs:6ea04adea57b&lt;/a&gt;  PACS-4-1-1  23575 fix: delete image from the location with less images at first&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/5681009d32b4&quot; target=&quot;_blank&quot;&gt;intelepacs:5681009d32b4&lt;/a&gt;  trunk       23575 fix: delete image from the location with less images at first&lt;/p&gt;</comment>
                            <comment id="212421" author="build" created="Wed, 3 Mar 2010 14:53:53 -0500"  >&lt;p&gt;Released by yxiao to master at 2010-03-03 14:53:52 (push 502):&lt;br/&gt;
  PACS-3-8-1 (fix)        (previous build: PACS-3-8-1-P260)&lt;br/&gt;
  PACS-3-8-3 (fix)        (previous build: PACS-3-8-3-P54)&lt;br/&gt;
  PACS-4-1-1 (fix)        (previous build: PACS-4-1-1-P89)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-1-2-A11)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/1eabe6da576b&quot; target=&quot;_blank&quot;&gt;intelepacs:1eabe6da576b&lt;/a&gt;  PACS-3-8-1  23575 fix: add interface implemention in hl7gs unit test&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/58b2bfb82127&quot; target=&quot;_blank&quot;&gt;intelepacs:58b2bfb82127&lt;/a&gt;  PACS-3-8-3  23575 fix: add interface implemention in hl7gs unit test&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/d9baf59c6661&quot; target=&quot;_blank&quot;&gt;intelepacs:d9baf59c6661&lt;/a&gt;  PACS-4-1-1  23575 fix: add interface implemention in hl7gs unit test&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/3bf9303a7179&quot; target=&quot;_blank&quot;&gt;intelepacs:3bf9303a7179&lt;/a&gt;  trunk       23575 fix: add interface implemention in hl7gs unit test&lt;/p&gt;</comment>
                            <comment id="212422" author="build" created="Wed, 3 Mar 2010 16:22:50 -0500"  >&lt;p&gt;Released by gward to stable at 2010-03-03 16:22:50 (push 510):&lt;br/&gt;
  PACS-3-8-1 (fix)        (previous build: PACS-3-8-1-P260)&lt;br/&gt;
  PACS-3-8-3 (fix)        (previous build: PACS-3-8-3-P54)&lt;br/&gt;
  PACS-4-1-1 (fix)        (previous build: PACS-4-1-1-P89)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-1-2-A11)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/173b9800f944&quot; target=&quot;_blank&quot;&gt;intelepacs:173b9800f944&lt;/a&gt;  PACS-3-8-1  23575 fix: Try to delete image from the location with less images&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/3f81576f92b7&quot; target=&quot;_blank&quot;&gt;intelepacs:3f81576f92b7&lt;/a&gt;  PACS-3-8-1  23575 fix: add unit test&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/123942c22dd8&quot; target=&quot;_blank&quot;&gt;intelepacs:123942c22dd8&lt;/a&gt;  PACS-3-8-3  23575 fix: delete image from the location with less images at first&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/0441b661457b&quot; target=&quot;_blank&quot;&gt;intelepacs:0441b661457b&lt;/a&gt;  PACS-3-8-1  23575 fix: add interface method implement in unit test&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/545d7468ee21&quot; target=&quot;_blank&quot;&gt;intelepacs:545d7468ee21&lt;/a&gt;  PACS-3-8-3  23575 fix: add interface method implement in unit test&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/6ea04adea57b&quot; target=&quot;_blank&quot;&gt;intelepacs:6ea04adea57b&lt;/a&gt;  PACS-4-1-1  23575 fix: delete image from the location with less images at first&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/5681009d32b4&quot; target=&quot;_blank&quot;&gt;intelepacs:5681009d32b4&lt;/a&gt;  trunk       23575 fix: delete image from the location with less images at first&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/1eabe6da576b&quot; target=&quot;_blank&quot;&gt;intelepacs:1eabe6da576b&lt;/a&gt;  PACS-3-8-1  23575 fix: add interface implemention in hl7gs unit test&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/58b2bfb82127&quot; target=&quot;_blank&quot;&gt;intelepacs:58b2bfb82127&lt;/a&gt;  PACS-3-8-3  23575 fix: add interface implemention in hl7gs unit test&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/d9baf59c6661&quot; target=&quot;_blank&quot;&gt;intelepacs:d9baf59c6661&lt;/a&gt;  PACS-4-1-1  23575 fix: add interface implemention in hl7gs unit test&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/3bf9303a7179&quot; target=&quot;_blank&quot;&gt;intelepacs:3bf9303a7179&lt;/a&gt;  trunk       23575 fix: add interface implemention in hl7gs unit test&lt;/p&gt;</comment>
                            <comment id="212423" author="mario.doria" created="Thu, 4 Mar 2010 11:09:29 -0500"  >&lt;p&gt;Reproduced with RPMs: &lt;br/&gt;
Verified with RPMs: &lt;br/&gt;
Verification steps: &lt;/p&gt;

&lt;p&gt;Given the following situation:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;QA411MDB1 and QA411ARCH1CACHE having a server type of MOD_SERV&lt;/li&gt;
	&lt;li&gt;&lt;p&gt;StuInsUID: 1.2.276.0.7230010.3.1.2.1560975362.32029.1267718521.1&lt;br/&gt;
StuDat: 20100304  StuTim: 11:02:02 ( 39722 ssm )&lt;br/&gt;
PatNam: &lt;span class=&quot;error&quot;&gt;&amp;#91;BZTST32374^BZTST&amp;#93;&lt;/span&gt;  PatID: &lt;span class=&quot;error&quot;&gt;&amp;#91;BZTST32374&amp;#93;&lt;/span&gt;  AccNum: &lt;span class=&quot;error&quot;&gt;&amp;#91;BZTST32374&amp;#93;&lt;/span&gt;&lt;br/&gt;
RPId: &lt;span class=&quot;error&quot;&gt;&amp;#91;BZTST32374&amp;#93;&lt;/span&gt;  Owner: &lt;span class=&quot;error&quot;&gt;&amp;#91;ANOTHERQA&amp;#93;&lt;/span&gt;  Modality: &lt;span class=&quot;error&quot;&gt;&amp;#91;CT&amp;#93;&lt;/span&gt;                             SerInsUID: 1.2.276.0.7230010.3.1.3.1560975362.32032.1267718521.1                                                                                                                 &lt;br/&gt;
Owner: ANOTHERQA  Mod: CT  SerNum: 2  NumSerRelIma: 78  isUpdated: F&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;SeriesDate: 20100304  SeriesTime: 11:02:02  Source AE: TESTAE                                                                                                                    &lt;br/&gt;
     Location: QA411ARCH1CACHE  Num: 78&lt;br/&gt;
     Location: QA411MDB1  Num: 69&lt;/p&gt;


&lt;p&gt;I reproduced the bug and then with the new PCEH version verified that the location with less images was chosen to be deleted:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-03-04 11:07:19.697 PCEH qa411mdb1.dyn.intelerad (DEBUG)&amp;#93;&lt;/span&gt; Considering location AE Title: QA411MDB1 for deletion&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-03-04 11:07:19.697 PCEH qa411mdb1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Scheduling deletion for seriesInstanceUid 1.2.276.0.7230010.3.1.3.1560975362.32032.1267718521.1 on QA411MDB1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-03-04 11:07:19.719 PCEH qa411mdb1.dyn.intelerad (TRACE)&amp;#93;&lt;/span&gt; Attempting to signal SCEH AE &lt;span class=&quot;error&quot;&gt;&amp;#91;QA411MDB1&amp;#93;&lt;/span&gt; using hostname &lt;span class=&quot;error&quot;&gt;&amp;#91;qa411mdb1.dyn.intelerad&amp;#93;&lt;/span&gt; and port &lt;span class=&quot;error&quot;&gt;&amp;#91;9001&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;End result: Marking VERIFIED&lt;br/&gt;
Time spent: 1h &lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;At the end, this was the result:&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   SerInsUID: 1.2.276.0.7230010.3.1.3.1560975362.32032.1267718521.1                                                                                                                 &lt;br/&gt;
   Owner: QA411MDB1  Mod: CT  SerNum: 2  NumSerRelIma: 78  isUpdated: T&lt;br/&gt;
   InsertDate: 20100304  InsertTime: 11:02:06 ( 39726 ssm )  SPSId: BZTST32374                                                                                                                                                                                                &lt;br/&gt;
     Location: QA411ARCH1CACHE  Num: 78&lt;br/&gt;
     Location: QA411MDB1  Num: 78&lt;/p&gt;</comment>
                            <comment id="212424" author="mario.doria" created="Fri, 19 Mar 2010 12:06:37 -0400"  >&lt;p&gt;Included in the PACS-3-8-1-R13 release.&lt;/p&gt;

&lt;p&gt;Please visit &lt;a href=&quot;https://groupware.intelerad.com/imswiki/QaHome/ReleasePlanning381&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://groupware.intelerad.com/imswiki/QaHome/ReleasePlanning381&lt;/a&gt; for more information about the release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12603" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Affected Clients</customfieldname>
                        <customfieldvalues>
                                        <label>ARC</label>
            <label>ERAD</label>
            <label>NZCRG</label>
            <label>RIA</label>
            <label>RIL</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[5.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23575</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13314"><![CDATA[PatientCorrectionEventHandler]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzp8nb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_11001" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>ServiceNow Case #</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>144230 143803 163722</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10801"><![CDATA[CRITICAL]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-43660] SCEH: JDT unable to handle .dcm files without part10 header, plus SCEH fails to log file before opening it</title>
                <link>https://jira.intelerad.com/browse/IP-43660</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;RPM Version               : SeriesCorrectionEventHandler-5.1.1.P2B5-3.5.1.P91&lt;br/&gt;
EW                        : &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=129214&quot; target=&quot;_blank&quot;&gt;EW129214&lt;/a&gt;&lt;br/&gt;
Minimal steps to reproduce: Try to jdtDcmDump the attached .dcm file&lt;br/&gt;
Expected behaviour        : Should be able to read it&lt;br/&gt;
What happened instead?    : Can only read it after running &apos;dcmconv +te&apos; on it, otherwise we get a null pointer exception:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;admin@envmst2&amp;#93;&lt;/span&gt; &lt;/p&gt;
{/tmp}
&lt;p&gt; jdtDcmDump  1.2.840.113619.2.115.202784548.1201648189.0.1040.4.&lt;br/&gt;
Caught exception while trying to read file &lt;span class=&quot;error&quot;&gt;&amp;#91;1.2.840.113619.2.115.202784548.1201648189.0.1040.4.&amp;#93;&lt;/span&gt;. Exception: java.io.FileNotFoundException: 1.2.840.113619.2.115.202784548.1201648189.0.1040.4. (No such file or directory)&lt;br/&gt;
java.io.FileNotFoundException: 1.2.840.113619.2.115.202784548.1201648189.0.1040.4. (No such file or directory)&lt;br/&gt;
	at java.io.FileInputStream.open(Native Method)&lt;br/&gt;
	at java.io.FileInputStream.&amp;lt;init&amp;gt;(FileInputStream.java:106)&lt;br/&gt;
	at java.io.FileInputStream.&amp;lt;init&amp;gt;(FileInputStream.java:66)&lt;br/&gt;
	at com.intelerad.lib.dicomtools.Streams.getJdtInputStream(Streams.java:57)&lt;br/&gt;
	at com.intelerad.lib.dicomtools.JdtDcmDump.main(JdtDcmDump.java:33)&lt;/p&gt;</description>
            <key id="75914">IP-43660</key>
            <summary>SCEH: JDT unable to handle .dcm files without part10 header, plus SCEH fails to log file before opening it</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="kpasyar">Kia Pasyar</assignee>
                                    <reporter username="ncabatoff">Nick Cabatoff</reporter>
                        <labels>
                            <label>support</label>
                    </labels>
                <created>Fri, 10 Oct 2008 16:17:04 -0400</created>
                <updated>Mon, 25 Mar 2019 14:13:30 -0400</updated>
                            <resolved>Wed, 9 Jun 2010 00:49:00 -0400</resolved>
                                    <version>3-7-1</version>
                                    <fixVersion>3-7-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="199102" author="nick.cabatoff" created="Fri, 10 Oct 2008 16:17:04 -0400"  >&lt;p&gt;Attachment 1.2.840.113619.2.115.202784548.1201648189.0.1040.4.dcm.gz has been added with description: File that makes SCEH crash with a Null pointer exception&lt;/p&gt;</comment>
                            <comment id="199094" author="ldilalla" created="Wed, 22 Apr 2009 11:12:34 -0400"  >&lt;p&gt;Confirmed.&lt;/p&gt;</comment>
                            <comment id="199095" author="graham" created="Fri, 26 Feb 2010 11:44:36 -0500"  >&lt;p&gt;Let&apos;s fix this only for the log part since we think the part 10 issue might not happen anymore.&lt;/p&gt;

&lt;p&gt;Before opening a file in SCEH clearly state which file is being opened.&lt;/p&gt;</comment>
                            <comment id="199096" author="build" created="Thu, 13 May 2010 17:08:14 -0400"  >&lt;p&gt;Released by kpasyar to master at 2010-05-13 17:08:13 (push 1387):&lt;br/&gt;
  PACS-3-7-1 (fix)        (previous build: PACS-3-7-1-P228)&lt;br/&gt;
  PACS-3-8-1 (fix)        (previous build: PACS-3-8-1-P331)&lt;br/&gt;
  PACS-3-8-3 (fix)        (previous build: PACS-3-8-3-P56)&lt;br/&gt;
  PACS-4-1-1 (fix)        (previous build: PACS-4-1-1-P139)&lt;br/&gt;
  PACS-4-1-2 (fix)        (previous build: PACS-4-1-2-P47)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-1-3-A18)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/d964d5225d05&quot; target=&quot;_blank&quot;&gt;intelepacs:d964d5225d05&lt;/a&gt;  PACS-3-7-1  21795 fix: SCEH: JDT unable to handle .dcm files without part10 header&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/95a3f19385ce&quot; target=&quot;_blank&quot;&gt;intelepacs:95a3f19385ce&lt;/a&gt;  PACS-3-8-1  21795 fix: SCEH: JDT unable to handle .dcm files without part10 header&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/96c25cca8600&quot; target=&quot;_blank&quot;&gt;intelepacs:96c25cca8600&lt;/a&gt;  PACS-3-8-3  21795 fix: SCEH: JDT unable to handle .dcm files without part10 header&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/f11a651d3e2c&quot; target=&quot;_blank&quot;&gt;intelepacs:f11a651d3e2c&lt;/a&gt;  PACS-4-1-1  21795 fix: SCEH: JDT unable to handle .dcm files without part10 header&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/bbdd41c090e3&quot; target=&quot;_blank&quot;&gt;intelepacs:bbdd41c090e3&lt;/a&gt;  PACS-4-1-2  21795 fix: SCEH: JDT unable to handle .dcm files without part10 header&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/609fef10bee2&quot; target=&quot;_blank&quot;&gt;intelepacs:609fef10bee2&lt;/a&gt;  trunk       21795 fix: SCEH: JDT unable to handle .dcm files without part10 header&lt;/p&gt;</comment>
                            <comment id="199097" author="kpasyar" created="Thu, 13 May 2010 17:20:00 -0400"  >&lt;p&gt;Description of the solution:  &lt;/p&gt;

&lt;p&gt;As per Graham&apos;s advice we didn&apos;t fix the missing part10 header issue as it is due to a malformed DICOM file format that we don&apos;t anticipate happening anymore.&lt;/p&gt;

&lt;p&gt;We added code to log the file name with an error message if and only if an exceptional condition occurs when reading the file.&lt;/p&gt;

&lt;p&gt;Tests executed: &lt;/p&gt;

&lt;p&gt;I could not reproduce this issue with the original dcm files. Instead I tested by hacking my code to produce an exceptional condition on a local 381 VM.&lt;/p&gt;

&lt;p&gt;Unit tests added or modified: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;none&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="199098" author="mario.doria" created="Tue, 25 May 2010 13:46:13 -0400"  >&lt;p&gt;Reproduced with RPMs: SeriesCorrectionEventHandler-5.1.8.P1B2-4.1.1.P140&lt;br/&gt;
Verified with RPMs: SeriesCorrectionEventHandler-5.1.8.P1B2-4.1.1.P146&lt;br/&gt;
Verification steps: &lt;/p&gt;

&lt;p&gt;I reproduced the issue by replacing a DCM file for a study already in the PACS. I requested a patient name change and verified in the log that SCEH could continue working even after stumbling on to a corrupt DCM file.&lt;/p&gt;

&lt;p&gt;The stack trace looks like the following:&lt;/p&gt;

&lt;p&gt;ERROR: Failed to load DICOM file /usr/local/PACS/images/20100519/1.20.123.55197674.1.20100519139.545551764427.90.1/1.20.123.55197674.1.20100519139.545551764427.90.1.1127517253/1.2.276.0.7230010.3. .4.1560975362.28856.1274284692.1.dcm&lt;br/&gt;
*************************&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-05-25 13:43:54.683 SCEH qa411mdb1.dyn.intelerad&amp;#93;&lt;/span&gt; Stack trace:&lt;br/&gt;
com.intelerad.lib.dicomtools.DicomToolsException: Failed to load DICOM object for file /usr/local/PACS/images/20100519/1.20.123.55197674.1.20100519139.545551764427.90.1/1.20.123.55197674.1.2010051 139.545551764427.90.1.1127517253/1.2.276.0.7230010.3.1.4.1560975362.28856.1274284692.1.dcm due to a Runtime exception&lt;br/&gt;
        at com.intelerad.lib.dicomtools.DicomObjectIo.readDicomObject(DicomObjectIo.java:686)&lt;br/&gt;
        at com.intelerad.lib.dicomtools.DicomObjectIo.load(DicomObjectIo.java:228)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.handleLegacyData(SeriesCorrectionEventHandler.java:2119)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.fixDicomFiles(SeriesCorrectionEventHandler.java:385)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.handleDicomImageFileChanges(SeriesCorrectionEventHandler.java:1373)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.fixStudyInstanceUid(SeriesCorrectionEventHandler.java:1567)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.handleDbRecord(SeriesCorrectionEventHandler.java:1825)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.correctForMdbHost(SeriesCorrectionEventHandler.java:1903)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.correctForOrganization(SeriesCorrectionEventHandler.java:1938)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.correctionsLoop(SeriesCorrectionEventHandler.java:1989)&lt;br/&gt;
        at com.intelerad.sceh.SeriesCorrectionEventHandler.main(SeriesCorrectionEventHandler.java:2075)&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
        at com.archimed.dicom.DicomReader.readDICOMStream(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.DicomReader.read(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.DicomReader.read(Unknown Source)&lt;br/&gt;
        at com.archimed.dicom.DicomReader.read(Unknown Source)&lt;br/&gt;
        at com.intelerad.lib.dicomtools.DicomObjectIo.readDicomObject(DicomObjectIo.java:674)&lt;br/&gt;
        ... 10 more&lt;/p&gt;

&lt;p&gt;End result: Marking VERIFIED&lt;br/&gt;
Time spent: 1h &lt;/p&gt;</comment>
                            <comment id="199099" author="mario.doria" created="Tue, 25 May 2010 18:10:01 -0400"  >&lt;p&gt;Included in PACS-4-1-1-R8.&lt;/p&gt;</comment>
                            <comment id="199100" author="mario.doria" created="Wed, 26 May 2010 14:10:59 -0400"  >&lt;p&gt;Included in PACS-3-7-1-R18.&lt;/p&gt;</comment>
                            <comment id="199101" author="mario.doria" created="Wed, 9 Jun 2010 12:49:35 -0400"  >&lt;p&gt;Included in PACS-3-8-1-R19.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="21822" name="1.2.840.113619.2.115.202784548.1201648189.0.1040.4.dcm.gz" size="1063" author="ncabatoff" created="Fri, 10 Oct 2008 16:17:04 -0400"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12603" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Affected Clients</customfieldname>
                        <customfieldvalues>
                                        <label>ENV</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>21795</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13386"><![CDATA[SeriesCorrectionEventHandler]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzoyof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10802"><![CDATA[MAJOR]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-42293] PatientCorrection: Deletes online locations except for Owner when series is in archive queue (failed corrections lead to all on-line versions being erased)</title>
                <link>https://jira.intelerad.com/browse/IP-42293</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;RPM Version               : &lt;br/&gt;
EW                        : EW&lt;br/&gt;
Minimal steps to reproduce: On a multi-server PACS, have a series in multiple locations and in the archive queue.  PCEH will have all online locations (except the owner) delete their copy of the series.  But since the series is in the archive queue, that online copy can&apos;t be deleted and the correction fails.&lt;/p&gt;

&lt;p&gt;Expected behaviour        : The archive queues are checked first and no deletions happen if the series exist in the queue.&lt;br/&gt;
What happened instead?    : The archive queue check is done during the deletion phase&lt;/p&gt;


&lt;p&gt;This is a report from Roger about this issue from AIS.  I do not have the RPM version at this time nor do I have a related EW.&lt;/p&gt;</description>
            <key id="74547">IP-42293</key>
            <summary>PatientCorrection: Deletes online locations except for Owner when series is in archive queue (failed corrections lead to all on-line versions being erased)</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="lorenzo">Lorenzo Moretti</assignee>
                                    <reporter username="kent">Kent Tse</reporter>
                        <labels>
                            <label>confirmed</label>
                    </labels>
                <created>Wed, 30 Apr 2008 21:30:05 -0400</created>
                <updated>Fri, 26 Apr 2019 14:04:36 -0400</updated>
                            <resolved>Mon, 17 Sep 2012 13:06:00 -0400</resolved>
                                    <version>3-4-1</version>
                                    <fixVersion>Next Branch (Trunk)</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="189110" author="ldilalla" created="Tue, 6 May 2008 14:25:12 -0400"  >&lt;p&gt;Risk analysis of defect: No risk to patient safety&lt;br/&gt;
Potential impact: failed corrections lead to all on-line versions being erased&lt;br/&gt;
Probability of occurrence: medium&lt;/p&gt;</comment>
                            <comment id="189111" author="lorenzo" created="Wed, 7 May 2008 09:40:21 -0400"  >&lt;p&gt;Root cause of the problem: Currently an ordered list of series locations with UPD_AE_STATUS &amp;lt; 5 is extracted for the study to be corrected. The list places owner first, then all MOD_SERV AEs in alphabetical order, and then the rest. Skipping the first location in the list, deletion events are posted and all the SCEH will pick those events at their leisure. There is no control on which SCEH will perform the deletion first.&lt;br/&gt;
Proposed solution: &lt;br/&gt;
 1) define a way to characterize the AE titles that have archive queues&lt;br/&gt;
 2) post a new deletion event for archive queues only and wait for those to be completed&lt;br/&gt;
 3) post the current deletion event for all other AE titles and wait for those to be completed&lt;br/&gt;
 4) continue correction as it is done now.&lt;br/&gt;
Difficulty of solution: easy.&lt;br/&gt;
Risk associated with the solution: no risk to patient safety.&lt;/p&gt;</comment>
                            <comment id="189112" author="ldilalla" created="Tue, 21 Apr 2009 20:13:32 -0400"  >&lt;p&gt;Confirmed.&lt;/p&gt;</comment>
                            <comment id="189113" author="build" created="Mon, 21 Jun 2010 17:42:08 -0400"  >&lt;p&gt;Released by lorenzo to master at 2010-06-21 17:42:07 (push 1867):&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-1-3-A41)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/8ce6248410af&quot; target=&quot;_blank&quot;&gt;intelepacs:8ce6248410af&lt;/a&gt;  trunk       20288 fix: Split the deletion step in 2 parts:&lt;/p&gt;</comment>
                            <comment id="189114" author="lorenzo" created="Mon, 21 Jun 2010 17:55:03 -0400"  >&lt;p&gt;Description of the solution: the deletion now occurs first on AEs that are archive caches (NL_ARCH or MOD_SERV with priority &amp;lt;= 3, and node in the Offline_Archive_&amp;lt;n&amp;gt; configuration sections). If the first deletion pass succeeds then all other online locations (except 1) are considered for deletion.&lt;br/&gt;
Tests executed:&lt;br/&gt;
1) verified that a correction for a study with 2 series on lorenzo411 (owner) worked properly&lt;br/&gt;
2) verified that a correction for a study with 2 series on lorenzo411 (owner), lorenzo381, and lorenzo372 deleted the series from lorenzo381 and lorenzo372 and corrected the series on lorenzo411.&lt;br/&gt;
3) verified that a correction for a study with 2 series on lorenzo411 (owner), lorenzo381, and lorenzo372 (configured with type NL_ARCH and priority 3) waited for the deletion on lorenzo372 before scheduling the deletion on lorenzo381. The wait was implemented by renaming script delseriesbyUID.pl.&lt;br/&gt;
Unit tests added or modified: none.&lt;/p&gt;

&lt;p&gt;Fixed in post 4-1-3.&lt;/p&gt;</comment>
                            <comment id="189115" author="lucie" created="Thu, 15 Jul 2010 22:20:55 -0400"  >&lt;p&gt;Reproduced with RPMs: -&lt;br/&gt;
Verified with RPMs: PatientCorrectionEventHandler-4.1.3.A57-ims01&lt;br/&gt;
Verification steps: &lt;br/&gt;
Triggered several corrections with and without archive cache location. &lt;br/&gt;
Brought down SCEH on archive cache or renamed delseriesByUID script&lt;/p&gt;

&lt;p&gt;End result: &lt;br/&gt;
PCEH does not delete from other hosts if the deletions have failed on the archive cache.&lt;/p&gt;

&lt;p&gt;Time spent:  30m&lt;/p&gt;</comment>
                            <comment id="189116" author="iplokar" created="Wed, 12 Jan 2011 15:27:58 -0500"  >&lt;p&gt;Documented in the IntelePACS Administrator Guide (part#: IPEN421AG-O).&lt;/p&gt;</comment>
                            <comment id="189117" author="agallant" created="Mon, 15 Aug 2011 09:17:23 -0400"  >&lt;p&gt;Adding HMI &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=223128&quot; target=&quot;_blank&quot;&gt;EW223128&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12603" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Affected Clients</customfieldname>
                        <customfieldvalues>
                                        <label>AIS</label>
            <label>HMI</label>
            <label>RDS</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[3.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12110" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Documentation</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12035"><![CDATA[Approved]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20288</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13314"><![CDATA[PatientCorrectionEventHandler]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzoq8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_11001" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>ServiceNow Case #</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>EW223128, 268026</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10802"><![CDATA[MAJOR]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>


<item>
            <title>[IP-37235] SCEH should also update ValidationDB:StudyLevel if there is a need for it (images burned with the &quot;wrong&quot; accession number)</title>
                <link>https://jira.intelerad.com/browse/IP-37235</link>
                <project id="11701" key="IP">IntelePACS</project>
                    <description>&lt;p&gt;RPM Version: SeriesCorrectionEventHandler-4.1.12.P1B18-3.2.1.P361&lt;br/&gt;
Description: this is weird. See &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=57161&quot; target=&quot;_blank&quot;&gt;EW57161&lt;/a&gt; for more details.&lt;/p&gt;

&lt;p&gt;The problem has to do with the user trying to fix a study instance UID &amp;lt;-&amp;gt;&lt;br/&gt;
AccessionNumber relationship. If a user modifies the accession number for a&lt;br/&gt;
given study ValidationDB:StudyLevel is not modified accordingly so new images&lt;br/&gt;
coming into the system will have the wrong accession number.&lt;/p&gt;

&lt;p&gt;Steps to reproduce bug:&lt;/p&gt;

&lt;p&gt;1. Send images that will automatically validate to a server&lt;br/&gt;
2. Use PCT via IB to modify the accession number&lt;br/&gt;
3. Send another series for the same study to same server&lt;br/&gt;
4. The new images will be burned with the &quot;wrong&quot; accession number&lt;/p&gt;

&lt;p&gt;SCEH should modify ValidationDB:StudyLevel in the same way that modifies DicomImage.&lt;/p&gt;</description>
            <key id="69489">IP-37235</key>
            <summary>SCEH should also update ValidationDB:StudyLevel if there is a need for it (images burned with the &quot;wrong&quot; accession number)</summary>
                <type id="1" iconUrl="https://jira.intelerad.com/secure/viewavatar?size=xsmall&amp;avatarId=13903&amp;avatarType=issuetype">Bug</type>
                                                <status id="6" iconUrl="https://jira.intelerad.com/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Done</resolution>
                                        <assignee username="fpadilha">Fabio Padilha</assignee>
                                    <reporter username="anibal">Anibal Jodorcovsky</reporter>
                        <labels>
                            <label>qa_reopened</label>
                    </labels>
                <created>Thu, 27 Jul 2006 19:26:03 -0400</created>
                <updated>Mon, 25 Mar 2019 14:15:55 -0400</updated>
                            <resolved>Fri, 12 Feb 2016 13:28:00 -0500</resolved>
                                                    <fixVersion>3-8-1</fixVersion>
                                    <component>Image Corrections/Deletions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="155206" author="lorenzo" created="Mon, 31 Jul 2006 16:42:55 -0400"  >&lt;p&gt;The original fix for &lt;a href=&quot;https://jira.intelerad.com/browse/IP-29060&quot; title=&quot;SCEH: ValidationServlet can&amp;#39;t fix DICOM header when bypassed by RIS driven correction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-29060&quot;&gt;&lt;del&gt;IP-29060&lt;/del&gt;&lt;/a&gt; included all the correction request fields. This&lt;br/&gt;
lead to &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=26699&quot; target=&quot;_blank&quot;&gt;EW26699&lt;/a&gt; handled by &lt;a href=&quot;https://jira.intelerad.com/browse/IP-29060&quot; title=&quot;SCEH: ValidationServlet can&amp;#39;t fix DICOM header when bypassed by RIS driven correction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-29060&quot;&gt;&lt;del&gt;IP-29060&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://jira.intelerad.com/browse/IP-33145&quot; title=&quot;PCEH: studies in validation should not be modified upon a RIS update message&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-33145&quot;&gt;&lt;del&gt;IP-33145&lt;/del&gt;&lt;/a&gt;. Specifically in &lt;a href=&quot;https://jira.intelerad.com/browse/IP-33145&quot; title=&quot;PCEH: studies in validation should not be modified upon a RIS update message&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-33145&quot;&gt;&lt;del&gt;IP-33145&lt;/del&gt;&lt;/a&gt; comment&lt;br/&gt;
#6 it was decided to keep only the patient level fields modified by the&lt;br/&gt;
correction request, and the accession number change was removed at that point.&lt;br/&gt;
Do we want to add all the correction request fields back?&lt;/p&gt;</comment>
                            <comment id="155207" author="anibal" created="Wed, 2 Aug 2006 23:29:07 -0400"  >&lt;p&gt;We need a meeting for this. I suggest that someone in imagemgmt schedules a&lt;br/&gt;
meeting to discuss this.&lt;/p&gt;</comment>
                            <comment id="155208" author="kent" created="Mon, 24 Mar 2008 16:11:12 -0400"  >&lt;p&gt;Make sure you consider &lt;a href=&quot;https://jira.intelerad.com/browse/IP-39273&quot; title=&quot;PatientCorrection: Does not delete ValdiationDB entry when StuInsUID is changed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-39273&quot;&gt;&lt;del&gt;IP-39273&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://jira.intelerad.com/browse/IP-41811&quot; title=&quot;SCEH: ValidationDB StudyLevel is not updated when a study is corrected.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;IP-41811&quot;&gt;&lt;del&gt;IP-41811&lt;/del&gt;&lt;/a&gt; when implemented this fix.&lt;/p&gt;</comment>
                            <comment id="155209" author="aaron" created="Mon, 4 Aug 2008 09:20:16 -0400"  >&lt;p&gt;related slip: &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=115995&quot; target=&quot;_blank&quot;&gt;EW115995&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Closing for now as the bug is not progressing, but referencing here to have a record of it.&lt;/p&gt;</comment>
                            <comment id="155210" author="ldilalla" created="Mon, 20 Apr 2009 16:32:47 -0400"  >&lt;p&gt;Confirmed.&lt;/p&gt;</comment>
                            <comment id="155211" author="ssnell" created="Thu, 14 May 2009 13:55:27 -0400"  >&lt;p&gt;This is also affecting CAMIS (Series Editor will not work in these instances.  See &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=146080&quot; target=&quot;_blank&quot;&gt;EW146080&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="155212" author="exinos" created="Mon, 28 Sep 2009 15:30:08 -0400"  >&lt;p&gt;this is at RDS as well see &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=158558&quot; target=&quot;_blank&quot;&gt;EW158558&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="155213" author="jan" created="Mon, 14 Dec 2009 15:36:26 -0500"  >&lt;p&gt;This affects PRS : see &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=165064&quot; target=&quot;_blank&quot;&gt;EW165064&lt;/a&gt; .&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Series come in from an AE with RIS promotion enabled.&lt;/li&gt;
	&lt;li&gt;patient merge comes in through the RIS&lt;/li&gt;
	&lt;li&gt;Correction does &lt;em&gt;not&lt;/em&gt; update PatID in ValidationDB&lt;/li&gt;
	&lt;li&gt;SLM tries to issue a promotion with the wrong patient id -&amp;gt; order binding exception.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="155214" author="anibal" created="Wed, 20 Jan 2010 21:25:04 -0500"  >&lt;p&gt;Also happening at NCH (&lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=168312&quot; target=&quot;_blank&quot;&gt;EW168312&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="155215" author="bross" created="Mon, 1 Feb 2010 12:39:33 -0500"  >&lt;p&gt;This also affected IWI - see &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=168036&quot; target=&quot;_blank&quot;&gt;EW168036&lt;/a&gt;...&lt;/p&gt;</comment>
                            <comment id="155216" author="lorenzo" created="Mon, 22 Mar 2010 17:40:13 -0400"  >&lt;p&gt;Anibal had this to say about the issue:&lt;/p&gt;

&lt;p&gt;=========&lt;br/&gt;
Oh. I think it was only based on the fact that we didn&apos;t really think it made sense since you&apos;re validating against an order. So what would be the point to change the acc# by the same acc#. Of course, this was way before AOG and all these other things we&apos;re doing so I donrt think there&apos;s a valid reason not to change it.&lt;br/&gt;
--anibal &lt;br/&gt;
=========&lt;/p&gt;

&lt;p&gt;We are all in agreement that this issue should be fix, basically allowing corrections to modify the fields in ValidationDB. However special consideration must be given to corrections issued by both SLM and VS since those applications also change ValidationDB before posting a correction.&lt;/p&gt;</comment>
                            <comment id="155217" author="build" created="Fri, 16 Apr 2010 10:07:54 -0400"  >&lt;p&gt;Released by fpadilha to master at 2010-04-16 10:07:53 (push 1049):&lt;br/&gt;
  PACS-3-8-1 (ongoing)    (previous build: PACS-3-8-1-P305)&lt;br/&gt;
  PACS-3-8-3 (ongoing)    (previous build: PACS-3-8-3-P56)&lt;br/&gt;
  PACS-4-1-1 (ongoing)    (previous build: PACS-4-1-1-P108)&lt;br/&gt;
  PACS-4-1-2 (ongoing)    (previous build: PACS-4-1-2-P32)&lt;br/&gt;
  trunk      (ongoing)    (previous build: PACS-4-1-3-A6)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/3ab24db8d956&quot; target=&quot;_blank&quot;&gt;intelepacs:3ab24db8d956&lt;/a&gt;  PACS-3-8-1  14947 ongoing: ValidationDB.StudyLevel is now updated in SCEH&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/c88c42da704b&quot; target=&quot;_blank&quot;&gt;intelepacs:c88c42da704b&lt;/a&gt;  PACS-3-8-1  14947 ongoing: I need fix some code that I got after code review&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/7e02f7cfbd0f&quot; target=&quot;_blank&quot;&gt;intelepacs:7e02f7cfbd0f&lt;/a&gt;  PACS-3-8-3  14947 ongoing: ValidationDB.StudyLevel is now updated in SCEH&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/03bc61408179&quot; target=&quot;_blank&quot;&gt;intelepacs:03bc61408179&lt;/a&gt;  PACS-4-1-1  14947 ongoing: ValidationDB.StudyLevel is now updated in SCEH&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/9a2d14ce3286&quot; target=&quot;_blank&quot;&gt;intelepacs:9a2d14ce3286&lt;/a&gt;  PACS-4-1-2  14947 ongoing: ValidationDB.StudyLevel is now updated in SCEH&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/a2d4365d970f&quot; target=&quot;_blank&quot;&gt;intelepacs:a2d4365d970f&lt;/a&gt;  trunk       14947 ongoing: ValidationDB.StudyLevel is now updated in SCEH&lt;/p&gt;</comment>
                            <comment id="155218" author="build" created="Fri, 16 Apr 2010 11:44:15 -0400"  >&lt;p&gt;Released by fpadilha to master at 2010-04-16 11:44:14 (push 1054):&lt;br/&gt;
  PACS-3-8-1 (ongoing)    (previous build: PACS-3-8-1-P305)&lt;br/&gt;
  PACS-3-8-3 (ongoing)    (previous build: PACS-3-8-3-P56)&lt;br/&gt;
  PACS-4-1-1 (ongoing)    (previous build: PACS-4-1-1-P108)&lt;br/&gt;
  PACS-4-1-2 (ongoing)    (previous build: PACS-4-1-2-P32)&lt;br/&gt;
  trunk      (ongoing)    (previous build: PACS-4-1-3-A6)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/4ed468ecdd63&quot; target=&quot;_blank&quot;&gt;intelepacs:4ed468ecdd63&lt;/a&gt;  PACS-3-8-1  14947 ongoing: Fixes after code review. I still need to fix FileOperationsAdapter only in trunk&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/463901c8b946&quot; target=&quot;_blank&quot;&gt;intelepacs:463901c8b946&lt;/a&gt;  PACS-3-8-3  14947 ongoing: Fixes after code review. I still need to fix FileOperationsAdapter only in trunk&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/2c79d17b9fb0&quot; target=&quot;_blank&quot;&gt;intelepacs:2c79d17b9fb0&lt;/a&gt;  PACS-4-1-1  14947 ongoing: Fixes after code review. I still need to fix FileOperationsAdapter only in trunk&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/9ed28bb17970&quot; target=&quot;_blank&quot;&gt;intelepacs:9ed28bb17970&lt;/a&gt;  PACS-4-1-2  14947 ongoing: Fixes after code review. I still need to fix FileOperationsAdapter only in trunk&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/4e02f33ce4a7&quot; target=&quot;_blank&quot;&gt;intelepacs:4e02f33ce4a7&lt;/a&gt;  trunk       14947 ongoing: Fixes after code review. I still need to fix FileOperationsAdapter only in trunk&lt;/p&gt;</comment>
                            <comment id="155219" author="fabio.padilha" created="Thu, 22 Apr 2010 10:39:27 -0400"  >&lt;p&gt;Description of the solution: SCEH checks if SeriesLevel information has changed and then it updates ValidationDB. SeriesId is not updated since we don&apos;t have this column in database.&lt;/p&gt;

&lt;p&gt;Tests executed: Using InteleBrowser, I requested a PatientCorrection and then I checked the new values in ValidationDB. After that, I sent new images from the same series and those images have been updated with the new values.&lt;/p&gt;

&lt;p&gt;Unit tests added or modified: &lt;br/&gt;
Added new unit test called &quot;testHandleValidationChanges&quot; which I issue a patient correction and then I check if we call ValidationDBInterface.updateStudyLevel with a map containing all values needed.&lt;/p&gt;


&lt;p&gt;I will create another BZ to refactor the class FileOperationsAdapter in order to move it to FileUtilities.&lt;/p&gt;</comment>
                            <comment id="155220" author="jan" created="Fri, 23 Apr 2010 17:04:45 -0400"  >&lt;p&gt;Reproduced with RPMs: -&lt;br/&gt;
Verified with RPMs: SeriesCorrectionEventHandler-5.1.8.P1B2-4.1.1.P117&lt;br/&gt;
Verification steps: &lt;/p&gt;

&lt;p&gt;send an image that validates, send a patient merge, confirm that the patient id is changed (part 1 of verification )&lt;/p&gt;

&lt;p&gt;End result: Failed. The PatId is not updated.&lt;br/&gt;
Time spent: 1 hour.&lt;/p&gt;

&lt;p&gt;I spoke with Fabio and Lorenzo and they agree we should reopen.&lt;/p&gt;

&lt;p&gt;This might or might not be fixed under this bug. If this is not fixed under this bug, a new bug should be open.&lt;/p&gt;</comment>
                            <comment id="155221" author="build" created="Tue, 27 Apr 2010 15:16:35 -0400"  >&lt;p&gt;Released by fpadilha to master at 2010-04-27 15:16:35 (push 1177):&lt;br/&gt;
  PACS-3-8-1 (fix)        (previous build: PACS-3-8-1-P320)&lt;br/&gt;
  PACS-3-8-3 (fix)        (previous build: PACS-3-8-3-P56)&lt;br/&gt;
  PACS-4-1-1 (fix)        (previous build: PACS-4-1-1-P120)&lt;br/&gt;
  PACS-4-1-2 (fix)        (previous build: PACS-4-1-2-P40)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-1-3-A8)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/f69c59dd8011&quot; target=&quot;_blank&quot;&gt;intelepacs:f69c59dd8011&lt;/a&gt;  PACS-3-8-1  14947 fix: Fixed to update PatientId, ScheduledProcedureStepId, StudyTime&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/8f231473492b&quot; target=&quot;_blank&quot;&gt;intelepacs:8f231473492b&lt;/a&gt;  PACS-3-8-3  14947 fix: Fixed to update PatientId, ScheduledProcedureStepId, StudyTime&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/0ce6f5f865c5&quot; target=&quot;_blank&quot;&gt;intelepacs:0ce6f5f865c5&lt;/a&gt;  PACS-4-1-1  14947 fix: Fixed to update PatientId, ScheduledProcedureStepId, StudyTime&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/e0e25f9fc03e&quot; target=&quot;_blank&quot;&gt;intelepacs:e0e25f9fc03e&lt;/a&gt;  PACS-4-1-2  14947 fix: Fixed to update PatientId, ScheduledProcedureStepId, StudyTime&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/fe641fbf65e0&quot; target=&quot;_blank&quot;&gt;intelepacs:fe641fbf65e0&lt;/a&gt;  trunk       14947 fix: Fixed to update PatientId, ScheduledProcedureStepId, StudyTime&lt;/p&gt;</comment>
                            <comment id="155222" author="fabio.padilha" created="Tue, 27 Apr 2010 15:26:45 -0400"  >&lt;p&gt;Description of the solution: &lt;br/&gt;
ValidationDb was updated, in SCEH, with Patient Name, Patient Sex, Patient BirthDate, Study Date, Study Description, Accession Number, Requested Procedure Id, Referring Physician Name, Study Time. I changed to update Patient Id, Study Time and ScheduledProcedureStepId as well.&lt;/p&gt;

&lt;p&gt;Tests executed: &lt;br/&gt;
I sent a dicom file to image_server and then, using Patient Correction Tool (PCT), I updated PatientID. I looked in ValidationDb and PatientId was updated.&lt;/p&gt;

&lt;p&gt;Unit tests added or modified: I modified ValidationDbFacadeTest to check if the returned map that is used to update ValidationDb contains the 3 new fields (Patient Id, Study Time and ScheduledProcedureStepId).&lt;/p&gt;</comment>
                            <comment id="155223" author="jan" created="Thu, 29 Apr 2010 15:57:33 -0400"  >&lt;p&gt;Reproduced with RPMs: -&lt;br/&gt;
Verified with RPMs: SeriesCorrectionEventHandler-5.1.8.P1B2-4.1.1.P125&lt;br/&gt;
Verification steps: &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Sent a new study / order and did an hl7 patient merge using mergePatient.&lt;/li&gt;
	&lt;li&gt;Dumped ValidationDB.Studylevel for the affected study and confirmed the correct patient id was present&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Issued a correction with correctPatientInfo to change the accession number&lt;/li&gt;
	&lt;li&gt;Dumped ValidationDB.Studylevel for the affected study and confirmed the correct accession number was present&lt;/li&gt;
&lt;/ul&gt;



&lt;ul&gt;
	&lt;li&gt;Corrected a referring physian name via IB/correctPatientInfo and looked at ValidationDB.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;  ! There is a problem there since the contract for RefPhyName in validationdb/dicomImage/dicomMaster is that it&apos;s supposed to be a XCN (ID^LAST^FIRST)&lt;br/&gt;
   This is not the case. This as already been discussed with Lorenzo and Fabio.&lt;/p&gt;

&lt;p&gt;End result: Reopening&lt;br/&gt;
Time spent: 2 hours&lt;/p&gt;</comment>
                            <comment id="155224" author="build" created="Tue, 11 May 2010 14:42:00 -0400"  >&lt;p&gt;Released by fpadilha to master at 2010-05-11 14:42:00 (push 1351):&lt;br/&gt;
  PACS-3-8-1 (fix)        (previous build: PACS-3-8-1-P330)&lt;br/&gt;
  PACS-3-8-3 (fix)        (previous build: PACS-3-8-3-P56)&lt;br/&gt;
  PACS-4-1-1 (fix)        (previous build: PACS-4-1-1-P137)&lt;br/&gt;
  PACS-4-1-2 (fix)        (previous build: PACS-4-1-2-P47)&lt;br/&gt;
  trunk      (fix)        (previous build: PACS-4-1-3-A16)&lt;/p&gt;

&lt;p&gt;Relevant changesets in this release:&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/ec270cc54863&quot; target=&quot;_blank&quot;&gt;intelepacs:ec270cc54863&lt;/a&gt;  PACS-3-8-1  14947 fix: RefPhyName is formatted now with Id^Name&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/b930f5bae30d&quot; target=&quot;_blank&quot;&gt;intelepacs:b930f5bae30d&lt;/a&gt;  PACS-3-8-3  14947 fix: RefPhyName is formatted now with Id^Name&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/6b9815eea8cd&quot; target=&quot;_blank&quot;&gt;intelepacs:6b9815eea8cd&lt;/a&gt;  PACS-4-1-1  14947 fix: RefPhyName is formatted now with Id^Name&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/95a20dfaf7f1&quot; target=&quot;_blank&quot;&gt;intelepacs:95a20dfaf7f1&lt;/a&gt;  PACS-4-1-2  14947 fix: RefPhyName is formatted now with Id^Name&lt;br/&gt;
  &lt;a href=&quot;https://forge.intelerad.com/hg/intelepacs/union/rev/2da2ca4050a8&quot; target=&quot;_blank&quot;&gt;intelepacs:2da2ca4050a8&lt;/a&gt;  trunk       14947 fix: RefPhyName is formatted now with Id^Name&lt;/p&gt;</comment>
                            <comment id="155225" author="fabio.padilha" created="Tue, 11 May 2010 14:47:08 -0400"  >&lt;p&gt;Description of the solution: &lt;/p&gt;

&lt;p&gt;ValidationDb.ReferringPhyName is being updated with Id^Last^First now. It&apos;s formatted before inserting into database.&lt;/p&gt;

&lt;p&gt;Tests executed: &lt;/p&gt;

&lt;p&gt;I requested a Patient Correction using PCT. I specified an Id and a name and then I checked that the dicom headers in the images were updated properly.&lt;/p&gt;

&lt;p&gt;Unit tests added or modified: &lt;/p&gt;

&lt;p&gt;TestValidationDbFacade.testHandleValidationChanges() is checking if the method updateStudyLevel is being called with the correct RefPhyName.&lt;/p&gt;</comment>
                            <comment id="155226" author="jan" created="Thu, 13 May 2010 16:36:36 -0400"  >&lt;p&gt;Reproduced with RPMs: -&lt;br/&gt;
Verified with RPMs: &lt;/p&gt;

&lt;p&gt;SeriesCorrectionEventHandler-5.1.8.P1B2-4.1.1.P138&lt;br/&gt;
PatientCorrectionEventHandler-3.1.17.P5B2-4.1.1.P138&lt;br/&gt;
PatientCorrectionEventHandler-Config-3.1.17.P5B2-4.1.1.P138&lt;br/&gt;
SeriesCorrectionEventHandler-Config-5.1.8.P1B2-4.1.1.P138&lt;/p&gt;

&lt;p&gt;Verification steps: &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;correct almost every field possible with correctPatientInfo and ensure that validationDB is update&lt;/li&gt;
	&lt;li&gt;Verify the referring physician error.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;End result: Verified!&lt;br/&gt;
Time spent: an additional 1.5 hour&lt;/p&gt;</comment>
                            <comment id="155227" author="mario.doria" created="Fri, 21 May 2010 17:11:55 -0400"  >&lt;p&gt;Included in PACS-3-8-1-R18.&lt;/p&gt;</comment>
                            <comment id="155228" author="mario.doria" created="Tue, 25 May 2010 18:10:01 -0400"  >&lt;p&gt;Included in PACS-4-1-1-R8.&lt;/p&gt;</comment>
                            <comment id="155229" author="thumai" created="Thu, 28 Oct 2010 09:54:06 -0400"  >&lt;p&gt;Happened again at WWM in &lt;a href=&quot;https://support.intelerad.com/ew/slips/viewslip.php?No=196310&quot; target=&quot;_blank&quot;&gt;EW196310&lt;/a&gt;. &lt;/p&gt;</comment>
                            <comment id="155230" author="thumai" created="Thu, 28 Oct 2010 10:25:10 -0400"  >&lt;p&gt;Sorry, ignore my last update. The site WWM have PACS-3-6-1-R15. I will talk to the AM for an upgrade.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10002">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="74065">IP-41811</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="71527">IP-39273</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12603" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Affected Clients</customfieldname>
                        <customfieldvalues>
                                        <label>CAMIS</label>
            <label>IWI</label>
            <label>NCH</label>
            <label>PRS</label>
            <label>RDS</label>
            <label>RIA</label>
            <label>WWM</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_13309" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Client Code Count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[7.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_13408" key="com.onresolve.jira.groovy.groovyrunner:scripted-field">
                        <customfieldname>Component count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[1.0]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_13600" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11904" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14947</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12106" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Found In Production Code</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="12024"><![CDATA[+]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12800" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>RPM Upgrade List</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="13314"><![CDATA[PatientCorrectionEventHandler]]></customfieldvalue>
    <customfieldvalue key="13386"><![CDATA[SeriesCorrectionEventHandler]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11800" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hznv1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10006" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_11001" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>ServiceNow Case #</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>146080, 115195, 57161, 158558,165064, 167386, 168312, 168036,196130</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_11201" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Severity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10802"><![CDATA[MAJOR]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>